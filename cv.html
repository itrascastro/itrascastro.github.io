<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>itrascastro@terminal</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            padding: 0;
            margin: 0;
            overflow: hidden;
            width: 100%;
            height: 100vh;
            height: 100dvh;
            transition: background 0.3s ease;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        body.dark {
            background: #0c0c0c;
            color: #33ff33;
        }

        body.light {
            background: #f5f5f5;
            color: #1a1a1a;
        }

        .terminal-container {
            width: 100%;
            max-width: 100%;
            height: 100vh;
            height: 100dvh;
            display: flex;
            flex-direction: column;
            transition: background 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        body.dark .terminal-container {
            background: #0c0c0c;
        }

        body.light .terminal-container {
            background: #ffffff;
        }

        .terminal-header {
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }

        body.dark .terminal-header {
            background: #1a1a1a;
            border-bottom: 1px solid #33ff33;
        }

        body.light .terminal-header {
            background: #e0e0e0;
            border-bottom: 1px solid #ccc;
        }

        .terminal-button {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
        }

        .terminal-button:nth-child(1) {
            background: #ff5f56;
        }

        .terminal-button:nth-child(2) {
            background: #ffbd2e;
        }

        .terminal-button:nth-child(3) {
            background: #27c93f;
        }

        .terminal-button:hover { 
            opacity: 0.8;
        }

        .terminal-title {
            margin-left: auto;
            font-size: 0.8rem;
            transition: color 0.3s ease;
        }

        body.dark .terminal-title {
            color: #888;
        }

        body.light .terminal-title {
            color: #666;
        }

        .terminal-body {
            flex: 1;
            padding: 1.5rem;
            overflow-y: auto;
            overflow-x: hidden;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
            transition: background 0.3s ease;
            -webkit-overflow-scrolling: touch;
        }

        body.dark .terminal-body {
            background: #0c0c0c;
        }

        body.light .terminal-body {
            background: #ffffff;
        }

        .terminal-body::-webkit-scrollbar {
            width: 10px;
        }

        body.dark .terminal-body::-webkit-scrollbar-track {
            background: #0c0c0c;
        }

        body.light .terminal-body::-webkit-scrollbar-track {
            background: #f5f5f5;
        }

        body.dark .terminal-body::-webkit-scrollbar-thumb {
            background: #33ff33;
        }

        body.light .terminal-body::-webkit-scrollbar-thumb {
            background: #999;
        }

        .output-line {
            margin-bottom: 0.5rem;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: break-word;
            overflow-wrap: break-word;
            max-width: 100%;
        }

        .prompt-line {
            display: flex;
            align-items: center;
            margin-top: 1rem;
        }

        .prompt {
            margin-right: 0.5rem;
        }

        body.dark .user {
            color: #88ff88;
        }

        body.light .user {
            color: #0066cc;
            font-weight: 600;
        }

        body.dark .path {
            color: #5fd7ff;
        }

        body.light .path {
            color: #cc6600;
            font-weight: 600;
        }

        #command-input {
            background: transparent;
            border: none;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1rem;
            outline: none;
            flex: 1;
            transition: color 0.3s ease;
        }

        body.dark #command-input {
            color: #33ff33;
            caret-color: transparent;
        }

        body.light #command-input {
            color: #1a1a1a;
            caret-color: transparent;
        }

        .input-wrapper {
            position: relative;
            flex: 1;
            display: inline-block;
            max-width: 100%;
            overflow: hidden;
        }

        .custom-cursor {
            position: absolute;
            display: inline-block;
            width: 10px;
            height: 18px;
            animation: blink 1s infinite;
            pointer-events: none;
        }

        body.dark .custom-cursor {
            background: #33ff33;
        }

        body.light .custom-cursor {
            background: #1a1a1a;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        body.dark .command-output {
            color: #aaa;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: break-word;
            overflow-wrap: break-word;
        }

        body.light .command-output {
            color: #333;
            white-space: pre-wrap;
            word-wrap: break-word;
            word-break: break-word;
            overflow-wrap: break-word;
        }

        body.dark .error {
            color: #ff3333;
        }

        body.light .error {
            color: #cc0000;
        }

        body.dark .success {
            color: #33ff33;
        }

        body.light .success {
            color: #007700;
            font-weight: 600;
        }

        body.dark .info {
            color: #5fd7ff;
        }

        body.light .info {
            color: #0066cc;
            font-weight: 600;
        }

        body.dark .warning {
            color: #ffcc00;
        }

        body.light .warning {
            color: #cc6600;
        }

        .section-title {
            font-weight: bold;
            font-size: 1.2rem;
            margin: 1rem 0 0.5rem 0;
        }

        body.dark .section-title {
            color: #5fd7ff;
        }

        body.light .section-title {
            color: #0066cc;
        }

        .file-link {
            text-decoration: none;
            border-bottom: 1px dotted;
            transition: all 0.3s ease;
            word-break: break-all;
            overflow-wrap: break-word;
        }

        body.dark .file-link {
            color: #88ff88;
            border-bottom-color: #88ff88;
        }

        body.dark .file-link:hover {
            color: #33ff33;
            border-bottom: 1px solid #33ff33;
        }

        body.light .file-link {
            color: #007700;
            border-bottom-color: #007700;
        }

        body.light .file-link:hover {
            color: #005500;
            border-bottom: 1px solid #005500;
        }

        body.dark .help-command {
            color: #88ff88;
        }

        body.light .help-command {
            color: #007700;
            font-weight: 600;
        }

        body.dark .help-desc {
            color: #888;
        }

        body.light .help-desc {
            color: #666;
        }

        img {
            max-width: 100% !important;
            height: auto !important;
        }

        @media (max-width: 768px) {
            .terminal-body {
                padding: 1rem 1.5rem;
                font-size: 0.8rem;
                line-height: 1.6;
            }

            .section-title {
                font-size: 1rem;
            }

            #command-input {
                font-size: 0.8rem;
                width: 100%;
                max-width: 100%;
            }

            .custom-cursor {
                width: 8px;
                height: 14px;
            }

            .terminal-header {
                padding: 0.5rem 1rem;
                min-height: 40px;
            }

            .terminal-button {
                width: 10px;
                height: 10px;
                flex-shrink: 0;
            }

            .prompt-line {
                flex-wrap: nowrap;
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .terminal-body {
                padding: 1rem 1.2rem;
                font-size: 0.75rem;
            }

            .section-title {
                font-size: 0.95rem;
            }

            #command-input {
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body class="dark">
    <div class="terminal-container">
        <div class="terminal-header">
            <div class="terminal-button" id="btn-red" title="Clear"></div>
            <div class="terminal-button" id="btn-yellow" title="Theme"></div>
            <div class="terminal-button" id="btn-green" title="Help"></div>
            <span class="terminal-title">itrascastro@portfolio:~</span>
        </div>
        
        <div class="terminal-body" id="terminal-output">
            <div class="output-line success" id="welcome-msg">Benvingut al portfolio interactiu d'Ismael Trascastro</div>
            <div class="output-line info" id="subtitle-msg">Enginyer Informàtic · Professor · Desenvolupador</div>
            <div class="output-line command-output" id="help-msg">Escriu 'help' per veure els comandos disponibles</div>
            <div class="output-line command-output" id="theme-msg">Escriu 'theme' per canviar de tema</div>
            <div class="output-line command-output" id="lang-msg">Escriu 'idioma ca/es/en' per canviar l'idioma</div>
        </div>
    </div>

    <script>
        const terminal = document.getElementById('terminal-output');
        let commandHistory = [];
        let historyIndex = -1;
        let currentLang = 'ca'; // idioma per defecte: català

        const translations = {
            ca: {
                welcome: "Benvingut al portfolio interactiu d'Ismael Trascastro",
                subtitle: "Enginyer Informàtic · Professor · Desenvolupador",
                helpMsg: "Escriu 'help' per veure els comandos disponibles",
                themeMsg: "Escriu 'theme' per canviar de tema",
                langMsg: "Escriu 'idioma ca/es/en' per canviar l'idioma",
                langChanged: "Idioma canviat a:",
                catalan: "Català",
                spanish: "Castellà",
                english: "Anglès"
            },
            es: {
                welcome: "Bienvenido al portfolio interactivo de Ismael Trascastro",
                subtitle: "Ingeniero Informático · Profesor · Desarrollador",
                helpMsg: "Escribe 'help' para ver los comandos disponibles",
                themeMsg: "Escribe 'theme' para cambiar de tema",
                langMsg: "Escribe 'idioma ca/es/en' para cambiar el idioma",
                langChanged: "Idioma cambiado a:",
                catalan: "Catalán",
                spanish: "Castellano",
                english: "Inglés"
            },
            en: {
                welcome: "Welcome to Ismael Trascastro's interactive portfolio",
                subtitle: "Computer Engineer · Professor · Developer",
                helpMsg: "Type 'help' to see available commands",
                themeMsg: "Type 'theme' to change theme",
                langMsg: "Type 'idioma ca/es/en' to change language",
                langChanged: "Language changed to:",
                catalan: "Catalan",
                spanish: "Spanish",
                english: "English"
            }
        };

        function t(key) {
            return translations[currentLang][key] || key;
        }

        function toggleTheme() {
            document.body.classList.toggle('dark');
            document.body.classList.toggle('light');
            const currentTheme = document.body.classList.contains('dark') ? 'dark' : 'light';
            return `Theme canviat a: ${currentTheme}`;
        }

        function changeLanguage(lang) {
            const validLangs = ['ca', 'es', 'en'];
            if (!validLangs.includes(lang)) {
                return currentLang === 'ca' ? 'Idioma no vàlid. Usa: ca, es, en' :
                       currentLang === 'es' ? 'Idioma no válido. Usa: ca, es, en' :
                       'Invalid language. Use: ca, es, en';
            }
            currentLang = lang;
            
            // Actualitzar missatges inicials
            const welcomeEl = document.getElementById('welcome-msg');
            const subtitleEl = document.getElementById('subtitle-msg');
            const helpEl = document.getElementById('help-msg');
            const themeEl = document.getElementById('theme-msg');
            const langEl = document.getElementById('lang-msg');
            
            if (welcomeEl) welcomeEl.textContent = t('welcome');
            if (subtitleEl) subtitleEl.textContent = t('subtitle');
            if (helpEl) helpEl.textContent = t('helpMsg');
            if (themeEl) themeEl.textContent = t('themeMsg');
            if (langEl) langEl.textContent = t('langMsg');
            
            const langNames = {ca: t('catalan'), es: t('spanish'), en: t('english')};
            return `${t('langChanged')} ${langNames[lang]}`;
        }

        const commands = {
            help: {
                desc: 'Mostra tots els comandos disponibles',
                exec: () => {
                    const helps = {
                        ca: `<span class="help-command">whoami</span>
Qui soc? Informació personal

<span class="help-command">projectes</span>
Projectes destacats

<span class="help-command">experiencia</span>
Experiència docent

<span class="help-command">skills</span>
Coneixements tècnics

<span class="help-command">xarxa</span>
Enllaços i xarxes socials

<span class="help-command">idiomes</span>
Idiomes que parlo

<span class="help-command">photo</span>
Mostra la foto

<span class="help-command">theme</span>
Canvia entre tema fosc i clar

<span class="help-command">idioma</span>
Canvia l'idioma (ca/es/en)

<span class="help-command">clear</span>
Neteja la terminal

<span class="help-command">ls</span>
Llista contingut disponible

<span class="help-command">date</span>
Data actual`,
                        es: `<span class="help-command">whoami</span>
¿Quién soy? Información personal

<span class="help-command">projectes</span>
Proyectos destacados

<span class="help-command">experiencia</span>
Experiencia docente

<span class="help-command">skills</span>
Conocimientos técnicos

<span class="help-command">xarxa</span>
Enlaces y redes sociales

<span class="help-command">idiomes</span>
Idiomas que hablo

<span class="help-command">photo</span>
Muestra la foto

<span class="help-command">theme</span>
Cambia entre tema oscuro y claro

<span class="help-command">idioma</span>
Cambia el idioma (ca/es/en)

<span class="help-command">clear</span>
Limpia la terminal

<span class="help-command">ls</span>
Lista contenido disponible

<span class="help-command">date</span>
Fecha actual`,
                        en: `<span class="help-command">whoami</span>
Who am I? Personal information

<span class="help-command">projectes</span>
Featured projects

<span class="help-command">experiencia</span>
Teaching experience

<span class="help-command">skills</span>
Technical skills

<span class="help-command">xarxa</span>
Links and social networks

<span class="help-command">idiomes</span>
Languages I speak

<span class="help-command">photo</span>
Show photo

<span class="help-command">theme</span>
Switch between dark and light theme

<span class="help-command">idioma</span>
Change language (ca/es/en)

<span class="help-command">clear</span>
Clear terminal

<span class="help-command">ls</span>
List available content

<span class="help-command">date</span>
Current date`
                    };
                    return helps[currentLang];
                }
            },
            whoami: {
                desc: 'Qui soc',
                exec: () => {
                    const whoamis = {
                        ca: `<span class="section-title">INFORMACIÓ PERSONAL</span>

<span class="info">Nom:</span>
Ismael Trascastro

<span class="info">Nascut:</span>
Málaga, 14/11/1973

<span class="info">Ubicació:</span>
Viladecans, Barcelona

<span class="info">Email:</span>
itrascastro@gmail.com

<span class="info">Telèfon:</span>
+34 644 26 48 14

<span class="warning">// Enginyer en Informàtica</span>
<span class="warning">// Professor de Cicles Formatius (DAM, DAW, ASIX)</span>
<span class="warning">// Formador Symfony, Zend Framework, PHP</span>
<span class="warning">// Expert en Angular</span>
<span class="warning">// Creador del framework Xen</span>
<span class="warning">// github.com/xenframework</span>`,
                        es: `<span class="section-title">INFORMACIÓN PERSONAL</span>

<span class="info">Nombre:</span>
Ismael Trascastro

<span class="info">Nacido:</span>
Málaga, 14/11/1973

<span class="info">Ubicación:</span>
Viladecans, Barcelona

<span class="info">Email:</span>
itrascastro@gmail.com

<span class="info">Teléfono:</span>
+34 644 26 48 14

<span class="warning">// Ingeniero en Informática</span>
<span class="warning">// Profesor de Ciclos Formativos (DAM, DAW, ASIX)</span>
<span class="warning">// Formador Symfony, Zend Framework, PHP</span>
<span class="warning">// Experto en Angular</span>
<span class="warning">// Creador del framework Xen</span>
<span class="warning">// github.com/xenframework</span>`,
                        en: `<span class="section-title">PERSONAL INFORMATION</span>

<span class="info">Name:</span>
Ismael Trascastro

<span class="info">Born:</span>
Málaga, 14/11/1973

<span class="info">Location:</span>
Viladecans, Barcelona

<span class="info">Email:</span>
itrascastro@gmail.com

<span class="info">Phone:</span>
+34 644 26 48 14

<span class="warning">// Computer Engineer</span>
<span class="warning">// Vocational Training Teacher (DAM, DAW, ASIX)</span>
<span class="warning">// Trainer Symfony, Zend Framework, PHP</span>
<span class="warning">// Angular Expert</span>
<span class="warning">// Creator of Xen framework</span>
<span class="warning">// github.com/xenframework</span>`
                    };
                    return whoamis[currentLang];
                }
            },
            idioma: {
                desc: 'Canvia idioma',
                exec: (args) => {
                    if (!args || args.length === 0) {
                        return currentLang === 'ca' ? 'Ús: idioma ca|es|en' :
                               currentLang === 'es' ? 'Uso: idioma ca|es|en' :
                               'Usage: idioma ca|es|en';
                    }
                    return changeLanguage(args[0]);
                }
            },
            projectes: {
                desc: 'Projectes destacats',
                exec: () => {
                    return `<span class="section-title">PROJECTES DESTACATS</span>

<span class="success">1. CALENDARI IOC</span>
Sistema de gestió de calendari per a centres escolars
Stack: JavaScript Vanilla
Repo: github.com/itrascastro/calendari-ioc

<span class="success">2. CURS ANGULAR - OPTATIVA DAM/DAW</span>
Materials didàctics complets per a curs d'Angular
Optativa per a cicles DAM i DAW al IOC
Stack: Angular
Repo: github.com/itrascastro/ioc-da2-optativa-angular

<span class="success">3. PLANTILLA MATERIALS DIDÀCTICS</span>
Sistema de plantilles per crear contingut educatiu interactiu
Stack: Jekyll + JavaScript Vanilla
Repo: github.com/itrascastro/ioc-da2_0485b2

<span class="success">4. MOODLE OFFLINE GRADING SYSTEM</span>
Sistema d'avaluació i generació automàtica de feedback
Google Sheets amb rúbriques, estadístiques i correcció de tests
Modes: Rubric, Manual, Hybrid
Info: itrascastro.github.io/moodle-offline-task-grading-spreadsheet

<span class="success">5. TRASCASTRO ACL MODULE</span>
Mòdul de control d'accés per a Zend Framework
Permet definir permisos ACL directament a les rutes
Publicat a Packagist i Zend Modules
Info: itrascastro.github.io/zend-framework-acl-module

<span class="success">6. XEN FRAMEWORK</span>
Framework PHP custom desenvolupat des de zero
Patterns: MVC, Dependency Injection, Front Controller
Repo: github.com/xenframework`;
                }
            },
            experiencia: {
                desc: 'Experiència professional',
                exec: () => {
                    return `<span class="section-title">EXPERIÈNCIA PROFESSIONAL</span>

<span class="info">[2024 - ACTUALITAT]</span>
<span class="success">Professor Titular @ IOC</span>
Institut Obert de Catalunya
Mòduls: M3-ASIX, M3/M7/M9/M10-DAM
Modalitat: Online

<span class="info">[2023]</span>
<span class="success">Professor @ Institut Online FOC</span>
Mòduls: M4 (Llenguatges de marques i sistemes de gestió d'informació)
M9 (Implantació d'aplicacions web) ASIR
Web: fp-informatica.com

<span class="info">[2015 - 2023]</span>
<span class="success">Professor Col·laborador @ IOC</span>
M03 DAW, FCT, Tutories

<span class="info">[2014 - ACTUALITAT]</span>
<span class="success">Formador per a Empreses @ Alfa9</span>
Formació Symfony i frameworks PHP per a empreses
Web: alfa9.com

<span class="info">[2007 - 2024]</span>
<span class="success">Professor Cicles Formatius</span>
17 anys d'experiència docent
Cicles: DAM, DAW, ASIX
Mòduls: Programació, Desenvolupament Web, Sistemes Operatius, Administració Xarxes, Projectes Finals

<span class="warning">Total cursos formació professorat: 38</span>
Inclou: Anglès, AICLE, Google Tools, Robòtica, Linux, etc.`;
                }
            },
            skills: {
                desc: 'Coneixements tècnics',
                exec: () => {
                    return `<span class="section-title">STACK TÈCNIC</span>

<span class="info">[LLENGUATGES]</span>
PHP, JavaScript, TypeScript, Python, Java, C/C++, C#, Bash, HTML5, CSS

<span class="info">[FRAMEWORKS]</span>
Symfony, Zend Framework, Angular, Spring Boot, Bootstrap, Jekyll, jQuery

<span class="info">[PATRONS DE DISSENY]</span>
MVC, POO, Front Controller, Factory, Decorator, Singleton, Dependency Injection

<span class="info">[SISTEMES OPERATIUS]</span>
Linux, Windows, MacOS

<span class="info">[ALTRES]</span>
Git, SQL, REST APIs, Responsive Design

<span class="warning">// Expert en Angular</span>
<span class="warning">// Materials didàctics optativa DAM/DAW</span>`;
                }
            },
            xarxa: {
                desc: 'Xarxes socials',
                exec: () => {
                    const xarxes = {
                        ca: `<span class="section-title">PRESÈNCIA ONLINE</span>

<span class="info">Web:</span>
itrascastro.github.io

<span class="info">GitHub:</span>
github.com/itrascastro

<span class="info">LinkedIn:</span>
linkedin.com/in/ismael-trascastro

<span class="info">YouTube:</span>
youtube.com/user/ismael3334

<span class="info">StackOverflow:</span>
stackoverflow.com/users/2113231

<span class="info">Twitter:</span>
@itrascastro`,
                        es: `<span class="section-title">PRESENCIA ONLINE</span>

<span class="info">Web:</span>
itrascastro.github.io

<span class="info">GitHub:</span>
github.com/itrascastro

<span class="info">LinkedIn:</span>
linkedin.com/in/ismael-trascastro

<span class="info">YouTube:</span>
youtube.com/user/ismael3334

<span class="info">StackOverflow:</span>
stackoverflow.com/users/2113231

<span class="info">Twitter:</span>
@itrascastro`,
                        en: `<span class="section-title">ONLINE PRESENCE</span>

<span class="info">Web:</span>
itrascastro.github.io

<span class="info">GitHub:</span>
github.com/itrascastro

<span class="info">LinkedIn:</span>
linkedin.com/in/ismael-trascastro

<span class="info">YouTube:</span>
youtube.com/user/ismael3334

<span class="info">StackOverflow:</span>
stackoverflow.com/users/2113231

<span class="info">Twitter:</span>
@itrascastro`
                    };
                    return xarxes[currentLang];
                }
            },
            idiomes: {
                desc: 'Idiomes',
                exec: () => {
                    const idiomes = {
                        ca: `<span class="section-title">IDIOMES</span>

<span class="success">Català</span>
Nivell C2

<span class="success">Anglès</span>
Nivell C1

<span class="success">Castellà</span>
Natiu`,
                        es: `<span class="section-title">IDIOMAS</span>

<span class="success">Catalán</span>
Nivel C2

<span class="success">Inglés</span>
Nivel C1

<span class="success">Castellano</span>
Nativo`,
                        en: `<span class="section-title">LANGUAGES</span>

<span class="success">Catalan</span>
Level C2

<span class="success">English</span>
Level C1

<span class="success">Spanish</span>
Native`
                    };
                    return idiomes[currentLang];
                }
            },
            photo: {
                desc: 'Mostra la foto',
                exec: () => {
                    const photos = {
                        ca: `<span class="section-title">FOTO</span>

<img src="http://www.gravatar.com/avatar/f30d9d38be800e4569aeea819fb271be" alt="Ismael Trascastro" style="max-width: 100%; width: 300px; border: 2px solid #33ff33; border-radius: 8px; margin-top: 1rem; display: block;">

<span class="info">Ismael Trascastro - Enginyer Informàtic</span>`,
                        es: `<span class="section-title">FOTO</span>

<img src="http://www.gravatar.com/avatar/f30d9d38be800e4569aeea819fb271be" alt="Ismael Trascastro" style="max-width: 100%; width: 300px; border: 2px solid #33ff33; border-radius: 8px; margin-top: 1rem; display: block;">

<span class="info">Ismael Trascastro - Ingeniero Informático</span>`,
                        en: `<span class="section-title">PHOTO</span>

<img src="http://www.gravatar.com/avatar/f30d9d38be800e4569aeea819fb271be" alt="Ismael Trascastro" style="max-width: 100%; width: 300px; border: 2px solid #33ff33; border-radius: 8px; margin-top: 1rem; display: block;">

<span class="info">Ismael Trascastro - Computer Engineer</span>`
                    };
                    return photos[currentLang];
                }
            },
            theme: {
                desc: 'Canvia el tema',
                exec: () => {
                    return toggleTheme();
                }
            },
            ls: {
                desc: 'Llista contingut',
                exec: () => {
                    return `whoami.txt
projectes/
skills.json
experiencia.md
xarxa.html
idiomes.txt
photo.jpg`;
                }
            },
            date: {
                desc: 'Data actual',
                exec: () => new Date().toString()
            },
            clear: {
                desc: 'Neteja la terminal',
                exec: () => {
                    terminal.innerHTML = '';
                    return null;
                }
            }
        };

        function addLine(content, className = '') {
            const line = document.createElement('div');
            line.className = `output-line ${className}`;
            line.innerHTML = content;
            terminal.appendChild(line);
            
            // Si hi ha una imatge, esperar a que carregui abans de fer scroll
            const img = line.querySelector('img');
            if (img) {
                img.onload = () => {
                    terminal.scrollTop = terminal.scrollHeight;
                };
                // Si la imatge ja està carregada (cache)
                if (img.complete) {
                    terminal.scrollTop = terminal.scrollHeight;
                }
            } else {
                terminal.scrollTop = terminal.scrollHeight;
            }
        }

        function executeCommand(cmd) {
            const trimmedCmd = cmd.trim();
            const parts = trimmedCmd.split(' ');
            const command = parts[0].toLowerCase();
            const args = parts.slice(1);
            
            addLine(`<span class="user">itrascastro</span>@<span class="path">portfolio</span>:~$ ${cmd}`);
            
            if (command === '') {
                return;
            }

            if (commands[command]) {
                const output = commands[command].exec(args);
                if (output !== null) {
                    addLine(output, 'command-output');
                }
            } else {
                const errorMsgs = {
                    ca: `bash: ${command}: command not found. Escriu 'help' per veure els comandos disponibles.`,
                    es: `bash: ${command}: comando no encontrado. Escribe 'help' para ver los comandos disponibles.`,
                    en: `bash: ${command}: command not found. Type 'help' to see available commands.`
                };
                addLine(errorMsgs[currentLang], 'error');
            }
        }

        function createPrompt() {
            const promptLine = document.createElement('div');
            promptLine.className = 'prompt-line';
            promptLine.innerHTML = `
                <span class="prompt"><span class="user">itrascastro</span>@<span class="path">portfolio</span>:~$</span>
                <div class="input-wrapper">
                    <input type="text" id="command-input" autofocus autocomplete="off" spellcheck="false">
                    <span class="custom-cursor"></span>
                </div>
            `;
            terminal.appendChild(promptLine);
            
            const input = document.getElementById('command-input');
            const cursor = promptLine.querySelector('.custom-cursor');
            input.focus();
            
            function updateCursorPosition() {
                // Obtener el tamaño de fuente REAL del input
                const computedStyle = window.getComputedStyle(input);
                const fontSize = computedStyle.fontSize;
                const fontFamily = computedStyle.fontFamily;
                
                const textWidth = getTextWidth(input.value, `${fontSize} ${fontFamily}`);
                cursor.style.left = textWidth + 'px';
            }
            
            function getTextWidth(text, font) {
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                context.font = font;
                return context.measureText(text).width;
            }
            
            input.addEventListener('input', updateCursorPosition);
            updateCursorPosition();
            
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    const cmd = input.value;
                    commandHistory.unshift(cmd);
                    historyIndex = -1;
                    promptLine.remove();
                    executeCommand(cmd);
                    createPrompt();
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (historyIndex < commandHistory.length - 1) {
                        historyIndex++;
                        input.value = commandHistory[historyIndex];
                        updateCursorPosition();
                    }
                } else if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (historyIndex > 0) {
                        historyIndex--;
                        input.value = commandHistory[historyIndex];
                        updateCursorPosition();
                    } else {
                        historyIndex = -1;
                        input.value = '';
                        updateCursorPosition();
                    }
                } else if (e.key === 'Tab') {
                    e.preventDefault();
                    const partial = input.value.toLowerCase();
                    const matches = Object.keys(commands).filter(cmd => cmd.startsWith(partial));
                    if (matches.length === 1) {
                        input.value = matches[0];
                        updateCursorPosition();
                    }
                }
            });
            
            terminal.scrollTop = terminal.scrollHeight;
        }

        createPrompt();

        document.addEventListener('click', () => {
            const input = document.getElementById('command-input');
            if (input) input.focus();
        });

        // Funcionalidad de los botones
        document.getElementById('btn-red').addEventListener('click', (e) => {
            e.stopPropagation();
            const promptLine = terminal.querySelector('.prompt-line');
            if (promptLine) promptLine.remove();
            executeCommand('clear');
            createPrompt();
        });

        document.getElementById('btn-yellow').addEventListener('click', (e) => {
            e.stopPropagation();
            const promptLine = terminal.querySelector('.prompt-line');
            if (promptLine) promptLine.remove();
            executeCommand('theme');
            createPrompt();
        });

        document.getElementById('btn-green').addEventListener('click', (e) => {
            e.stopPropagation();
            const promptLine = terminal.querySelector('.prompt-line');
            if (promptLine) promptLine.remove();
            executeCommand('help');
            createPrompt();
        });
    </script>
</body>
</html>

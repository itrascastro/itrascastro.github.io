/* =================================================================
   THEME BASE PARA CALENDARI IOC
   ================================================================= */

/* 1. VARIABLES DEL THEME */
:root { --bg-color: #f8f9fa; --card-bg-color: #ffffff; --border-color: #e9ecef; --main-text-color: #343a40; --secondary-text-color: #6c757d; --accent-color: #4f5d95; --accent-hover: #414d7c; --danger-color: #e53e3e; --danger-hover: #c53030; --secondary-btn-bg: #6c757d; --secondary-btn-hover: #5a6268; }
body.dark-mode { --bg-color: #1a202c; --card-bg-color: #2d3748; --border-color: #4a5568; --main-text-color: #e2e8f0; --secondary-text-color: #a0aec0; --accent-color: #8a9ad6; --accent-hover: #7285b7; --danger-color: #f56565; --danger-hover: #e53e3e; --secondary-btn-bg: #718096; --secondary-btn-hover: #8b96a8; }

/* 2. SCROLLBARS GLOBALES PERSONALIZADAS */
html::-webkit-scrollbar,
body::-webkit-scrollbar,
*::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

html::-webkit-scrollbar-track,
body::-webkit-scrollbar-track,
*::-webkit-scrollbar-track {
    background: var(--bg-color);
    border-radius: 3px;
}

html::-webkit-scrollbar-thumb,
body::-webkit-scrollbar-thumb,
*::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: 3px;
}

html::-webkit-scrollbar-thumb:hover,
body::-webkit-scrollbar-thumb:hover,
*::-webkit-scrollbar-thumb:hover {
    background: var(--secondary-text-color);
}

/* 3. ESTILOS GENERALES Y ESTRUCTURA */
* { box-sizing: border-box; }
body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; background-color: var(--bg-color); color: var(--main-text-color); transition: background-color 0.3s, color 0.3s; }
.app-container { display: grid; grid-template-columns: 340px 1fr; grid-template-rows: auto 1fr; grid-template-areas: "header header" "sidebar main"; height: 100vh; gap: 20px; padding: 20px; box-sizing: border-box; }

/* 4. COMPONENTES PRINCIPALES */
.main-header { grid-area: header; display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background-color: var(--card-bg-color); border: 1px solid var(--border-color); border-radius: 10px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.03); }
.header-title { display: flex; align-items: center; gap: 12px; }
.header-logo { height: 56px; width: auto; }
/* Fondo oscuro para el logo en modo claro */
body:not(.dark-mode) .header-logo { background-color: #2d3748; padding: 8px; border-radius: 8px; }
.main-header h1 { font-size: 1.5em; color: var(--accent-color); margin: 0; }
#theme-toggle { padding: 8px 16px; font-size: 0.9em; cursor: pointer; border: 1px solid var(--border-color); background-color: transparent; color: var(--main-text-color); border-radius: 20px; transition: background-color 0.2s, color 0.2s; }
#theme-toggle:hover { background-color: #e9ecef; }
body.dark-mode #theme-toggle:hover { background-color: #4a5568; }
/* === SIDEBAR CSS COPIADO EXACTAMENTE DE PANELES.HTML === */

/* Layout principal */
.sidebar {
    grid-area: sidebar;
    display: flex;
    flex-direction: column;
    gap: 20px;
    padding-right: 4px;
    min-height: 0;
    overflow-y: auto;
}

/* Componente base del panel - EXACTAMENTE como en paneles.html */
.panel-scrollable {
    flex-grow: 1;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    height: 400px;
    background-color: var(--card-bg-color);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 20px;
}

/* Contenedor del contenido que hace scroll */
.panel-content {
    flex-grow: 1;
    overflow-y: auto;
    min-height: 0;
}

/* Elementos fijos - AÑADIDO COMO EN PANELES.HTML */
.panel-header,
.sidebar-actions,
.panel-footer {
    flex-shrink: 0;
}

.panel-header {
    font-size: 1.1em;
    margin-top: 0;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border-color);
    color: var(--accent-color);
}

/* Scrollbar personalizada - ELIMINADA: usa la configuració global */

/* Botones del sidebar */
.sidebar-actions {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
}

.action-btn {
    flex: 1;
    padding: 10px;
    font-weight: 500;
    background-color: transparent;
    border: 1px solid var(--border-color);
    color: var(--main-text-color);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
}

.action-btn:hover {
    background-color: var(--accent-color);
    color: white;
    border-color: var(--accent-color);
}

/* Estilos específicos para calendarios */
.calendar-list-item {
    display: flex;
    align-items: center;
    gap: 8px;
    position: relative;
    min-height: 38px;
    padding: 5px;
    border-radius: 6px;
    margin-bottom: 8px;
    margin-right: 8px;
    cursor: pointer;
}

.calendar-list-item:hover {
    background-color: #f8f9fa;
}

body.dark-mode .calendar-list-item:hover {
    background-color: #404a5b;
}

.calendar-list-item.active {
    background-color: #e9ecef;
}

body.dark-mode .calendar-list-item.active {
    background-color: #4a5568;
}

.calendar-info {
    flex-grow: 1;
}

.calendar-name {
    font-weight: 600;
    color: var(--main-text-color);
    line-height: 1.3;
}

.calendar-dates {
    font-size: 0.8em;
    color: var(--secondary-text-color);
    margin-top: 2px;
}

.calendar-list-item .actions-menu {
    background: none;
    border: none;
    color: var(--secondary-text-color);
    cursor: pointer;
    font-size: 1.2em;
    padding: 4px;
    line-height: 1;
    transition: color 0.2s;
}

.calendar-list-item .actions-menu:hover {
    color: var(--main-text-color);
}

/* Modal de acciones de calendario - Comportamiento como dropdown */
.calendar-actions-modal {
    background-color: transparent !important;
    backdrop-filter: none !important;
    pointer-events: none;
}

/* Modal de selector de colores - Comportamiento como dropdown */
.color-picker-modal {
    background-color: transparent !important;
    backdrop-filter: none !important;
    pointer-events: none;
}

.calendar-actions-content {
    position: absolute;
    background-color: var(--card-bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    width: auto;
    min-width: fit-content;
    max-width: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    pointer-events: auto;
}

.calendar-actions-list {
    display: flex;
    flex-direction: column;
    gap: 0;
    width: auto;
    min-width: fit-content;
}

.calendar-action-btn {
    display: block;
    width: 100%;
    padding: 8px 12px;
    background-color: transparent;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s;
    color: var(--main-text-color);
    font-size: 0.9em;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
    white-space: nowrap;
}

.calendar-action-btn:last-child {
    border-bottom: none;
}

.calendar-action-btn:hover {
    background-color: var(--bg-color);
}

.calendar-action-btn.danger {
    color: var(--danger-color);
}

.calendar-action-btn.danger:hover {
    background-color: var(--danger-color);
    color: white;
}

.color-picker-content {
    position: absolute;
    background-color: var(--card-bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    z-index: 1000;
    padding: 8px;
    pointer-events: auto;
}

.color-picker-grid {
    display: grid;
    grid-template-columns: repeat(10, 1fr);
    gap: 6px;
    width: 310px;
}

.color-option {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid transparent;
    transition: all 0.2s;
}

.color-option:hover {
    transform: scale(1.1);
    border-color: var(--main-text-color);
}

.color-option.selected {
    border-color: var(--accent-color);
    transform: scale(1.2);
}

/* MENÚ CONTEXTUAL DE ACCIONES */
.actions { position: relative; }
.actions-dropdown { position: absolute; right: 0; top: 100%; background-color: var(--card-bg-color); border: 1px solid var(--border-color); border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); z-index: 1000; min-width: 140px; opacity: 0; visibility: hidden; transform: translateY(-5px); transition: all 0.2s ease; }
.actions-dropdown.show { opacity: 1; visibility: visible; transform: translateY(0); }
.actions-dropdown-item { padding: 10px 16px; cursor: pointer; transition: background-color 0.2s; color: var(--main-text-color); font-size: 0.9em; border-bottom: 1px solid var(--border-color); }
.actions-dropdown-item:last-child { border-bottom: none; }
.actions-dropdown-item:hover { background-color: var(--bg-color); }
.actions-dropdown-item.danger { color: var(--danger-color); }
.actions-dropdown-item.danger:hover { background-color: var(--danger-color); color: white; }
.actions-dropdown-item.disabled { color: var(--secondary-text-color); cursor: not-allowed; opacity: 0.6; }
.actions-dropdown-item.disabled:hover { background-color: transparent; }
/* Estilos para categorías */
.category-list-item {
    display: flex;
    align-items: center;
    gap: 12px;
    position: relative;
    min-height: 38px;
    padding: 5px;
    border-radius: 6px;
    margin-bottom: 8px;
    margin-right: 8px;
}

.category-list-item:hover {
    background-color: #f8f9fa;
}

body.dark-mode .category-list-item:hover {
    background-color: #404a5b;
}

.category-list-item.active {
    background-color: #e9ecef;
}

body.dark-mode .category-list-item.active {
    background-color: #4a5568;
}

.color-dot {
    width: 18px;
    height: 18px;
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.2s;
}

.color-dot:hover {
    transform: scale(1.1);
}

.category-name-wrapper {
    flex-grow: 1;
}

.category-name {
    padding: 5px;
    line-height: 1.5;
}

.delete-icon {
    background-color: var(--danger-color);
    color: white;
    border: none;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    cursor: pointer;
    font-weight: bold;
    line-height: 22px;
    text-align: center;
    flex-shrink: 0;
    opacity: 0;
    transition: opacity 0.2s, background-color 0.2s;
}

.category-list-item:hover .delete-icon {
    opacity: 1;
}

.category-list-item .delete-icon {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    background-color: var(--danger-color);
    color: white;
    border: none;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    cursor: pointer;
    font-weight: bold;
    line-height: 22px;
    text-align: center;
    flex-shrink: 0;
    opacity: 0;
    transition: opacity 0.2s, background-color 0.2s;
}

.category-list-item .delete-icon:hover {
    background-color: var(--danger-hover);
}

.actions-menu {
    font-weight: bold;
    font-size: 1.2em;
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    color: var(--secondary-text-color);
    transition: all 0.2s;
}

.actions-menu:hover {
    background-color: var(--bg-color);
    color: var(--main-text-color);
}

/* Formulario nueva categoría */
.new-category-form {
    border-top: 1px solid var(--border-color);
    margin-top: 20px;
    padding-top: 15px;
    display: flex;
    align-items: center;
    gap: 12px;
    min-height: 38px;
}

.category-input {
    flex-grow: 1;
    padding: 5px 8px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    background-color: #f8f9fa;
    margin-right: 8px;
    font-size: 0.9em;
}

.new-category-form .category-input {
    margin-right: 12px;
}

body.dark-mode .category-input {
    background-color: #404a5b;
    color: var(--main-text-color);
}

.btn-add-category {
    background-color: var(--accent-color);
    color: white;
    border: none;
    width: 28px;
    height: 28px;
    border-radius: 50%;
    cursor: pointer;
    font-weight: bold;
    font-size: 1.5em;
    line-height: 28px;
    text-align: center;
    flex-shrink: 0;
    transition: background-color 0.2s;
}

.btn-add-category:hover {
    background-color: var(--accent-hover);
}

/* Estilos para eventos no ubicados */
.unplaced-event-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    position: relative;
    padding: 8px;
    border-radius: 6px;
    margin-bottom: 8px;
    margin-right: 8px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    cursor: grab;
    transition: all 0.2s ease;
}

.unplaced-event-item:hover {
    background-color: var(--card-bg-color);
    border-color: var(--accent-color);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.unplaced-event-item:first-child {
    margin-top: 12px;
}

.unplaced-event-item[draggable="true"]:active {
    cursor: grabbing;
    opacity: 0.8;
}

.unplaced-event-content {
    flex-grow: 1;
    display: block;
}

.unplaced-event-item .event-title {
    font-weight: 600;
    color: var(--main-text-color);
    font-size: 0.9em;
    line-height: 1.4;
    margin-bottom: 4px;
    display: block;
    width: 100%;
}

.unplaced-event-item .event-category {
    font-size: 0.8em;
    color: var(--accent-color);
    font-weight: 500;
    line-height: 1.4;
    margin-bottom: 4px;
    display: block;
    width: 100%;
}

.unplaced-event-item .event-original-date {
    font-size: 0.8em;
    color: var(--secondary-text-color);
    font-weight: 500;
    line-height: 1.4;
    display: block;
    width: 100%;
}
.calendar-container { grid-area: main; display: flex; flex-direction: column; background-color: var(--card-bg-color); border-radius: 10px; border: 1px solid var(--border-color); box-shadow: 0 2px 4px rgba(0, 0, 0, 0.03); overflow: hidden; padding: 20px; }
.calendar-header { display: flex; justify-content: space-between; align-items: center; padding-bottom: 20px; }
.month-navigator { display: flex; align-items: center; gap: 15px; }
.month-navigator h3 { margin: 0; font-size: 1.4em; font-weight: 500; min-width: 200px; text-align: center; }
.nav-arrow { background: none; border: 1px solid var(--border-color); color: var(--main-text-color); width: 35px; height: 35px; border-radius: 50%; cursor: pointer; font-size: 1.2em; transition: all 0.2s; }
.nav-arrow:hover { background-color: var(--accent-color); color: white; }
.nav-arrow:disabled { opacity: 0.4; cursor: not-allowed; background-color: transparent; color: var(--secondary-text-color); }
.view-toggles { display: flex; border: 1px solid var(--border-color); border-radius: 6px; overflow: hidden; }
.view-toggles button { background: none; border: none; padding: 8px 15px; cursor: pointer; color: var(--secondary-text-color); border-left: 1px solid var(--border-color); transition: background-color 0.2s, color 0.2s;}
.view-toggles button:first-child { border-left: none; }
.view-toggles button.active { background-color: #e9ecef; color: var(--main-text-color); }
body.dark-mode .view-toggles button.active { background-color: #4a5568; }
.calendar-grid-wrapper { flex-grow: 1; background-color: var(--bg-color); padding: 8px; border-radius: 8px; overflow-y: auto;}
.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; }
.day-header { background-color: var(--card-bg-color); border: 1px solid var(--border-color); border-radius: 6px; padding: 10px 8px; text-align: center; font-weight: 600; color: var(--secondary-text-color); font-size: 0.9em; }
.day-cell { background-color: var(--card-bg-color); border: 1px solid var(--border-color); border-radius: 6px; min-height: 140px; padding: 8px; position: relative; display: flex; flex-direction: column; transition: border-color 0.2s, box-shadow 0.2s;}
.day-cell[data-action="day-click"] { cursor: pointer; }
.day-cell[data-action="day-click"]:hover { border-color: var(--accent-color); background-color: #f8f9fa; }
body.dark-mode .day-cell[data-action="day-click"]:hover { background-color: #374151; } 
.day-cell:hover .add-event-btn { opacity: 1; transform: scale(1.1); }
.day-cell.out-of-month { background-color: #fdfdfd; cursor: default; }
body.dark-mode .day-cell.out-of-month { background-color: #212938; }
.day-cell.out-of-month .day-number { color: #ccc;}
body.dark-mode .day-cell.out-of-month .day-number { color: #667081;}
.day-number { font-weight: 500; font-size: 0.9em; color: var(--main-text-color); }
.week-pill { position: absolute; top: 8px; right: 8px; font-size: 0.75em; background-color: #6c757d; color: white; padding: 2px 8px; border-radius: 10px; font-weight: bold; }
.week-pill[data-action="week-click"] { cursor: pointer; transition: background-color 0.2s ease; }
.week-pill[data-action="week-click"]:hover { background-color: var(--accent-color); }
.events-container { margin-top: 10px; flex-grow: 1; display: flex; flex-direction: column; gap: 4px; }
.event {
    font-size: 0.85em;
    padding: 4px 8px;
    border-radius: 4px;
    color: white;
    margin-bottom: 5px;
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.add-event-btn { position: absolute; bottom: 8px; right: 8px; width: 28px; height: 28px; border-radius: 50%; background-color: #f1f3f5; color: var(--secondary-text-color); border: none; cursor: pointer; font-size: 1.5em; line-height: 28px; text-align: center; opacity: 0; transition: all 0.2s ease-in-out; }
.add-event-btn:hover { background-color: var(--accent-color); color: white; }
body.dark-mode .add-event-btn { background-color: #4a5568; }
body.dark-mode .add-event-btn:hover { background-color: var(--accent-hover); color: white; } 

.event.is-user-event {
    cursor: pointer;
}

/* 4. ESTILOS PARA MODALES MINIMALISTAS */
.modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.4); justify-content: center; align-items: center; backdrop-filter: blur(2px); }
.modal.show { display: flex; }
.modal-content { background-color: var(--card-bg-color); border: none; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12); margin: auto; padding: 0; border-radius: 12px; width: 90%; max-width: 480px; animation: fadeInScaleUp 0.2s ease-out; overflow: hidden; }
@keyframes fadeInScaleUp { from {opacity: 0; transform: scale(0.95);} to {opacity: 1; transform: scale(1);} }

.modal-header { display: flex; justify-content: space-between; align-items: center; padding: 24px 24px 0 24px; margin-bottom: 20px; }
.modal-title { color: var(--main-text-color); font-size: 1.2em; font-weight: 600; margin: 0; }
.close-btn { color: var(--secondary-text-color); font-size: 1.5em; font-weight: bold; cursor: pointer; background: none; border: none; line-height: 1; padding: 8px; border-radius: 6px; transition: all 0.2s; }
.close-btn:hover { background-color: var(--bg-color); color: var(--main-text-color); }

.modal-body { padding: 0 24px; }
.modal-body .form-group { margin-bottom: 20px; }
.modal-body label { display: block; margin-bottom: 8px; font-weight: 500; font-size: 0.9em; color: var(--main-text-color); }
.modal-body input[type="text"], .modal-body select, .modal-body textarea, .modal-body input[type="date"] { appearance: none; width: 100%; padding: 12px 16px; border: 1px solid var(--border-color); border-radius: 8px; background-color: var(--bg-color); color: var(--main-text-color); font-size: 0.95em; font-family: inherit; transition: border-color 0.2s, box-shadow 0.2s; }
.modal-body input:focus, .modal-body select:focus, .modal-body textarea:focus { outline: none; border-color: var(--accent-color); box-shadow: 0 0 0 3px rgba(79, 93, 149, 0.1); }
.modal-body ::placeholder { color: var(--secondary-text-color); opacity: 0.7; }
.modal-body textarea { min-height: 90px; resize: vertical; }

.modal-footer { display: flex; justify-content: flex-end; gap: 12px; padding: 24px; margin-top: 10px; }
.btn { padding: 10px 20px; border: none; border-radius: 8px; font-size: 0.9em; font-weight: 500; cursor: pointer; transition: all 0.2s; }
.btn:hover { transform: translateY(-1px); box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
.btn-primary { background-color: var(--accent-color); color: white; }
.btn-primary:hover { background-color: var(--accent-hover); }
.btn-secondary { background-color: var(--secondary-btn-bg); color: white; }
.btn-secondary:hover { background-color: var(--secondary-btn-hover); }
.btn-danger { background-color: var(--danger-color); color: white; }
.btn-danger:hover { background-color: var(--danger-hover); }

/* Solo un ajuste mínimo para modo oscuro */
body.dark-mode .btn-secondary { background-color: #718096; }
body.dark-mode .btn-secondary:hover { background-color: #8b96a8; }

/* 5. ESTILOS DRAG & DROP */
.event.is-user-event[draggable="true"] {
    cursor: grab;
    transition: transform 0.2s, opacity 0.2s;
}

.event.is-user-event[draggable="true"]:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.event.dragging {
    opacity: 0.6;
    transform: rotate(2deg) scale(0.95);
    cursor: grabbing;
    z-index: 1000;
}

.day-cell.drop-target {
    border-color: var(--accent-color);
    background-color: rgba(79, 93, 149, 0.1);
    box-shadow: 0 0 0 2px rgba(79, 93, 149, 0.3);
}

.day-cell.drop-invalid {
    border-color: var(--danger-color);
    background-color: rgba(229, 62, 62, 0.1);
    box-shadow: 0 0 0 2px rgba(229, 62, 62, 0.3);
}

.day-cell.drop-target .add-event-btn,
.day-cell.drop-invalid .add-event-btn {
    opacity: 0;
}

/* 6. ESTILOS PARA PANEL DE EVENTOS PENDIENTES */
.unplaced-events-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* Scrollbar personalizada para el sidebar - ELIMINADA: usa la configuració global */

/* Scrollbar personalizada para el panel de eventos - ELIMINADA porque ahora maneja panel-content */

.unplaced-event-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 12px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    cursor: grab;
    transition: all 0.2s ease;
    position: relative;
}

.unplaced-event-item:hover {
    border-color: var(--accent-color);
    background-color: var(--card-bg-color);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.unplaced-event-item[draggable="true"]:active {
    cursor: grabbing;
    opacity: 0.8;
    transform: rotate(2deg) scale(0.98);
}

.unplaced-event-item.dragging {
    opacity: 0.6;
    transform: rotate(3deg) scale(0.95);
    cursor: grabbing;
    z-index: 1000;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
}

.unplaced-event-content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
}

/* Estilos específicos para categorías usando estructura de eventos */
.unplaced-event-item .color-dot-wrapper {
    position: relative;
}

.unplaced-event-item .category-name-wrapper {
    flex-grow: 1;
    position: relative;
    display: flex;
    align-items: center;
}

.unplaced-event-item .unplaced-event-content {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
}

.unplaced-event-item .delete-icon {
    background-color: var(--danger-color);
    color: white;
    border: none;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    cursor: pointer;
    font-weight: bold;
    line-height: 22px;
    text-align: center;
    flex-shrink: 0;
    opacity: 0;
    transition: opacity 0.2s, background-color 0.2s;
}

.unplaced-event-item:hover .delete-icon {
    opacity: 1;
}

.unplaced-event-item .delete-icon:hover {
    background-color: var(--danger-hover);
}

/* Los 3 paneles ya usan unplaced-events-list que tiene su propio scrollbar */

/* Estilos para calendario activo */
.unplaced-event-item.active {
    background-color: #e9ecef;
    border-color: var(--accent-color);
}

body.dark-mode .unplaced-event-item.active {
    background-color: #4a5568;
}

/* === VISTA DIÀRIA === */
.day-view-container {
    padding: 20px;
    max-width: 100%;
    margin: 0 auto;
}

.day-view-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 24px;
    border-bottom: 2px solid var(--border-color);
    padding-bottom: 16px;
}

.day-title h2 {
    margin: 0;
    color: var(--main-text-color);
    font-size: 1.8em;
    font-weight: 600;
}

.week-info {
    display: inline-block;
    background-color: var(--accent-color);
    color: white;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8em;
    font-weight: 500;
    margin-top: 8px;
}
.week-info[data-action="week-click"] { cursor: pointer; transition: background-color 0.2s ease; }
.week-info[data-action="week-click"]:hover { background-color: var(--accent-hover); }

.add-event-day-btn {
    padding: 10px 20px;
    font-size: 0.95em;
    border-radius: 8px;
    white-space: nowrap;
}

.day-view-content {
    background-color: var(--card-bg-color);
    border-radius: 12px;
    border: 1px solid var(--border-color);
    overflow: hidden;
}

.events-list {
    min-height: 300px;
}

.event-list-item {
    display: flex;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border-color);
    cursor: pointer;
    transition: background-color 0.2s ease;
    position: relative;
}

.event-list-item:last-child {
    border-bottom: none;
}

.event-list-item:hover {
    background-color: #f8f9fa;
}

body.dark-mode .event-list-item:hover {
    background-color: #404a5b;
}

.event-list-item.is-user-event:hover {
    background-color: #e3f2fd;
}

body.dark-mode .event-list-item.is-user-event:hover {
    background-color: #2c3e50;
}

.event-color-bar {
    width: 6px;
    height: 60px;
    border-radius: 3px;
    margin-right: 16px;
    flex-shrink: 0;
}

.event-details {
    flex-grow: 1;
    min-width: 0;
}

.event-details .event-title {
    font-size: 1.1em;
    font-weight: 600;
    color: var(--main-text-color);
    margin-bottom: 4px;
    line-height: 1.4;
}

.event-details .event-category {
    font-size: 0.85em;
    color: var(--accent-color);
    font-weight: 500;
    margin-bottom: 8px;
}

.event-details .event-description {
    font-size: 0.9em;
    color: var(--secondary-text-color);
    line-height: 1.4;
    margin-top: 8px;
}

.event-actions {
    color: var(--secondary-text-color);
    font-size: 1.2em;
    padding: 8px;
    border-radius: 4px;
    transition: background-color 0.2s ease;
}

.event-actions:hover {
    background-color: var(--border-color);
}

.no-events {
    text-align: center;
    padding: 60px 20px;
    color: var(--secondary-text-color);
    font-style: italic;
    font-size: 1.1em;
}

/* Drag & Drop per vista diària */
.day-view-container.drop-target {
    background-color: #e8f5e8;
    border: 2px dashed #4caf50;
}

body.dark-mode .day-view-container.drop-target {
    background-color: #1a2f1a;
    border-color: #66bb6a;
}

.day-view-container.drop-invalid {
    background-color: #ffeaea;
    border: 2px dashed #f44336;
}

body.dark-mode .day-view-container.drop-invalid {
    background-color: #2f1a1a;
    border-color: #ef5350;
}



.unplaced-event-item .event-title {
    font-weight: 600;
    color: var(--main-text-color);
    font-size: 0.95em;
    line-height: 1.3;
}

.unplaced-event-item .event-category {
    font-size: 0.8em;
    color: var(--accent-color);
    font-weight: 500;
}

.unplaced-event-item .event-original-date {
    font-size: 0.8em;
    color: var(--secondary-text-color);
    font-weight: 500;
}


.dismiss-btn {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color: var(--danger-color);
    color: white;
    border: none;
    cursor: pointer;
    font-size: 0.9em;
    font-weight: bold;
    line-height: 1;
    flex-shrink: 0;
    opacity: 0.7;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.dismiss-btn:hover {
    opacity: 1;
    background-color: var(--danger-hover);
    transform: scale(1.1);
}

.unplaced-event-item:hover .dismiss-btn {
    opacity: 1;
}

/* Indicador visual cuando no hay eventos pendientes */
.unplaced-events-list:empty::after {
    content: "No hi ha events pendents de col·locar";
    color: var(--secondary-text-color);
    font-style: italic;
    text-align: center;
    padding: 20px;
    font-size: 0.9em;
}

/* 7. ANIMACIONES PARA MENSAJES DE NOTIFICACIÓN */
@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* === VISTA SEMESTRAL - CAPÇALERES FIXES === */
body[data-current-view="semester"] .calendar-grid .day-header {
    position: sticky;
    top: 0;
    z-index: 100;
    background-color: var(--card-bg-color);
}

/* === DIFERENCIACIÓ DE MESOS A VISTA SEMESTRAL === */
body[data-current-view="semester"] .day-cell.month-even {
    background-color: var(--card-bg-color);
}

body[data-current-view="semester"] .day-cell.month-odd {
    background-color: rgba(79, 93, 149, 0.03);
}

body.dark-mode[data-current-view="semester"] .day-cell.month-odd {
    background-color: rgba(138, 154, 214, 0.05);
}


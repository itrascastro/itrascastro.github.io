<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>Bloc 1: Sistema de rutes i navegació | DA2_OA01 - Programació Avançada (Angular) - IOC</title>
    <meta name="description" content="Material educatiu - Institut Obert de Catalunya">
    <meta name="page-unitat" content="4">
    <meta name="page-bloc" content="1">
    
    <!-- SEO Tags -->
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Bloc 1: Sistema de rutes i navegació | DA2_OA01 - Programació Avançada (Angular)</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Bloc 1: Sistema de rutes i navegació" />
<meta property="og:locale" content="ca_ES" />
<meta name="description" content="Configuració de rutes, paràmetres i guàrdies de navegació" />
<meta property="og:description" content="Configuració de rutes, paràmetres i guàrdies de navegació" />
<link rel="canonical" href="http://localhost:4006/ioc/da2_OA01/unitat-4/bloc-1/" />
<meta property="og:url" content="http://localhost:4006/ioc/da2_OA01/unitat-4/bloc-1/" />
<meta property="og:site_name" content="DA2_OA01 - Programació Avançada (Angular)" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Bloc 1: Sistema de rutes i navegació" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Configuració de rutes, paràmetres i guàrdies de navegació","headline":"Bloc 1: Sistema de rutes i navegació","url":"http://localhost:4006/ioc/da2_OA01/unitat-4/bloc-1/"}</script>
<!-- End Jekyll SEO tag -->

    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/ioc/da2_OA01/assets/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="canonical" href="http://localhost:4006/ioc/da2_OA01/unitat-4/bloc-1/">
    <!-- Rich editor styles (for embedded notes panel) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.snow.min.css">
    <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" disabled>
    <link rel="stylesheet" href="/ioc/da2_OA01/assets/css/quadern-rich-editor.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/ioc/da2_OA01/assets/images/favicon.ico">
    
    <!-- RSS Feed -->
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4006/ioc/da2_OA01/feed.xml" title="DA2_OA01 - Programació Avançada (Angular)" />

    <!-- Syntax Highlighting (Prism) -->
    <link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-jsx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-html.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-tsx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>

    <!-- Code Block Component -->
    <link rel="stylesheet" href="/ioc/da2_OA01/assets/css/code-block.css">
    <script src="/ioc/da2_OA01/assets/js/code-block.js"></script>

</head>

<body class="bloc-layout">
    <!-- Skip to content for accessibility -->
    <a class="skip-link" href="#main-content">Salta al contingut principal</a>


    
    <!-- Header fix -->
    <header class="header" role="banner" id="top">
        <div class="header-brand">
            <a href="/ioc/da2_OA01/" class="logo-link" aria-label="Inici">
                <img src="/ioc/da2_OA01/assets/images/logo_IOC_light.jpg" alt="Institut Obert de Catalunya" class="logo logo-light">
                <img src="/ioc/da2_OA01/assets/images/logo_IOC_dark.png" alt="Institut Obert de Catalunya" class="logo logo-dark">
            </a>
            <a href="/ioc/da2_OA01/" class="title-link">
                <h1>DA2_OA01 - DA2_OA01 - Programació Avançada (Angular)</h1>
            </a>
        </div>
        <div class="header-actions">
            <button class="theme-toggle" id="theme-toggle">Mode Fosc</button>
            <button class="nav-panel-toggle" type="button" aria-expanded="false" aria-label="Obre la navegació">
                <i class="bi bi-list" aria-hidden="true"></i>
                <span class="nav-panel-label">Navegació</span>
            </button>
        </div>
    </header>

    <div class="offcanvas-backdrop" hidden></div>
    <nav class="offcanvas-nav" aria-hidden="true" aria-label="Navegació del curs">
        <div class="offcanvas-header">
            <h2 class="offcanvas-title">Navegació</h2>
            <button class="offcanvas-close" type="button" aria-label="Tanca la navegació">
                <i class="bi bi-x-lg" aria-hidden="true"></i>
            </button>
        </div>
        <div class="offcanvas-body">
            <a href="/ioc/da2_OA01/" class="nav-dropdown-item ">Índex del Curs</a>
            
                
                    <a href="/ioc/da2_OA01/unitat-1/bloc-1/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 1: Conceptes fonamentals i instal·lació
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-1/bloc-2/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 2: Entorn de desenvolupament integrat
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-1/bloc-3/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 3: Creació del projecte base
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-1/bloc-4/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 4: Cas d'ús: Preparació de l'entorn
                    </a>
                
            
                
                    <a href="/ioc/da2_OA01/unitat-2/bloc-1/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 1: Components i comunicació bàsica
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-2/bloc-2/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 2: Data binding i events
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-2/bloc-3/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 3: Formularis amb vinculació bidireccional
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-2/bloc-4/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 4: Cas d'ús: Catàleg d'elements
                    </a>
                
            
                
                    <a href="/ioc/da2_OA01/unitat-3/bloc-1/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 1: Serveis i separació de responsabilitats
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-3/bloc-2/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 2: Gestió d'estat i comunicació entre components
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-3/bloc-3/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 3: Optimització i bones pràctiques
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-3/bloc-4/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 4: Cas d'ús: Catàleg amb API REST
                    </a>
                
            
                
                    <a href="/ioc/da2_OA01/unitat-4/bloc-1/" class="nav-dropdown-item current">
                        Unitat 4 - Bloc 1: Sistema de rutes i navegació
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-4/bloc-2/" class="nav-dropdown-item ">
                        Unitat 4 - Bloc 2: Arquitectura escalable
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-4/bloc-3/" class="nav-dropdown-item ">
                        Unitat 4 - Bloc 3: Optimització de rendiment
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-4/bloc-4/" class="nav-dropdown-item ">
                        Unitat 4 - Bloc 4: Cas d'ús: Aplicació completa
                    </a>
                
            
        </div>
    </nav>

    <div class="container">
        <!-- Sidebar Navegació -->
        
        <aside class="sidebar">
            <button class="sidebar-toggle" type="button" aria-expanded="false">
                <span>Contingut del bloc</span>
                <i class="bi bi-chevron-down" aria-hidden="true"></i>
            </button>
            <div class="sidebar-scroll">
                <!-- Contingut d'aquest Bloc -->
                <div class="sidebar-section">
                    <h3>Contingut del Bloc</h3>
                    

    
    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat4_Bloc1_Seccio1" class="nav-link" data-section="Unitat4_Bloc1_Seccio1">1. Configuració del sistema de rutes</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat4_Bloc1_Seccio2" class="nav-link" data-section="Unitat4_Bloc1_Seccio2">2. Paràmetres de ruta i navegació programàtica</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat4_Bloc1_Seccio3" class="nav-link" data-section="Unitat4_Bloc1_Seccio3">3. Rutes niades i guàrdies de ruta</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    



                </div>
            </div>
        </aside>
        

        <main class="main-content" role="main" id="main-content">
            
            <!-- Navegació horizontal -->
            
            <nav class="horizontal-nav" aria-label="Navegació de ruta">
                <div class="horizontal-nav-list">
                    <a href="/ioc/da2_OA01/" class="horizontal-nav-item">Inici</a>
                    
                    
                        
                        
                            
                        
                            
                        
                            
                        
                            
                                
                                
                        
                        
                            <span class="horizontal-nav-separator"> &gt; </span>
                            <a href="/ioc/da2_OA01/unitat-4/" class="horizontal-nav-item">
                                Unitat 4: Navegació i arquitectura d'aplicacions (RA4)
                            </a>
                        
                        
                        
                            
                            
                                
                                    
                                    
                            
                            
                                <span class="horizontal-nav-separator"> &gt; </span>
                                <span class="horizontal-nav-item current">
                                    Bloc 4.1: Sistema de rutes i navegació
                                </span>
                            
                        
                    
                </div>
            </nav>
            
            
            <!-- Contingut de la Pàgina -->
            <article class="page-content">
                <div class="content-body">
                    

<!-- Objectius del bloc (si estan definits al frontmatter) -->


<!-- Contingut principal -->
<!--
  ═══════════════════════════════════════════════════════════════════
  BLOC 1 - UNITAT 4
  Contingut migrat des de:
  - .resources/Autoria/Unitat4/Lliço1/OA1/lectura-u4-l1-oa1.md
  - .resources/Autoria/Unitat4/Lliço1/OA2/lectura-u4-l1-oa2.md
  - .resources/Autoria/Unitat4/Lliço1/OA3/lectura-u4-l1-oa3.md
  ═══════════════════════════════════════════════════════════════════
-->

<div class="section" id="Unitat4_Bloc1_Seccio1">
  <h2 id="Unitat4_Bloc1_Seccio1">1. Configuració del sistema de rutes</h2>

  <!-- MULTIMÈDIA -->
  <!--
  ════════════════════════════════════════════════════════════════
  Component: Enllaços multimèdia YouTube
  ════════════════════════════════════════════════════════════════

  Paràmetres:
    - unitat: número de la unitat (1-4)
    - bloc: número del bloc (1-4)
    - seccio: número de la secció (1-3)

  Exemple d'ús:
    {% include multimedia-youtube.html unitat=1 bloc=1 seccio=1 %}

  El component busca automàticament les URLs corresponents a
  site.data.multimedia i mostra els botons de vídeo i àudio.
  ════════════════════════════════════════════════════════════════
-->





  
  
  
  
  

  

  

  
<div class="multimedia-resources">
  <div class="multimedia-header">
    <i class="bi bi-play-circle-fill"></i>
    <span>Contingut multimèdia d'aquesta lectura</span>
  </div>

  <div class="multimedia-buttons">
    
    <a href="https://www.youtube.com/watch?v=qHIulxjx7II" target="_blank" rel="noopener noreferrer" class="multimedia-btn video-btn" title="Lectura 4.1.1 · Configuració del sistema de rutes">
      <i class="bi bi-youtube"></i>
      <span>Veure vídeo</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    

    
    <a href="https://www.youtube.com/watch?v=G3eZeuFxhUo" target="_blank" rel="noopener noreferrer" class="multimedia-btn audio-btn" title="[Audio] Lectura 4.1.1 · Configuració del sistema de rutes">
      <i class="bi bi-mic-fill"></i>
      <span>Escoltar àudio</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    
  </div>

  
  
</div>
  




  <!-- Component: Objectius del bloc/unitat -->



<div class="objectius-box">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-bullseye" aria-hidden="true"></i> Objectius</div>
  <div class="component-content">
    <ul>
      
        <li>Configurar el sistema de rutes d'Angular per crear aplicacions de múltiples vistes sense recàrregar la pàgina.</li>
      
        <li>Implementar el mapa de rutes principal amb les vistes del catàleg.</li>
      
        <li>Crear menú de navegació amb indicadors visuals de ruta activa.</li>
      
        <li>Verificar el funcionament del sistema de rutes i documentar la configuració.</li>
      
    </ul>
  </div>
  <!-- IMPORTANT: també es pot usar via front matter: page.objectius (array) -->
</div>



  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>RA4 · Criteri 1</strong> — Configura la navegació entre pantalles i la gestió de paràmetres.
    
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.1. Prerequisits</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <ul>
    <li>Projecte <code>catalog-elements</code> amb serveis HTTP, formularis i gestió d'estats funcionals</li>
    <li>Components principals creats: <code>CatalegPageComponent</code>, <code>FormulariCercaComponent</code>, <code>PreferitsPanelComponent</code></li>
    <li>Git actualitzat amb commit recent i <code>git status</code> net</li>
    <li>Node.js i Angular CLI operatius (versions 20.x i Angular 18+)</li>
    <li>Servidor de desenvolupament funcional: <code>ng serve</code> arrenca sense errors</li>
    <li>Carpeta de documentació: <code>docs/navegacio.md</code> creada (pot estar buida)</li>
  </ul>

  <p><strong>Verificació ràpida:</strong></p>

  <p><strong>PowerShell (Windows):</strong></p>

<div class="code-block" data-lang="powershell" role="region" aria-label="Bloc de codi powershell">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">POWERSHELL</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-powershell">Set-Location $env:USERPROFILE\workspace\catalog-elements
ng version | Select-String &quot;Angular CLI&quot;
git status
Test-Path src\app\pages\cataleg-page</code></pre>
  </div>
</div>


  <p><strong>bash/zsh (macOS/Linux):</strong></p>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">cd ~/workspace/catalog-elements
ng version | grep &quot;Angular CLI&quot;
git status
ls -d src/app/pages/cataleg-page</code></pre>
  </div>
</div>


  <p><strong>Punt d'autocomprovació:</strong> Veieu la versió d'Angular CLI (≥18.0.0), <code>git status</code> mostra "working tree clean" i la carpeta <code>cataleg-page</code> existeix.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.2. Marc conceptual</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    

  <h4>1.2.1. Què és el sistema de rutes d'Angular</h4>
  <p>El <strong>Router d'Angular</strong> és un servei que gestiona la navegació entre diferents vistes (components) d'una aplicació sense recarregar la pàgina sencera. Mapeja URLs específiques a components concrets i manté sincronitzada la barra d'adreces del navegador amb el contingut mostrat a l'usuari.</p>

  <p>Aquest sistema permet construir <strong>Single Page Applications (SPA)</strong>: aplicacions que carreguen un sol document HTML però ofereixen l'experiència de múltiples pàgines mitjançant la manipulació del DOM i l'historial del navegador.</p>

  <h4>1.2.2. Problema sense sistema de rutes</h4>
  <p>Sense sistema de rutes, una aplicació Angular tradicional només pot mostrar una vista fixa. Imagina l'aplicació del catàleg d'elements amb tres seccions diferents:</p>


<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// app.component.ts - Solució MANUAL sense rutes
@Component({
  selector: &#39;app-root&#39;,
  template: `
    &lt;nav&gt;
      &lt;button (click)=&quot;vistaActual = &#39;cataleg&#39;&quot;&gt;Catàleg&lt;/button&gt;
      &lt;button (click)=&quot;vistaActual = &#39;cerca&#39;&quot;&gt;Cerca&lt;/button&gt;
      &lt;button (click)=&quot;vistaActual = &#39;preferits&#39;&quot;&gt;Preferits&lt;/button&gt;
    &lt;/nav&gt;
    &lt;div *ngIf=&quot;vistaActual === &#39;cataleg&#39;&quot;&gt;&lt;app-cataleg-page&gt;&lt;/app-cataleg-page&gt;&lt;/div&gt;
    &lt;div *ngIf=&quot;vistaActual === &#39;cerca&#39;&quot;&gt;&lt;app-formulari-cerca&gt;&lt;/app-formulari-cerca&gt;&lt;/div&gt;
    &lt;div *ngIf=&quot;vistaActual === &#39;preferits&#39;&quot;&gt;&lt;app-preferits-panel&gt;&lt;/app-preferits-panel&gt;&lt;/div&gt;
  `
})
export class AppComponent {
  vistaActual = &#39;cataleg&#39;;
}</code></pre>
  </div>
</div>


  <p>Aquesta solució genera múltiples problemes:</p>
  <ul>
    <li><strong>URLs no reflecteixen l'estat:</strong> La barra d'adreces sempre mostra la mateixa URL. No es poden compartir enllaços específics ni crear marcadors per cada secció</li>
    <li><strong>Botons de navegació no funcionen:</strong> Els botons "Enrere" i "Endavant" del navegador no responen perquè la URL no canvia</li>
    <li><strong>Codi desorganitzat:</strong> Tot el codi de navegació queda en un sol component gegant, difícil de mantenir i provar</li>
    <li><strong>Càrrega innecessària:</strong> Tots els components es carreguen sempre, fins i tot els que l'usuari no visitarà mai</li>
    <li><strong>SEO impossible:</strong> Els motors de cerca només indexen una URL, no poden trobar contingut específic</li>
  </ul>

  <h4>1.2.3. Solució amb sistema de rutes</h4>
  <p>Angular Router soluciona tots aquests problemes amb un sistema centralitzat de navegació:</p>


<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// src/app/app.routes.ts
import { Routes } from &#39;@angular/router&#39;;
import { CatalegPageComponent } from &#39;./pages/cataleg-page/cataleg-page.component&#39;;
import { FormulariCercaComponent } from &#39;./components/formulari-cerca/formulari-cerca.component&#39;;
import { PreferitsPanelComponent } from &#39;./components/preferits-panel/preferits-panel.component&#39;;

export const routes: Routes = [
  { path: &#39;&#39;, redirectTo: &#39;cataleg&#39;, pathMatch: &#39;full&#39; },
  { path: &#39;cataleg&#39;, component: CatalegPageComponent, title: &#39;Catàleg d\\&#39;elements&#39; },
  { path: &#39;cerca&#39;, component: FormulariCercaComponent, title: &#39;Cerca d\\&#39;elements&#39; },
  { path: &#39;preferits&#39;, component: PreferitsPanelComponent, title: &#39;Els meus preferits&#39; },
  { path: &#39;detall/:id&#39;, component: DetallElementComponent, title: &#39;Detall de l\\&#39;element&#39; },
  { path: &#39;**&#39;, redirectTo: &#39;cataleg&#39; }
];</code></pre>
  </div>
</div>



<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// src/app/app.component.ts
import { Component } from &#39;@angular/core&#39;;
import { RouterModule } from &#39;@angular/router&#39;;

@Component({
  selector: &#39;app-root&#39;,
  standalone: true,
  imports: [RouterModule],
  template: `
    &lt;nav class=&quot;menu-principal&quot;&gt;
      &lt;a routerLink=&quot;/cataleg&quot; routerLinkActive=&quot;actiu&quot;&gt;Catàleg&lt;/a&gt;
      &lt;a routerLink=&quot;/cerca&quot; routerLinkActive=&quot;actiu&quot;&gt;Cerca&lt;/a&gt;
      &lt;a routerLink=&quot;/preferits&quot; routerLinkActive=&quot;actiu&quot;&gt;Preferits&lt;/a&gt;
    &lt;/nav&gt;
    &lt;main&gt;&lt;router-outlet&gt;&lt;/router-outlet&gt;&lt;/main&gt;
  `
})
export class AppComponent {}</code></pre>
  </div>
</div>


  <p><strong>Avantatges d'aquesta solució:</strong></p>
  <ul>
    <li><strong>URLs significatives:</strong> Cada vista té la seva URL única que es pot compartir, guardar com a marcador i recarregar mantenint l'estat</li>
    <li><strong>Navegació funcional:</strong> Els botons enrere/endavant del navegador funcionen correctament perquè el Router actualitza l'historial</li>
    <li><strong>Codi organitzat:</strong> Cada vista té el seu propi component amb responsabilitats clarament definides</li>
    <li><strong>Càrrega selectiva:</strong> El Router només carrega el component de la ruta activa, millorant el rendiment inicial</li>
    <li><strong>SEO optimitzat:</strong> Cada ruta és indexable pels motors de cerca amb el seu propi contingut i metadades</li>
  </ul>

  <h4>1.2.4. Components clau del sistema</h4>
  <p>El Router d'Angular es compon de diversos elements que treballen junts:</p>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Component</th>
        <th>Tipus</th>
        <th>Funció</th>
        <th>Exemple</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Routes</strong></td>
        <td>Array TypeScript</td>
        <td>Mapeja URLs a components</td>
        <td><code>[{ path: 'cataleg', component: CatalegComponent }]</code></td>
      </tr>
      <tr>
        <td><strong>RouterModule</strong></td>
        <td>NgModule</td>
        <td>Proporciona directives i serveis</td>
        <td><code>imports: [RouterModule]</code></td>
      </tr>
      <tr>
        <td><strong>router-outlet</strong></td>
        <td>Directiva</td>
        <td>Marca on renderitzar el component actiu</td>
        <td><code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code></td>
      </tr>
      <tr>
        <td><strong>routerLink</strong></td>
        <td>Directiva</td>
        <td>Crea enllaços de navegació</td>
        <td><code>&lt;a routerLink="/cataleg"&gt;</code></td>
      </tr>
      <tr>
        <td><strong>routerLinkActive</strong></td>
        <td>Directiva</td>
        <td>Afegeix classe CSS a ruta activa</td>
        <td><code>&lt;a routerLinkActive="actiu"&gt;</code></td>
      </tr>
      <tr>
        <td><strong>Router</strong></td>
        <td>Servei</td>
        <td>Permet navegació programàtica</td>
        <td><code>this.router.navigate(['/cerca'])</code></td>
      </tr>
      <tr>
        <td><strong>ActivatedRoute</strong></td>
        <td>Servei</td>
        <td>Llegeix paràmetres de la ruta activa</td>
        <td><code>this.route.params.subscribe(...)</code></td>
      </tr>
    </tbody>
  </table>

  <h4>1.2.5. Casos d'ús reals del sistema de rutes</h4>
  <p><strong>1. E-commerce (Amazon, eBay):</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">/                           → Pàgina d&#39;inici
/categories/electronics     → Categoria específica
/producte/B08N5WRWNW        → Detall producte
/carret                     → Cistella de compra
/checkout                   → Finalitzar compra
/comandes                   → Historial de comandes
/comanda/12345              → Detall d&#39;una comanda</code></pre>
  </div>
</div>


  <p><strong>2. Xarxa social (Twitter, Facebook):</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">/feed                       → Timeline principal
/perfil/usuari123           → Perfil d&#39;usuari
/missatges                  → Xat privat
/missatges/conversa456      → Conversa específica
/notificacions              → Notificacions
/configuracio               → Configuració del compte</code></pre>
  </div>
</div>


  <p><strong>3. Aplicació de gestió (Trello, Asana):</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">/dashboard                  → Panell principal
/projectes                  → Llistat de projectes
/projecte/789               → Vista d&#39;un projecte
/projecte/789/tasques       → Tasques del projecte
/projecte/789/equip         → Equip del projecte
/calendari                  → Vista de calendari
/configuracio               → Configuració global</code></pre>
  </div>
</div>


  <h4>1.2.6. Càlculs quantitatius: Impacte en experiència d'usuari</h4>
  <p><strong>Temps de navegació comparatiu:</strong></p>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Acció</th>
        <th>Pàgines tradicionals</th>
        <th>SPA sense rutes</th>
        <th>SPA amb rutes</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Càrrega inicial</strong></td>
        <td>2.5s</td>
        <td>2.5s</td>
        <td>0.8s</td>
      </tr>
      <tr>
        <td><strong>Primer canvi vista</strong></td>
        <td>2.0s (recàrrega HTML)</td>
        <td>0ms (ja carregat)</td>
        <td>75ms (carrega component)</td>
      </tr>
      <tr>
        <td><strong>Segon canvi vista</strong></td>
        <td>2.0s (recàrrega HTML)</td>
        <td>0ms (ja carregat)</td>
        <td>50ms (component en cache)</td>
      </tr>
      <tr>
        <td><strong>Tercer canvi vista</strong></td>
        <td>2.0s (recàrrega HTML)</td>
        <td>0ms (ja carregat)</td>
        <td>50ms (component en cache)</td>
      </tr>
    </tbody>
  </table>

  <p><strong>Experiència acumulada en sessió de 10 minuts:</strong></p>
  <p>Usuari típic: 1 càrrega inicial + 15 navegacions</p>
  <ul>
    <li><strong>Pàgines tradicionals:</strong> 2.5s + (15 × 2.0s) = 32.5 segons esperant</li>
    <li><strong>SPA sense rutes:</strong> 2.5s + 0s = 2.5 segons esperant</li>
    <li><strong>SPA amb rutes:</strong> 0.8s + (15 × 0.06s) = 1.7 segons esperant</li>
  </ul>
  <p><strong>Millora:</strong> SPA amb rutes és <strong>19x més ràpid</strong> que pàgines tradicionals i <strong>1.5x més ràpid</strong> que SPA sense rutes (per la càrrega inicial reduïda).</p>

  <h4>1.2.7. Integració amb altres conceptes Angular</h4>
  <p>El sistema de rutes no treballa sol, sinó que s'integra amb altres conceptes d'Angular:</p>
  <p><strong>1. Serveis compartits:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private elements = signal&lt;ElementCataleg[]&gt;([]);
  // Components de diferents rutes poden compartir aquestes dades
}</code></pre>
  </div>
</div>


  <p><strong>2. Guards (lectures posteriors):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;admin&#39;,
  component: AdminComponent,
  canActivate: [AuthGuard]  // Només usuaris autenticats
}</code></pre>
  </div>
</div>


  <p><strong>3. Lazy loading (lectures posteriors):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;estadistiques&#39;,
  loadComponent: () =&gt; import(&#39;./estadistiques.component&#39;)
    .then(m =&gt; m.EstadistiquesComponent)
}</code></pre>
  </div>
</div>


  <p><strong>4. Resolvers (lectures posteriors):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;detall/:id&#39;,
  component: DetallComponent,
  resolve: { element: ElementResolver }
}</code></pre>
  </div>
</div>


  <h4>1.2.8. Analogia del món real: Sistema de transport públic</h4>
  <p>Penseu en el Router com un <strong>sistema de metro</strong> d'una ciutat:</p>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Element Router</th>
        <th>Analogia Metro</th>
        <th>Explicació</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Routes array</strong></td>
        <td>Mapa de línies</td>
        <td>Defineix quines estacions (vistes) existeixen</td>
      </tr>
      <tr>
        <td><strong>URL</strong></td>
        <td>Nom de l'estació</td>
        <td>Indica on sou (<code>/cataleg</code> = "Estació Catàleg")</td>
      </tr>
      <tr>
        <td><strong>router-outlet</strong></td>
        <td>Andana</td>
        <td>Lloc on arriba el tren (component)</td>
      </tr>
      <tr>
        <td><strong>routerLink</strong></td>
        <td>Màquina de bitllets</td>
        <td>Compreu bitllet per anar a una estació</td>
      </tr>
      <tr>
        <td><strong>Component actiu</strong></td>
        <td>Tren a l'andana</td>
        <td>El que veieu actualment</td>
      </tr>
      <tr>
        <td><strong>Navegació</strong></td>
        <td>Viatge</td>
        <td>Canvieu d'estació (vista)</td>
      </tr>
      <tr>
        <td><strong>Historial navegador</strong></td>
        <td>Trajecte fet</td>
        <td>Recordeu per on heu passat (botó enrere)</td>
      </tr>
    </tbody>
  </table>

  <p>Quan feu clic a "Preferits":</p>
  <ol>
    <li>Compreu bitllet per "Estació Preferits" (routerLink)</li>
    <li>El sistema consulta el mapa (Routes array)</li>
    <li>Trobeu l'andana correcta (router-outlet)</li>
    <li>Arriba el tren "Preferits" (PreferitsComponent es renderitza)</li>
    <li>El tren anterior ("Catàleg") marxa (CatalegComponent es destrueix)</li>
  </ol>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.3. Model mental</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.3.1. Imatge conceptual del sistema de rutes</h4>
  <p>Penseu en l'aplicació Angular com un <strong>edifici de múltiples habitacions</strong> on el Router actua com a <strong>recepcionista</strong>:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">┌──────────────────────────────────────────────────────────┐
│            APP COMPONENT (Edifici)                       │
│                                                          │
│  ┌────────────────────────────────────────────────┐    │
│  │         MENÚ DE NAVEGACIÓ                      │    │
│  │  [Catàleg] [Cerca] [Preferits] [Admin]        │    │
│  │    (Botons de l&#39;ascensor)                      │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  ┌────────────────────────────────────────────────┐    │
│  │      &lt;router-outlet&gt;                            │    │
│  │  (Porta que mostra l&#39;habitació actual)         │    │
│  │                                                  │    │
│  │  ┌──────────────────────────────────────┐     │    │
│  │  │  COMPONENT ACTIU                     │     │    │
│  │  │  (Habitació on sou ara)              │     │    │
│  │  │                                       │     │    │
│  │  │  [CatalegPageComponent]       o      │     │    │
│  │  │  [FormulariCercaComponent]    o      │     │    │
│  │  │  [PreferitsPanelComponent]    o      │     │    │
│  │  │  [DetallElementComponent]            │     │    │
│  │  │                                       │     │    │
│  │  └──────────────────────────────────────┘     │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  ROUTER (Recepcionista)                                 │
│  - Consulta mapa de rutes (Routes[])                    │
│  - Troba l&#39;habitació (component) corresponent           │
│  - Obre la porta (router-outlet)                        │
└──────────────────────────────────────────────────────────┘</code></pre>
  </div>
</div>


  <h4>1.3.2. Els 3 elements fonamentals</h4>
  <p><strong>1. Mapa de rutes (Routes[])</strong></p>
  <ul>
    <li><strong>Què és:</strong> Array TypeScript que relaciona URLs amb components</li>
    <li><strong>Analogia:</strong> Directori de l'edifici que indica a quina habitació correspon cada número de porta</li>
    <li><strong>Funció:</strong> Quan un usuari navega a <code>/cataleg</code>, el Router consulta aquest mapa i descobreix que ha de carregar <code>CatalegPageComponent</code></li>
  </ul>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const routes: Routes = [
  { path: &#39;cataleg&#39;, component: CatalegPageComponent },    // Habitació 1
  { path: &#39;cerca&#39;, component: FormulariCercaComponent },   // Habitació 2
  { path: &#39;preferits&#39;, component: PreferitsPanelComponent } // Habitació 3
];</code></pre>
  </div>
</div>


  <p><strong>Funcionament intern:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Usuari clica &quot;Preferits&quot;
  ↓
URL canvia a /preferits
  ↓
Router busca al mapa: path === &#39;preferits&#39;
  ↓
Troba: { path: &#39;preferits&#39;, component: PreferitsPanelComponent }
  ↓
Carrega PreferitsPanelComponent al router-outlet</code></pre>
  </div>
</div>


  <p><strong>2. Router Outlet (<code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code>)</strong></p>
  <ul>
    <li><strong>Què és:</strong> Directiva que marca el lloc exacte on es renderitza el component de la ruta activa</li>
    <li><strong>Analogia:</strong> La porta d'entrada a l'habitació corresponent</li>
    <li><strong>Funció:</strong> Quan canvieu de ruta, l'outlet "esborra" el component anterior i "dibuxa" el nou al mateix lloc</li>
  </ul>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;main&gt;
  &lt;router-outlet&gt;&lt;/router-outlet&gt;
  &lt;!-- Aquí apareix: CatalegPageComponent, CercaComponent, etc. segons la ruta --&gt;
&lt;/main&gt;</code></pre>
  </div>
</div>


  <p><strong>Cicle de vida:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Component anterior renderitzat al outlet
  ↓
Navegació a nova ruta
  ↓
Angular crida ngOnDestroy() del component anterior
  ↓
Component anterior desapareix del DOM
  ↓
Angular crea instància del nou component
  ↓
Angular crida ngOnInit() del nou component
  ↓
Nou component es renderitza al outlet</code></pre>
  </div>
</div>


  <p><strong>3. Router Links (<code>routerLink</code>)</strong></p>
  <ul>
    <li><strong>Què és:</strong> Directiva per crear enllaços de navegació interna</li>
    <li><strong>Analogia:</strong> Botons de l'ascensor que us porten a cada pis</li>
    <li><strong>Funció:</strong> Quan feu clic, actualitza la URL i l'outlet canvia el component automàticament</li>
  </ul>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;a routerLink=&quot;/cataleg&quot;&gt;Catàleg&lt;/a&gt;
&lt;!-- Clic → URL canvia a /cataleg → Outlet mostra CatalegComponent --&gt;</code></pre>
  </div>
</div>


  <p><strong>Per què routerLink i no href?</strong></p>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Atribut</th>
        <th>Comportament</th>
        <th>Velocitat</th>
        <th>Historial</th>
        <th>Ús recomanat</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>href="/cataleg"</code></td>
        <td>Recàrrega completa de la pàgina</td>
        <td>2-3 segons</td>
        <td>Perd l'estat</td>
        <td>Pàgines tradicionals</td>
      </tr>
      <tr>
        <td><code>routerLink="/cataleg"</code></td>
        <td>Canvi de component al DOM</td>
        <td>50-100ms</td>
        <td>Manté l'estat</td>
        <td><i class="bi bi-check-circle text-success"></i> SPAs amb Angular</td>
      </tr>
    </tbody>
  </table>

  <h4>1.3.3. Flux complet de navegació pas a pas</h4>
  <p>Quan l'usuari fa clic a "Preferits", aquest és el procés complet:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">1. Event de clic detectat
   &lt;a routerLink=&quot;/preferits&quot; (click)=&quot;...&quot;&gt;
   ↓
2. routerLink intercepta el clic
   event.preventDefault() → evita recàrrega de pàgina
   ↓
3. Router actualitza la URL del navegador
   window.history.pushState({}, &#39;&#39;, &#39;/preferits&#39;)
   cataleg-app.com/preferits
   ↓
4. Router consulta el mapa de rutes
   routes.find(r =&gt; r.path === &#39;preferits&#39;)
   ↓
5. Router troba el component associat
   { path: &#39;preferits&#39;, component: PreferitsPanelComponent }
   ↓
6. Router destrueix el component anterior
   ngOnDestroy() de CatalegPageComponent
   ↓
7. Router crea instància del nou component
   new PreferitsPanelComponent()
   ↓
8. Router inicialitza el component
   ngOnInit() de PreferitsPanelComponent
   ↓
9. Router renderitza al router-outlet
   &lt;app-preferits-panel&gt;&lt;/app-preferits-panel&gt;
   ↓
10. Usuari veu la nova vista
    SENSE recàrrega de pàgina!</code></pre>
  </div>
</div>


  <p><strong>Temps total:</strong> 50-100 milisegons (imperceptible per l'usuari)</p>

  <h4>1.3.4. Model mental clau: Un sol HTML, components intercanviables</h4>
  <p>La clau per comprendre el Router:</p>
  <!-- Component: Caixa d'advertiment -->
<div class="warning-box" role="alert" aria-live="assertive">
    <div class="component-header warning-header" role="heading" aria-level="4"><i class="bi bi-exclamation-triangle" aria-hidden="true"></i> Important</div>
    <strong>MALAMENT (model mental incorrecte):</strong><br>"Cada ruta és una pàgina HTML diferent"
</div>

  <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>CORRECTE (model mental correcte):</strong><br>"Hi ha UN SOL index.html que carrega TOTS els components, però el router-outlet només en mostra un alhora"
</div>


  <p>Aquesta comprensió és fonamental per entendre:</p>
  <ul>
    <li>Per què és tan ràpid (no descarrega res nou)</li>
    <li>Per què funciona offline (tot ja està al navegador)</li>
    <li>Per què es pot compartir estat entre rutes (mateix context d'execució)</li>
    <li>Per què lazy loading millora el rendiment (retarda càrrega de components no essencials)</li>
  </ul>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.4. Què és el sistema de rutes: gestionar múltiples vistes en una aplicació d'una sola pàgina (SPA)</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p><strong>Objectiu:</strong> Comprendre el concepte de Single Page Application (SPA) i com el sistema de rutes permet gestionar múltiples vistes sense recarregar la pàgina.</p>

  <h4>1.4.1. Definició de Single Page Application</h4>
  <p>Una <strong>Single Page Application (SPA)</strong> és una aplicació web que carrega un únic document HTML i actualitza dinàmicament el contingut sense recarregar la pàgina sencera. Tota la lògica de navegació i renderitzat s'executa al navegador mitjançant JavaScript.</p>

  <p><strong>Diferència fonamental:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Aplicació tradicional (Multi-Page):
  Inici (index.html) → Clic &quot;Cerca&quot; → Servidor retorna cerca.html → Recàrrega completa

SPA (Single-Page):
  Inici (index.html carregat UNA vegada) → Clic &quot;Cerca&quot; → JavaScript canvia el contingut del DOM</code></pre>
  </div>
</div>


  <h4>1.4.2. Per què Angular és una SPA</h4>
  <p>Quan executeu <code>ng serve</code> i obriu <code>http://localhost:4200</code>, el navegador descarrega:</p>
  <ol>
    <li><strong>index.html</strong> (estructura bàsica)</li>
    <li><strong>main.js</strong> (tot el codi TypeScript compilat)</li>
    <li><strong>styles.css</strong> (tots els estils)</li>
  </ol>
  <p>A partir d'aquí, <strong>NO hi ha més descàrregues d'HTML</strong>. Tota la navegació es gestiona manipulant el DOM amb JavaScript.</p>

  <h4>1.4.3. El repte: Com gestionar múltiples vistes</h4>
  <p>Si només teniu un <code>index.html</code>, com mostreu diferents pantalles (catàleg, cerca, preferits)?</p>

  <p><strong>Solució 1 (manual i dolenta):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Mostrar/ocultar components amb *ngIf
&lt;app-cataleg *ngIf=&quot;vistaActual === &#39;cataleg&#39;&quot;&gt;&lt;/app-cataleg&gt;
&lt;app-cerca *ngIf=&quot;vistaActual === &#39;cerca&#39;&quot;&gt;&lt;/app-cerca&gt;</code></pre>
  </div>
</div>


  <p><strong>Problemes:</strong> URLs no canvien, no funciona botó enrere, no es pot compartir enllaços.</p>

  <p><strong>Solució 2 (Router Angular - correcta):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Sistema de rutes que mapeja URLs a components
const routes: Routes = [
  { path: &#39;cataleg&#39;, component: CatalegComponent },
  { path: &#39;cerca&#39;, component: CercaComponent }
];</code></pre>
  </div>
</div>


  <p><strong>Avantatges:</strong> URLs úniques, historial del navegador, enllaços compartibles.</p>

  <h4>1.4.4. Què fa exactament el sistema de rutes</h4>
  <p>El Router d'Angular:</p>
  <ol>
    <li><strong>Escolta canvis a la URL:</strong> Quan l'usuari clica un enllaç o el botó enrere</li>
    <li><strong>Consulta el mapa de rutes:</strong> Troba quin component correspon a la nova URL</li>
    <li><strong>Actualitza el DOM:</strong> Destrueix el component anterior i renderitza el nou</li>
    <li><strong>Manté l'historial:</strong> Registra la navegació perquè funcionin els botons enrere/endavant</li>
  </ol>

  <p><strong>Exemple visual:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">URL: /cataleg
  ↓ [Router consulta mapa]
Component: CatalegPageComponent
  ↓ [Router renderitza]
DOM: &lt;app-cataleg-page&gt;&lt;/app-cataleg-page&gt;

Usuari clica &quot;Preferits&quot;
  ↓
URL: /preferits
  ↓ [Router consulta mapa]
Component: PreferitsPanelComponent
  ↓ [Router destrueix anterior i renderitza nou]
DOM: &lt;app-preferits-panel&gt;&lt;/app-preferits-panel&gt;</code></pre>
  </div>
</div>


  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>Clau:</strong> Tot això passa sense recarregar index.html. El Router només canvia una petita part del DOM (el contingut del <code>&lt;router-outlet&gt;</code>).
    
</div>


  <p><strong>Resultat:</strong> Compreniu que una SPA amb sistema de rutes permet tenir múltiples vistes amb URLs úniques sense recarregar la pàgina, oferint una experiència d'usuari fluida i ràpida similar a aplicacions natives.</p>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.5. Avantatges de les rutes: organització, URLs llegibles, navegabilitat</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p><strong>Objectiu:</strong> Identificar els beneficis concrets i mesurables del sistema de rutes per a desenvolupadors i usuaris.</p>

  <h4>1.5.1. Avantatge 1: Organització del codi</h4>
  <p><strong>Sense rutes:</strong> Tot el codi viu en un sol component gegant:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// app.component.ts - 800+ línies
export class AppComponent {
  vistaActual = &#39;cataleg&#39;;

  // Mètodes del catàleg (200 línies)
  obtenirElements() { /* ... */ }
  filtrarElements() { /* ... */ }

  // Mètodes de cerca (150 línies)
  cercar() { /* ... */ }
  aplicarFiltres() { /* ... */ }

  // Mètodes de preferits (200 línies)
  afegirPreferit() { /* ... */ }
  eliminarPreferit() { /* ... */ }

  // ... 250 línies més
}</code></pre>
  </div>
</div>


  <p><strong>Amb rutes:</strong> Cada funcionalitat en el seu propi fitxer:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">src/app/
├── pages/
│   ├── cataleg-page/
│   │   ├── cataleg-page.component.ts      (200 línies)
│   │   ├── cataleg-page.component.html    (50 línies)
│   │   └── cataleg-page.component.scss    (30 línies)
│   ├── cerca-page/
│   │   └── ... (150 línies totals)
│   └── preferits-page/
│       └── ... (200 línies totals)
└── app.component.ts                        (20 línies - només navegació)</code></pre>
  </div>
</div>


  <p><strong>Beneficis mesurables:</strong></p>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Aspecte</th>
        <th>Sense rutes</th>
        <th>Amb rutes</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Línies per fitxer</td>
        <td>800+</td>
        <td>100-200</td>
      </tr>
      <tr>
        <td>Temps per trobar codi</td>
        <td>5-10 min</td>
        <td>30 seg</td>
      </tr>
      <tr>
        <td>Risc de conflictes Git</td>
        <td>Alt</td>
        <td>Baix</td>
      </tr>
      <tr>
        <td>Facilitat de proves</td>
        <td>Difícil</td>
        <td>Fàcil</td>
      </tr>
    </tbody>
  </table>

  <h4>1.5.2. Avantatge 2: URLs llegibles i semàntiques</h4>
  <p><strong>URLs tradicionals (inútils):</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">https://cataleg-app.com/index.html
https://cataleg-app.com/index.html?page=cerca
https://cataleg-app.com/index.html?page=preferits&amp;id=123</code></pre>
  </div>
</div>


  <p><strong>URLs amb rutes (significatives):</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">https://cataleg-app.com/cataleg
https://cataleg-app.com/cerca
https://cataleg-app.com/preferits
https://cataleg-app.com/detall/elem-001</code></pre>
  </div>
</div>


  <p><strong>Per què importa:</strong></p>
  <ol>
    <li><strong>Comprensibilitat:</strong> Un usuari pot endevinar què veurà abans de clicar</li>
    <li><strong>Compartició:</strong> <code>cataleg-app.com/detall/elem-001</code> és compartible, <code>index.html?page=detall&id=123</code> no ho és tant</li>
    <li><strong>SEO:</strong> Google indexa millor URLs semàntiques</li>
    <li><strong>Analytics:</strong> Més fàcil analitzar quines pàgines són més visitades</li>
  </ol>

  <h4>1.5.3. Avantatge 3: Navegabilitat millorada</h4>
  <p><strong>Funcionalitats del navegador que funcionen:</strong></p>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Funcionalitat</th>
        <th>Sense rutes</th>
        <th>Amb rutes</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Botó "Enrere"</td>
        <td><i class="bi bi-x-circle text-danger"></i> No funciona</td>
        <td><i class="bi bi-check-circle text-success"></i> Torna a la vista anterior</td>
      </tr>
      <tr>
        <td>Botó "Endavant"</td>
        <td><i class="bi bi-x-circle text-danger"></i> No funciona</td>
        <td><i class="bi bi-check-circle text-success"></i> Avança a la vista següent</td>
      </tr>
      <tr>
        <td>Marcadors</td>
        <td><i class="bi bi-x-circle text-danger"></i> Sempre apunta a inici</td>
        <td><i class="bi bi-check-circle text-success"></i> Desa vista específica</td>
      </tr>
      <tr>
        <td>Historial</td>
        <td><i class="bi bi-x-circle text-danger"></i> Buit</td>
        <td><i class="bi bi-check-circle text-success"></i> Registra cada navegació</td>
      </tr>
      <tr>
        <td>F5 (recarregar)</td>
        <td><i class="bi bi-x-circle text-danger"></i> Torna a inici</td>
        <td><i class="bi bi-check-circle text-success"></i> Manté vista actual</td>
      </tr>
      <tr>
        <td>Copiar enllaç</td>
        <td><i class="bi bi-x-circle text-danger"></i> URL genèrica</td>
        <td><i class="bi bi-check-circle text-success"></i> URL específica</td>
      </tr>
    </tbody>
  </table>

  <p><strong>Escenari real:</strong> Usuari navega: Inici → Catàleg → Detall elem-001 → Preferits → Detall elem-002</p>

  <p><strong>Sense rutes:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Historial del navegador: [cataleg-app.com/]
Clic &quot;Enrere&quot;: No passa res</code></pre>
  </div>
</div>


  <p><strong>Amb rutes:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Historial del navegador:
  [/] → [/cataleg] → [/detall/elem-001] → [/preferits] → [/detall/elem-002]

Clic &quot;Enrere&quot;: Torna a /preferits
Clic &quot;Enrere&quot;: Torna a /detall/elem-001
Clic &quot;Endavant&quot;: Avança a /preferits</code></pre>
  </div>
</div>


  <h4>1.5.4. Avantatge 4: Escalabilitat del projecte</h4>
  <p>Quan l'aplicació creix de 3 vistes a 20 vistes:</p>

  <p><strong>Amb rutes:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// app.routes.ts - escalabilitat fàcil
export const routes: Routes = [
  { path: &#39;cataleg&#39;, component: CatalegComponent },
  { path: &#39;cerca&#39;, component: CercaComponent },
  { path: &#39;preferits&#39;, component: PreferitsComponent },
  { path: &#39;admin&#39;, loadComponent: () =&gt; import(&#39;./admin.component&#39;) },
  // ... afegir rutes noves és trivial
];</code></pre>
  </div>
</div>


  <p><strong>Beneficis:</strong></p>
  <ul>
    <li>Només carrega el component necessari</li>
    <li>Lazy loading per components pesats</li>
    <li>Fàcil afegir noves rutes sense tocar codi existent</li>
  </ul>

  <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> El sistema de rutes facilita organització del codi, millora URLs per SEO i compartició, restaura funcionalitats esperades del navegador, coherentitza UX i permet escalar l'aplicació sense problemes de rendiment.
</div>


  <p><strong>Resultat:</strong> Identifiqueu que les rutes no són opcionals en aplicacions modernes, sinó essencials per crear experiències d'usuari professionals i codis mantenibles.</p>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.6. Importar mòdul de rutes: configuració inicial del projecte</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p><strong>Objectiu:</strong> Configurar Angular per utilitzar el sistema de rutes a nivell d'aplicació.</p>

  <h4>1.6.1. Configuració a aplicacions standalone (Angular 18+)</h4>
  <p>Angular 18 utilitza <strong>standalone components</strong> per defecte. La configuració de rutes es fa mitjançant <code>provideRouter()</code> en lloc de <code>RouterModule.forRoot()</code>.</p>

  <p><strong>Fitxer clau:</strong> <code>src/main.ts</code></p>
  <p>Aquest fitxer és el punt d'entrada de l'aplicació. Aquí configurem tots els proveïdors globals, incloent-hi el Router.</p>

  <p><strong>Estat inicial (sense rutes):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// src/main.ts - Aplicació sense rutes
import { bootstrapApplication } from &#39;@angular/platform-browser&#39;;
import { AppComponent } from &#39;./app/app.component&#39;;

bootstrapApplication(AppComponent, {
  providers: []
}).catch(err =&gt; console.error(err));</code></pre>
  </div>
</div>


  <p><strong>Estat final (amb rutes configurades):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// src/main.ts - Aplicació amb rutes
import { bootstrapApplication } from &#39;@angular/platform-browser&#39;;
import { provideRouter } from &#39;@angular/router&#39;;
import { AppComponent } from &#39;./app/app.component&#39;;
import { routes } from &#39;./app/app.routes&#39;;

bootstrapApplication(AppComponent, {
  providers: [
    provideRouter(routes)  // ← Configura el Router amb les nostres rutes
  ]
}).catch(err =&gt; console.error(err));</code></pre>
  </div>
</div>


  <h4>1.6.2. Què fa provideRouter()</h4>
  <p>La funció <code>provideRouter()</code>:</p>
  <ol>
    <li><strong>Registra el servei Router:</strong> El fa disponible per injecció de dependències a tota l'aplicació</li>
    <li><strong>Configura les directives:</strong> <code>routerLink</code>, <code>routerLinkActive</code>, <code>router-outlet</code> queden disponibles</li>
    <li><strong>Inicialitza l'historial del navegador:</strong> Connecta amb la History API del navegador</li>
    <li><strong>Carrega la ruta inicial:</strong> Analitza la URL actual i carrega el component corresponent</li>
  </ol>

  <p><strong>Seqüència d'inicialització:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">1. Navegador carrega index.html
   ↓
2. Navegador executa main.ts
   ↓
3. bootstrapApplication() s&#39;executa
   ↓
4. provideRouter(routes) configura el Router
   ↓
5. AppComponent es renderitza
   ↓
6. Router llegeix URL actual (ex: /cataleg)
   ↓
7. Router carrega CatalegComponent al router-outlet
   ↓
8. Aplicació completament inicialitzada</code></pre>
  </div>
</div>


  <h4>1.6.3. Verificació de la configuració</h4>
  <p><strong>Pas 1:</strong> Obriu <code>src/main.ts</code> i verifiqueu que <code>provideRouter(routes)</code> està present.</p>

  <p><strong>Pas 2:</strong> Executeu el linter per detectar errors:</p>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm run lint</code></pre>
  </div>
</div>


  <p><strong>Pas 3:</strong> Inicieu el servidor de desenvolupament:</p>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve</code></pre>
  </div>
</div>


  <p><strong>Pas 4:</strong> Obriu la consola del navegador (F12) i comproveu que no hi ha errors relacionats amb el Router.</p>

  <p><strong>Indicadors d'èxit:</strong></p>
  <ul>
    <li><i class="bi bi-check-circle text-success"></i> No hi ha errors de compilació</li>
    <li><i class="bi bi-check-circle text-success"></i> L'aplicació arrenca sense errors a la consola</li>
    <li><i class="bi bi-check-circle text-success"></i> Podeu veure "Angular is running in development mode"</li>
    <li><i class="bi bi-check-circle text-success"></i> NO veieu errors "Router configuration is missing"</li>
  </ul>

  <h4>1.6.4. Errors comuns en aquesta fase</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa</th>
        <th>Solució</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>Router configuration is missing</code></td>
        <td><code>provideRouter()</code> no cridat</td>
        <td>Afegir <code>provideRouter(routes)</code> a main.ts</td>
      </tr>
      <tr>
        <td><code>Cannot find name 'routes'</code></td>
        <td>Import de routes oblidat</td>
        <td><code>import { routes } from './app/app.routes'</code></td>
      </tr>
      <tr>
        <td><code>provideRouter is not a function</code></td>
        <td>Import incorrecte</td>
        <td><code>import { provideRouter } from '@angular/router'</code></td>
      </tr>
    </tbody>
  </table>

  <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> <code>provideRouter(routes)</code> a <code>main.ts</code> és l'única configuració necessària per habilitar el sistema de rutes a Angular 18+.
</div>


  <p><strong>Resultat:</strong> Teniu el Router configurat globalment a l'aplicació i esteu preparats per definir rutes específiques.</p>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.7. Arxiu de rutes: on es defineixen, estructura bàsica</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p><strong>Objectiu:</strong> Crear el fitxer de definició de rutes i comprendre l'estructura de l'array <code>Routes</code>.</p>

  <h4>1.7.1. Ubicació estàndard del fitxer de rutes</h4>
  <p>Per convenció, el fitxer de rutes principal es col·loca a:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">src/app/app.routes.ts</code></pre>
  </div>
</div>


  <p>Aquest nom i ubicació són estàndard en aplicacions Angular 18+. Versions anteriors utilitzaven <code>app-routing.module.ts</code>.</p>

  <h4>1.7.2. Crear el fitxer de rutes</h4>
  <p><strong>PowerShell (Windows):</strong></p>

<div class="code-block" data-lang="powershell" role="region" aria-label="Bloc de codi powershell">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">POWERSHELL</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-powershell">Set-Location $env:USERPROFILE\workspace\catalog-elements
New-Item -Path &quot;src\app\app.routes.ts&quot; -ItemType File
code src\app\app.routes.ts</code></pre>
  </div>
</div>


  <p><strong>bash/zsh (macOS/Linux):</strong></p>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">cd ~/workspace/catalog-elements
touch src/app/app.routes.ts
code src/app/app.routes.ts</code></pre>
  </div>
</div>


  <h4>1.7.3. Estructura mínima del fitxer</h4>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// src/app/app.routes.ts
import { Routes } from &#39;@angular/router&#39;;

export const routes: Routes = [];</code></pre>
  </div>
</div>


  <p><strong>Explicació:</strong></p>
  <ul>
    <li><code>import { Routes }</code>: Importa el tipus TypeScript per definir rutes</li>
    <li><code>export const routes</code>: Exporta l'array perquè <code>main.ts</code> el pugui importar</li>
    <li><code>: Routes</code>: Tipus TypeScript que assegura que l'array té l'estructura correcta</li>
    <li><code>= []</code>: Array buit inicialment (afegirem rutes a la següent secció)</li>
  </ul>

  <h4>1.7.4. Anatomia d'una ruta completa</h4>
  <p>Cada objecte de l'array <code>Routes</code> representa una ruta individual:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;cataleg&#39;,                    // URL (sense /)
  component: CatalegPageComponent,    // Component a renderitzar
  title: &#39;Catàleg d\&#39;elements&#39;,       // Títol de la pestanya del navegador
  data: { breadcrumb: &#39;Catàleg&#39; },    // Dades personalitzades (opcional)
  canActivate: [AuthGuard]            // Guards de protecció (opcional)
}</code></pre>
  </div>
</div>


  <p><strong>Propietats principals:</strong></p>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Propietat</th>
        <th>Tipus</th>
        <th>Obligatòria</th>
        <th>Funció</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>path</code></td>
        <td>string</td>
        <td><i class="bi bi-check-circle text-success"></i> Sí</td>
        <td>URL que activa aquesta ruta (sense <code>/</code> inicial)</td>
      </tr>
      <tr>
        <td><code>component</code></td>
        <td>Component</td>
        <td><i class="bi bi-exclamation-circle text-warning"></i> Sí*</td>
        <td>Component a renderitzar</td>
      </tr>
      <tr>
        <td><code>loadComponent</code></td>
        <td>Function</td>
        <td><i class="bi bi-exclamation-circle text-warning"></i> Sí*</td>
        <td>Carrega component amb lazy loading</td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td>string</td>
        <td><i class="bi bi-x-circle text-danger"></i> No</td>
        <td>Títol de la pestanya del navegador</td>
      </tr>
      <tr>
        <td><code>redirectTo</code></td>
        <td>string</td>
        <td><i class="bi bi-x-circle text-danger"></i> No</td>
        <td>Redirigeix a una altra ruta</td>
      </tr>
      <tr>
        <td><code>pathMatch</code></td>
        <td>'full' | 'prefix'</td>
        <td><i class="bi bi-x-circle text-danger"></i> No</td>
        <td>Com coincideix el path</td>
      </tr>
      <tr>
        <td><code>children</code></td>
        <td>Routes[]</td>
        <td><i class="bi bi-x-circle text-danger"></i> No</td>
        <td>Rutes niades (lectures posteriors)</td>
      </tr>
      <tr>
        <td><code>canActivate</code></td>
        <td>Guard[]</td>
        <td><i class="bi bi-x-circle text-danger"></i> No</td>
        <td>Guards que protegeixen l'accés</td>
      </tr>
    </tbody>
  </table>
  <p><em>*Nota: Cal <code>component</code> o <code>loadComponent</code>, però no ambdós alhora.</em></p>

  <h4>1.7.5. Tipus de rutes bàsiques</h4>
  <p><strong>1. Ruta normal (amb component):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{ path: &#39;cataleg&#39;, component: CatalegPageComponent }</code></pre>
  </div>
</div>

  <p>Quan l'usuari navega a <code>/cataleg</code>, es renderitza <code>CatalegPageComponent</code>.</p>

  <p><strong>2. Ruta de redirecció:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{ path: &#39;&#39;, redirectTo: &#39;cataleg&#39;, pathMatch: &#39;full&#39; }</code></pre>
  </div>
</div>

  <p>Quan l'usuari navega a <code>/</code> (arrel), es redirigeix automàticament a <code>/cataleg</code>.</p>
  <!-- Component: Caixa d'advertiment -->
<div class="warning-box" role="alert" aria-live="assertive">
    <div class="component-header warning-header" role="heading" aria-level="4"><i class="bi bi-exclamation-triangle" aria-hidden="true"></i> Important</div>
    <strong>Atenció:</strong> Sempre cal <code>pathMatch: 'full'</code> amb <code>redirectTo</code> per evitar redireccions no desitjades.
</div>


  <p><strong>3. Ruta amb paràmetres (lectures posteriors):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{ path: &#39;detall/:id&#39;, component: DetallElementComponent }</code></pre>
  </div>
</div>

  <p><code>:id</code> és un paràmetre variable. <code>/detall/elem-001</code> i <code>/detall/elem-002</code> utilitzen la mateixa ruta.</p>

  <p><strong>4. Ruta comodí (404):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{ path: &#39;**&#39;, redirectTo: &#39;cataleg&#39; }</code></pre>
  </div>
</div>

  <p><code>**</code> coincideix amb qualsevol URL que no hagi coincidit abans. Sempre ha d'anar <strong>al final</strong> de l'array.</p>

  <h4>1.7.6. Ordre de les rutes: CRÍTIC</h4>
  <p>L'ordre de l'array <code>Routes</code> importa:</p>

  <p><strong>Exemple incorrecte:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// MALAMENT - El comodí està primer
export const routes: Routes = [
  { path: &#39;**&#39;, redirectTo: &#39;cataleg&#39; },  // Coincideix amb TOT
  { path: &#39;cerca&#39;, component: CercaComponent }  // Mai s&#39;arribarà aquí!
];</code></pre>
  </div>
</div>


  <p><strong>Exemple correcte:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// CORRECTE - Rutes específiques primer, comodí al final
export const routes: Routes = [
  { path: &#39;cerca&#39;, component: CercaComponent },
  { path: &#39;**&#39;, redirectTo: &#39;cataleg&#39; }  // Només coincideix si res més ho fa
];</code></pre>
  </div>
</div>


  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>Regla d'or:</strong> Rutes més específiques primer, comodí sempre al final.
    
</div>


  <h4>1.7.7. Exemple complet del fitxer</h4>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// src/app/app.routes.ts
import { Routes } from &#39;@angular/router&#39;;
import { CatalegPageComponent } from &#39;./pages/cataleg-page/cataleg-page.component&#39;;
import { FormulariCercaComponent } from &#39;./components/formulari-cerca/formulari-cerca.component&#39;;
import { PreferitsPanelComponent } from &#39;./components/preferits-panel/preferits-panel.component&#39;;

export const routes: Routes = [
  // Redirecció de l&#39;arrel
  { path: &#39;&#39;, redirectTo: &#39;cataleg&#39;, pathMatch: &#39;full&#39; },

  // Rutes principals
  { path: &#39;cataleg&#39;, component: CatalegPageComponent, title: &#39;Catàleg d\&#39;elements&#39; },
  { path: &#39;cerca&#39;, component: FormulariCercaComponent, title: &#39;Cerca d\&#39;elements&#39; },
  { path: &#39;preferits&#39;, component: PreferitsPanelComponent, title: &#39;Els meus preferits&#39; },

  // Ruta comodí (404)
  { path: &#39;**&#39;, redirectTo: &#39;cataleg&#39; }
];</code></pre>
  </div>
</div>


  <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> L'arxiu <code>app.routes.ts</code> conté un array <code>Routes</code> que mapeja URLs a components. L'ordre de les rutes és crític: específiques primer, comodí al final.
</div>


  <p><strong>Resultat:</strong> Teniu un fitxer de rutes estructurat correctament i compreniu com definir rutes bàsiques amb redireccions.</p>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.8. Definir primera ruta: path, component associat</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p><strong>Objectiu:</strong> Crear la primera ruta funcional de l'aplicació (<code>/cataleg</code>) i comprendre la relació path-component.</p>

  <h4>1.8.1. Afegir imports necessaris</h4>
  <p>Abans de definir rutes, cal importar els components que utilitzarem:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// src/app/app.routes.ts
import { Routes } from &#39;@angular/router&#39;;
import { CatalegPageComponent } from &#39;./pages/cataleg-page/cataleg-page.component&#39;;</code></pre>
  </div>
</div>


  <p><strong>Ruta de l'import:</strong> L'import utilitza una ruta <strong>relativa</strong> des de <code>app.routes.ts</code>:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">app.routes.ts
└── app/
    └── pages/
        └── cataleg-page/
            └── cataleg-page.component.ts</code></pre>
  </div>
</div>

  <p>Ruta relativa: <code>'./pages/cataleg-page/cataleg-page.component'</code></p>

  <h4>1.8.2. Definir la primera ruta</h4>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export const routes: Routes = [
  {
    path: &#39;cataleg&#39;,
    component: CatalegPageComponent,
    title: &#39;Catàleg d\&#39;elements&#39;
  }
];</code></pre>
  </div>
</div>


  <p><strong>Anàlisi de cada propietat:</strong></p>

  <p><strong>1. <code>path: 'cataleg'</code></strong></p>
  <ul>
    <li>Defineix la URL que activa aquesta ruta</li>
    <li><strong>Sense <code>/</code> inicial:</strong> Escriviu <code>'cataleg'</code>, NO <code>'/cataleg'</code></li>
    <li>Quan l'usuari navega a <code>http://localhost:4200/cataleg</code>, aquesta ruta s'activa</li>
    <li>Pot contenir caràcters alfanumèrics i guions: <code>'cerca-avancada'</code>, <code>'elements-populars'</code></li>
  </ul>

  <p><strong>2. <code>component: CatalegPageComponent</code></strong></p>
  <ul>
    <li>Especifica quin component es renderitzarà al <code>&lt;router-outlet&gt;</code></li>
    <li>Cal que el component estigui importat al principi del fitxer</li>
    <li>El component ha de ser standalone (Angular 18+) o estar declarat en un mòdul</li>
  </ul>

  <p><strong>3. <code>title: 'Catàleg d\'elements'</code></strong></p>
  <ul>
    <li>Estableix el títol de la pestanya del navegador</li>
    <li>Es veu a la pestanya i a l'historial del navegador</li>
    <li>Millora l'experiència d'usuari i el SEO</li>
    <li>Opcional, però recomanat</li>
  </ul>

  <h4>1.8.3. Provar la ruta manualment</h4>
  <p><strong>Pas 1:</strong> Assegureu-vos que <code>ng serve</code> està actiu:</p>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve</code></pre>
  </div>
</div>


  <p><strong>Pas 2:</strong> Obriu el navegador a:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">http://localhost:4200/cataleg</code></pre>
  </div>
</div>


  <p><strong>Què hauria de passar:</strong></p>
  <ol>
    <li>La URL del navegador mostra <code>/cataleg</code></li>
    <li>El títol de la pestanya canvia a "Catàleg d'elements"</li>
    <li><code>CatalegPageComponent</code> es renderitza (veureu el contingut del catàleg)</li>
  </ol>

  <h4>1.8.4. Afegir redirecció de l'arrel</h4>
  <p>Normalment no voleu que <code>/</code> mostri una pàgina buida. Afegiu una redirecció:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export const routes: Routes = [
  // Redirecció: / → /cataleg
  { path: &#39;&#39;, redirectTo: &#39;cataleg&#39;, pathMatch: &#39;full&#39; },

  // Ruta principal
  { path: &#39;cataleg&#39;, component: CatalegPageComponent, title: &#39;Catàleg d\&#39;elements&#39; }
];</code></pre>
  </div>
</div>


  <p><strong>Explicació de <code>pathMatch: 'full'</code>:</strong></p>
  <ul>
    <li><code>'full'</code>: La URL ha de coincidir <strong>exactament</strong> amb <code>''</code> (arrel)</li>
    <li>Sense <code>pathMatch: 'full'</code>, qualsevol URL començaria per <code>''</code> i sempre redirigiria</li>
  </ul>

  <!-- Component: Caixa d'advertiment -->
<div class="warning-box" role="alert" aria-live="assertive">
    <div class="component-header warning-header" role="heading" aria-level="4"><i class="bi bi-exclamation-triangle" aria-hidden="true"></i> Important</div>
    Sempre cal <code>pathMatch: 'full'</code> amb <code>redirectTo</code> per evitar redireccions no desitjades.
</div>


  <h4>1.8.5. Afegir més rutes</h4>
  <p>Seguint el mateix patró, afegiu les altres rutes:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export const routes: Routes = [
  { path: &#39;&#39;, redirectTo: &#39;cataleg&#39;, pathMatch: &#39;full&#39; },
  { path: &#39;cataleg&#39;, component: CatalegPageComponent, title: &#39;Catàleg d\&#39;elements&#39; },
  { path: &#39;cerca&#39;, component: FormulariCercaComponent, title: &#39;Cerca d\&#39;elements&#39; },
  { path: &#39;preferits&#39;, component: PreferitsPanelComponent, title: &#39;Els meus preferits&#39; }
];</code></pre>
  </div>
</div>


  <h4>1.8.6. Errors comuns i solucions</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa probable</th>
        <th>Solució</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>Cannot match any routes for URL</code></td>
        <td>Path escrit malament</td>
        <td>Verificar <code>path: 'cataleg'</code> sense <code>/</code></td>
      </tr>
      <tr>
        <td><code>Component is not a function</code></td>
        <td>Import incorrecte del component</td>
        <td>Verificar ruta d'import i que el component existeix</td>
      </tr>
      <tr>
        <td>Redirecció infinita</td>
        <td><code>pathMatch</code> oblidat</td>
        <td>Afegir <code>pathMatch: 'full'</code> a redireccions</td>
      </tr>
      <tr>
        <td>Component no es renderitza</td>
        <td><code>router-outlet</code> absent</td>
        <td>Afegir <code>&lt;router-outlet&gt;</code> a AppComponent (pròxima secció)</td>
      </tr>
    </tbody>
  </table>

  <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Cada ruta mapeja un <code>path</code> (URL) a un <code>component</code> (vista). Les redireccions necessiten <code>pathMatch: 'full'</code> per funcionar correctament.
</div>


  <p><strong>Resultat:</strong> Teniu 3-4 rutes definides i compreniu com relacionar URLs amb components.</p>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.9. Outlet de rutes: on es renderitzen els components de cada ruta</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p><strong>Objectiu:</strong> Afegir la directiva <code>&lt;router-outlet&gt;</code> al component principal i comprendre com funciona el punt d'injecció de components.</p>

  <h4>1.9.1. Què és el router-outlet</h4>
  <p><code>&lt;router-outlet&gt;</code> és una <strong>directiva</strong> d'Angular que actua com a <strong>marcador de posició</strong> (placeholder) on es renderitzen els components de les rutes actives.</p>

  <p><strong>Analogia:</strong> És com un marc de quadre on el Router "penja" el component que correspon a la ruta actual.</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;app&quot;&gt;
  &lt;nav&gt;...&lt;/nav&gt;

  &lt;main&gt;
    &lt;router-outlet&gt;&lt;/router-outlet&gt;
    &lt;!-- ↑ Aquí &quot;apareix&quot; CatalegComponent, CercaComponent, etc. --&gt;
  &lt;/main&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <h4>1.9.2. Comportament dinàmic del router-outlet</h4>
  <p>Quan l'usuari navega entre rutes, el Router:</p>
  <ol>
    <li><strong>Destrueix</strong> el component anterior (crida <code>ngOnDestroy()</code>)</li>
    <li><strong>Neteja</strong> el contingut del <code>&lt;router-outlet&gt;</code></li>
    <li><strong>Crea</strong> instància del nou component</li>
    <li><strong>Renderitza</strong> el nou component dins del <code>&lt;router-outlet&gt;</code></li>
    <li><strong>Inicialitza</strong> el component (crida <code>ngOnInit()</code>)</li>
  </ol>

  <p><strong>Exemple visual:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Estat inicial (URL: /cataleg):
&lt;router-outlet&gt;
  &lt;app-cataleg-page&gt;&lt;/app-cataleg-page&gt;  ← Component actiu
&lt;/router-outlet&gt;

Usuari clica &quot;Cerca&quot; → URL canvia a /cerca:
&lt;router-outlet&gt;
  &lt;!-- CatalegPageComponent destruït --&gt;
  &lt;app-formulari-cerca&gt;&lt;/app-formulari-cerca&gt;  ← Nou component
&lt;/router-outlet&gt;</code></pre>
  </div>
</div>


  <h4>1.9.3. Afegir router-outlet a AppComponent</h4>
  <p><strong>Pas 1:</strong> Obriu <code>src/app/app.component.ts</code></p>

  <p><strong>Pas 2:</strong> Importeu <code>RouterModule</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component } from &#39;@angular/core&#39;;
import { RouterModule } from &#39;@angular/router&#39;;  // ← Afegir

@Component({
  selector: &#39;app-root&#39;,
  standalone: true,
  imports: [RouterModule],  // ← Afegir
  templateUrl: &#39;./app.component.html&#39;,
  styleUrl: &#39;./app.component.scss&#39;
})
export class AppComponent {}</code></pre>
  </div>
</div>


  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>Per què cal importar RouterModule?</strong><br><code>RouterModule</code> proporciona les directives <code>router-outlet</code>, <code>routerLink</code> i <code>routerLinkActive</code>. Sense aquest import, Angular no reconeixerà aquestes directives.
    
</div>


  <p><strong>Pas 3:</strong> Actualitzeu la plantilla (<code>app.component.html</code>):</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;app-container&quot;&gt;
  &lt;header&gt;
    &lt;h1&gt;Catàleg d&#39;Elements&lt;/h1&gt;
  &lt;/header&gt;

  &lt;main&gt;
    &lt;router-outlet&gt;&lt;/router-outlet&gt;
  &lt;/main&gt;

  &lt;footer&gt;
    &lt;p&gt;&amp;copy; 2025 Catàleg Elements&lt;/p&gt;
  &lt;/footer&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p><strong>Estructura semàntica:</strong></p>
  <ul>
    <li><code>&lt;header&gt;</code>: Capçalera fixa de l'aplicació (sempre visible)</li>
    <li><code>&lt;main&gt;</code>: Contingut principal que canvia segons la ruta</li>
    <li><code>&lt;router-outlet&gt;</code>: Dins de <code>&lt;main&gt;</code>, marca on es renderitzen els components</li>
    <li><code>&lt;footer&gt;</code>: Peu fix de l'aplicació (sempre visible)</li>
  </ul>

  <h4>1.9.4. Verificar que funciona</h4>
  <p><strong>Pas 1:</strong> Assegureu-vos que <code>ng serve</code> està actiu</p>

  <p><strong>Pas 2:</strong> Obriu <code>http://localhost:4200/cataleg</code></p>

  <p><strong>Què hauria de passar:</strong></p>
  <ol>
    <li>Veieu el <code>&lt;header&gt;</code> amb "Catàleg d'Elements"</li>
    <li>Veieu el contingut de <code>CatalegPageComponent</code> (llistat d'elements)</li>
    <li>Veieu el <code>&lt;footer&gt;</code> amb el copyright</li>
    <li>La URL mostra <code>/cataleg</code></li>
  </ol>

  <p><strong>Pas 3:</strong> Canvieu manualment la URL a <code>http://localhost:4200/cerca</code></p>

  <p><strong>Què hauria de passar:</strong></p>
  <ol>
    <li>El <code>&lt;header&gt;</code> i <code>&lt;footer&gt;</code> es mantenen (no canvien)</li>
    <li>El contingut del <code>&lt;main&gt;</code> canvia (ara veieu <code>FormulariCercaComponent</code>)</li>
    <li><strong>NO hi ha recàrrega de pàgina</strong> (transició suau)</li>
  </ol>

  <h4>1.9.5. Errors comuns</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa</th>
        <th>Solució</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>router-outlet is not a known element</code></td>
        <td>RouterModule no importat</td>
        <td>Afegir <code>imports: [RouterModule]</code> a AppComponent</td>
      </tr>
      <tr>
        <td>Component no es renderitza</td>
        <td>router-outlet absent</td>
        <td>Afegir <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> a la plantilla</td>
      </tr>
    </tbody>
  </table>

  <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> <code>&lt;router-outlet&gt;</code> marca el lloc exacte on el Router injectarà els components de les rutes actives. Cal importar <code>RouterModule</code> per utilitzar aquesta directiva.
</div>


  <p><strong>Resultat:</strong> Teniu un router-outlet funcional i veieu com els components es renderitzen dinàmicament en navegar entre rutes.</p>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.10. Enllaços de navegació: crear menú amb rutes actives</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p><strong>Objectiu:</strong> Crear un menú de navegació amb la directiva <code>routerLink</code> i indicadors visuals de ruta activa amb <code>routerLinkActive</code>.</p>

  <h4>1.10.1. Problema amb enllaços tradicionals</h4>
  <p>Si utilitzeu enllaços HTML tradicionals:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;a href=&quot;/cataleg&quot;&gt;Catàleg&lt;/a&gt;</code></pre>
  </div>
</div>


  <p><strong>Què passa en clicar:</strong></p>
  <ol>
    <li>El navegador detecta el clic</li>
    <li>El navegador envia petició HTTP al servidor per <code>/cataleg</code></li>
    <li>El servidor respon amb <code>index.html</code></li>
    <li><strong>La pàgina es recarrega completament</strong></li>
    <li>Angular s'inicialitza de nou</li>
    <li>Es perd l'estat de l'aplicació</li>
  </ol>
  <p><strong>Temps total:</strong> 1-2 segons (recàrrega completa)</p>

  <h4>1.10.2. Solució amb routerLink</h4>
  <p><code>routerLink</code> és una directiva que intercepta clics i utilitza el Router d'Angular:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;a routerLink=&quot;/cataleg&quot;&gt;Catàleg&lt;/a&gt;</code></pre>
  </div>
</div>


  <p><strong>Què passa en clicar:</strong></p>
  <ol>
    <li><code>routerLink</code> detecta el clic</li>
    <li><code>routerLink</code> crida <code>event.preventDefault()</code> (evita recàrrega)</li>
    <li><code>routerLink</code> crida <code>router.navigate(['/cataleg'])</code></li>
    <li>El Router actualitza la URL</li>
    <li>El Router canvia el component al router-outlet</li>
    <li><strong>NO hi ha recàrrega de pàgina</strong></li>
  </ol>
  <p><strong>Temps total:</strong> 50-100 ms (transició suau)</p>

  <h4>1.10.3. Afegir menú de navegació a AppComponent</h4>
  <p><strong>Actualitzeu <code>app.component.html</code>:</strong></p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;app-container&quot;&gt;
  &lt;header&gt;
    &lt;h1&gt;Catàleg d&#39;Elements&lt;/h1&gt;

    &lt;nav class=&quot;menu-principal&quot;&gt;
      &lt;a routerLink=&quot;/cataleg&quot; routerLinkActive=&quot;actiu&quot;&gt;Catàleg&lt;/a&gt;
      &lt;a routerLink=&quot;/cerca&quot; routerLinkActive=&quot;actiu&quot;&gt;Cerca&lt;/a&gt;
      &lt;a routerLink=&quot;/preferits&quot; routerLinkActive=&quot;actiu&quot;&gt;Preferits&lt;/a&gt;
    &lt;/nav&gt;
  &lt;/header&gt;

  &lt;main&gt;
    &lt;router-outlet&gt;&lt;/router-outlet&gt;
  &lt;/main&gt;

  &lt;footer&gt;
    &lt;p&gt;&amp;copy; 2025 Catàleg Elements&lt;/p&gt;
  &lt;/footer&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p><strong>Explicació:</strong></p>
  <ul>
    <li><code>routerLink="/cataleg"</code>: Defineix la ruta destí (amb <code>/</code> inicial)</li>
    <li><code>routerLinkActive="actiu"</code>: Afegeix la classe CSS <code>actiu</code> quan aquesta ruta està activa</li>
  </ul>

  <h4>1.10.4. Indicador visual de ruta activa</h4>
  <p><code>routerLinkActive</code> afegeix automàticament una classe CSS quan la ruta està activa:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;a routerLink=&quot;/cataleg&quot; routerLinkActive=&quot;actiu&quot;&gt;Catàleg&lt;/a&gt;</code></pre>
  </div>
</div>


  <p><strong>Comportament:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">URL actual: /cataleg
  → Classe &#39;actiu&#39; s&#39;afegeix a l&#39;enllaç &quot;Catàleg&quot;
  → DOM: &lt;a class=&quot;actiu&quot;&gt;Catàleg&lt;/a&gt;

URL actual: /cerca
  → Classe &#39;actiu&#39; s&#39;elimina de &quot;Catàleg&quot;
  → Classe &#39;actiu&#39; s&#39;afegeix a l&#39;enllaç &quot;Cerca&quot;
  → DOM: &lt;a class=&quot;actiu&quot;&gt;Cerca&lt;/a&gt;</code></pre>
  </div>
</div>


  <h4>1.10.5. Afegir estils per a la ruta activa</h4>
  <p><strong>Actualitzeu <code>app.component.scss</code>:</strong></p>

<div class="code-block" data-lang="scss" role="region" aria-label="Bloc de codi scss">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">SCSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-scss">.app-container {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

header {
  background-color: #3498db;
  color: white;
  padding: 1rem 2rem;

  h1 {
    margin: 0 0 1rem;
    font-size: 1.8rem;
  }
}

.menu-principal {
  display: flex;
  gap: 1.5rem;

  a {
    color: white;
    text-decoration: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    transition: background-color 0.3s;

    &amp;:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

    &amp;.actiu {
      background-color: rgba(255, 255, 255, 0.2);
      font-weight: 600;
      border-bottom: 2px solid white;
    }
  }
}

main {
  flex: 1;
  padding: 2rem;
  background-color: #f5f5f5;
}

footer {
  background-color: #34495e;
  color: white;
  text-align: center;
  padding: 1rem;

  p {
    margin: 0;
  }
}</code></pre>
  </div>
</div>


  <p><strong>Efecte visual:</strong></p>
  <ul>
    <li>Enllaç normal: Text blanc sobre blau</li>
    <li>Enllaç hover: Fons lleugerament més clar</li>
    <li>Enllaç actiu: Fons més clar, text en negreta, línia blanca inferior</li>
  </ul>

  <h4>1.10.6. Provar el menú</h4>
  <p><strong>Pas 1:</strong> Assegureu-vos que <code>ng serve</code> està actiu</p>

  <p><strong>Pas 2:</strong> Obriu <code>http://localhost:4200</code></p>

  <p><strong>Pas 3:</strong> Observeu el menú:</p>
  <ul>
    <li>L'enllaç "Catàleg" hauria de tenir la classe <code>actiu</code> (fons més clar, negreta, línia)</li>
    <li>Feu clic a "Cerca"</li>
    <li>La URL canvia a <code>/cerca</code> <strong>sense recarregar</strong></li>
    <li>L'enllaç "Cerca" ara té la classe <code>actiu</code></li>
    <li>L'enllaç "Catàleg" perd la classe <code>actiu</code></li>
  </ul>

  <p><strong>Pas 4:</strong> Proveu el botó enrere del navegador:</p>
  <ul>
    <li>Hauria de tornar a <code>/cataleg</code></li>
    <li>L'indicador visual hauria de canviar automàticament</li>
  </ul>

  <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> <code>routerLink</code> permet navegació sense recàrrega i <code>routerLinkActive</code> proporciona feedback visual automàtic de la ruta actual.
</div>


  <p><strong>Resultat:</strong> Teniu un menú de navegació funcional amb indicadors visuals de ruta activa que millora l'experiència d'usuari.</p>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.11. Verificar al navegador: navegació funcional entre pàgines</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p><strong>Objectiu:</strong> Executar proves manuals per verificar que tot el sistema de rutes funciona correctament.</p>

  <h4>1.11.1. Checklist de verificació completa</h4>

  <p><strong>1. Càrrega inicial:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Obriu http://localhost:4200</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">La URL es redirigeix automàticament a /cataleg (gràcies a redirectTo)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Veieu el contingut de CatalegPageComponent</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">El títol de la pestanya és "Catàleg d'elements"</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">L'enllaç "Catàleg" al menú té la classe actiu</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>2. Navegació amb menú:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Feu clic a "Cerca" al menú</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">La URL canvia a /cerca sense recàrrega de pàgina (no hi ha parpelleig)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">El contingut canvia a FormulariCercaComponent</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">El títol de la pestanya canvia a "Cerca d'elements"</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">L'enllaç "Cerca" ara té la classe actiu</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">L'enllaç "Catàleg" perd la classe actiu</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>3. Navegació amb URL manual:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Escriviu manualment http://localhost:4200/cerca a la barra d'adreces</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Premeu Enter</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Veieu FormulariCercaComponent</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">L'indicador visual del menú mostra "Cerca" actiu</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>4. Botons de navegació del navegador:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Navegueu: Catàleg → Cerca → Preferits</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Feu clic al botó "Enrere" del navegador (2 vegades)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Hauríeu de tornar a Catàleg passant per Cerca</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Feu clic al botó "Endavant"</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Hauríeu d'avançar cap a Cerca</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>5. Recàrrega de pàgina (F5):</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Navegueu a /preferits</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Premeu F5 (recarregar pàgina)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Després de recarregar, encara esteu a /preferits</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">El contingut és PreferitsPanelComponent</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">L'indicador visual és correcte</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>6. Ruta inexistent (404):</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Escriviu manualment http://localhost:4200/ruta-inexistent</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">La URL es redirigeix a /cataleg (gràcies a la ruta comodí **)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Veieu el catàleg normalment</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <h4>1.11.2. Documentar la configuració</h4>
  <p>Creeu o actualitzeu <code>docs/navegacio.md</code>:</p>

<div class="code-block" data-lang="markdown" role="region" aria-label="Bloc de codi markdown">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">MARKDOWN</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-markdown"># Sistema de rutes

## Configuració bàsica

### Rutes definides

| Ruta | Component | Títol | Descripció |
|------|-----------|-------|------------|
| `/` | — | — | Redirigeix a `/cataleg` |
| `/cataleg` | CatalegPageComponent | Catàleg d&#39;elements | Llistat principal d&#39;elements |
| `/cerca` | FormulariCercaComponent | Cerca d&#39;elements | Formulari de cerca reactiu |
| `/preferits` | PreferitsPanelComponent | Els meus preferits | Llista de preferits amb notes |
| `/**` | — | — | Redirigeix a `/cataleg` (404) |

### Fitxers modificats

- `src/main.ts`: Afegit `provideRouter(routes)`
- `src/app/app.routes.ts`: Definició de rutes
- `src/app/app.component.ts`: Importat `RouterModule`
- `src/app/app.component.html`: Afegit `&lt;router-outlet&gt;` i menú de navegació
- `src/app/app.component.scss`: Estils per ruta activa

### Proves realitzades

- Navegació amb menú funcional
- Navegació amb URL manual funcional
- Botons enrere/endavant del navegador funcionals
- Recàrrega (F5) manté la ruta actual
- Rutes inexistents redireccionen a `/cataleg`
- Indicador visual de ruta activa funciona
- No hi ha recàrregues de pàgina en navegar

### Rendiment mesurat

- Càrrega inicial: ~1.2 MB, ~800 ms
- Navegació entre rutes: 0 KB, ~50 ms
- Millora vs pàgines tradicionals: 40-60x més ràpid</code></pre>
  </div>
</div>


  <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Les proves manuals exhaustives asseguren que el sistema de rutes funciona correctament en tots els escenaris (menú, URL manual, navegació del navegador, recàrregues, 404).
</div>


  <p><strong>Resultat:</strong> Teniu un sistema de rutes completament funcional i verificat, documentat i preparat per ampliacions futures (paràmetres, guards, lazy loading).</p>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.12. Mini exemple pràctic - Configuració de rutes bàsica</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <ol>
    <li><strong>Crear fitxer de rutes</strong> (<code>src/app/app.routes.ts</code>) amb array <code>Routes</code> buit</li>
    <li><strong>Configurar provideRouter</strong> a <code>src/main.ts</code> per habilitar el sistema de rutes globalment</li>
    <li><strong>Definir 3-4 rutes</strong> amb <code>path</code>, <code>component</code> i <code>title</code>, incloent redirecció d'arrel i ruta comodí</li>
    <li><strong>Importar RouterModule</strong> a <code>AppComponent</code> per utilitzar directives del Router</li>
    <li><strong>Afegir router-outlet</strong> a la plantilla d'<code>AppComponent</code> per marcar punt d'injecció de components</li>
    <li><strong>Crear menú de navegació</strong> amb <code>routerLink</code> i <code>routerLinkActive="actiu"</code> per enllaços amb indicadors visuals</li>
    <li><strong>Afegir estils</strong> per remarcar la ruta activa (fons diferent, negreta, subratllat)</li>
    <li><strong>Provar navegació</strong> amb menú, URL manual, botons enrere/endavant i recàrregues</li>
    <li><strong>Verificar rendiment</strong> amb DevTools Network (0 peticions HTTP en navegar)</li>
    <li><strong>Documentar configuració</strong> a <code>docs/navegacio.md</code> amb taula de rutes i proves realitzades</li>
  </ol>

  <p><strong>Resultat esperat:</strong> Aplicació amb 3-4 vistes navegables mitjançant menú i URL, amb transicions suaus sense recàrregues, botons del navegador funcionals i indicadors visuals de ruta activa.</p>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.13. Resolució de problemes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.13.1. Errors transversals (tots els sistemes operatius)</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa</th>
        <th>Solució</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>Cannot match any routes for URL: segment</code></td>
        <td>Ruta no definida a <code>app.routes.ts</code></td>
        <td>Afegir ruta: <code>{ path: 'segment', component: ComponentName }</code></td>
      </tr>
      <tr>
        <td><code>'router-outlet' is not a known element</code></td>
        <td><code>RouterModule</code> no importat</td>
        <td>Afegir <code>imports: [RouterModule]</code> a <code>AppComponent</code></td>
      </tr>
      <tr>
        <td><code>Cannot find name 'routes'</code></td>
        <td>Import oblidat a <code>main.ts</code></td>
        <td>Afegir <code>import { routes } from './app/app.routes'</code></td>
      </tr>
      <tr>
        <td><code>Component is not a function</code></td>
        <td>Import de component incorrecte</td>
        <td>Verificar: <code>import { Comp } from './path/comp.component'</code></td>
      </tr>
      <tr>
        <td>Redirecció infinita (<code>/</code> → <code>/cataleg</code> → <code>/</code> → ...)</td>
        <td><code>pathMatch</code> oblidat</td>
        <td>Afegir <code>pathMatch: 'full'</code> a redirecció</td>
      </tr>
      <tr>
        <td>Ruta comodí captura totes les rutes</td>
        <td>Comodí no està al final</td>
        <td>Moure <code>{ path: '**', ... }</code> al final de l'array</td>
      </tr>
      <tr>
        <td><code>routerLink</code> no fa res (recarrega pàgina)</td>
        <td>Atribut <code>href</code> en lloc de <code>routerLink</code></td>
        <td>Canviar <code>href="/ruta"</code> per <code>routerLink="/ruta"</code></td>
      </tr>
      <tr>
        <td>Classe <code>actiu</code> no s'aplica</td>
        <td><code>routerLinkActive</code> mal escrit</td>
        <td>Verificar: <code>routerLinkActive="actiu"</code> (cometes correctes)</td>
      </tr>
    </tbody>
  </table>

  <h4>1.13.2. Errors de configuració (multiplataforma)</h4>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa</th>
        <th>Solució</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>Cannot find module '@angular/router'</code></td>
        <td>Dependència no instal·lada</td>
        <td><code>npm install</code></td>
      </tr>
      <tr>
        <td><code>ng serve</code> no arrenca</td>
        <td>Port 4200 ocupat</td>
        <td><code>ng serve --port 4300</code></td>
      </tr>
      <tr>
        <td>Hot reload no funciona després de canviar rutes</td>
        <td>Cache de ng serve</td>
        <td>Aturar amb Ctrl+C i tornar a executar <code>ng serve</code></td>
      </tr>
    </tbody>
  </table>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.14. Prompts d'IA</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Ets un desenvolupador Angular senior especialitzat en sistemes de navegació i arquitectura SPA. <strong>Context:</strong> Estic aprenent a configurar el sistema de rutes d'Angular per primera vegada. He completat la lectura 4.1.1 on he configurat rutes bàsiques amb <code>routerLink</code>, <code>router-outlet</code> i <code>routerLinkActive</code>. <strong>Tasca:</strong> Crea una taula comparativa que m'ajudi a comprendre quan utilitzar cada tipus de navegació (routerLink vs navegació programàtica vs redireccions). Inclou 3-4 exemples pràctics per cada tipus. <strong>Format:</strong> Taula markdown amb columnes: Tipus de navegació | Quan utilitzar | Exemple de codi | Cas d'ús real.</div>
  </div>
</div>

<!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Ets un auditor de qualitat d'aplicacions web especialitzat en UX. <strong>Context:</strong> He configurat un sistema de rutes Angular amb 4 vistes principals (catàleg, cerca, preferits, detall). Cada ruta té el seu URL, títol i indicador visual de ruta activa al menú. <strong>Tasca:</strong> Genera un pla de proves manuals exhaustiu per verificar que el sistema de rutes funciona correctament. Inclou proves de navegació, URLs, botons del navegador, recàrregues i casos límit (URLs inexistents, etc.). <strong>Format:</strong> Llista numerada amb 15-20 casos de prova. Cada cas ha de tenir: Descripció de l'acció | Resultat esperat | Com verificar que funciona.</div>
  </div>
</div>


  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.15. Autoavaluació</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.15.1. Criteris objectius (Definition of Done)</h4>

  <p><strong>Configuració tècnica:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He configurat provideRouter(routes) a src/main.ts correctament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He creat src/app/app.routes.ts amb almenys 3 rutes definides</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He afegit redirecció de l'arrel (path: '') a una ruta principal</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He afegit ruta comodí (path: '**') al final de l'array per gestionar 404</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Cada ruta té path, component i title definits</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Component principal:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He importat RouterModule a AppComponent</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He afegit <router-outlet></router-outlet> a la plantilla</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He creat menú de navegació amb routerLink a cada vista</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He afegit routerLinkActive="actiu" a cada enllaç del menú</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He afegit estils CSS per remarcar la ruta activa</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Funcionalitat verificada:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc navegar entre vistes clicant el menú</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">La URL canvia correctament en navegar (sense recàrrega)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">El títol de la pestanya canvia segons la ruta</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">L'indicador visual mostra correctament la ruta activa</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">El botó "Enrere" del navegador funciona</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">El botó "Endavant" del navegador funciona</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc escriure URLs manualment i funcionen</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Recarregar (F5) manté la ruta actual</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">URLs inexistents redireccionen correctament</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Documentació:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He creat/actualitzat docs/navegacio.md amb taula de rutes</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He documentat les proves realitzades</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He documentat els fitxers modificats</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <h4>1.15.2. Competències adquirides</h4>

  <p><strong>Conceptes de navegació:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Comprenc què és una SPA i per què necessita sistema de rutes</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Identifico els avantatges de les rutes (organització, URLs, navegabilitat)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc la diferència entre pàgines tradicionals i SPAs amb Router</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé explicar com funciona el cicle de navegació (URL → Router → Component)</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Configuració d'Angular:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Configuro el Router a nivell d'aplicació amb provideRouter</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Creo fitxers de rutes amb l'estructura correcta</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Defineixo rutes amb path, component i title</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Implemento redireccions amb redirectTo i pathMatch: 'full'</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Gestiono rutes inexistents amb el comodí **</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Implementació de components:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Utilitzo <router-outlet> per marcar punt d'injecció de components</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Creo enllaços de navegació amb routerLink</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Implemento indicadors visuals amb routerLinkActive</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Aplico estils CSS per diferenciar rutes actives</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Debugging i verificació:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Utilitzo DevTools per verificar navegació sense peticions HTTP</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Comprovo que els botons del navegador funcionen correctament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Detecto i soluciono errors comuns de configuració</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Documento la configuració per a referència futura</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Bones pràctiques:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Organitzo rutes en fitxers separats</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Utilitzo routerLink en lloc de href per enllaços interns</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Afegeixo títols significatius a cada ruta per millorar UX i SEO</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Proporciono redirecció per rutes inexistents (UX)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Documento decisions tècniques</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.16. Síntesi</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.16.1. Què hem aconseguit</h4>
  <p>Disposeu d'un <strong>sistema de rutes funcional</strong> a l'aplicació Angular del catàleg d'elements:</p>
  <ol>
    <li><strong>Configuració global:</strong> <code>provideRouter(routes)</code> a <code>main.ts</code> habilita el Router a tota l'aplicació</li>
    <li><strong>Mapa de rutes:</strong> <code>app.routes.ts</code> defineix 3-4 rutes principals amb URLs significatives</li>
    <li><strong>Redireccions intel·ligents:</strong> Arrel redirigeix a catàleg, rutes inexistents gestionen 404</li>
    <li><strong>Punt d'injecció:</strong> <code>&lt;router-outlet&gt;</code> marca on es renderitzen components de rutes actives</li>
    <li><strong>Menú de navegació:</strong> Enllaços amb <code>routerLink</code> permeten navegació fluida sense recàrregues</li>
    <li><strong>Indicadors visuals:</strong> <code>routerLinkActive</code> mostra automàticament quina ruta està activa</li>
    <li><strong>Navegació completa:</strong> Menú, URLs manuals, botons del navegador, tot funciona coherentment</li>
  </ol>

  <h4>1.16.2. Què queda preparat per a la següent lectura</h4>
  <p>A la <strong>Lectura 4.1.2 (Paràmetres de ruta i navegació programàtica)</strong> podreu:</p>
  <ul>
    <li>Afegir <strong>rutes amb paràmetres</strong> per passar IDs (<code>/detall/:id</code>)</li>
    <li>Capturar <strong>paràmetres al component</strong> amb <code>ActivatedRoute</code></li>
    <li>Implementar <strong>navegació programàtica</strong> des del TypeScript (<code>router.navigate()</code>)</li>
    <li>Utilitzar <strong>query params</strong> per filtres opcionals (<code>/cerca?q=arduino&categoria=electronics</code>)</li>
    <li>Passar <strong>estat temporal</strong> entre rutes sense mostrar-lo a la URL</li>
  </ul>

  <h4>1.16.3. Contracte de sortida</h4>
  <ul>
    <li><i class="bi bi-check-circle text-success"></i> Sistema de rutes configurat i funcional</li>
    <li><i class="bi bi-check-circle text-success"></i> Mapa de rutes amb 3-4 vistes principals</li>
    <li><i class="bi bi-check-circle text-success"></i> Menú de navegació amb indicadors visuals</li>
    <li><i class="bi bi-check-circle text-success"></i> URLs significatives i compartibles</li>
    <li><i class="bi bi-check-circle text-success"></i> Botons del navegador funcionals</li>
    <li><i class="bi bi-check-circle text-success"></i> Navegació sense recàrregues de pàgina</li>
    <li><i class="bi bi-check-circle text-success"></i> Gestió de rutes inexistents (404)</li>
    <li><i class="bi bi-check-circle text-success"></i> Documentació tècnica de la configuració</li>
  </ul>

  <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Esteu preparats per aprendre navegació avançada amb paràmetres!</strong>
</div>


  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.17. Repàs de conceptes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.17.1. Conceptes fonamentals</h4>
  <ul>
    <li><strong>SPA (Single Page Application):</strong> Aplicació web que carrega un sol HTML i actualitza contingut dinàmicament sense recàrregues</li>
    <li><strong>Router d'Angular:</strong> Servei que mapeja URLs a components i gestiona navegació sense recàrregues</li>
    <li><strong>Routes array:</strong> Col·lecció d'objectes que defineixen les rutes de l'aplicació</li>
    <li><strong>path:</strong> URL que activa una ruta (sense <code>/</code> inicial)</li>
    <li><strong>component:</strong> Component que es renderitza quan la ruta s'activa</li>
    <li><strong>redirectTo:</strong> Redirigeix automàticament a una altra ruta</li>
    <li><strong>pathMatch:</strong> <code>'full'</code> assegura coincidència exacta per redireccions</li>
    <li><strong>Ruta comodí (<code>**</code>):</strong> Captura URLs que no coincideixen amb cap altra ruta (404)</li>
  </ul>

  <h4>1.17.2. Directives del Router</h4>
  <ul>
    <li><strong>router-outlet:</strong> Marca el punt d'injecció on es renderitzen components de rutes actives</li>
    <li><strong>routerLink:</strong> Crea enllaços de navegació interna sense recàrregues</li>
    <li><strong>routerLinkActive:</strong> Afegeix classe CSS automàticament quan la ruta està activa</li>
  </ul>

  <h4>1.17.3. Configuració</h4>
  <ul>
    <li><strong>provideRouter(routes):</strong> Funció que configura el Router globalment a l'aplicació (Angular 18+)</li>
    <li><strong>RouterModule:</strong> Mòdul que proporciona directives i serveis del Router</li>
    <li><strong>main.ts:</strong> Punt d'entrada on es configura <code>provideRouter</code></li>
    <li><strong>app.routes.ts:</strong> Fitxer estàndard on es defineixen les rutes</li>
  </ul>

  <h4>1.17.4. Flux de navegació</h4>
  <ol>
    <li>Usuari clica enllaç amb <code>routerLink</code> o escriu URL manualment</li>
    <li>Router intercepta l'acció i actualitza la URL del navegador</li>
    <li>Router consulta el mapa de rutes per trobar coincidència</li>
    <li>Router destrueix el component anterior (crida <code>ngOnDestroy</code>)</li>
    <li>Router crea instància del nou component</li>
    <li>Router renderitza el nou component al <code>router-outlet</code></li>
    <li>Router inicialitza el component (crida <code>ngOnInit</code>)</li>
  </ol>

  
  </div>
</div>


</div>

<!-- SECCIÓ 2: Paràmetres de ruta i navegació programàtica -->
<div class="section" id="Unitat4_Bloc1_Seccio2">
  <h2 id="Unitat4_Bloc1_Seccio2">2. Paràmetres de ruta i navegació programàtica</h2>

  <!-- MULTIMÈDIA -->
  <!--
  ════════════════════════════════════════════════════════════════
  Component: Enllaços multimèdia YouTube
  ════════════════════════════════════════════════════════════════

  Paràmetres:
    - unitat: número de la unitat (1-4)
    - bloc: número del bloc (1-4)
    - seccio: número de la secció (1-3)

  Exemple d'ús:
    {% include multimedia-youtube.html unitat=1 bloc=1 seccio=1 %}

  El component busca automàticament les URLs corresponents a
  site.data.multimedia i mostra els botons de vídeo i àudio.
  ════════════════════════════════════════════════════════════════
-->





  
  
  
  
  

  

  

  
<div class="multimedia-resources">
  <div class="multimedia-header">
    <i class="bi bi-play-circle-fill"></i>
    <span>Contingut multimèdia d'aquesta lectura</span>
  </div>

  <div class="multimedia-buttons">
    
    <a href="https://www.youtube.com/watch?v=3a5JaCYxfls" target="_blank" rel="noopener noreferrer" class="multimedia-btn video-btn" title="Lectura 4.1.2 · Paràmetres de ruta i navegació programàtica">
      <i class="bi bi-youtube"></i>
      <span>Veure vídeo</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    

    
    <a href="https://www.youtube.com/watch?v=sBswC_Mlcbs" target="_blank" rel="noopener noreferrer" class="multimedia-btn audio-btn" title="[Audio] Lectura 4.1.2 · Paràmetres de ruta i navegació programàtica">
      <i class="bi bi-mic-fill"></i>
      <span>Escoltar àudio</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    
  </div>

  
  
</div>
  




  <!-- Component: Objectius del bloc/unitat -->



<div class="objectius-box">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-bullseye" aria-hidden="true"></i> Objectius</div>
  <div class="component-content">
    <ul>
      
        <li>Definir rutes amb paràmetres obligatoris (:id) i capturar-los als components</li>
      
        <li>Utilitzar query params per a paràmetres opcionals (filtres, cerca, paginació)</li>
      
        <li>Implementar navegació programàtica des de codi TypeScript amb Router</li>
      
        <li>Passar dades temporals entre vistes durant la navegació sense exposar-les a la URL</li>
      
    </ul>
  </div>
  <!-- IMPORTANT: també es pot usar via front matter: page.objectius (array) -->
</div>



  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>RA4 · Criteri 1</strong> — Configura la navegació entre pantalles i la gestió de paràmetres.
    
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.1. Prerequisits</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<p>Abans de començar, necessiteu:</p>
<ul>
<li><strong>Lectura 4.1.1 completada:</strong> Sistema de rutes configurat amb navegació bàsica funcional</li>
<li><strong>Projecte catalog-elements operatiu:</strong> Aplicació executant-se amb <code>ng serve --port 4300</code> sense errors</li>
<li><strong>Components de llistat i detall:</strong> Mínim un component de llista d'elements i un component de detall preparat (pot estar buit)</li>
<li><strong>Servei amb dades:</strong> Servei que retorna llista d'elements amb identificador únic (pot usar JSONPlaceholder)</li>
</ul>
<p><strong>Verificació ràpida:</strong></p>
<p><strong>PowerShell (Windows):</strong></p>

<div class="code-block" data-lang="powershell" role="region" aria-label="Bloc de codi powershell">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">POWERSHELL</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-powershell">Set-Location $env:USERPROFILE\workspace\catalog-elements
Get-Content .\src\app\navegacio\app.routes.ts</code></pre>
  </div>
</div>

<p><strong>bash/zsh (macOS/Linux):</strong></p>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">cd ~/workspace/catalog-elements
cat src/app/navegacio/app.routes.ts</code></pre>
  </div>
</div>

<p><strong>Punt d'autocomprovació:</strong> Heu de veure almenys 2-3 rutes definides (per exemple: <code>''</code>, <code>'cataleg'</code>, <code>'preferits'</code>). Si obriu l'aplicació al navegador (<code>http://localhost:4300</code>), heu de poder navegar entre les diferents rutes clicant enllaços del menú.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.2. Marc conceptual</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.2.1. Què són els paràmetres de ruta i la navegació programàtica</h4>
<p>Els <strong>paràmetres de ruta</strong> són valors dinàmics que es passen com a part de la URL per identificar recursos específics. Per exemple, <code>/cataleg/42</code> on <code>42</code> és l'identificador d'un element. La <strong>navegació programàtica</strong> permet navegar entre vistes des de codi TypeScript (no només amb enllaços HTML), proporcionant control total sobre el moment i la manera de navegar.</p>
<h4>2.2.2. Problema sense paràmetres de ruta ni navegació programàtica</h4>
<p><strong>Situació abans:</strong></p>
<p>Imagineu una aplicació de catàleg amb 500 elements. Sense paràmetres de ruta, heu de crear 500 rutes estàtiques diferents:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export const routes: Routes = [
  { path: &#39;element-1&#39;, component: DetallComponent },
  { path: &#39;element-2&#39;, component: DetallComponent },
  { path: &#39;element-3&#39;, component: DetallComponent },
  // ... 497 rutes més ...
  { path: &#39;element-500&#39;, component: DetallComponent }
];</code></pre>
  </div>
</div>

<p><strong>Estructura sense navegació programàtica:</strong></p>
<p>Sense navegació programàtica, només podeu navegar amb enllaços HTML. Això impedeix navegar després de validacions, operacions asíncrones o lògica condicional:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div *ngFor=&quot;let element of elements&quot;&gt;
  &lt;a [routerLink]=&quot;[&#39;/element-&#39; + element.id]&quot;&gt;&lt;/a&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<p><strong>Problemes que genera:</strong></p>
<p><strong>1. Impossibilitat de crear aplicacions dinàmiques amb dades variables</strong></p>
<p>Amb rutes estàtiques, cada nou element del catàleg requereix afegir una ruta manualment al codi font. Si els elements venen d'una base de dades (API externa), això és completament inviable.</p>
<p><strong>Exemple real:</strong> Una botiga online amb 10.000 productes. Cada dia s'afegeixen 50 productes nous. Sense paràmetres de ruta, hauríeu de:</p>
<ol>
<li>Editar <code>app.routes.ts</code> manualment per afegir 50 rutes noves</li>
<li>Re-compilar l'aplicació</li>
<li>Re-desplegar al servidor</li>
</ol>
<p><strong>Resultat:</strong> Inviable. Amb paràmetres de ruta, una sola ruta <code>/producte/:id</code> gestiona tots els productes (actuals i futurs).</p>
<p><strong>2. Duplicació massiva de codi sense reutilització</strong></p>
<p>Sense paràmetres, cada ruta apunta al mateix component però no podem reutilitzar-lo eficaç. Acabem duplicant lògica o creant components massa genèrics que no saben quin element mostrar.</p>
<p><strong>Exemple de duplicació:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class DetallElement1Component {
  element = { id: 1, nom: &#39;Element 1&#39;, preu: 15 };
}
export class DetallElement2Component {
  element = { id: 2, nom: &#39;Element 2&#39;, preu: 22 };
}
// ... 498 components més amb codi gairebé idèntic!</code></pre>
  </div>
</div>

<p><strong>Cost de manteniment:</strong> Canviar la plantilla de detall requereix modificar 500 fitxers!</p>
<p><strong>3. URLs no amigables i problemes de SEO</strong></p>
<p>Sense query params per a filtres i opcions, heu de crear rutes estàtiques per a cada combinació:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{ path: &#39;cataleg-categoria-1&#39;, component: CatalegComponent },
{ path: &#39;cataleg-categoria-2&#39;, component: CatalegComponent },
{ path: &#39;cataleg-categoria-1-preu-baix&#39;, component: CatalegComponent },
{ path: &#39;cataleg-categoria-1-preu-alt&#39;, component: CatalegComponent },
{ path: &#39;cataleg-categoria-2-preu-baix&#39;, component: CatalegComponent },
// ... 1000+ rutes per totes les combinacions!</code></pre>
  </div>
</div>

<p><strong>Amb 5 categories, 3 opcions de preu i 4 opcions d'ordenació:</strong> 5 × 3 × 4 = <strong>60 rutes diferents</strong> només per filtres bàsics!</p>
<p><strong>Problema SEO:</strong> Google penalitza URLs no amigables. <code>/cataleg-categoria-1-preu-baix-ordenacio-nom-asc</code> és horrorosa. Amb query params: <code>/cataleg?categoria=1&preu=baix&ordre=nom</code> és molt més clara i indexable.</p>
<p><strong>4. Impossibilitat de navegar després de validacions o operacions</strong></p>
<p>Només amb enllaços HTML (<code>&lt;a routerLink&gt;</code>), no podeu navegar després de:</p>
<ul>
<li>Validar un formulari</li>
<li>Desar dades a la base de dades</li>
<li>Comprovar permisos d'usuari</li>
<li>Mostrar un diàleg de confirmació</li>
</ul>
<p><strong>Exemple real - Formulari de creació:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">crearElement(dades: Element): void {
  this.service.crear(dades).subscribe({
    next: (elementCreat) =&gt; {
      // COM NAVEGO A /element/42 des d&#39;aquí?
      // NO puc usar routerLink perquè és HTML, no TypeScript
    }
  });
}</code></pre>
  </div>
</div>

<p><strong>Resultat:</strong> No podeu navegar al detall de l'element acabat de crear perquè no teniu control programàtic de la navegació.</p>
<p><strong>5. Experiència d'usuari limitada sense control de navegació</strong></p>
<p>No podeu implementar fluxos complexos com:</p>
<ul>
<li>Navegar automàticament després de 3 segons</li>
<li>Redirigir segons el rol de l'usuari (admin vs usuari normal)</li>
<li>Navegar amb condicions (si té permisos → detall, si no → llista)</li>
<li>Passar dades temporals sense exposar-les a la URL (informació sensible)</li>
</ul>
<p><strong>Exemple - Redirecció condicional:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">iniciarSessio(credencials): void {
  this.authService.login(credencials).subscribe({
    next: (usuari) =&gt; {
      if (usuari.rol === &#39;admin&#39;) {
        // Vull navegar a /admin-panel
      } else {
        // Vull navegar a /cataleg
      }
      // COM HO FER sense navegació programàtica?
    }
  });
}</code></pre>
  </div>
</div>

<h4>2.2.3. Solució amb paràmetres de ruta i navegació programàtica</h4>
<p>Els paràmetres de ruta permeten crear URLs dinàmiques que s'adapten a qualsevol dada. La navegació programàtica proporciona control total sobre quan i com navegar des de codi TypeScript.</p>
<p><strong>Avantatges principals:</strong></p>
<p><strong>1. Una sola ruta per a recursos dinàmics infinits</strong></p>
<p>Amb paràmetres, una ruta <code>/cataleg/:id</code> gestiona 1, 100 o 10.000 elements sense modificar el codi.</p>
<p><strong>2. Reutilització completa de components</strong></p>
<p>Un únic component <code>DetallComponent</code> serveix per mostrar qualsevol element, capturant l'ID de la ruta i carregant les dades corresponents.</p>
<p><strong>3. URLs amigables i SEO-friendly</strong></p>
<p>Query params permeten filtres clarament separats: <code>/cataleg?categoria=electrònica&preu=baix&ordre=nom</code>.</p>
<p><strong>4. Control total de la navegació</strong></p>
<p>Podeu navegar després de validacions, operacions asíncrones, condicions complexes i amb dades temporals no visibles a la URL.</p>
<p><strong>5. Fluxos d'usuari sofisticats</strong></p>
<p>Implementeu redireccions condicionals, navegació automàtica, passada de dades sensibles i qualsevol lògica personalitzada.</p>
<h4>2.2.4. Exemple real: Abans vs Després dels paràmetres de ruta</h4>
<p><strong>ABANS (500 rutes estàtiques):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export const routes: Routes = [
  { path: &#39;element-1&#39;, component: DetallElement1Component },
  { path: &#39;element-2&#39;, component: DetallElement2Component },
  { path: &#39;element-3&#39;, component: DetallElement3Component },
  // ... 497 rutes més ...
];
export class DetallElement1Component {
  element = { id: 1, nom: &#39;Portàtil Dell&#39;, preu: 850 };
}
export class DetallElement2Component {
  element = { id: 2, nom: &#39;Ratolí Logitech&#39;, preu: 25 };
}</code></pre>
  </div>
</div>

<p><strong>Cost de desenvolupament:</strong> 500 components × 5 minuts/component = <strong>42 hores</strong> només per crear els components!</p>
<p><strong>DESPRÉS (1 ruta dinàmica amb paràmetre):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export const routes: Routes = [
  { path: &#39;element/:id&#39;, component: DetallComponent }
];
export class DetallComponent implements OnInit {
  element?: Element;
  constructor(
    private route: ActivatedRoute,
    private service: ElementsService
  ) {}
  ngOnInit(): void {
    const id = Number(this.route.snapshot.paramMap.get(&#39;id&#39;));
    this.service.obtenirPerID(id).subscribe(element =&gt; {
      this.element = element;
    });
  }
}</code></pre>
  </div>
</div>

<p><strong>Cost de desenvolupament:</strong> 1 component × 5 minuts = <strong>5 minuts</strong>. Estalvi: 41 hores 55 minuts! (99.8% reducció)</p>
<p><strong>URLs generades automàticament:</strong></p>
<ul>
<li><code>/element/1</code> → Mostra Portàtil Dell</li>
<li><code>/element/2</code> → Mostra Ratolí Logitech</li>
<li><code>/element/42</code> → Mostra qualsevol element amb ID 42</li>
<li><code>/element/9999</code> → Funciona per a elements futurs sense canvis de codi</li>
</ul>
<h4>2.2.5. Exemple real: Navegació només amb enllaços vs Navegació programàtica</h4>
<p><strong>ABANS (només enllaços HTML):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">crearElement(formulari: FormGroup): void {
  if (formulari.invalid) {
    return;
  }
  this.service.crear(formulari.value).subscribe({
    next: (elementCreat) =&gt; {
      console.log(&#39;Element creat amb ID:&#39;, elementCreat.id);
    }
  });
}</code></pre>
  </div>
</div>

<p><strong>Experiència d'usuari:</strong> L'usuari clica "Crear", veu un missatge "Element creat", però ha de clicar un altre enllaç per veure el detall. 2 clics en lloc d'1!</p>
<p><strong>DESPRÉS (navegació programàtica):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">constructor(
  private router: Router,
  private service: ElementsService
) {}
crearElement(formulari: FormGroup): void {
  if (formulari.invalid) {
    return;
  }
  this.service.crear(formulari.value).subscribe({
    next: (elementCreat) =&gt; {
      this.router.navigate([&#39;/element&#39;, elementCreat.id]);
    },
    error: (error) =&gt; {
      alert(&#39;Error al crear element&#39;);
    }
  });
}</code></pre>
  </div>
</div>

<p><strong>Experiència d'usuari:</strong> L'usuari clica "Crear" i <strong>automàticament</strong> veu el detall del nou element. 1 clic, transició fluida! (50% reducció de fricció)</p>
<h4>2.2.6. Comparativa quantitativa: Abans vs Després</h4>
<table>
<thead>
<tr>
<th>Mètrica</th>
<th>Abans (estàtic)</th>
<th>Després (paràmetres + navegació programàtica)</th>
<th>Millora</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Rutes necessàries</strong></td>
<td>500 (1 per element)</td>
<td>1 (<code>/element/:id</code>)</td>
<td><strong>-99.8%</strong></td>
</tr>
<tr>
<td><strong>Components necessaris</strong></td>
<td>500</td>
<td>1</td>
<td><strong>-99.8%</strong></td>
</tr>
<tr>
<td><strong>Temps de desenvolupament</strong></td>
<td>42 hores</td>
<td>5 minuts</td>
<td><strong>-99.8%</strong></td>
</tr>
<tr>
<td><strong>Línies de codi</strong></td>
<td>15.000 (500 × 30 línies)</td>
<td>30</td>
<td><strong>-99.8%</strong></td>
</tr>
<tr>
<td><strong>Clics per veure detall després de crear</strong></td>
<td>2 (crear + enllaç)</td>
<td>1 (crear → auto-navega)</td>
<td><strong>-50%</strong></td>
</tr>
<tr>
<td><strong>Suport per elements futurs</strong></td>
<td>Cal afegir ruta manualment</td>
<td>Automàtic</td>
<td><strong>∞</strong></td>
</tr>
<tr>
<td><strong>Flexibilitat de filtres</strong></td>
<td>60 rutes (explosió combinatòria)</td>
<td>1 ruta + query params</td>
<td><strong>-98.3%</strong></td>
</tr>
</tbody>
</table>
<h4>2.2.7. Taula de conceptes clau</h4>
<table>
<thead>
<tr>
<th>Concepte</th>
<th>Definició</th>
<th>Exemple d'ús</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Route params</strong></td>
<td>Paràmetres obligatoris definits amb <code>:nom</code> a la ruta</td>
<td><code>/element/:id</code> → <code>/element/42</code></td>
</tr>
<tr>
<td><strong>Query params</strong></td>
<td>Paràmetres opcionals afegits amb <code>?clau=valor</code></td>
<td><code>/cataleg?categoria=3&preu=baix</code></td>
</tr>
<tr>
<td><strong>ActivatedRoute</strong></td>
<td>Servei que proporciona accés als paràmetres de la ruta actual</td>
<td><code>this.route.snapshot.paramMap.get('id')</code></td>
</tr>
<tr>
<td><strong>Router</strong></td>
<td>Servei per a navegació programàtica des de TypeScript</td>
<td><code>this.router.navigate(['/element', 42])</code></td>
</tr>
<tr>
<td><strong>paramMap</strong></td>
<td>Mapa de paràmetres de ruta (route params)</td>
<td><code>paramMap.get('id')</code> retorna <code>'42'</code></td>
</tr>
<tr>
<td><strong>queryParamMap</strong></td>
<td>Mapa de query params</td>
<td><code>queryParamMap.get('categoria')</code> retorna <code>'3'</code></td>
</tr>
<tr>
<td><strong>snapshot</strong></td>
<td>Captura instantània dels paràmetres (no reactiva)</td>
<td><code>snapshot.paramMap.get('id')</code> - valor actual</td>
</tr>
<tr>
<td><strong>subscribe</strong></td>
<td>Subscripció reactiva als canvis de paràmetres</td>
<td><code>this.route.paramMap.subscribe(...)</code> - reacciona a canvis</td>
</tr>
<tr>
<td><strong>NavigationExtras</strong></td>
<td>Opcions addicionals per a navegació (query params, estat, etc.)</td>
<td><code>{ queryParams: { filtre: 'actiu' } }</code></td>
</tr>
<tr>
<td><strong>Router state</strong></td>
<td>Estat temporal passat durant la navegació (no visible a la URL)</td>
<td><code>{ state: { dadesSensibles: {...} } }</code></td>
</tr>
</tbody>
</table>
<h4>2.2.8. Quan usar paràmetres de ruta vs query params</h4>
<p><strong><i class="bi bi-check-circle" aria-hidden="true"></i> Usar route params (<code>:id</code>) quan:</strong></p>
<ul>
<li>L'identificador és <strong>obligatori</strong> per renderitzar la vista (sense ell, la pàgina no té sentit)</li>
<li>Exemple: <code>/element/42</code> - sense ID, no hi ha element a mostrar</li>
<li>Exemple: <code>/usuari/maria</code> - sense nom d'usuari, no hi ha perfil</li>
</ul>
<p><strong><i class="bi bi-check-circle" aria-hidden="true"></i> Usar query params (<code>?clau=valor</code>) quan:</strong></p>
<ul>
<li>Els paràmetres són <strong>opcionals</strong> i la vista té un estat per defecte sense ells</li>
<li>Exemple: <code>/cataleg?categoria=3&ordre=preu</code> - sense paràmetres, mostra tots els elements sense filtrar</li>
<li>Exemple: <code>/cerca?q=angular&pàgina=2</code> - sense query, mostra pàgina 1 sense cerca</li>
</ul>
<p><strong><i class="bi bi-x-circle" aria-hidden="true"></i> NO barrejar-los incorrectament:</strong></p>
<ul>
<li><i class="bi bi-x-circle" aria-hidden="true"></i> <code>/cataleg/:categoria/:ordre</code> - Forçar l'usuari a especificar categoria i ordre sempre</li>
<li><i class="bi bi-check-circle" aria-hidden="true"></i> <code>/cataleg?categoria=3&ordre=preu</code> - Opcionals, poden ometre's</li>
</ul>
<p><strong>Regla pràctica:</strong> Si pots dir "la pàgina encara té sentit sense aquest valor", és un query param. Si dius "sense aquest valor, no hi ha res a mostrar", és un route param.</p>
<h4>2.2.9. Característiques principals dels paràmetres i navegació programàtica</h4>
<p><strong>1. Captura reactiva i estàtica de paràmetres</strong></p>
<p>Angular ofereix dos mètodes per capturar paràmetres:</p>
<ul>
<li><strong>snapshot:</strong> Captura instantània (més ràpid, no reactiu)</li>
<li><strong>subscribe:</strong> Subscripció reactiva (actualitza automàticament si els paràmetres canvien)</li>
</ul>
<p><strong>Snapshot (ús més comú):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const id = this.route.snapshot.paramMap.get(&#39;id&#39;);</code></pre>
  </div>
</div>

<p><strong>Subscribe (quan els paràmetres canvien sense recarregar el component):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.route.paramMap.subscribe(params =&gt; {
  const id = params.get(&#39;id&#39;);
});</code></pre>
  </div>
</div>

<p><strong>Quan usar cada un:</strong></p>
<ul>
<li><strong>Snapshot:</strong> 95% dels casos. Quan navegueu a <code>/element/42</code>, el component es destrueix i es crea de nou amb el nou ID</li>
<li><strong>Subscribe:</strong> Casos especials on Angular reutilitza el mateix component amb diferent ID (rutes niades complexes)</li>
</ul>
<p><strong>2. Navegació programàtica amb múltiples opcions</strong></p>
<p>El servei <code>Router</code> proporciona diversos mètodes de navegació:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigate([&#39;/element&#39;, 42]);
this.router.navigate([&#39;/cataleg&#39;], {
  queryParams: { categoria: 3, ordre: &#39;preu&#39; }
});
this.router.navigate([&#39;/detall&#39;], {
  state: { dadesSensibles: { token: &#39;abc123&#39; } }
});
this.router.navigate([&#39;../germà&#39;], { relativeTo: this.route });</code></pre>
  </div>
</div>

<p><strong>3. Passar dades temporals amb Router state</strong></p>
<p>Podeu passar dades entre components sense exposar-les a la URL (útil per dades sensibles o grans):</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigate([&#39;/confirmacio&#39;], {
  state: { comanda: { productes: [...], total: 350 } }
});
constructor(private router: Router) {
  const navigation = this.router.getCurrentNavigation();
  const state = navigation?.extras.state as { comanda: Comanda };
  this.comanda = state?.comanda;
}</code></pre>
  </div>
</div>

<p><strong>Avantatge:</strong> Les dades NO apareixen a la URL (més netes, més segures).<br><strong>Desavantatge:</strong> Si l'usuari recarrega la pàgina (F5), les dades es perden (no persisteixen).</p>
<p><strong>4. Combinació de route params i query params</strong></p>
<p>Podeu combinar ambdós tipus en la mateixa navegació:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigate([&#39;/element&#39;, 42], {
  queryParams: { vista: &#39;detallada&#39;, llegir: &#39;false&#39; }
});
// Resultat: /element/42?vista=detallada&amp;llegir=false</code></pre>
  </div>
</div>

<p><strong>Captura als dos llocs:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const id = this.route.snapshot.paramMap.get(&#39;id&#39;);
const vista = this.route.snapshot.queryParamMap.get(&#39;vista&#39;);
const llegir = this.route.snapshot.queryParamMap.get(&#39;llegir&#39;);</code></pre>
  </div>
</div>

<p><strong>5. Validació i conversió de tipus</strong></p>
<p>Els paràmetres de ruta i query params <strong>sempre són strings</strong>. Cal convertir-los:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const id = Number(this.route.snapshot.paramMap.get(&#39;id&#39;));
const idString = this.route.snapshot.paramMap.get(&#39;id&#39;);
const id = Number(idString);
if (isNaN(id) || id &lt;= 0) {
  this.router.navigate([&#39;/error&#39;]);
  return;
}
this.service.obtenirPerID(id).subscribe(...);</code></pre>
  </div>
</div>

<h4>2.2.10. Integració amb el flux de treball del projecte catalog-elements</h4>
<p>En el projecte <code>catalog-elements</code>, aplicarem paràmetres de ruta per navegar del llistat al detall d'elements, i navegació programàtica per redirigir després d'operacions com afegir a preferits:</p>
<p><strong>Rutes amb paràmetres:</strong></p>
<ul>
<li><code>/cataleg</code> - Llista tots els elements</li>
<li><code>/cataleg/:id</code> - Detall d'un element específic (ID capturat dinàmicament)</li>
<li><code>/preferits?ordre=data</code> - Llista de preferits amb ordenació opcional</li>
</ul>
<p><strong>Navegació programàtica:</strong></p>
<ul>
<li>Després d'afegir un element a preferits → navegar a <code>/preferits</code></li>
<li>Després de clicar un element del catàleg → navegar a <code>/cataleg/42</code></li>
<li>Després de guardar canvis a la configuració → navegar a <code>/</code> (inici)</li>
</ul>
<p><strong>Flux d'usuari optimitzat:</strong></p>
<ol>
<li>L'usuari navega a <code>/cataleg</code> → Veu llista d'elements</li>
<li>Clica un element → Navegació programàtica a <code>/cataleg/42</code></li>
<li>Component detall captura <code>id = 42</code> i carrega dades</li>
<li>Usuari clica "Afegir a preferits" → Després de desar, navegació automàtica a <code>/preferits</code></li>
</ol>
<p><strong>Resultat:</strong> Flux fluid sense clics innecessaris, URLs netes i amigables, i dades carregades dinàmicament segons l'ID de la ruta.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.3. Model mental</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.3.1. Paràmetres de ruta com variables d'una funció</h4>
<p>Imagina que cada vista és una funció i els paràmetres de ruta són els seus arguments. <code>/element/:id</code> és com <code>mostrarElement(id)</code>. Sense paràmetres, hauríeu de crear funcions separades: <code>mostrarElement1()</code>, <code>mostrarElement2()</code>, etc. Amb paràmetres, una sola funció serveix per a tots.</p>
<h4>2.3.2. Query params com opcions configurables</h4>
<p>Els query params són com opcions addicionals que personalitzen el resultat sense canviar la funció base. <code>/cataleg?ordre=preu</code> és com <code>mostrarCataleg({ ordre: 'preu' })</code>. Sense ells, la funció té valors per defecte raonables.</p>
<h4>2.3.3. Navegació programàtica com un comandament</h4>
<p>Amb enllaços HTML (<code>&lt;a&gt;</code>), l'usuari té el control: tu només ofereixes botons i ell decideix quan clicar. Amb navegació programàtica (<code>router.navigate()</code>), tu tens el control: pots navegar automàticament quan les condicions són correctes, com un pilot automàtic.</p>
<h4>2.3.4. Snapshot vs Subscribe com foto vs vídeo</h4>
<p><code>snapshot.paramMap</code> és com fer una foto: captura el valor actual en un instant. <code>paramMap.subscribe()</code> és com gravar un vídeo: et notifica cada vegada que els paràmetres canvien, frame a frame.</p>
<h4>2.3.5. Router state com notes adhesives temporals</h4>
<p>Passar dades amb <code>router state</code> és com enganxar una nota adhesiva al dorso d'un document. Les dades viatgen amb la navegació, però no són permanents (si recarregues la pàgina, es perden). Útil per informació temporal que no vols exposar a la URL.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.4. Per què necessitem paràmetres: passar identificadors, filtres, etc.</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.4.1. Objectiu</h4>
<p>Comprendre per què les aplicacions reals necessiten passar informació entre vistes i els problemes que resolen els paràmetres.</p>
<h4>2.4.2. Per què els paràmetres són essencials</h4>
<p>Les aplicacions modernes rarament tenen pàgines completament estàtiques. Quan un usuari clica un element d'una llista, vol veure el detall d'<strong>aquest element específic</strong>. Quan cerca "portàtils", vol veure resultats filtrats per "portàtils", no tots els productes. Aquests valors dinàmics són els paràmetres.</p>
<p><strong>1. Identificar recursos individuals</strong></p>
<p>En qualsevol aplicació amb llistes (productes, usuaris, articles, comandes), necessiteu identificar un element concret per mostrar-ne el detall. Els paràmetres de ruta permeten passar l'identificador únic:</p>
<ul>
<li><strong>Botiga online:</strong> <code>/producte/42</code> - Producte amb ID 42</li>
<li><strong>Xarxa social:</strong> <code>/usuari/maria</code> - Perfil de Maria</li>
<li><strong>Blog:</strong> <code>/article/com-aprendre-angular</code> - Article amb slug "com-aprendre-angular"</li>
</ul>
<p><strong>Sense paràmetres:</strong> Imposible. Hauríeu de crear una ruta i component separats per a cada producte, usuari o article (inviable amb milers de registres).</p>
<p><strong>2. Filtrar i cercar resultats</strong></p>
<p>Les llistes grans necessiten filtres per ser útils. Els query params permeten passar criteris de cerca i ordenació sense alterar la ruta base:</p>
<ul>
<li><strong>Catàleg:</strong> <code>/productes?categoria=electrònica&preu_max=500&ordre=popularitat</code></li>
<li><strong>Cerca:</strong> <code>/cerca?q=angular&tipus=articles&data=recent</code></li>
<li><strong>Paginació:</strong> <code>/blog?pàgina=3&per_pàgina=10</code></li>
</ul>
<p><strong>Avantatge:</strong> Els filtres són opcionals. Si l'usuari no especifica cap filtre, la pàgina mostra resultats per defecte (tots els productes, primera pàgina, etc.).</p>
<p><strong>3. Mantenir l'estat a la URL (compartible i marcable)</strong></p>
<p>Quan els paràmetres estan a la URL, l'usuari pot:</p>
<ul>
<li><strong>Copiar i enganxar</strong> la URL per compartir-la (exemple: <code>/producte/42</code> compartit a WhatsApp)</li>
<li><strong>Marcar la pàgina</strong> als favorits del navegador (exemple: <code>/cataleg?categoria=llibres&ordre=preu</code>)</li>
<li><strong>Navegar endavant/enrere</strong> amb les fletxes del navegador sense perdre l'estat</li>
</ul>
<p><strong>Sense paràmetres a la URL:</strong> Impossible compartir o marcar una cerca específica. Cada vegada que l'usuari obre l'aplicació, comença des de zero.</p>
<h4>2.4.3. Tipus de paràmetres segons la necessitat</h4>
<p><strong>Route params (<code>:nom</code>) - Obligatoris i essencials:</strong></p>
<p>Quan el paràmetre és necessari per renderitzar la vista. Sense ell, la pàgina no té sentit.</p>
<p><strong>Exemples:</strong></p>
<ul>
<li><code>/element/:id</code> - Sense ID, no hi ha element a mostrar</li>
<li><code>/comanda/:numeroComanda</code> - Sense número de comanda, no hi ha comanda</li>
<li><code>/usuari/:nomUsuari</code> - Sense nom d'usuari, no hi ha perfil</li>
</ul>
<p><strong>Query params (<code>?clau=valor</code>) - Opcionals i configurables:</strong></p>
<p>Quan el paràmetre personalitza o filtra la vista, però la vista té un estat per defecte sense ell.</p>
<p><strong>Exemples:</strong></p>
<ul>
<li><code>/cataleg?categoria=3</code> - Sense categoria, mostra tots els elements</li>
<li><code>/cerca?q=angular</code> - Sense query, mostra pàgina de cerca buida</li>
<li><code>/blog?pàgina=2</code> - Sense pàgina, mostra pàgina 1 per defecte</li>
</ul>
<h4>2.4.4. Analogia amb funcions de programació</h4>
<p>Els paràmetres de ruta són com arguments de funcions:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">function mostrarElement(id: number) {
  return database.obtenirElement(id);
}
function llistarElements(categoria?: string, ordre?: string) {
  categoria = categoria ?? &#39;totes&#39;;
  ordre = ordre ?? &#39;data&#39;;
  return database.llistarElements(categoria, ordre);
}</code></pre>
  </div>
</div>

<p><strong>Traducció a rutes:</strong></p>
<ul>
<li><code>mostrarElement(42)</code> → <code>/element/42</code> (route param obligatori)</li>
<li><code>llistarElements('llibres', 'preu')</code> → <code>/cataleg?categoria=llibres&ordre=preu</code> (query params opcionals)</li>
</ul>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Els paràmetres de ruta permeten passar identificadors, filtres i configuracions entre vistes, fent les aplicacions dinàmiques, compartibles i marcables. Route params són obligatoris (<code>:id</code>), query params són opcionals (<code>?clau=valor</code>).
</div>

<h4>2.4.5. Resultat esperat</h4>
<p>Compreneu per què les aplicacions reals necessiten paràmetres per identificar recursos, filtrar resultats i mantenir l'estat compartible a la URL.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.5. Paràmetres de ruta obligatoris: definició amb dos punts (:id)</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.5.1. Objectiu</h4>
<p>Aprendre la sintaxi per definir rutes amb paràmetres obligatoris i entendre com Angular els interpreta.</p>
<h4>2.5.2. Sintaxi de definició</h4>
<p>Els <strong>paràmetres de ruta obligatoris</strong> es defineixen amb dos punts (<code>:</code>) seguits del nom del paràmetre. Per exemple, <code>/element/:id</code> significa que la ruta espera un valor després de <code>/element/</code>, com ara <code>/element/42</code> o <code>/element/999</code>.</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Routes } from &#39;@angular/router&#39;;
import { DetallElementComponent } from &#39;../cataleg/detall-element.component&#39;;
export const routes: Routes = [
  {
    path: &#39;element/:id&#39;,
    component: DetallElementComponent
  }
];</code></pre>
  </div>
</div>

<p><strong>Interpretació d'Angular:</strong></p>
<ul>
<li><code>element</code> és un segment estàtic (literal)</li>
<li><code>:id</code> és un segment dinàmic (variable)</li>
</ul>
<p><strong>URLs que coincideixen:</strong></p>
<ul>
<li><code>/element/1</code> → <code>id = '1'</code></li>
<li><code>/element/42</code> → <code>id = '42'</code></li>
<li><code>/element/abc</code> → <code>id = 'abc'</code> (Angular accepta qualsevol string)</li>
<li><code>/element/999-portàtil-dell</code> → <code>id = '999-portàtil-dell'</code></li>
</ul>
<p><strong>URLs que NO coincideixen:</strong></p>
<ul>
<li><code>/element</code> → Falta el paràmetre <code>id</code> (404 Not Found)</li>
<li><code>/element/42/extra</code> → Té segments addicionals (404, a menys que hi hagi ruta niada)</li>
</ul>
<h4>2.5.3. Múltiples paràmetres a la mateixa ruta</h4>
<p>Podeu definir múltiples paràmetres obligatoris:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;categoria/:nomCategoria/element/:id&#39;,
  component: DetallElementComponent
}</code></pre>
  </div>
</div>

<p><strong>URLs que coincideixen:</strong></p>
<ul>
<li><code>/categoria/electrònica/element/42</code> → <code>nomCategoria = 'electrònica'</code>, <code>id = '42'</code></li>
<li><code>/categoria/llibres/element/7</code> → <code>nomCategoria = 'llibres'</code>, <code>id = '7'</code></li>
</ul>
<p><strong>Captura al component:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const categoria = this.route.snapshot.paramMap.get(&#39;nomCategoria&#39;);
const id = this.route.snapshot.paramMap.get(&#39;id&#39;);</code></pre>
  </div>
</div>

<h4>2.5.4. Nomenament de paràmetres: convencions</h4>
<p><strong>Bona pràctica:</strong></p>
<ul>
<li>Usar noms descriptius: <code>:id</code>, <code>:userId</code>, <code>:nomCategoria</code>, <code>:slug</code></li>
<li>camelCase per a noms compostos: <code>:numeroComanda</code>, <code>:nomUsuari</code></li>
<li>Evitar noms genèrics com <code>:param</code>, <code>:valor</code>, <code>:x</code></li>
</ul>
<p><strong>Exemples bons:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{ path: &#39;usuari/:nomUsuari&#39;, component: PerfilComponent }
{ path: &#39;producte/:id&#39;, component: DetallProducteComponent }
{ path: &#39;article/:slug&#39;, component: ArticleComponent }</code></pre>
  </div>
</div>

<p><strong>Exemples dolents:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{ path: &#39;usuari/:x&#39;, component: PerfilComponent }
{ path: &#39;producte/:param&#39;, component: DetallProducteComponent }
{ path: &#39;article/:a&#39;, component: ArticleComponent }</code></pre>
  </div>
</div>

<h4>2.5.5. Ordre de definició de rutes: rutes estàtiques primer</h4>
<p>Quan teniu rutes amb paràmetres, és important l'ordre de definició. Angular avalua les rutes <strong>de dalt a baix</strong> i retorna la primera coincidència:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export const routes: Routes = [
  { path: &#39;element/:id&#39;, component: DetallComponent },
  { path: &#39;element/crear&#39;, component: CrearComponent }
];</code></pre>
  </div>
</div>

<p><strong>Problema:</strong> Quan l'usuari navega a <code>/element/crear</code>, Angular veu <code>element/:id</code> primer i assigna <code>id = 'crear'</code>. La ruta <code>element/crear</code> no s'avalua mai.</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export const routes: Routes = [
  { path: &#39;element/crear&#39;, component: CrearComponent },
  { path: &#39;element/:id&#39;, component: DetallComponent }
];</code></pre>
  </div>
</div>

<p><strong>Resultat:</strong> <code>/element/crear</code> coincideix amb la ruta estàtica. <code>/element/42</code> coincideix amb la ruta dinàmica.</p>
<h4>2.5.6. Paràmetres vs segments estàtics: diferències</h4>
<table>
<thead>
<tr>
<th>Aspecte</th>
<th>Segment estàtic</th>
<th>Paràmetre dinàmic</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Definició</strong></td>
<td>Text literal</td>
<td>Prefixat amb <code>:</code></td>
</tr>
<tr>
<td><strong>Exemple</strong></td>
<td><code>path: 'element'</code></td>
<td><code>path: 'element/:id'</code></td>
</tr>
<tr>
<td><strong>Coincidència</strong></td>
<td>Només si la URL és exactament <code>element</code></td>
<td>Qualsevol valor després de <code>element/</code></td>
</tr>
<tr>
<td><strong>Captura</strong></td>
<td>No hi ha res a capturar</td>
<td>Valor accessible amb <code>paramMap.get('id')</code></td>
</tr>
<tr>
<td><strong>Ús típic</strong></td>
<td>Rutes fixes (<code>/inici</code>, <code>/contacte</code>)</td>
<td>Recursos dinàmics (<code>/usuari/42</code>)</td>
</tr>
</tbody>
</table>
<h4>2.5.7. Validació de paràmetres: responsabilitat del component</h4>
<p>Angular NO valida els paràmetres automàticament. Accepta qualsevol string:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">/element/42
/element/abc
/element/-1
/element/</code></pre>
  </div>
</div>

<p><strong>Responsabilitat del component:</strong> Validar i convertir el paràmetre:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit(): void {
  const idString = this.route.snapshot.paramMap.get(&#39;id&#39;);
  const id = Number(idString);
  if (isNaN(id) || id &lt;= 0) {
    this.router.navigate([&#39;/error&#39;]);
    return;
  }
  this.service.obtenirPerID(id).subscribe(element =&gt; {
    this.element = element;
  });
}</code></pre>
  </div>
</div>

<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Els paràmetres de ruta obligatoris es defineixen amb <code>:nom</code> al <code>path</code>. Angular captura qualsevol valor en aquesta posició com a string. Cal validar i convertir els paràmetres al component. Rutes estàtiques han de definir-se abans de rutes dinàmiques per evitar captures incorrectes.
</div>

<h4>2.5.8. Resultat esperat</h4>
<p>Sabeu definir rutes amb paràmetres obligatoris, enteneu com Angular les interpreta, coneixeu la importància de l'ordre de definició i sabeu que cal validar els paràmetres al component.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.6. Capturar paràmetres al component: subscriure's a canvis</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.6.1. Objectiu</h4>
<p>Aprendre a capturar els paràmetres de ruta al component i entendre les diferències entre <code>snapshot</code> i <code>subscribe</code>.</p>
<h4>2.6.2. Servei ActivatedRoute: accés als paràmetres</h4>
<p>Un cop definida una ruta amb paràmetres (<code>element/:id</code>), el component necessita accedir al valor del paràmetre per carregar les dades corresponents. Angular proporciona el servei <code>ActivatedRoute</code> per accedir als paràmetres.</p>
<p>El servei <code>ActivatedRoute</code> representa la ruta activa i proporciona accés a:</p>
<ul>
<li><code>paramMap</code>: Mapa de route params (<code>:id</code>, <code>:nomUsuari</code>, etc.)</li>
<li><code>queryParamMap</code>: Mapa de query params (<code>?categoria=3</code>, <code>?ordre=preu</code>, etc.)</li>
<li><code>snapshot</code>: Captura instantània dels paràmetres actuals</li>
<li><code>data</code>: Dades estàtiques definides a la ruta</li>
<li><code>url</code>: Segments de la URL actual</li>
</ul>
<p><strong>Injecció del servei:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit } from &#39;@angular/core&#39;;
import { ActivatedRoute } from &#39;@angular/router&#39;;
@Component({
  selector: &#39;app-detall-element&#39;,
  templateUrl: &#39;./detall-element.component.html&#39;
})
export class DetallElementComponent implements OnInit {
  constructor(private route: ActivatedRoute) {}
  ngOnInit(): void {
  }
}</code></pre>
  </div>
</div>

<h4>2.6.3. Mètode 1: Captura amb snapshot (ús més comú)</h4>
<p>El <strong>snapshot</strong> proporciona una captura instantània dels paràmetres en el moment en què el component s'inicialitza:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit(): void {
  const idString = this.route.snapshot.paramMap.get(&#39;id&#39;);
  const id = Number(idString);
  console.log(&#39;ID capturat:&#39;, id);
  this.service.obtenirPerID(id).subscribe(element =&gt; {
    this.element = element;
  });
}</code></pre>
  </div>
</div>

<p><strong>Característiques del snapshot:</strong></p>
<ul>
<li><strong>Ràpid:</strong> Accés síncron, no requereix subscripció</li>
<li><strong>Estàtic:</strong> Captura el valor actual en el moment d'inicialització</li>
<li><strong>No reactiu:</strong> Si l'usuari navega a <code>/element/99</code> sense recarregar el component, el valor NO s'actualitza</li>
</ul>
<p><strong>Quan usar snapshot:</strong></p>
<ul>
<li>95% dels casos</li>
<li>Quan navegueu entre rutes diferents que destrueixen i creen el component de nou</li>
<li>Exemple: Navegar de <code>/element/42</code> a <code>/element/99</code> destrueix <code>DetallElementComponent</code> i el crea de nou → <code>ngOnInit()</code> s'executa de nou amb el nou ID</li>
</ul>
<h4>2.6.4. Mètode 2: Subscripció reactiva (casos especials)</h4>
<p>La <strong>subscripció a <code>paramMap</code></strong> proporciona un Observable que emet cada vegada que els paràmetres canvien:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit(): void {
  this.route.paramMap.subscribe(params =&gt; {
    const idString = params.get(&#39;id&#39;);
    const id = Number(idString);
    console.log(&#39;ID ha canviat a:&#39;, id);
    this.service.obtenirPerID(id).subscribe(element =&gt; {
      this.element = element;
    });
  });
}</code></pre>
  </div>
</div>

<p><strong>Característiques de la subscripció:</strong></p>
<ul>
<li><strong>Reactiu:</strong> S'executa cada vegada que l'ID canvia</li>
<li><strong>Continu:</strong> L'Observable emet múltiples vegades durant la vida del component</li>
<li><strong>Requereix cleanup:</strong> Cal fer <code>unsubscribe()</code> a <code>ngOnDestroy()</code> per evitar memory leaks</li>
</ul>
<p><strong>Quan usar subscripció:</strong></p>
<ul>
<li>Casos especials on Angular reutilitza el mateix component amb diferent ID</li>
<li>Rutes niades complexes on només canvia el paràmetre sense destruir el component</li>
<li>Exemple: Navegació dins d'un component pare que no es destrueix</li>
</ul>
<h4>2.6.5. Comparativa: Snapshot vs Subscribe</h4>
<table>
<thead>
<tr>
<th>Aspecte</th>
<th>Snapshot</th>
<th>Subscribe</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Sintaxi</strong></td>
<td><code>route.snapshot.paramMap.get('id')</code></td>
<td><code>route.paramMap.subscribe(params => ...)</code></td>
</tr>
<tr>
<td><strong>Tipus de retorn</strong></td>
<td><code>string | null</code> (síncron)</td>
<td><code>Observable&lt;ParamMap&gt;</code> (asíncron)</td>
</tr>
<tr>
<td><strong>Reacciona a canvis</strong></td>
<td>No</td>
<td>Sí</td>
</tr>
<tr>
<td><strong>Requereix unsubscribe</strong></td>
<td>No</td>
<td>Sí (bona pràctica)</td>
</tr>
<tr>
<td><strong>Ús recomanat</strong></td>
<td>95% dels casos</td>
<td>Casos especials amb reutilització de component</td>
</tr>
<tr>
<td><strong>Complexitat</strong></td>
<td>Baixa</td>
<td>Mitjana (cal gestionar Observable)</td>
</tr>
</tbody>
</table>
<h4>2.6.6. Exemple complet: Captura amb validació</h4>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit } from &#39;@angular/core&#39;;
import { ActivatedRoute, Router } from &#39;@angular/router&#39;;
import { ElementsService } from &#39;../services/elements.service&#39;;
import { Element } from &#39;../models/element.interface&#39;;
@Component({
  selector: &#39;app-detall-element&#39;,
  templateUrl: &#39;./detall-element.component.html&#39;
})
export class DetallElementComponent implements OnInit {
  element?: Element;
  carregant = true;
  error = false;
  constructor(
    private route: ActivatedRoute,
    private router: Router,
    private service: ElementsService
  ) {}
  ngOnInit(): void {
    const idString = this.route.snapshot.paramMap.get(&#39;id&#39;);
    if (!idString) {
      this.router.navigate([&#39;/error&#39;]);
      return;
    }
    const id = Number(idString);
    if (isNaN(id) || id &lt;= 0) {
      this.router.navigate([&#39;/error&#39;]);
      return;
    }
    this.service.obtenirPerID(id).subscribe({
      next: (element) =&gt; {
        this.element = element;
        this.carregant = false;
      },
      error: (err) =&gt; {
        console.error(&#39;Error al carregar element:&#39;, err);
        this.error = true;
        this.carregant = false;
      }
    });
  }
}</code></pre>
  </div>
</div>

<h4>2.6.7. Capturar múltiples paràmetres</h4>
<p>Si la ruta té múltiples paràmetres (<code>/categoria/:nomCategoria/element/:id</code>), captureu-los individualment:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit(): void {
  const categoria = this.route.snapshot.paramMap.get(&#39;nomCategoria&#39;);
  const idString = this.route.snapshot.paramMap.get(&#39;id&#39;);
  const id = Number(idString);
  console.log(`Carregant element ${id} de la categoria ${categoria}`);
  this.service.obtenirPerCategoriaIID(categoria!, id).subscribe(...);
}</code></pre>
  </div>
</div>

<h4>2.6.8. Unsubscribe en subscripcions (bona pràctica)</h4>
<p>Si useu <code>paramMap.subscribe()</code>, cal fer unsubscribe per evitar memory leaks:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit, OnDestroy } from &#39;@angular/core&#39;;
import { Subscription } from &#39;rxjs&#39;;
export class DetallElementComponent implements OnInit, OnDestroy {
  private paramsSub?: Subscription;
  ngOnInit(): void {
    this.paramsSub = this.route.paramMap.subscribe(params =&gt; {
      const id = Number(params.get(&#39;id&#39;));
    });
  }
  ngOnDestroy(): void {
    this.paramsSub?.unsubscribe();
  }
}</code></pre>
  </div>
</div>

<p><strong>Nota:</strong> Amb <code>snapshot</code>, NO cal unsubscribe perquè no hi ha Observable.</p>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Per capturar paràmetres de ruta, useu <code>ActivatedRoute.snapshot.paramMap.get('nom')</code> en el 95% dels casos. Si necessiteu reactivitat (el component es reutilitza amb diferent ID), useu <code>paramMap.subscribe()</code> i feu unsubscribe a <code>ngOnDestroy()</code>. Sempre valideu i convertiu els paràmetres (són strings).
</div>

<h4>2.6.9. Resultat esperat</h4>
<p>Sabeu capturar paràmetres de ruta amb <code>snapshot</code> i <code>subscribe</code>, enteneu les diferències entre ambdós mètodes, i sabeu validar i convertir paràmetres abans d'usar-los.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.7. Exemple pràctic: vista de detall que rep identificador</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.7.1. Objectiu</h4>
<p>Implementar un component de detall complet que captura l'ID de la ruta i carrega les dades corresponents de l'API.</p>
<h4>2.7.2. Pas 1: Definir la ruta amb paràmetre</h4>
<p><code>src/app/navegacio/app.routes.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Routes } from &#39;@angular/router&#39;;
import { CatalegComponent } from &#39;../cataleg/cataleg.component&#39;;
import { DetallElementComponent } from &#39;../cataleg/detall-element.component&#39;;
export const routes: Routes = [
  { path: &#39;&#39;, redirectTo: &#39;/cataleg&#39;, pathMatch: &#39;full&#39; },
  { path: &#39;cataleg&#39;, component: CatalegComponent },
  { path: &#39;element/:id&#39;, component: DetallElementComponent }
];</code></pre>
  </div>
</div>

<h4>2.7.3. Pas 2: Crear el component de detall</h4>
<p><strong>PowerShell (Windows):</strong></p>

<div class="code-block" data-lang="powershell" role="region" aria-label="Bloc de codi powershell">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">POWERSHELL</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-powershell">Set-Location $env:USERPROFILE\workspace\catalog-elements
ng generate component cataleg/detall-element --skip-tests</code></pre>
  </div>
</div>

<p><strong>bash/zsh (macOS/Linux):</strong></p>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">cd ~/workspace/catalog-elements
ng generate component cataleg/detall-element --skip-tests</code></pre>
  </div>
</div>

<h4>2.7.4. Pas 3: Implementar la lògica del component</h4>
<p><code>src/app/cataleg/detall-element.component.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit } from &#39;@angular/core&#39;;
import { CommonModule } from &#39;@angular/common&#39;;
import { ActivatedRoute, Router, RouterLink } from &#39;@angular/router&#39;;
import { ElementsService } from &#39;../services/elements.service&#39;;
import { Element } from &#39;../models/element.interface&#39;;
@Component({
  selector: &#39;app-detall-element&#39;,
  standalone: true,
  imports: [CommonModule, RouterLink],
  templateUrl: &#39;./detall-element.component.html&#39;,
  styleUrls: [&#39;./detall-element.component.scss&#39;]
})
export class DetallElementComponent implements OnInit {
  element?: Element;
  carregant = true;
  error = false;
  missatgeError = &#39;&#39;;
  constructor(
    private route: ActivatedRoute,
    private router: Router,
    private service: ElementsService
  ) {}
  ngOnInit(): void {
    const idString = this.route.snapshot.paramMap.get(&#39;id&#39;);
    if (!idString) {
      this.router.navigate([&#39;/cataleg&#39;]);
      return;
    }
    const id = Number(idString);
    if (isNaN(id) || id &lt;= 0) {
      this.error = true;
      this.missatgeError = &#39;ID d\&#39;element invàlid&#39;;
      this.carregant = false;
      return;
    }
    this.service.obtenirPerID(id).subscribe({
      next: (element) =&gt; {
        this.element = element;
        this.carregant = false;
      },
      error: (err) =&gt; {
        console.error(&#39;Error al carregar element:&#39;, err);
        this.error = true;
        this.missatgeError = &#39;No s\&#39;ha pogut carregar l\&#39;element&#39;;
        this.carregant = false;
      }
    });
  }
  tornarAlCataleg(): void {
    this.router.navigate([&#39;/cataleg&#39;]);
  }
}</code></pre>
  </div>
</div>

<h4>2.7.5. Pas 4: Implementar la plantilla HTML</h4>
<p><code>src/app/cataleg/detall-element.component.html</code>:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;detall-element&quot;&gt;
&lt;div *ngIf=&quot;carregant&quot; class=&quot;carregant&quot;&gt;
&lt;p&gt;Carregant element...&lt;/p&gt;
&lt;/div&gt;
&lt;div *ngIf=&quot;error&quot; class=&quot;error&quot;&gt;
&lt;h2&gt;Error&lt;/h2&gt;
&lt;p&gt;{{ missatgeError }}&lt;/p&gt;
&lt;button (click)=&quot;tornarAlCataleg()&quot;&gt;Tornar al catàleg&lt;/button&gt;
&lt;/div&gt;
&lt;div *ngIf=&quot;!carregant &amp;&amp; !error &amp;&amp; element&quot; class=&quot;contingut&quot;&gt;
&lt;button (click)=&quot;tornarAlCataleg()&quot; class=&quot;btn-tornar&quot;&gt;← Tornar&lt;/button&gt;
&lt;div class=&quot;informacio&quot;&gt;
&lt;h1&gt;{{ element.title }}&lt;/h1&gt;
&lt;div class=&quot;descripcio&quot;&gt;
&lt;p&gt;{{ element.body }}&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;metadades&quot;&gt;
&lt;p&gt;&lt;strong&gt;ID:&lt;/strong&gt; {{ element.id }}&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Usuari:&lt;/strong&gt; {{ element.userId }}&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;accions&quot;&gt;
&lt;button class=&quot;btn-primari&quot;&gt;Afegir a preferits&lt;/button&gt;
&lt;button class=&quot;btn-secundari&quot;&gt;Compartir&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<h4>2.7.6. Pas 5: Afegir enllaços al catàleg</h4>
<p>Modifiqueu el component de catàleg per navegar al detall:</p>
<p><code>src/app/cataleg/cataleg.component.html</code>:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;cataleg&quot;&gt;
&lt;h1&gt;Catàleg d&#39;elements&lt;/h1&gt;
&lt;div class=&quot;llista&quot; *ngIf=&quot;elements$ | async as elements&quot;&gt;
&lt;div class=&quot;targeta&quot; *ngFor=&quot;let element of elements&quot;&gt;
&lt;h3&gt;{{ element.title }}&lt;/h3&gt;
&lt;p&gt;{{ element.body | slice:0:100 }}...&lt;/p&gt;
&lt;a [routerLink]=&quot;[&#39;/element&#39;, element.id]&quot; class=&quot;btn-veure-mes&quot;&gt;
Veure detall →
&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<h4>2.7.7. Pas 6: Verificar el funcionament</h4>
<ol>
<li><strong>Executar l'aplicació:</strong></li>
</ol>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve --port 4300</code></pre>
  </div>
</div>

<ol start="2">
<li><strong>Obrir al navegador:</strong> <code>http://localhost:4300/cataleg</code></li>
<li><strong>Clicar un element:</strong> La URL canvia a <code>/element/1</code> (o l'ID que sigui)</li>
<li><strong>Comprovar que es carrega el detall:</strong> Heu de veure la informació completa de l'element</li>
<li><strong>Provar amb diferents IDs:</strong> Navegar directament a <code>/element/5</code>, <code>/element/99</code>, etc.</li>
<li><strong>Provar ID invàlid:</strong> Navegar a <code>/element/abc</code> → Ha de mostrar error</li>
<li><strong>Comprovar el botó "Tornar":</strong> Ha de navegar de tornada a <code>/cataleg</code></li>
</ol>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Un component de detall captura l'ID de la ruta amb <code>ActivatedRoute</code>, valida el paràmetre, carrega les dades de l'API i les mostra. La navegació des del llistat utilitza <code>[routerLink]="['/element', element.id]"</code> per passar l'ID dinàmicament.
</div>

<h4>2.7.8. Resultat esperat</h4>
<p>Sabeu implementar un component de detall complet que captura paràmetres de ruta, els valida, carrega dades i mostra errors apropiats. El flux llistat → detall → tornar funciona correctament amb navegació dinàmica.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.8. Paràmetres opcionals (query params): quan usar-los</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.8.1. Objectiu</h4>
<p>Aprendre a utilitzar query params per a paràmetres opcionals com filtres, cerca i paginació, i entendre quan preferir-los per sobre dels route params.</p>
<h4>2.8.2. Sintaxi de query params</h4>
<p>Els <strong>query params</strong> són paràmetres opcionals que s'afegeixen a la URL després d'un símbol <code>?</code>. A diferència dels route params (<code>:id</code>), els query params NO són part del <code>path</code> de la ruta i NO són obligatoris. Són ideals per a filtres, cerca, ordenació i paginació.</p>
<p><strong>Exemple d'URL amb query params:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">/cataleg?categoria=electrònica&amp;preu_max=500&amp;ordre=popularitat</code></pre>
  </div>
</div>

<p><strong>Estructura:</strong></p>
<ul>
<li><code>/cataleg</code> - Ruta base</li>
<li><code>?</code> - Indica inici de query params</li>
<li><code>categoria=electrònica</code> - Primer paràmetre</li>
<li><code>&</code> - Separador entre paràmetres</li>
<li><code>preu_max=500</code> - Segon paràmetre</li>
<li><code>&ordre=popularitat</code> - Tercer paràmetre</li>
</ul>
<h4>2.8.3. Passar query params amb routerLink</h4>
<p><strong>Enllaç HTML amb query params:</strong></p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;a [routerLink]=&quot;[&#39;/cataleg&#39;]&quot; [queryParams]=&quot;{ categoria: &#39;electrònica&#39;, ordre: &#39;preu&#39; }&quot;&gt;
  Electrònica ordenada per preu
&lt;/a&gt;
&lt;a [routerLink]=&quot;[&#39;/cataleg&#39;]&quot; [queryParams]=&quot;{ categoria: categoriaSeleccionada, pàgina: pàginaActual }&quot;&gt;
  Filtrar per categoria
&lt;/a&gt;</code></pre>
  </div>
</div>

<p><strong>Resultat:</strong> Navega a <code>/cataleg?categoria=electrònica&ordre=preu</code></p>
<h4>2.8.4. Capturar query params al component</h4>
<p>Similar als route params, useu <code>ActivatedRoute</code> però amb <code>queryParamMap</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit } from &#39;@angular/core&#39;;
import { ActivatedRoute } from &#39;@angular/router&#39;;
@Component({
  selector: &#39;app-cataleg&#39;,
  templateUrl: &#39;./cataleg.component.html&#39;
})
export class CatalegComponent implements OnInit {
  constructor(private route: ActivatedRoute) {}
  ngOnInit(): void {
    const categoria = this.route.snapshot.queryParamMap.get(&#39;categoria&#39;);
    const preuMax = this.route.snapshot.queryParamMap.get(&#39;preu_max&#39;);
    const ordre = this.route.snapshot.queryParamMap.get(&#39;ordre&#39;);
    console.log(&#39;Filtres aplicats:&#39;, { categoria, preuMax, ordre });
    this.carregarElements({
      categoria: categoria ?? &#39;totes&#39;,
      preuMax: preuMax ? Number(preuMax) : undefined,
      ordre: ordre ?? &#39;data&#39;
    });
  }
  carregarElements(filtres: any): void {
  }
}</code></pre>
  </div>
</div>

<h4>2.8.5. Subscripció reactiva a query params</h4>
<p>Si voleu reaccionar a canvis de query params sense recarregar el component:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit(): void {
  this.route.queryParamMap.subscribe(params =&gt; {
    const categoria = params.get(&#39;categoria&#39;) ?? &#39;totes&#39;;
    const ordre = params.get(&#39;ordre&#39;) ?? &#39;data&#39;;
    console.log(&#39;Query params han canviat:&#39;, { categoria, ordre });
    this.carregarElements({ categoria, ordre });
  });
}</code></pre>
  </div>
</div>

<p><strong>Cas d'ús:</strong> L'usuari canvia filtres sense navegar a una nova pàgina. Els query params canvien (<code>/cataleg?categoria=llibres</code> → <code>/cataleg?categoria=música</code>) però el component <code>CatalegComponent</code> no es destrueix. La subscripció detecta el canvi i recarrega els elements.</p>
<h4>2.8.6. Navegació programàtica amb query params</h4>
<p>Des de codi TypeScript, utilitzeu <code>Router.navigate()</code> amb <code>queryParams</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Router } from &#39;@angular/router&#39;;
constructor(private router: Router) {}
aplicarFiltres(): void {
  this.router.navigate([&#39;/cataleg&#39;], {
    queryParams: {
      categoria: this.categoriaSeleccionada,
      preu_max: this.preuMaxim,
      ordre: &#39;preu&#39;
    }
  });
}</code></pre>
  </div>
</div>

<p><strong>Resultat:</strong> Navega a <code>/cataleg?categoria=electrònica&preu_max=500&ordre=preu</code></p>
<h4>2.8.7. Exemple pràctic: Filtre de catàleg amb query params</h4>
<p><code>src/app/cataleg/cataleg.component.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit } from &#39;@angular/core&#39;;
import { ActivatedRoute, Router } from &#39;@angular/router&#39;;
import { ElementsService } from &#39;../services/elements.service&#39;;
import { Element } from &#39;../models/element.interface&#39;;
@Component({
  selector: &#39;app-cataleg&#39;,
  templateUrl: &#39;./cataleg.component.html&#39;
})
export class CatalegComponent implements OnInit {
  elements: Element[] = [];
  categoriaActual = &#39;totes&#39;;
  ordreActual = &#39;data&#39;;
  constructor(
    private route: ActivatedRoute,
    private router: Router,
    private service: ElementsService
  ) {}
  ngOnInit(): void {
    this.route.queryParamMap.subscribe(params =&gt; {
      this.categoriaActual = params.get(&#39;categoria&#39;) ?? &#39;totes&#39;;
      this.ordreActual = params.get(&#39;ordre&#39;) ?? &#39;data&#39;;
      this.carregarElements();
    });
  }
  carregarElements(): void {
    this.service.obtenirTots().subscribe(elements =&gt; {
      let resultats = elements;
      if (this.categoriaActual !== &#39;totes&#39;) {
        resultats = resultats.filter(e =&gt; e.categoria === this.categoriaActual);
      }
      if (this.ordreActual === &#39;preu&#39;) {
        resultats.sort((a, b) =&gt; a.preu - b.preu);
      } else {
        resultats.sort((a, b) =&gt; b.data.getTime() - a.data.getTime());
      }
      this.elements = resultats;
    });
  }
  canviarCategoria(categoria: string): void {
    this.router.navigate([&#39;/cataleg&#39;], {
      queryParams: { categoria, ordre: this.ordreActual }
    });
  }
  canviarOrdre(ordre: string): void {
    this.router.navigate([&#39;/cataleg&#39;], {
      queryParams: { categoria: this.categoriaActual, ordre }
    });
  }
}</code></pre>
  </div>
</div>

<p><code>src/app/cataleg/cataleg.component.html</code>:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;cataleg&quot;&gt;
&lt;h1&gt;Catàleg d&#39;elements&lt;/h1&gt;
&lt;div class=&quot;filtres&quot;&gt;
&lt;div class=&quot;filtre-grup&quot;&gt;
&lt;label&gt;Categoria:&lt;/label&gt;
&lt;button (click)=&quot;canviarCategoria(&#39;totes&#39;)&quot; [class.actiu]=&quot;categoriaActual === &#39;totes&#39;&quot;&gt;
Totes
&lt;/button&gt;
&lt;button (click)=&quot;canviarCategoria(&#39;electrònica&#39;)&quot; [class.actiu]=&quot;categoriaActual === &#39;electrònica&#39;&quot;&gt;
Electrònica
&lt;/button&gt;
&lt;button (click)=&quot;canviarCategoria(&#39;llibres&#39;)&quot; [class.actiu]=&quot;categoriaActual === &#39;llibres&#39;&quot;&gt;
Llibres
&lt;/button&gt;
&lt;/div&gt;
&lt;div class=&quot;filtre-grup&quot;&gt;
&lt;label&gt;Ordenar per:&lt;/label&gt;
&lt;button (click)=&quot;canviarOrdre(&#39;data&#39;)&quot; [class.actiu]=&quot;ordreActual === &#39;data&#39;&quot;&gt;
Data
&lt;/button&gt;
&lt;button (click)=&quot;canviarOrdre(&#39;preu&#39;)&quot; [class.actiu]=&quot;ordreActual === &#39;preu&#39;&quot;&gt;
Preu
&lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;llista&quot;&gt;
&lt;div class=&quot;targeta&quot; *ngFor=&quot;let element of elements&quot;&gt;
&lt;h3&gt;{{ element.title }}&lt;/h3&gt;
&lt;p&gt;{{ element.body }}&lt;/p&gt;
&lt;a [routerLink]=&quot;[&#39;/element&#39;, element.id]&quot;&gt;Veure detall&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<h4>2.8.8. Quan usar query params vs route params</h4>
<table>
<thead>
<tr>
<th>Situació</th>
<th>Tipus recomanat</th>
<th>Exemple</th>
</tr>
</thead>
<tbody>
<tr>
<td>Identificar un recurs únic (obligatori)</td>
<td>Route param</td>
<td><code>/element/:id</code></td>
</tr>
<tr>
<td>Filtrar resultats (opcional)</td>
<td>Query param</td>
<td><code>/cataleg?categoria=3</code></td>
</tr>
<tr>
<td>Cerca (opcional)</td>
<td>Query param</td>
<td><code>/cerca?q=angular</code></td>
</tr>
<tr>
<td>Paginació (opcional)</td>
<td>Query param</td>
<td><code>/blog?pàgina=2</code></td>
</tr>
<tr>
<td>Ordenació (opcional)</td>
<td>Query param</td>
<td><code>/productes?ordre=preu</code></td>
</tr>
<tr>
<td>Vista detall amb categoria (obligatòria)</td>
<td>Route param</td>
<td><code>/categoria/:nom/element/:id</code></td>
</tr>
</tbody>
</table>
<p><strong>Regla:</strong> Si és obligatori per renderitzar la vista → route param. Si és opcional i la vista té estat per defecte → query param.</p>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Els query params són ideals per a filtres, cerca, paginació i ordenació opcionals. S'afegeixen amb <code>[queryParams]</code> en enllaços HTML o <code>{ queryParams }</code> en navegació programàtica. Es capturen amb <code>queryParamMap.get('nom')</code>. A diferència dels route params, els query params NO afecten la coincidència de rutes i són sempre opcionals.
</div>

<h4>2.8.9. Resultat esperat</h4>
<p>Sabeu utilitzar query params per a paràmetres opcionals, enteneu quan preferir-los per sobre dels route params, i sabeu implementar filtres i ordenació amb query params que persisteixen a la URL i són compartibles.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.9. Navegació programàtica: des de codi, no només enllaços</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.9.1. Objectiu</h4>
<p>Dominar la navegació programàtica amb el servei <code>Router</code> per navegar des de codi TypeScript després de validacions, operacions asíncrones o lògica condicional.</p>
<h4>2.9.2. Servei Router: navegació des de TypeScript</h4>
<p>La <strong>navegació programàtica</strong> permet navegar entre vistes des de codi TypeScript, no només amb enllaços HTML (<code>&lt;a routerLink&gt;</code>). Això és essencial per navegar després de validacions, operacions asíncrones (guardar dades, autenticar usuari) o lògica condicional (redirigir segons el rol).</p>
<p>El servei <code>Router</code> proporciona mètodes per navegar programàticament:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component } from &#39;@angular/core&#39;;
import { Router } from &#39;@angular/router&#39;;
@Component({
  selector: &#39;app-exemple&#39;,
  templateUrl: &#39;./exemple.component.html&#39;
})
export class ExempleComponent {
  constructor(private router: Router) {}
  navegarAlCataleg(): void {
    this.router.navigate([&#39;/cataleg&#39;]);
  }
}</code></pre>
  </div>
</div>

<h4>2.9.3. Sintaxi de navigate: array de segments</h4>
<p>El mètode <code>navigate()</code> accepta un array de segments de la URL:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigate([&#39;/cataleg&#39;]);
this.router.navigate([&#39;/element&#39;, 42]);
this.router.navigate([&#39;/categoria&#39;, &#39;electrònica&#39;, &#39;element&#39;, 99]);</code></pre>
  </div>
</div>

<p><strong>Important:</strong> Els segments es concatenen amb <code>/</code> automàticament. NO cal afegir barres manuals.</p>
<h4>2.9.4. Navegació amb query params</h4>
<p>Afegiu query params amb l'objecte <code>NavigationExtras</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigate([&#39;/cataleg&#39;], {
  queryParams: { categoria: &#39;electrònica&#39;, ordre: &#39;preu&#39; }
});</code></pre>
  </div>
</div>

<h4>2.9.5. Casos d'ús reals de navegació programàtica</h4>
<p><strong>1. Navegar després de validar un formulari:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">crearElement(formulari: FormGroup): void {
  if (formulari.invalid) {
    alert(&#39;Formulari invàlid&#39;);
    return;
  }
  this.service.crear(formulari.value).subscribe({
    next: (elementCreat) =&gt; {
      this.router.navigate([&#39;/element&#39;, elementCreat.id]);
    },
    error: (err) =&gt; {
      alert(&#39;Error al crear element&#39;);
    }
  });
}</code></pre>
  </div>
</div>

<p><strong>2. Redirecció condicional segons el rol de l'usuari:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">iniciarSessio(credencials): void {
  this.authService.login(credencials).subscribe({
    next: (usuari) =&gt; {
      if (usuari.rol === &#39;admin&#39;) {
        this.router.navigate([&#39;/admin-panel&#39;]);
      } else {
        this.router.navigate([&#39;/cataleg&#39;]);
      }
    }
  });
}</code></pre>
  </div>
</div>

<p><strong>3. Navegar automàticament després d'uns segons:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">confirmarAccio(): void {
  alert(&#39;Acció completada!&#39;);
  setTimeout(() =&gt; {
    this.router.navigate([&#39;/inici&#39;]);
  }, 3000);
}</code></pre>
  </div>
</div>

<p><strong>4. Navegar amb estat temporal (no visible a la URL):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">veureDetall(element: Element): void {
  this.router.navigate([&#39;/detall&#39;], {
    state: { element: element }
  });
}
constructor(private router: Router) {
  const navigation = this.router.getCurrentNavigation();
  const state = navigation?.extras.state as { element: Element };
  this.element = state?.element;
}</code></pre>
  </div>
</div>

<p><strong>Avantatge:</strong> Les dades NO apareixen a la URL (més netes).<br><strong>Desavantatge:</strong> Si l'usuari recarrega la pàgina (F5), les dades es perden.</p>
<h4>2.9.6. NavigationExtras: opcions avançades</h4>
<p>L'objecte <code>NavigationExtras</code> proporciona opcions addicionals per a la navegació:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigate([&#39;/element&#39;, 42], {
  queryParams: { vista: &#39;detallada&#39; },
  fragment: &#39;seccio-comentaris&#39;,
  state: { origen: &#39;cataleg&#39; },
  replaceUrl: true,
  skipLocationChange: true
});</code></pre>
  </div>
</div>

<p><strong>Opcions més usades:</strong></p>
<ul>
<li><code>queryParams</code>: Afegir query params</li>
<li><code>fragment</code>: Afegir fragment (scroll a secció)</li>
<li><code>state</code>: Passar dades temporals</li>
<li><code>replaceUrl: true</code>: Substituir la URL actual en lloc d'afegir una nova entrada a l'historial (útil per redireccions)</li>
</ul>
<h4>2.9.7. Navegació relativa</h4>
<p>Podeu navegar relativament a la ruta actual:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigate([&#39;../germanà&#39;], { relativeTo: this.route });
this.router.navigate([&#39;./fill&#39;], { relativeTo: this.route });</code></pre>
  </div>
</div>

<p><strong>Exemple:</strong> Esteu a <code>/categoria/electrònica/element/42</code>. Navegar a <code>../element/99</code> genera <code>/categoria/electrònica/element/99</code>.</p>
<h4>2.9.8. Diferència entre navigate i navigateByUrl</h4>
<p>Angular ofereix dos mètodes per navegar:</p>
<p><strong>1. <code>navigate(['/segment', param])</code></strong> - Array de segments (recomanat)</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigate([&#39;/element&#39;, 42]);</code></pre>
  </div>
</div>

<p><strong>2. <code>navigateByUrl('/url/completa')</code></strong> - String complet</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigateByUrl(&#39;/element/42&#39;);</code></pre>
  </div>
</div>

<p><strong>Recomanació:</strong> Useu <code>navigate()</code> amb array de segments. És més segur (Angular escapa caràcters especials automàticament) i més llegible.</p>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> La navegació programàtica amb <code>Router.navigate()</code> permet navegar des de codi TypeScript després de validacions, operacions asíncrones o lògica condicional. Accepta arrays de segments, query params, estat temporal i opcions avançades. És essencial per fluxos d'usuari sofisticats on la navegació depèn de condicions dinàmiques.
</div>

<h4>2.9.9. Resultat esperat</h4>
<p>Domineu la navegació programàtica amb <code>Router</code>, sabeu navegar amb paràmetres i query params des de codi, i enteneu casos d'ús reals com navegar després de validar formularis, redirigir segons el rol o passar dades temporals amb <code>state</code>.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.10. Passar dades durant la navegació: estat temporal</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.10.1. Objectiu</h4>
<p>Aprendre a passar dades temporals entre components durant la navegació sense exposar-les a la URL, utilitzant <code>Router state</code>.</p>
<h4>2.10.2. Per què necessitem Router state</h4>
<p>Fins ara hem passat informació entre vistes amb paràmetres de ruta (<code>:id</code>) i query params (<code>?categoria=3</code>). Però aquests mètodes exposen les dades a la URL, que és problemàtic per:</p>
<ul>
<li>Dades sensibles (tokens, informació personal)</li>
<li>Objectes complexos (molt grans per a la URL)</li>
<li>Informació temporal que només és rellevant durant una navegació (missatges de confirmació)</li>
</ul>
<p>El <strong>Router state</strong> permet passar dades temporals que NO apareixen a la URL.</p>
<h4>2.10.3. Passar dades amb Router state</h4>
<p>Utilitzeu l'opció <code>state</code> en la navegació:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigate([&#39;/confirmacio&#39;], {
  state: {
    comanda: { id: 42, productes: [...], total: 350 },
    missatge: &#39;Comanda realitzada correctament&#39;
  }
});</code></pre>
  </div>
</div>

<p><strong>Resultat:</strong> L'usuari veu la URL neta <code>/confirmacio</code>, però les dades viatgen amb la navegació.</p>
<h4>2.10.4. Capturar l'estat al component destí</h4>
<p>El component destí captura l'estat amb <code>getCurrentNavigation()</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component } from &#39;@angular/core&#39;;
import { Router } from &#39;@angular/router&#39;;
@Component({
  selector: &#39;app-confirmacio&#39;,
  templateUrl: &#39;./confirmacio.component.html&#39;
})
export class ConfirmacioComponent {
  comanda?: any;
  missatge = &#39;&#39;;
  constructor(private router: Router) {
    const navigation = this.router.getCurrentNavigation();
    const state = navigation?.extras.state as { comanda: any, missatge: string };
    if (state) {
      this.comanda = state.comanda;
      this.missatge = state.missatge;
    } else {
      this.router.navigate([&#39;/cataleg&#39;]);
    }
  }
}</code></pre>
  </div>
</div>

<p><strong>Important:</strong> <code>getCurrentNavigation()</code> només funciona al constructor. A <code>ngOnInit()</code> ja no està disponible.</p>
<h4>2.10.5. Exemple pràctic: Confirmació després de crear element</h4>
<p><strong>Component origen (crear-element):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component } from &#39;@angular/core&#39;;
import { Router } from &#39;@angular/router&#39;;
import { ElementsService } from &#39;../services/elements.service&#39;;
@Component({
  selector: &#39;app-crear-element&#39;,
  templateUrl: &#39;./crear-element.component.html&#39;
})
export class CrearElementComponent {
  constructor(
    private router: Router,
    private service: ElementsService
  ) {}
  crear(dades: any): void {
    this.service.crear(dades).subscribe({
      next: (elementCreat) =&gt; {
        this.router.navigate([&#39;/confirmacio&#39;], {
          state: {
            element: elementCreat,
            missatge: `Element &quot;${elementCreat.title}&quot; creat correctament`,
            accio: &#39;crear&#39;
          }
        });
      }
    });
  }
}</code></pre>
  </div>
</div>

<p><strong>Component destí (confirmacio):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component } from &#39;@angular/core&#39;;
import { Router, RouterLink } from &#39;@angular/router&#39;;
import { CommonModule } from &#39;@angular/common&#39;;
interface NavigationState {
  element: any;
  missatge: string;
  accio: string;
}
@Component({
  selector: &#39;app-confirmacio&#39;,
  standalone: true,
  imports: [CommonModule, RouterLink],
  templateUrl: &#39;./confirmacio.component.html&#39;
})
export class ConfirmacioComponent {
  element?: any;
  missatge = &#39;&#39;;
  accio = &#39;&#39;;
  constructor(private router: Router) {
    const navigation = this.router.getCurrentNavigation();
    const state = navigation?.extras.state as NavigationState;
    if (state) {
      this.element = state.element;
      this.missatge = state.missatge;
      this.accio = state.accio;
    } else {
      console.warn(&#39;Accés directe a /confirmacio sense estat&#39;);
      this.router.navigate([&#39;/cataleg&#39;]);
    }
  }
  veureElement(): void {
    if (this.element) {
      this.router.navigate([&#39;/element&#39;, this.element.id]);
    }
  }
  tornarAlCataleg(): void {
    this.router.navigate([&#39;/cataleg&#39;]);
  }
}</code></pre>
  </div>
</div>

<h4>2.10.6. Avantatges i limitacions del Router state</h4>
<p><strong>Avantatges:</strong></p>
<ul>
<li><strong>URLs netes:</strong> Les dades NO apareixen a la URL</li>
<li><strong>Seguretat:</strong> Informació sensible no és visible ni compartible</li>
<li><strong>Objectes complexos:</strong> Podeu passar objectes grans sense límits de longitud de URL</li>
</ul>
<p><strong>Limitacions:</strong></p>
<ul>
<li><strong>No persistent:</strong> Si l'usuari recarrega la pàgina (F5), les dades es perden</li>
<li><strong>No compartible:</strong> No podeu copiar la URL per compartir-la amb les dades</li>
<li><strong>No marcable:</strong> No podeu afegir la pàgina als favorits amb l'estat</li>
</ul>
<p><strong>Quan usar Router state:</strong></p>
<ul>
<li>Confirmacions temporals després d'accions (crear, editar, eliminar)</li>
<li>Passar objectes grans entre components</li>
<li>Informació sensible que no ha d'exposar-se (tokens temporals, no passwords!)</li>
</ul>
<p><strong>Quan NO usar Router state:</strong></p>
<ul>
<li>Informació que ha de persistir si l'usuari recarrega (usar route/query params)</li>
<li>Dades que volen compartir-se (usar route/query params)</li>
<li>Navegació directa a URLs (l'estat no estarà disponible)</li>
</ul>
<h4>2.10.7. Comparativa: Route params vs Query params vs Router state</h4>
<table>
<thead>
<tr>
<th>Aspecte</th>
<th>Route params</th>
<th>Query params</th>
<th>Router state</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Visibilitat a la URL</strong></td>
<td>Sí (<code>/element/42</code>)</td>
<td>Sí (<code>?categoria=3</code>)</td>
<td>No</td>
</tr>
<tr>
<td><strong>Persistent amb recàrrega</strong></td>
<td>Sí</td>
<td>Sí</td>
<td>No (es perd)</td>
</tr>
<tr>
<td><strong>Compartible</strong></td>
<td>Sí</td>
<td>Sí</td>
<td>No</td>
</tr>
<tr>
<td><strong>Marcable</strong></td>
<td>Sí</td>
<td>Sí</td>
<td>No</td>
</tr>
<tr>
<td><strong>Longitud límit</strong></td>
<td>Sí (~2000 caràcters)</td>
<td>Sí (~2000 caràcters)</td>
<td>No</td>
</tr>
<tr>
<td><strong>Ús típic</strong></td>
<td>Identificadors obligatoris</td>
<td>Filtres opcionals</td>
<td>Dades temporals</td>
</tr>
<tr>
<td><strong>Exemple</strong></td>
<td><code>/element/:id</code></td>
<td><code>/cataleg?ordre=preu</code></td>
<td>Confirmació després de crear</td>
</tr>
</tbody>
</table>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Router state permet passar dades temporals entre components sense exposar-les a la URL. És ideal per confirmacions, objectes grans i informació sensible. Les dades es perden si l'usuari recarrega la pàgina. S'accedeix amb <code>router.getCurrentNavigation()</code> al constructor del component destí.
</div>

<h4>2.10.8. Resultat esperat</h4>
<p>Sabeu passar dades temporals amb Router state, enteneu les diferències respecte a route params i query params, i sabeu implementar pàgines de confirmació que reben dades sense exposar-les a la URL.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.11. Resum: estratègies per passar informació entre vistes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.11.1. Objectiu</h4>
<p>Consolidar el coneixement sobre les tres estratègies per passar informació entre vistes i saber escollir la més adequada segons el cas d'ús.</p>
<h4>2.11.2. Les tres estratègies</h4>
<p>Hem après tres maneres de passar informació entre vistes. Cada una té casos d'ús específics:</p>
<p><strong>1. Route params (<code>:id</code>) - Identificadors obligatoris</strong></p>
<p><strong>Característiques:</strong></p>
<ul>
<li>Obligatoris (la ruta no coincideix sense ells)</li>
<li>Visibles a la URL: <code>/element/42</code></li>
<li>Persistents (recarregar/compartir/marcar funciona)</li>
<li>Definició: <code>path: 'element/:id'</code></li>
</ul>
<p><strong>Ús ideal:</strong></p>
<ul>
<li>Identificadors únics de recursos (ID, slug, nom d'usuari)</li>
<li>Informació essencial sense la qual la pàgina no té sentit</li>
</ul>
<p><strong>Exemples:</strong></p>
<ul>
<li><code>/element/42</code> - Detall d'element amb ID 42</li>
<li><code>/usuari/maria</code> - Perfil de l'usuària Maria</li>
<li><code>/categoria/electrònica/element/99</code> - Element 99 de la categoria electrònica</li>
</ul>
<p><strong>Captura:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const id = Number(this.route.snapshot.paramMap.get(&#39;id&#39;));</code></pre>
  </div>
</div>

<p><strong>2. Query params (<code>?clau=valor</code>) - Paràmetres opcionals</strong></p>
<p><strong>Característiques:</strong></p>
<ul>
<li>Opcionals (la pàgina funciona sense ells, amb valors per defecte)</li>
<li>Visibles a la URL: <code>/cataleg?categoria=3&ordre=preu</code></li>
<li>Persistents (recarregar/compartir/marcar funciona)</li>
<li>Afegits amb <code>[queryParams]</code> o <code>{ queryParams }</code></li>
</ul>
<p><strong>Ús ideal:</strong></p>
<ul>
<li>Filtres, cerca, ordenació, paginació</li>
<li>Opcions de visualització (vista llista vs quadrícula)</li>
<li>Qualsevol configuració opcional</li>
</ul>
<p><strong>Exemples:</strong></p>
<ul>
<li><code>/cataleg?categoria=electrònica&ordre=popularitat</code> - Filtrar i ordenar</li>
<li><code>/cerca?q=angular&tipus=articles</code> - Cerca amb filtre de tipus</li>
<li><code>/blog?pàgina=3&per_pàgina=10</code> - Paginació</li>
</ul>
<p><strong>Captura:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const categoria = this.route.snapshot.queryParamMap.get(&#39;categoria&#39;) ?? &#39;totes&#39;;
const ordre = this.route.snapshot.queryParamMap.get(&#39;ordre&#39;) ?? &#39;data&#39;;</code></pre>
  </div>
</div>

<p><strong>3. Router state - Dades temporals no visibles</strong></p>
<p><strong>Característiques:</strong></p>
<ul>
<li>NO visibles a la URL (netes i segures)</li>
<li>NO persistents (es perden amb recàrrega)</li>
<li>NO compartibles ni marcables</li>
<li>Passades amb <code>{ state: { dades } }</code></li>
</ul>
<p><strong>Ús ideal:</strong></p>
<ul>
<li>Confirmacions temporals després d'accions</li>
<li>Objectes grans o complexos</li>
<li>Informació sensible que no ha d'exposar-se a la URL</li>
</ul>
<p><strong>Exemples:</strong></p>
<ul>
<li>Confirmació després de crear element (passar element creat)</li>
<li>Missatges de feedback (success/error)</li>
<li>Objectes grans que no caben a la URL</li>
</ul>
<p><strong>Passar:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.router.navigate([&#39;/confirmacio&#39;], {
  state: { element: elementCreat, missatge: &#39;Creat correctament&#39; }
});</code></pre>
  </div>
</div>

<p><strong>Captura:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const navigation = this.router.getCurrentNavigation();
const state = navigation?.extras.state as { element: any, missatge: string };</code></pre>
  </div>
</div>

<h4>2.11.3. Arbre de decisió: Quina estratègia usar?</h4>
<pre>
1. ¿La informació és obligatòria per renderitzar la vista?
   SÍ → Route param (:id)
   NO → Continua...

2. ¿Vols que sigui compartible/marcable/persistent?
   SÍ → Query param (?clau=valor)
   NO → Continua...

3. ¿És informació temporal només rellevant durant aquesta navegació?
   SÍ → Router state ({ state })
   NO → Reconsiderar els requisits
</pre>
<h4>2.11.4. Taula resum comparativa</h4>
<table>
<thead>
<tr>
<th>Aspecte</th>
<th>Route params</th>
<th>Query params</th>
<th>Router state</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Obligatori/Opcional</strong></td>
<td>Obligatori</td>
<td>Opcional</td>
<td>Opcional</td>
</tr>
<tr>
<td><strong>Visibilitat URL</strong></td>
<td>Sí</td>
<td>Sí</td>
<td>No</td>
</tr>
<tr>
<td><strong>Persistent recàrrega</strong></td>
<td>Sí</td>
<td>Sí</td>
<td>No</td>
</tr>
<tr>
<td><strong>Compartible</strong></td>
<td>Sí</td>
<td>Sí</td>
<td>No</td>
</tr>
<tr>
<td><strong>Longitud límit</strong></td>
<td>Sí</td>
<td>Sí</td>
<td>No</td>
</tr>
<tr>
<td><strong>Definició</strong></td>
<td><code>path: ':id'</code></td>
<td><code>[queryParams]</code></td>
<td><code>{ state }</code></td>
</tr>
<tr>
<td><strong>Captura</strong></td>
<td><code>paramMap.get()</code></td>
<td><code>queryParamMap.get()</code></td>
<td><code>getCurrentNavigation()</code></td>
</tr>
<tr>
<td><strong>Ús típic</strong></td>
<td>IDs obligatoris</td>
<td>Filtres opcionals</td>
<td>Dades temporals</td>
</tr>
</tbody>
</table>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Route params per identificadors obligatoris, query params per filtres opcionals, i Router state per dades temporals no visibles. Cada estratègia té casos d'ús específics. Sovint es combinen: route param per l'ID + query params per filtres + Router state per missatges de confirmació.
</div>

<h4>2.11.5. Resultat esperat</h4>
<p>Domineu les tres estratègies per passar informació entre vistes, sabeu escollir la més adequada segons els requisits (obligatori/opcional, persistent/temporal, visible/no visible), i podeu combinar-les en aplicacions complexes.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.12. Mini exemple pràctic</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.12.1. Mini exemple pràctic: Navegació amb paràmetres completa</h4>
<ol>
<li><strong>Definir ruta amb paràmetre</strong> obligatori a <code>app.routes.ts</code>: <code>path: 'element/:id'</code></li>
<li><strong>Crear component de detall</strong> que captura l'ID amb <code>ActivatedRoute.snapshot.paramMap.get('id')</code></li>
<li><strong>Validar i convertir l'ID</strong> a number, redirigir a error si és invàlid</li>
<li><strong>Carregar dades de l'API</strong> utilitzant l'ID capturat i mostrar-les al template</li>
<li><strong>Afegir enllaços al llistat</strong> amb <code>[routerLink]="['/element', element.id]"</code> per navegar dinàmicament</li>
<li><strong>Implementar filtres amb query params</strong> al catàleg: <code>?categoria=electrònica&ordre=preu</code></li>
<li><strong>Afegir navegació programàtica</strong> després de crear un element: <code>this.router.navigate(['/element', id])</code></li>
<li><strong>Passar dades temporals amb state</strong> a pàgina de confirmació sense exposar-les a la URL</li>
</ol>
<p><strong>Resultat esperat:</strong> Flux complet llistat → detall funcional, filtres persistents a la URL compartibles/marcables, navegació automàtica després d'operacions, i confirmacions amb dades temporals no visibles.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.13. Resolució de problemes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.13.1. Problemes transversals</h4>
<table>
<thead>
<tr>
<th>Símptoma</th>
<th>Causa probable</th>
<th>Solució Windows</th>
<th>Solució macOS/Linux</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ruta amb paràmetre retorna 404</td>
<td>Definició incorrecta del path</td>
<td>Verificar <code>path: 'element/:id'</code> (amb dos punts). NO <code>path: 'element/{id}'</code></td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>paramMap.get() retorna null</td>
<td>Nom del paràmetre incorrecte</td>
<td>Assegurar que <code>paramMap.get('id')</code> coincideix amb <code>:id</code> del path</td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Component no es recarrega amb nou ID</td>
<td>Usar snapshot en lloc de subscribe</td>
<td>Si Angular reutilitza el component, usar <code>paramMap.subscribe()</code> en lloc de snapshot</td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Error "Cannot read property 'id' of null"</td>
<td>ID null passat al servei</td>
<td>Validar que l'ID existeix abans d'usar-lo: <code>if (!id) return;</code></td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Query params no es capturen</td>
<td>Usar paramMap en lloc de queryParamMap</td>
<td>Canviar a <code>queryParamMap.get('categoria')</code> per query params</td>
<td>Igual que Windows</td>
</tr>
</tbody>
</table>
<h4>2.13.2. Problemes de configuració</h4>
<table>
<thead>
<tr>
<th>Símptoma</th>
<th>Causa probable</th>
<th>Solució Windows</th>
<th>Solució macOS/Linux</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rutes estàtiques mai coincideixen</td>
<td>Ordre incorrecte (dinàmica abans d'estàtica)</td>
<td>Moure rutes estàtiques (<code>element/crear</code>) abans de dinàmiques (<code>element/:id</code>)</td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>navigate() no funciona</td>
<td>Router no injectat</td>
<td>Afegir <code>private router: Router</code> al constructor</td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>getCurrentNavigation() retorna null</td>
<td>Cridat fora del constructor</td>
<td>Moure codi a constructor. <code>getCurrentNavigation()</code> només funciona allà</td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Query params desapareixen després de navegar</td>
<td>No preservats explícitament</td>
<td>Afegir <code>queryParamsHandling: 'merge'</code> a navigate si voleu preservar-los</td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Errors de compilació amb ActivatedRoute</td>
<td>Importació incorrecta</td>
<td>Assegurar <code>import { ActivatedRoute } from '@angular/router';</code></td>
<td>Igual que Windows</td>
</tr>
</tbody>
</table>
<h4>2.13.3. Problemes de dependències</h4>
<table>
<thead>
<tr>
<th>Símptoma</th>
<th>Causa probable</th>
<th>Solució</th>
</tr>
</thead>
<tbody>
<tr>
<td>Error "NullInjectorError: No provider for ActivatedRoute"</td>
<td>ActivatedRoute no disponible en component standalone</td>
<td>Afegir <code>RouterModule</code> als imports o usar <code>provideRouter()</code> a main.ts</td>
</tr>
<tr>
<td>ID sempre és string '0'</td>
<td>Conversió incorrecta</td>
<td>Usar <code>Number(id)</code> per convertir. Comprovar que <code>isNaN(id)</code> per validar</td>
</tr>
<tr>
<td>Query params no actualitzen component</td>
<td>Component no es subscriu a canvis</td>
<td>Usar <code>queryParamMap.subscribe()</code> en lloc de snapshot si els params canvien sense destruir component</td>
</tr>
<tr>
<td>Estat (state) es perd inesperadament</td>
<td>Accedir fora del constructor</td>
<td><code>getCurrentNavigation()</code> només funciona al constructor. Desar estat en propietat de classe</td>
</tr>
<tr>
<td>Error "Cannot match any routes"</td>
<td>Path mal format</td>
<td>Verificar que NO hi ha barres dobles (<code>//</code>), espais o caràcters especials al path</td>
</tr>
</tbody>
</table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.14. Prompts d'IA</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.14.1. Prompt 1: Analitzar flux de navegació amb paràmetres</h4>
<!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Role:</strong> Ets un arquitecte d'aplicacions Angular expert en sistemes de rutes i navegació.<br><br><strong>Context:</strong> Tinc una aplicació de catàleg d'elements amb les següents rutes [adjuntar app.routes.ts]. Vull implementar navegació del llistat al detall passant l'ID de l'element, i filtres opcionals al llistat amb query params per categoria i ordre.<br><br><strong>Task:</strong> Proposa l'arquitectura completa de navegació:<br>1. Definició de rutes amb route params i query params<br>2. Enllaços HTML amb routerLink per navegar del llistat al detall<br>3. Captura de paràmetres als components (snapshot vs subscribe)<br>4. Navegació programàtica després de crear un element<br>5. Gestió d'errors (ID invàlid, element no trobat)<br><br><strong>Format:</strong> Codi TypeScript complet per app.routes.ts, component de llistat, component de detall i servei. Incloure comentaris explicatius.</div>
  </div>
</div>

<h4>2.14.2. Prompt 2: Depurar problema de captura de paràmetres</h4>
<!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Role:</strong> Ets un expert en debugging d'aplicacions Angular.<br><br><strong>Context:</strong> He definit una ruta <code>element/:id</code> i intento capturar l'ID al component amb aquest codi [adjuntar codi del component]. Quan navego a <code>/element/42</code>, <code>paramMap.get('id')</code> retorna <code>null</code> i l'aplicació falla amb error "Cannot read property 'id' of null".<br><br><strong>Task:</strong> Diagnostica el problema i proposa solucions:<br>1. Verifica la definició de la ruta (sintaxi correcta amb <code>:</code>)<br>2. Comprova la captura al component (nom del paràmetre coincideix)<br>3. Valida que ActivatedRoute s'injecta correctament<br>4. Proposa codi corregit amb validació d'errors robust<br>5. Suggereix tests per verificar que funciona<br><br><strong>Format:</strong> Llista numerada amb cada possible causa, solució proposada i codi corregit.</div>
  </div>
</div>

<h4>2.14.3. Prompt 3: Implementar filtratge amb query params</h4>
<!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Role:</strong> Ets un desenvolupador Angular expert en experiència d'usuari i navegació.<br><br><strong>Context:</strong> Tinc un component de catàleg que mostra elements. Vull afegir filtres opcionals per categoria i ordenació (data/preu) que persisteixin a la URL com a query params: <code>/cataleg?categoria=electrònica&ordre=preu</code>.<br><br><strong>Task:</strong> Genera el codi complet per implementar filtres amb query params:<br>1. Botons HTML per canviar categoria i ordre<br>2. Navegació programàtica per actualitzar query params<br>3. Captura reactiva de query params amb subscripció<br>4. Aplicació de filtres als resultats<br>5. Indicació visual de filtres actius (botons destacats)<br>6. Reset de filtres (tornar a valors per defecte)<br><br><strong>Format:</strong> Codi TypeScript i HTML complets amb comentaris. Incloure estils SCSS per destacar filtres actius.</div>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.15. Autoavaluació</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.15.1. Criteris objectius (Definition of Done)</h4>
<p><strong>Funcionalitat:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He definit una ruta amb paràmetre obligatori (<code>:id</code>) i funciona correctament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He implementat un component de detall que captura l'ID i carrega dades de l'API</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He afegit enllaços al llistat que naveguen al detall passant l'ID dinàmicament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He implementat filtres amb query params que persisteixen a la URL</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He implementat navegació programàtica després d'una operació (crear/editar)</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Projecte i estructura:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He validat els paràmetres capturats (conversió a number, verificació de NaN)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He gestionat errors quan l'ID és invàlid (redirecció o missatge d'error)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He implementat subscripció reactiva quan el component no es destrueix</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He documentat a <code>docs/navegacio.md</code> les rutes amb paràmetres i query params</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Control de versions:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He inicialitzat repositori Git local si no existia</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He fet commit amb el missatge "feat: implementar paràmetres de ruta i navegació programàtica"</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He publicat els canvis a GitHub correctament</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Experiència d'usuari:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Les URLs són netes, descriptives i compartibles</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Els filtres persisten a la URL (puc copiar/enganxar la URL amb filtres)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">La navegació és fluida sense recarregues innecessàries</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Els errors es gestionen adequadament sense pantalles en blanc</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<h4>2.15.2. Competències adquirides</h4>
<p><strong>Paràmetres de ruta:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé definir rutes amb paràmetres obligatoris (<code>:id</code>) correctament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé capturar paràmetres amb <code>ActivatedRoute.snapshot.paramMap.get()</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc la diferència entre snapshot i subscribe per capturar paràmetres</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé validar i convertir paràmetres (són strings, cal convertir-los)</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Query params:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé utilitzar query params per a filtres i opcions opcionals</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé passar query params amb <code>[queryParams]</code> en enllaços HTML</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé capturar query params amb <code>queryParamMap.get()</code> i proporcionar valors per defecte</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc quan usar query params vs route params</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Navegació programàtica:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé navegar des de codi TypeScript amb <code>Router.navigate()</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé passar paràmetres i query params en navegació programàtica</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé implementar navegació després de validacions i operacions asíncrones</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé passar dades temporals amb Router state sense exposar-les a la URL</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Gestió d'errors i casos límit:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé gestionar IDs invàlids (NaN, negatius, nulls)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé redirigir o mostrar errors quan les dades no existeixen</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé validar paràmetres abans d'usar-los en operacions crítiques</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé proporcionar fallbacks (valors per defecte) per query params opcionals</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Arquitectura i bones pràctiques:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc l'ordre d'avaluació de rutes (estàtiques abans de dinàmiques)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé quan usar snapshot vs subscribe segons si el component es reutilitza</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé fer unsubscribe de subscripcions reactives per evitar memory leaks</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé combinar route params, query params i Router state segons les necessitats</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.16. Recapitulació</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.16.1. Què hem aconseguit</h4>
<p>Heu implementat un sistema complet de navegació amb paràmetres al projecte <code>catalog-elements</code>, permetent navegació dinàmica entre llistat i detall, filtres persistents i operacions amb feedback automàtic.</p>
<p>Disposeu d'una <strong>aplicació Angular amb navegació avançada</strong> que inclou:</p>
<ol>
<li><strong>Rutes amb paràmetres obligatoris:</strong> Definides amb <code>:id</code> per identificar recursos únics, capturades i validades als components per carregar dades específiques</li>
<li><strong>Navegació dinàmica:</strong> Enllaços HTML amb <code>[routerLink]</code> que passen IDs dinàmicament, permetent navegar del llistat al detall de qualsevol element sense crear rutes manuals</li>
<li><strong>Filtres persistents amb query params:</strong> Categoria i ordenació a la URL (<code>?categoria=3&ordre=preu</code>), compartibles, marcables i persistents amb recàrregues</li>
<li><strong>Navegació programàtica:</strong> Redireccions automàtiques després de crear elements, amb control total sobre el moment i condicions de navegació des de codi TypeScript</li>
<li><strong>Gestió d'errors robusta:</strong> Validació de paràmetres, conversió de tipus, redirecció a error quan l'ID és invàlid, i missatges clars per a l'usuari</li>
</ol>
<h4>2.16.2. Què queda preparat per a la Lectura 4.1.3</h4>
<p>A la <strong>Lectura 4.1.3 (Rutes niades i guàrdies de ruta)</strong> ampliareu el sistema de navegació amb:</p>
<ul>
<li><strong>Rutes niades:</strong> Organitzar jerarquies complexes (pare-fill) per seccions amb sub-navegació, com dashboards amb múltiples vistes o àrees administratives</li>
<li><strong>Guàrdies de ruta:</strong> Protegir rutes sensibles comprovant autenticació, permisos o estat abans de permetre l'accés, redirigint automàticament quan no es compleixen les condicions</li>
<li><strong>Múltiples outlets:</strong> Mostrar diverses vistes simultànies (barra lateral + contingut principal) amb navegació independent</li>
</ul>
<p>Amb paràmetres de ruta i navegació programàtica dominats, esteu preparats per implementar arquitectures de navegació complexes amb control d'accés i jerarquies niades.</p>
<h4>2.16.3. Contracte de sortida</h4>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Les vostres URLs ara són dinàmiques, compartibles i amigables, i la navegació és completament controlada per lògica de negoci!</strong></p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.17. Repàs de conceptes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>2.17.1. Paràmetres de ruta obligatoris (<code>:id</code>)</h4>
<ul>
<li><strong>Definició:</strong> <code>path: 'element/:id'</code> - El dos punts indica un segment dinàmic obligatori</li>
<li><strong>Captura:</strong> <code>this.route.snapshot.paramMap.get('id')</code> - Retorna un string o null</li>
<li><strong>Validació:</strong> Convertir a number amb <code>Number(id)</code> i verificar amb <code>isNaN()</code></li>
<li><strong>Ús típic:</strong> Identificadors únics de recursos (element, usuari, comanda)</li>
</ul>
<h4>2.17.2. Query params (<code>?clau=valor</code>)</h4>
<ul>
<li><strong>Passar:</strong> <code>[queryParams]="{ categoria: 'electrònica' }"</code> o <code>{ queryParams: { ordre: 'preu' } }</code></li>
<li><strong>Captura:</strong> <code>this.route.snapshot.queryParamMap.get('categoria')</code> - Retorna un string o null</li>
<li><strong>Fallback:</strong> Usar operador <code>??</code> per proporcionar valors per defecte: <code>categoria ?? 'totes'</code></li>
<li><strong>Ús típic:</strong> Filtres, cerca, ordenació, paginació (opcionals)</li>
</ul>
<h4>2.17.3. Navegació programàtica</h4>
<ul>
<li><strong>Sintaxi bàsica:</strong> <code>this.router.navigate(['/cataleg'])</code> - Array de segments</li>
<li><strong>Amb paràmetres:</strong> <code>this.router.navigate(['/element', 42])</code> - Segments concatenats amb <code>/</code></li>
<li><strong>Amb query params:</strong> <code>this.router.navigate(['/cataleg'], { queryParams: { categoria: 3 } })</code></li>
<li><strong>Ús típic:</strong> Després de validacions, operacions asíncrones, redireccions condicionals</li>
</ul>
<h4>2.17.4. Router state (estat temporal)</h4>
<ul>
<li><strong>Passar:</strong> <code>this.router.navigate(['/confirmacio'], { state: { element: {...} } })</code></li>
<li><strong>Captura:</strong> <code>this.router.getCurrentNavigation()?.extras.state</code> - Només al constructor</li>
<li><strong>Limitació:</strong> Es perd amb recàrrega (F5), no compartible ni marcable</li>
<li><strong>Ús típic:</strong> Confirmacions temporals, objectes grans, informació sensible</li>
</ul>
<h4>2.17.5. Snapshot vs Subscribe</h4>
<ul>
<li><strong>Snapshot:</strong> <code>route.snapshot.paramMap.get('id')</code> - Captura instantània, no reactiu, 95% dels casos</li>
<li><strong>Subscribe:</strong> <code>route.paramMap.subscribe(params => ...)</code> - Reactiu, requereix unsubscribe, rutes niades</li>
<li><strong>Quan usar subscribe:</strong> Component reutilitzat amb diferent ID sense destruir-se</li>
</ul>
<h4>2.17.6. Ordre de definició de rutes</h4>
<ul>
<li><strong>Regla:</strong> Rutes estàtiques abans de dinàmiques - Angular avalua de dalt a baix</li>
<li><strong>Correcte:</strong> <code>element/crear</code> abans de <code>element/:id</code></li>
<li><strong>Incorrecte:</strong> <code>element/:id</code> captura <code>/element/crear</code> assignant <code>id = 'crear'</code></li>
</ul>
<h4>2.17.7. Validació i conversió de tipus</h4>
<ul>
<li><strong>Sempre strings:</strong> <code>paramMap.get()</code> i <code>queryParamMap.get()</code> retornen strings o null</li>
<li><strong>Convertir:</strong> <code>Number(id)</code>, <code>parseInt(id, 10)</code>, <code>Boolean(valor)</code></li>
<li><strong>Validar:</strong> <code>isNaN(id)</code>, <code>id <= 0</code>, <code>!id</code> abans d'usar-los</li>
<li><strong>Fallback:</strong> <code>categoria ?? 'totes'</code>, <code>ordre || 'data'</code></li>
</ul>
<h4>2.17.8. Arbre de decisió ràpid</h4>
<pre>
¿Obligatori? → Route param (:id)
¿Compartible/persistent? → Query param (?clau=valor)
¿Temporal/sensible? → Router state ({ state })
</pre>
  
  </div>
</div>


</div>
<!-- Tanca Secció 2 -->

<!-- ============================================================ -->
<!-- SECCIÓ 3: Rutes niades i guàrdies de ruta -->
<!-- ============================================================ -->
<div class="section" id="Unitat4_Bloc1_Seccio3">
  <h2 id="Unitat4_Bloc1_Seccio3">3. Rutes niades i guàrdies de ruta</h2>

  <!-- MULTIMÈDIA -->
  <!--
  ════════════════════════════════════════════════════════════════
  Component: Enllaços multimèdia YouTube
  ════════════════════════════════════════════════════════════════

  Paràmetres:
    - unitat: número de la unitat (1-4)
    - bloc: número del bloc (1-4)
    - seccio: número de la secció (1-3)

  Exemple d'ús:
    {% include multimedia-youtube.html unitat=1 bloc=1 seccio=1 %}

  El component busca automàticament les URLs corresponents a
  site.data.multimedia i mostra els botons de vídeo i àudio.
  ════════════════════════════════════════════════════════════════
-->





  
  
  
  
  

  

  

  
<div class="multimedia-resources">
  <div class="multimedia-header">
    <i class="bi bi-play-circle-fill"></i>
    <span>Contingut multimèdia d'aquesta lectura</span>
  </div>

  <div class="multimedia-buttons">
    
    <a href="https://www.youtube.com/watch?v=LmYeUi_EFrM" target="_blank" rel="noopener noreferrer" class="multimedia-btn video-btn" title="Lectura 4.1.3 · Rutes niades i guàrdies de ruta">
      <i class="bi bi-youtube"></i>
      <span>Veure vídeo</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    

    
    <a href="https://www.youtube.com/watch?v=z9QGcFufViQ" target="_blank" rel="noopener noreferrer" class="multimedia-btn audio-btn" title="[Audio] Lectura 4.1.3 · Rutes niades i guàrdies de ruta">
      <i class="bi bi-mic-fill"></i>
      <span>Escoltar àudio</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    
  </div>

  
  
</div>
  




  <!-- Component: Objectius del bloc/unitat -->



<div class="objectius-box">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-bullseye" aria-hidden="true"></i> Objectius</div>
  <div class="component-content">
    <ul>
      
        <li>Configurar rutes niades (pare-filles) per organitzar jerarquies complexes de pàgines</li>
      
        <li>Utilitzar múltiples outlets per mostrar diverses vistes simultànies</li>
      
        <li>Crear guàrdies d'activació per protegir rutes sensibles comprovant autenticació o permisos</li>
      
        <li>Implementar lògica de redirecció automàtica quan l'accés a una ruta és denegat</li>
      
    </ul>
  </div>
  <!-- IMPORTANT: també es pot usar via front matter: page.objectius (array) -->
</div>



  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>RA4 · Criteri 3</strong> — Aplica mecanismes per preservar l'estat d'usuari i protegir seccions quan sigui necessari.
    
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.1. Prerequisits</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<p>Abans de començar, necessiteu:</p>
<ul>
<li><strong>Lectures 4.1.1 i 4.1.2 completades:</strong> Sistema de rutes bàsic amb navegació i paràmetres funcionals</li>
<li><strong>Projecte catalog-elements operatiu:</strong> Aplicació amb almenys 3-4 rutes diferents funcionant correctament</li>
<li><strong>Component de layout o contenidor:</strong> Component pare que pot contenir rutes filles (pot crear-se durant aquesta lectura)</li>
<li><strong>Comprensió bàsica d'autenticació:</strong> Concepte d'usuari autenticat vs no autenticat (simularem l'estat)</li>
</ul>
<p><strong>Verificació ràpida:</strong></p>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash"># Windows (PowerShell)
Set-Location $env:USERPROFILE\workspace\catalog-elements
Get-Content .\src\app\navegacio\app.routes.ts | Select-String -Pattern &quot;path&quot;

# macOS/Linux (bash/zsh)
cd ~/workspace/catalog-elements
grep &quot;path&quot; src/app/navegacio/app.routes.ts</code></pre>
  </div>
</div>

<p><strong>Punt d'autocomprovació:</strong> Heu de veure almenys 3-4 definicions de rutes. Si obriu l'aplicació al navegador (<code>http://localhost:4300</code>), la navegació entre rutes ha de funcionar correctament. Heu de poder navegar a <code>/cataleg</code>, <code>/element/42</code>, etc. sense errors 404.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.2. Marc conceptual</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.2.1. Què són les rutes niades i les guàrdies de ruta</h4>
<p>Les <strong>rutes niades</strong> (nested routes) permeten crear jerarquies pare-fill on una ruta conté altres rutes dins seu. Això és essencial per organitzar aplicacions complexes amb seccions que tenen sub-navegació pròpia. Les <strong>guàrdies de ruta</strong> són mecanismes de protecció que executen lògica abans de permetre la navegació, comprovant condicions com autenticació, permisos o estat de dades.</p>
<h4>3.2.2. Problema sense rutes niades ni guàrdies</h4>
<p><strong>Situació abans:</strong></p>
<p>Imagineu una aplicació amb un panell d'administració que té 5 seccions diferents (usuaris, comandes, estadístiques, configuració, logs). Sense rutes niades, definiu totes les rutes al mateix nivell:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// src/app/navegacio/app.routes.ts - Sense rutes niades: tot pla
export const routes: Routes = [
  { path: &#39;&#39;, component: InicComponent },
  { path: &#39;cataleg&#39;, component: CatalegComponent },
  // PROBLEMA: Admin amb 5 rutes al mateix nivell sense jerarquia
  { path: &#39;admin-usuaris&#39;, component: AdminUsuarisComponent },
  { path: &#39;admin-comandes&#39;, component: AdminComandesComponent },
  { path: &#39;admin-estadistiques&#39;, component: AdminEstadistiquesComponent },
  { path: &#39;admin-configuracio&#39;, component: AdminConfiguracioComponent },
  { path: &#39;admin-logs&#39;, component: AdminLogsComponent },
  // PROBLEMA: Sense guàrdies, qualsevol pot accedir
];</code></pre>
  </div>
</div>

<p><strong>Sense guàrdies de ruta:</strong></p>
<p>Totes les rutes són accessibles per qualsevol usuari. No hi ha cap mecanisme per comprovar si l'usuari està autenticat o té permisos d'administrador abans d'accedir a <code>/admin-usuaris</code>:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">// PROBLEMA: Qualsevol pot navegar a l&#39;administració
&lt;a routerLink=&quot;/admin-usuaris&quot;&gt;Admin Usuaris&lt;/a&gt;
// Sense guàrdies, això funciona fins i tot si l&#39;usuari NO és admin</code></pre>
  </div>
</div>

<p><strong>Problemes que genera:</strong></p>
<p><strong>1. Falta d'estructura jeràrquica i organització confusa</strong></p>
<p>Sense rutes niades, totes les rutes d'administració estan al mateix nivell que les rutes públiques. Això crea confusió sobre quines rutes són sub-seccions d'altres:</p>
<p><strong>Exemple de caos:</strong></p>
<ul>
<li><code>/admin-usuaris</code> - És una sub-secció de <code>/admin</code>? No hi ha manera de saber-ho</li>
<li><code>/admin-comandes</code> - Relacionada amb <code>/admin-usuaris</code>? No és clar</li>
<li><code>/configuracio</code> vs <code>/admin-configuracio</code> - Dos tipus de configuració? Confús</li>
</ul>
<p><strong>Impacte real:</strong> En equips grans, desenvolupadors nous tarden dies a entendre l'estructura de rutes perquè no hi ha jerarquia clara. "On va aquesta ruta? És pública o d'administració? És una sub-secció de què?"</p>
<p><strong>2. Duplicació de layout i components comuns</strong></p>
<p>Cada ruta d'administració necessita reproduir el mateix layout (menú lateral d'admin, capçalera, etc.):</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">// admin-usuaris.component.html - Duplicació del layout d&#39;admin
&lt;div class=&quot;admin-layout&quot;&gt;
  &lt;nav class=&quot;admin-sidebar&quot;&gt;
    &lt;a routerLink=&quot;/admin-usuaris&quot;&gt;Usuaris&lt;/a&gt;
    &lt;a routerLink=&quot;/admin-comandes&quot;&gt;Comandes&lt;/a&gt;
    &lt;a routerLink=&quot;/admin-estadistiques&quot;&gt;Estadístiques&lt;/a&gt;
    &lt;!-- ... duplicat a tots els components d&#39;admin! --&gt;
  &lt;/nav&gt;
  &lt;main&gt;
    &lt;!-- Contingut específic d&#39;usuaris --&gt;
  &lt;/main&gt;
&lt;/div&gt;

// admin-comandes.component.html - MATEIX layout duplicat!
&lt;div class=&quot;admin-layout&quot;&gt;
  &lt;nav class=&quot;admin-sidebar&quot;&gt;
    &lt;a routerLink=&quot;/admin-usuaris&quot;&gt;Usuaris&lt;/a&gt;
    &lt;!-- ... TOT duplicat de nou! --&gt;
  &lt;/nav&gt;
  &lt;main&gt;
    &lt;!-- Contingut específic de comandes --&gt;
  &lt;/main&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<p><strong>Cost de manteniment:</strong> Si voleu canviar el menú lateral d'admin, heu de modificar 5 fitxers HTML! Canviar l'estil del layout requereix tocar tots els components d'admin.</p>
<p><strong>3. URLs no amigables i falta de context visual</strong></p>
<p>Les URLs planes no reflecteixen la jerarquia real de l'aplicació:</p>
<ul>
<li><code>/admin-usuaris</code> - Prefixe <code>admin-</code> forçat artificialment</li>
<li><code>/admin-comandes</code> - Repetició del prefix en cada ruta</li>
<li><code>/admin-estadistiques</code> - URLs llargues i redundants</li>
</ul>
<p><strong>URLs desitjables amb jerarquia:</strong></p>
<ul>
<li><code>/admin/usuaris</code> - Clar: sub-secció "usuaris" dins d'"admin"</li>
<li><code>/admin/comandes</code> - Jerarquia visual evident</li>
<li><code>/admin/estadistiques</code> - Agrupació natural</li>
</ul>
<p><strong>Problema SEO i usabilitat:</strong> Google penalitza URLs mal estructurades. Els usuaris no poden deduir fàcilment la jerarquia de pàgines només veient la URL.</p>
<p><strong>4. Impossibilitat de compartir layout i estat entre sub-seccions</strong></p>
<p>Sense un component pare comú, no podeu:</p>
<ul>
<li>Compartir l'estat entre totes les sub-seccions d'admin (per exemple, informació de l'usuari administrador)</li>
<li>Aplicar estils o comportaments globals a totes les pàgines d'admin</li>
<li>Carregar dades comunes una sola vegada (en lloc de repetir-ho a cada component)</li>
</ul>
<p><strong>Exemple:</strong> Voleu mostrar "Hola Admin Maria" a totes les pàgines d'admin. Sense layout compartit, heu de:</p>
<ol>
<li>Carregar la informació de l'usuari a cada component d'admin (5 vegades!)</li>
<li>Duplicar el codi de visualització en cada template</li>
</ol>
<p><strong>5. Falta de protecció: rutes sensibles accessibles sense autenticació</strong></p>
<p>Sense guàrdies, qualsevol pot accedir directament a rutes d'administració escrivint la URL al navegador:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">http://localhost:4300/admin-usuaris
→ Carrega la pàgina d&#39;administració d&#39;usuaris
→ Fins i tot si l&#39;usuari NO està autenticat!
→ Fins i tot si l&#39;usuari NO és administrador!</code></pre>
  </div>
</div>

<p><strong>Impacte de seguretat:</strong> Dades sensibles exposades, funcionalitats perilloses accessibles (eliminar usuaris, canviar preus, modificar configuració del sistema). Encara que el backend validi permisos, mostrar la interfície d'admin a usuaris no autoritzats és molt problemàtic (poden veure dades parcials, intenten accions, generen errors confusos).</p>
<p><strong>Exemple real d'incident:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Usuari normal navega a /admin-estadistiques
→ Veu gràfics d&#39;estadístiques internes (vendes, usuaris actius, errors de sistema)
→ Informació confidencial exposada!
→ L&#39;usuari pot intentar modificar coses (formularis visibles)
→ Genera errors 403 del backend (confusió per a l&#39;usuari)
→ Experiència d&#39;usuari horrible + brecha de seguretat</code></pre>
  </div>
</div>

<p><strong>6. Experiència d'usuari deteriorada: navegació sense validació prèvia</strong></p>
<p>No podeu validar condicions abans de navegar:</p>
<ul>
<li>Usuari intenta navegar a <code>/preferits</code> però no ha iniciat sessió → Veu un error després de carregar la pàgina</li>
<li>Usuari intenta accedir a <code>/editar-perfil</code> però el seu perfil està incomplet → Carrega la pàgina i després veu un error</li>
</ul>
<p><strong>Sense guàrdies:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">1. Usuari clica &quot;Veure preferits&quot;
2. Angular navega a /preferits
3. Component PreferitsComponent es carrega
4. ngOnInit() intenta carregar preferits
5. API retorna 401 Unauthorized
6. Component mostra error &quot;No tens sessió iniciada&quot;</code></pre>
  </div>
</div>

<p><strong>Amb guàrdies:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">1. Usuari clica &quot;Veure preferits&quot;
2. Guàrdia comprova autenticació ABANS de navegar
3. Si NO autenticat → Redirigeix automàticament a /login
4. Usuari veu pàgina de login immediatament (millor experiència)</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.3. Model mental</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.3.1. Rutes niades com carpetes dins de carpetes</h4>
<p>Imagina que les rutes són carpetes en un sistema de fitxers. Una ruta pare és una carpeta principal (<code>/admin</code>) que conté subcarpetes (<code>/admin/usuaris</code>, <code>/admin/comandes</code>). El component pare és com l'estructura de la carpeta (icona, color, metadades) que totes les subcarpetes comparteixen.</p>
<h4>3.3.2. Router-outlet com a marc de foto intercanviable</h4>
<p>El <code>&lt;router-outlet&gt;</code> dins d'un component pare és com un marc de foto buit. Les rutes filles són diferents fotos que pots posar al marc. El marc (layout) no canvia, però la foto (contingut) sí. Quan navegues entre rutes filles, només canvies la foto dins del mateix marc.</p>
<h4>3.3.3. Guàrdies com a guardes de seguretat a l'entrada</h4>
<p>Les guàrdies són com guardes de seguretat a l'entrada d'un edifici. Abans de deixar-te entrar (carregar el component), comproven el teu carnet (autenticació), el teu rol (permisos), i decideixen si pots passar o et redirigeixen a un altre lloc (login).</p>
<h4>3.3.4. Herència de guàrdies com a control d'accés a zones</h4>
<p>Si poses un guarda a l'entrada d'una zona restringida (ruta pare), totes les habitacions dins d'aquesta zona (rutes filles) estan protegides automàticament. No cal posar un guarda a cada habitació, el guarda de la zona ja ho controla tot.</p>
<h4>3.3.5. returnUrl com a nota per recordar destinació</h4>
<p>Quan el guarda et redirigeix al login perquè no tens carnet, et dóna una nota amb la destinació on volies anar. Després de fer login, mires la nota i et dirigeixes allà. Sense la nota, després de fer login no recordaries on volies anar originalment.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.4. Rutes niades: organitzar jerarquies de pàgines</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.4.1. Objectiu</h4>
<p>Comprendre què són les rutes niades, per què són necessàries i quan utilitzar-les per organitzar aplicacions complexes.</p>
<h4>3.4.2. Què són les rutes niades</h4>
<p>Les <strong>rutes niades</strong> permeten crear jerarquies de rutes on una ruta pare conté rutes filles. Això és essencial per organitzar aplicacions amb seccions que tenen múltiples sub-pàgines relacionades, com ara un panell d'administració, un perfil d'usuari amb configuració, o una vista de producte amb pestanyes.</p>
<h4>3.4.3. Per què necessitem rutes niades</h4>
<p><strong>1. Organització lògica de seccions complexes</strong></p>
<p>Aplicacions grans tenen seccions amb múltiples sub-pàgines. Sense rutes niades, totes les rutes estan al mateix nivell, creant confusió:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Rutes planes (problema):
/admin-usuaris
/admin-comandes
/admin-estadistiques
/admin-configuracio
/admin-logs
→ No és clar que totes són sub-seccions de &quot;admin&quot;</code></pre>
  </div>
</div>

<p>Amb rutes niades, la jerarquia és evident:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Rutes niades (solució):
/admin
  ├── /admin/usuaris
  ├── /admin/comandes
  ├── /admin/estadistiques
  ├── /admin/configuracio
  └── /admin/logs
→ Jerarquia clara: totes són filles de &quot;/admin&quot;</code></pre>
  </div>
</div>

<p><strong>2. Compartir layout i estils entre sub-pàgines</strong></p>
<p>Totes les pàgines d'una secció sovint comparteixen elements comuns:</p>
<ul>
<li>Menú lateral amb navegació entre sub-pàgines</li>
<li>Capçalera amb títol de la secció</li>
<li>Estils visuals consistents</li>
</ul>
<p>Sense rutes niades, heu de duplicar aquest layout a cada component. Amb rutes niades, el component pare proporciona el layout una sola vegada:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;!-- admin-layout.component.html - Layout compartit --&gt;
&lt;div class=&quot;admin-layout&quot;&gt;
  &lt;nav class=&quot;sidebar&quot;&gt;
    &lt;a routerLink=&quot;/admin/usuaris&quot;&gt;Usuaris&lt;/a&gt;
    &lt;a routerLink=&quot;/admin/comandes&quot;&gt;Comandes&lt;/a&gt;
  &lt;/nav&gt;
  &lt;main&gt;
    &lt;router-outlet&gt;&lt;/router-outlet&gt;  ← Rutes filles aquí
  &lt;/main&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<p><strong>3. URLs semàntiques i amigables</strong></p>
<p>Les rutes niades generen URLs que reflecteixen la jerarquia real:</p>
<ul>
<li><code>/perfil/configuracio</code> - Clar: configuració dins del perfil</li>
<li><code>/perfil/privacitat</code> - Clar: privacitat dins del perfil</li>
<li><code>/producte/42/ressenyes</code> - Clar: ressenyes del producte 42</li>
</ul>
<p>Aquestes URLs són:</p>
<ul>
<li><strong>Comprensibles:</strong> L'usuari entén la jerarquia només veient la URL</li>
<li><strong>Compartibles:</strong> Còpies la URL i altra persona entén on està</li>
<li><strong>SEO-friendly:</strong> Google valora URLs ben estructurades</li>
</ul>
<h4>3.4.4. Quan usar rutes niades</h4>
<p><strong>Usar rutes niades quan:</strong></p>
<ul>
<li>Teniu 3+ sub-pàgines relacionades amb layout comú</li>
<li>Volen URLs amb jerarquia visual (<code>/secció/sub-secció</code>)</li>
<li>Necessiteu compartir estat o dades entre sub-pàgines</li>
<li>Hi ha navegació entre sub-pàgines sense sortir de la secció</li>
</ul>
<p><strong>Exemples típics:</strong></p>
<ul>
<li><strong>Dashboard d'admin:</strong> <code>/admin/usuaris</code>, <code>/admin/comandes</code>, <code>/admin/estadístiques</code></li>
<li><strong>Perfil d'usuari:</strong> <code>/perfil/configuracio</code>, <code>/perfil/privacitat</code>, <code>/perfil/notificacions</code></li>
<li><strong>Producte amb pestanyes:</strong> <code>/producte/42/descripcio</code>, <code>/producte/42/ressenyes</code>, <code>/producte/42/especificacions</code></li>
<li><strong>Curs amb lliçons:</strong> <code>/curs/angular/lliço-1</code>, <code>/curs/angular/lliço-2</code></li>
</ul>
<p><strong>NO usar rutes niades quan:</strong></p>
<ul>
<li>Cada pàgina té layout completament diferent</li>
<li>Hi ha menys de 2-3 pàgines relacionades</li>
<li>Prefereixes URLs planes per simplicitat</li>
</ul>
<h4>3.4.5. Anatomia d'una ruta niada</h4>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;admin&#39;,                      // ← Ruta pare
  component: AdminLayoutComponent,    // ← Component amb layout compartit
  children: [                         // ← Array de rutes filles
    { path: &#39;usuaris&#39;, component: AdminUsuarisComponent },
    { path: &#39;comandes&#39;, component: AdminComandesComponent }
  ]
}</code></pre>
  </div>
</div>

<p><strong>Components involucrats:</strong></p>
<ol>
<li><strong><code>AdminLayoutComponent</code></strong> - Proporciona layout amb <code>&lt;router-outlet&gt;</code> per renderitzar filles</li>
<li><strong><code>AdminUsuarisComponent</code></strong> - Contingut específic que es renderitza dins del layout</li>
<li><strong><code>AdminComandesComponent</code></strong> - Altre contingut específic dins del mateix layout</li>
</ol>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Les rutes niades organitzen aplicacions complexes en jerarquies clares amb URLs semàntiques, layouts compartits i estat comú entre sub-pàgines relacionades. Són essencials per aplicacions amb seccions que tenen 3+ sub-pàgines.
</div>

<h4>3.4.6. Resultat esperat</h4>
<p>Compreneu què són les rutes niades, per què són necessàries per organitzar aplicacions complexes, i quan utilitzar-les per millorar l'estructura, la reutilització i la semàntica de les URLs.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.5. Configuració de rutes filles: propietat children</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.5.1. Objectiu</h4>
<p>Aprendre la sintaxi exacta per definir rutes niades amb la propietat <code>children</code> i entendre com Angular les interpreta.</p>
<h4>3.5.2. Sintaxi bàsica de rutes niades</h4>
<p>Les rutes niades es defineixen amb la propietat <code>children</code> dins d'una ruta pare. Angular renderitza les rutes filles dins del <code>&lt;router-outlet&gt;</code> del component pare.</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// src/app/navegacio/app.routes.ts
import { Routes } from &#39;@angular/router&#39;;
import { AdminLayoutComponent } from &#39;../admin/admin-layout.component&#39;;
import { AdminUsuarisComponent } from &#39;../admin/usuaris/admin-usuaris.component&#39;;
import { AdminComandesComponent } from &#39;../admin/comandes/admin-comandes.component&#39;;
export const routes: Routes = [
  { path: &#39;&#39;, component: InicComponent },
  { path: &#39;cataleg&#39;, component: CatalegComponent },
  // Ruta niada amb children
  {
    path: &#39;admin&#39;,                      // Ruta pare: /admin
    component: AdminLayoutComponent,    // Component amb layout
    children: [                         // Rutes filles
      {
        path: &#39;usuaris&#39;,                 // Ruta filla: /admin/usuaris
        component: AdminUsuarisComponent
      },
      {
        path: &#39;comandes&#39;,                // Ruta filla: /admin/comandes
        component: AdminComandesComponent
      }
    ]
  }
];</code></pre>
  </div>
</div>

<p><strong>URLs generades:</strong></p>
<ul>
<li><code>/admin</code> → Carrega <code>AdminLayoutComponent</code> amb <code>&lt;router-outlet&gt;</code> buit</li>
<li><code>/admin/usuaris</code> → Carrega <code>AdminLayoutComponent</code> + <code>AdminUsuarisComponent</code> dins del outlet</li>
<li><code>/admin/comandes</code> → Carrega <code>AdminLayoutComponent</code> + <code>AdminComandesComponent</code> dins del outlet</li>
</ul>
<h4>3.5.3. Component pare amb router-outlet</h4>
<p>El component pare MUST contenir un <code>&lt;router-outlet&gt;</code> on es renderitzaran les rutes filles:</p>
<p><code>src/app/admin/admin-layout.component.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component } from &#39;@angular/core&#39;;
import { RouterOutlet, RouterLink } from &#39;@angular/router&#39;;
import { CommonModule } from &#39;@angular/common&#39;;
@Component({
  selector: &#39;app-admin-layout&#39;,
  standalone: true,
  imports: [CommonModule, RouterOutlet, RouterLink],
  templateUrl: &#39;./admin-layout.component.html&#39;,
  styleUrls: [&#39;./admin-layout.component.scss&#39;]
})
export class AdminLayoutComponent {}</code></pre>
  </div>
</div>

<p><code>src/app/admin/admin-layout.component.html</code>:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;admin-layout&quot;&gt;
&lt;header class=&quot;admin-header&quot;&gt;
&lt;h1&gt;Panell d&#39;administració&lt;/h1&gt;
&lt;/header&gt;
&lt;nav class=&quot;admin-sidebar&quot;&gt;
&lt;a routerLink=&quot;/admin/usuaris&quot; routerLinkActive=&quot;actiu&quot;&gt;
Usuaris
&lt;/a&gt;
&lt;a routerLink=&quot;/admin/comandes&quot; routerLinkActive=&quot;actiu&quot;&gt;
Comandes
&lt;/a&gt;
&lt;a routerLink=&quot;/admin/estadistiques&quot; routerLinkActive=&quot;actiu&quot;&gt;
Estadístiques
&lt;/a&gt;
&lt;/nav&gt;
&lt;main class=&quot;admin-content&quot;&gt;
&lt;router-outlet&gt;&lt;/router-outlet&gt;
&lt;/main&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<p><strong>Important:</strong> Sense <code>&lt;router-outlet&gt;</code>, les rutes filles NO es renderitzaran!</p>
<h4>3.5.4. Ruta per defecte dins de children</h4>
<p>Quan l'usuari navega només al pare (<code>/admin</code>), podeu redirigir automàticament a una filla per defecte:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;admin&#39;,
  component: AdminLayoutComponent,
  children: [
    { path: &#39;&#39;, redirectTo: &#39;usuaris&#39;, pathMatch: &#39;full&#39; },  // /admin → /admin/usuaris
    { path: &#39;usuaris&#39;, component: AdminUsuarisComponent },
    { path: &#39;comandes&#39;, component: AdminComandesComponent }
  ]
}</code></pre>
  </div>
</div>

<p><strong>Resultat:</strong> Navegar a <code>/admin</code> redirigeix automàticament a <code>/admin/usuaris</code>.</p>
<h4>3.5.5. Rutes niades amb paràmetres</h4>
<p>Podeu combinar rutes niades amb paràmetres de ruta:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;producte/:id&#39;,                    // Ruta pare amb paràmetre
  component: ProducteLayoutComponent,
  children: [
    { path: &#39;&#39;, redirectTo: &#39;descripcio&#39;, pathMatch: &#39;full&#39; },
    { path: &#39;descripcio&#39;, component: DescripcioComponent },
    { path: &#39;ressenyes&#39;, component: RessenyesComponent },
    { path: &#39;especificacions&#39;, component: EspecificacionsComponent }
  ]
}</code></pre>
  </div>
</div>

<p><strong>URLs generades:</strong></p>
<ul>
<li><code>/producte/42</code> → Redirigeix a <code>/producte/42/descripcio</code></li>
<li><code>/producte/42/ressenyes</code> → Producte 42, pestanya de ressenyes</li>
<li><code>/producte/99/especificacions</code> → Producte 99, pestanya d'especificacions</li>
</ul>
<p><strong>Captura del paràmetre al component pare:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// producte-layout.component.ts
export class ProducteLayoutComponent implements OnInit {
  producteId!: number;
  constructor(private route: ActivatedRoute) {}
  ngOnInit(): void {
    this.producteId = Number(this.route.snapshot.paramMap.get(&#39;id&#39;));
    console.log(&#39;ID del producte:&#39;, this.producteId);
    // Totes les rutes filles també poden accedir a aquest paràmetre
  }
}</code></pre>
  </div>
</div>

<h4>3.5.6. Errors comuns en rutes niades</h4>
<p><strong>Error 1: Oblidar router-outlet al component pare</strong></p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;!-- PROBLEMA: Component pare sense router-outlet --&gt;
&lt;div class=&quot;admin-layout&quot;&gt;
&lt;nav&gt;...&lt;/nav&gt;
&lt;main&gt;
&lt;!-- NO hi ha &lt;router-outlet&gt; aquí --&gt;
&lt;/main&gt;
&lt;/div&gt;
&lt;!-- SOLUCIÓ: Amb router-outlet --&gt;
&lt;div class=&quot;admin-layout&quot;&gt;
&lt;nav&gt;...&lt;/nav&gt;
&lt;main&gt;
&lt;router-outlet&gt;&lt;/router-outlet&gt;
&lt;/main&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<p><strong>Error 2: Definir rutes filles amb barra inicial</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// INCORRECTE: Rutes filles amb barra inicial
children: [
  { path: &#39;/usuaris&#39;, component: AdminUsuarisComponent }  // NO funciona
]
// CORRECTE: Sense barra inicial
children: [
  { path: &#39;usuaris&#39;, component: AdminUsuarisComponent }  // Funciona
]</code></pre>
  </div>
</div>

<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Les rutes niades es defineixen amb <code>children: []</code> dins d'una ruta pare. El component pare MUST contenir <code>&lt;router-outlet&gt;</code> per renderitzar les filles. Les rutes filles NO porten barra inicial. Angular concatena automàticament <code>pare/filla</code> per generar la URL completa.
</div>

<h4>3.5.7. Resultat esperat</h4>
<p>Sabeu configurar rutes niades amb la propietat <code>children</code>, crear components pare amb <code>&lt;router-outlet&gt;</code>, definir rutes per defecte, combinar amb paràmetres i evitar errors comuns.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.6. Múltiples outlets: mostrar diverses vistes simultànies</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.6.1. Objectiu</h4>
<p>Aprendre a utilitzar outlets amb nom per mostrar múltiples vistes simultànies i crear layouts complexos amb navegació independent.</p>
<h4>3.6.2. Outlet principal i outlets secundaris</h4>
<p>Angular permet definir múltiples <code>&lt;router-outlet&gt;</code> amb noms diferents per mostrar diverses vistes al mateix temps. Això és útil per layouts amb barra lateral, modals persistents o panells auxiliars.</p>
<p><strong>Outlet principal (sense nom):</strong></p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;router-outlet&gt;&lt;/router-outlet&gt;</code></pre>
  </div>
</div>

<p><strong>Outlets secundaris (amb nom):</strong></p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;router-outlet name=&quot;sidebar&quot;&gt;&lt;/router-outlet&gt;
&lt;router-outlet name=&quot;modal&quot;&gt;&lt;/router-outlet&gt;</code></pre>
  </div>
</div>

<h4>3.6.3. Definir rutes amb outlets múltiples</h4>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Rutes amb outlets múltiples
export const routes: Routes = [
  { path: &#39;cataleg&#39;, component: CatalegComponent },  // Outlet principal
  { path: &#39;detalls&#39;, component: DetallsComponent, outlet: &#39;sidebar&#39; },  // Outlet lateral
  { path: &#39;ajuda&#39;, component: AjudaComponent, outlet: &#39;modal&#39; }  // Outlet modal
];</code></pre>
  </div>
</div>

<h4>3.6.4. Template amb múltiples outlets</h4>
<p><code>src/app/app.component.html</code>:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;app-layout&quot;&gt;
&lt;main class=&quot;main-content&quot;&gt;
&lt;router-outlet&gt;&lt;/router-outlet&gt;
&lt;/main&gt;
&lt;aside class=&quot;sidebar&quot;&gt;
&lt;router-outlet name=&quot;sidebar&quot;&gt;&lt;/router-outlet&gt;
&lt;/aside&gt;
&lt;div class=&quot;modal-overlay&quot;&gt;
&lt;router-outlet name=&quot;modal&quot;&gt;&lt;/router-outlet&gt;
&lt;/div&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<h4>3.6.5. Navegació a múltiples outlets</h4>
<p><strong>Sintaxi amb routerLink:</strong></p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;!-- Navegar només a outlet principal --&gt;
&lt;a routerLink=&quot;/cataleg&quot;&gt;Catàleg&lt;/a&gt;
&lt;!-- Navegar a outlet lateral --&gt;
&lt;a [routerLink]=&quot;[{ outlets: { sidebar: [&#39;detalls&#39;] } }]&quot;&gt;
Mostrar detalls lateral
&lt;/a&gt;
&lt;!-- Navegar a múltiples outlets simultàniament --&gt;
&lt;a [routerLink]=&quot;[&#39;/cataleg&#39;, { outlets: { sidebar: [&#39;detalls&#39;], modal: [&#39;ajuda&#39;] } }]&quot;&gt;
Catàleg + Detalls + Ajuda
&lt;/a&gt;
&lt;!-- Tancar outlet lateral --&gt;
&lt;a [routerLink]=&quot;[{ outlets: { sidebar: null } }]&quot;&gt;
Tancar sidebar
&lt;/a&gt;</code></pre>
  </div>
</div>

<p><strong>URLs generades:</strong></p>
<ul>
<li><code>/cataleg</code> - Només outlet principal</li>
<li><code>/cataleg(sidebar:detalls)</code> - Outlet principal + lateral</li>
<li><code>/cataleg(sidebar:detalls//modal:ajuda)</code> - Outlet principal + lateral + modal</li>
</ul>
<h4>3.6.6. Navegació programàtica amb múltiples outlets</h4>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component } from &#39;@angular/core&#39;;
import { Router } from &#39;@angular/router&#39;;
@Component({...})
export class CatalegComponent {
  constructor(private router: Router) {}
  mostrarVistaRapida(id: number): void {
    // Navegar mantenint outlet principal i afegint outlet lateral
    this.router.navigate([
      &#39;/cataleg&#39;,
      { outlets: { sidebar: [&#39;vista-rapida&#39;, id] } }
    ]);
  }
  tancarSidebar(): void {
    // Tancar outlet lateral (tornar a null)
    this.router.navigate([
      { outlets: { sidebar: null } }
    ]);
  }
}</code></pre>
  </div>
</div>

<h4>3.6.7. Casos d'ús de múltiples outlets</h4>
<p><strong>1. Detalls ràpids sense abandonar la llista</strong></p>
<ul>
<li>Outlet principal: Llista de productes</li>
<li>Outlet lateral: Detalls ràpids del producte seleccionat</li>
<li>Benefici: L'usuari pot veure detalls sense perdre la posició a la llista</li>
</ul>
<p><strong>2. Ajuda contextual persistent</strong></p>
<ul>
<li>Outlet principal: Formulari complex</li>
<li>Outlet lateral: Ajuda específica per a cada secció del formulari</li>
<li>Benefici: L'ajuda està sempre visible mentre es completa el formulari</li>
</ul>
<p><strong>3. Comparació de productes</strong></p>
<ul>
<li>Outlet principal: Catàleg</li>
<li>Outlet lateral: Producte A per comparar</li>
<li>Outlet modal: Producte B per comparar</li>
<li>Benefici: Veure 3 vistes simultànies per comparar</li>
</ul>
<h4>3.6.8. Limitacions i consideracions</h4>
<p><strong>Limitacions:</strong></p>
<ul>
<li>Les URLs amb outlets múltiples són llargues i poc amigables: <code>/cataleg(sidebar:vista-rapida/42)</code></li>
<li>No compartibles fàcilment (copiar URL amb outlets és confús)</li>
<li>Complexitat afegida (més difícil de mantenir)</li>
</ul>
<p><strong>Quan NO usar outlets múltiples:</strong></p>
<ul>
<li>Si podeu resoldre-ho amb components condicionals (<code>*ngIf</code>)</li>
<li>Si la UI secundària és simple (millor usar modals amb serveis)</li>
<li>Si mai necessiteu compartir la URL amb outlets actius</li>
</ul>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Els outlets múltiples permeten mostrar diverses vistes simultànies amb navegació independent. S'utilitzen per layouts complexos amb barres laterals, modals persistents o panells auxiliars. Les rutes amb outlets generen URLs amb notació especial <code>(outlet:ruta)</code>.
</div>

<h4>3.6.9. Resultat esperat</h4>
<p>Sabeu utilitzar outlets amb nom per mostrar múltiples vistes simultànies, definir rutes amb <code>outlet: 'nom'</code>, navegar amb sintaxi d'outlets i compreneu casos d'ús i limitacions.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.7. Què són les guàrdies: controls d'accés a rutes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.7.1. Objectiu</h4>
<p>Comprendre què són les guàrdies de ruta, per què són necessàries i els diferents tipus de guàrdies disponibles.</p>
<h4>3.7.2. Què són les guàrdies de ruta</h4>
<p>Les <strong>guàrdies de ruta</strong> (route guards) són mecanismes de protecció que executen lògica <strong>abans</strong> de permetre la navegació a una ruta. Permeten validar condicions com autenticació, permisos, estat de dades o lògica personalitzada, i redirigir automàticament si les condicions no es compleixen.</p>
<h4>3.7.3. Per què necessitem guàrdies</h4>
<p><strong>Problema sense guàrdies:</strong></p>
<p>Sense guàrdies, qualsevol usuari pot navegar a qualsevol ruta escrivint la URL al navegador:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">http://localhost:4300/admin/usuaris
→ Carrega el component AdminUsuarisComponent
→ Fins i tot si l&#39;usuari NO està autenticat
→ Fins i tot si l&#39;usuari NO és administrador</code></pre>
  </div>
</div>

<p><strong>Conseqüències:</strong></p>
<ul>
<li><strong>Brecha de seguretat:</strong> Dades sensibles exposades visualment (encara que el backend refusi peticions, l'usuari veu la interfície)</li>
<li><strong>Experiència d'usuari horrible:</strong> L'usuari veu errors confusos del backend després de carregar la pàgina</li>
<li><strong>Recursos malgastats:</strong> Components es carreguen sempre, fins i tot si l'accés és denegat</li>
</ul>
<p><strong>Solució amb guàrdies:</strong></p>
<p>Les guàrdies s'executen <strong>abans</strong> de carregar el component. Si la validació falla, el component NO es carrega i l'usuari és redirigit automàticament:</p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">1. Usuari intenta navegar a /admin/usuaris
2. Guàrdia authGuard s&#39;executa ABANS de carregar component
3. Guàrdia comprova: està autenticat? és admin?
4a. Si SÍ → Permet navegació, carrega component
4b. Si NO → Redirigeix a /login, component NO es carrega</code></pre>
  </div>
</div>

<h4>3.7.4. Tipus de guàrdies disponibles</h4>
<p>Angular proporciona diversos tipus de guàrdies per diferents casos d'ús:</p>
<p><strong>1. CanActivate - Protegir accés a una ruta</strong></p>
<p>Executa lògica abans de <strong>permetre navegació</strong> a una ruta.</p>
<p><strong>Casos d'ús:</strong></p>
<ul>
<li>Comprovar si l'usuari està autenticat</li>
<li>Verificar permisos o rols</li>
<li>Validar que les dades necessàries estan disponibles</li>
</ul>
<p><strong>Exemple:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;admin&#39;,
  component: AdminComponent,
  canActivate: [authGuard, adminGuard]
}</code></pre>
  </div>
</div>

<p><strong>2. CanDeactivate - Protegir sortida d'una ruta</strong></p>
<p>Executa lògica abans de <strong>permetre abandonar</strong> una ruta.</p>
<p><strong>Casos d'ús:</strong></p>
<ul>
<li>Avisar l'usuari si té canvis sense desar</li>
<li>Confirmar abans de sortir d'un formulari a mig omplir</li>
<li>Guardar estat abans d'abandonar la pàgina</li>
</ul>
<p><strong>3. CanActivateChild - Protegir rutes filles</strong></p>
<p>Similar a <code>CanActivate</code> però s'aplica a totes les rutes filles d'una ruta pare.</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;admin&#39;,
  component: AdminLayoutComponent,
  canActivateChild: [adminGuard],
  children: [
    { path: &#39;usuaris&#39;, component: AdminUsuarisComponent },  // Protegida
    { path: &#39;comandes&#39;, component: AdminComandesComponent }  // Protegida
  ]
}</code></pre>
  </div>
</div>

<p><strong>4. Resolve - Carregar dades abans de navegar</strong></p>
<p>Carrega dades necessàries <strong>abans</strong> de mostrar el component, evitant estats de càrrega intermedis.</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;perfil/:id&#39;,
  component: PerfilComponent,
  resolve: { perfil: perfilResolver }
}</code></pre>
  </div>
</div>

<h4>3.7.5. Guàrdies funcionals vs classes</h4>
<p><strong>Guàrdies funcionals (recomanat - modern):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { inject } from &#39;@angular/core&#39;;
import { CanActivateFn, Router } from &#39;@angular/router&#39;;
import { AuthService } from &#39;../services/auth.service&#39;;
export const authGuard: CanActivateFn = (route, state) =&gt; {
  const authService = inject(AuthService);
  const router = inject(Router);
  if (authService.estaAutenticat()) {
    return true;  // Permet navegació
  }
  // Redirigeix a login
  return router.createUrlTree([&#39;/login&#39;], {
    queryParams: { returnUrl: state.url }
  });
};</code></pre>
  </div>
</div>

<p><strong>Guàrdies amb classes (antic - deprecated):</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Estil antic (deprecated a Angular 15+)
import { Injectable } from &#39;@angular/core&#39;;
import { CanActivate } from &#39;@angular/router&#39;;
@Injectable({ providedIn: &#39;root&#39; })
export class AuthGuard implements CanActivate {
  canActivate(): boolean {
    // ...
  }
}</code></pre>
  </div>
</div>

<p><strong>Recomanació:</strong> Useu guàrdies funcionals. Són més simples, modernes i preferides per Angular.</p>
<h4>3.7.6. Com funcionen les guàrdies internament</h4>
<p><strong>Flux d'execució:</strong></p>

<div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">1. Usuari clica enllaç o escriu URL
2. Angular Router intercepta la navegació
3. Angular executa guàrdies en aquest ordre:
   a. CanMatch (si existeix)
   b. CanActivate (ruta pare)
   c. CanActivateChild (si hi ha filles)
   d. Resolve (si existeix)
4. Si alguna guàrdia retorna false o UrlTree:
   → Navegació cancel·lada o redirigida
5. Si totes retornen true:
   → Component es carrega i es renderitza</code></pre>
  </div>
</div>

<p><strong>Valors de retorn de guàrdies:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// 1. Permetre navegació
return true;
// 2. Bloquejar navegació
return false;
// 3. Redirigir a altra ruta
return router.createUrlTree([&#39;/login&#39;]);
// 4. Observable (per operacions asíncrones)
return this.authService.validarToken().pipe(
  map(valid =&gt; valid ? true : router.createUrlTree([&#39;/login&#39;]))
);</code></pre>
  </div>
</div>

<h4>3.7.7. Beneficis de les guàrdies</h4>
<p><strong>1. Seguretat millorada</strong></p>
<ul>
<li>Components sensibles NO es carreguen sense autorització</li>
<li>Dades confidencials NO s'exposen visualment</li>
</ul>
<p><strong>2. Experiència d'usuari fluida</strong></p>
<ul>
<li>Redireccions instantànies abans de carregar components</li>
<li>Sense errors confusos del backend</li>
</ul>
<p><strong>3. Centralització de lògica</strong></p>
<ul>
<li>Validació d'autenticació en un sol lloc</li>
<li>No cal repetir codi a cada component</li>
</ul>
<p><strong>4. Mantenibilitat</strong></p>
<ul>
<li>Canvis de lògica de permisos en una sola guàrdia</li>
<li>Reutilització de guàrdies en múltiples rutes</li>
</ul>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Les guàrdies són mecanismes de protecció que s'executen abans de la navegació per validar condicions. Permeten comprovar autenticació, permisos, estat de dades i redirigir automàticament si les condicions fallen. CanActivate és la guàrdia més comuna per protegir rutes.
</div>

<h4>3.7.8. Resultat esperat</h4>
<p>Compreneu què són les guàrdies, per què són necessàries per protegir rutes sensibles, els diferents tipus de guàrdies disponibles (CanActivate, CanDeactivate, Resolve) i com funcionen internament.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.8. Guàrdia d'activació: comprovar abans d'entrar a una ruta</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.8.1. Objectiu</h4>
<p>Aprendre a crear guàrdies d'activació (CanActivate) per protegir rutes comprovant autenticació o permisos abans de carregar components.</p>
<h4>3.8.2. Què és CanActivate</h4>
<p>La guàrdia <strong>CanActivate</strong> és el tipus més comú. S'executa abans de navegar a una ruta i decideix si permet l'accés o redirigeix l'usuari.</p>
<h4>3.8.3. Crear una guàrdia funcional</h4>
<p><strong>Pas 1: Generar la guàrdia amb Angular CLI</strong></p>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash"># Windows (PowerShell)
Set-Location $env:USERPROFILE\workspace\catalog-elements
ng generate guard guards/auth
# macOS/Linux (bash/zsh)
cd ~/workspace/catalog-elements
ng generate guard guards/auth</code></pre>
  </div>
</div>

<p><strong>CLI preguntarà quin tipus de guàrdia:</strong> Seleccioneu <code>CanActivate</code>.</p>
<p><strong>Pas 2: Implementar la lògica de la guàrdia</strong></p>
<p><code>src/app/guards/auth.guard.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { inject } from &#39;@angular/core&#39;;
import { CanActivateFn, Router } from &#39;@angular/router&#39;;
import { AuthService } from &#39;../services/auth.service&#39;;
export const authGuard: CanActivateFn = (route, state) =&gt; {
  const authService = inject(AuthService);
  const router = inject(Router);
  console.log(&#39;authGuard: Comprovant autenticació...&#39;);
  // Comprovar si l&#39;usuari està autenticat
  if (authService.estaAutenticat()) {
    console.log(&#39;authGuard: Autenticat, accés permès&#39;);
    return true;  // Permet navegació
  }
  console.log(&#39;authGuard: NO autenticat, redirigint a login&#39;);
  // Redirigir a login amb returnUrl per tornar després
  return router.createUrlTree([&#39;/login&#39;], {
    queryParams: { returnUrl: state.url }
  });
};</code></pre>
  </div>
</div>

<p><strong>Paràmetres de la guàrdia:</strong></p>
<ul>
<li><strong><code>route: ActivatedRouteSnapshot</code></strong> - Informació de la ruta destinació</li>
<li><strong><code>state: RouterStateSnapshot</code></strong> - Estat actual del router (inclou la URL destinació)</li>
</ul>
<p><strong>Pas 3: Aplicar la guàrdia a rutes</strong></p>
<p><code>src/app/navegacio/app.routes.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Routes } from &#39;@angular/router&#39;;
import { authGuard } from &#39;../guards/auth.guard&#39;;
export const routes: Routes = [
  { path: &#39;&#39;, component: InicComponent },
  { path: &#39;cataleg&#39;, component: CatalegComponent },
  { path: &#39;login&#39;, component: LoginComponent },
  // Ruta protegida amb guàrdia
  {
    path: &#39;preferits&#39;,
    component: PreferitsComponent,
    canActivate: [authGuard]
  },
  // Rutes niades protegides
  {
    path: &#39;perfil&#39;,
    component: PerfilLayoutComponent,
    canActivate: [authGuard],
    children: [
      { path: &#39;configuracio&#39;, component: ConfiguracioComponent },
      { path: &#39;privacitat&#39;, component: PrivacitatComponent }
    ]
  }
];</code></pre>
  </div>
</div>

<h4>3.8.4. Guàrdia amb validació de rols</h4>
<p>Creeu una segona guàrdia per comprovar si l'usuari és administrador:</p>
<p><code>src/app/guards/admin.guard.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { inject } from &#39;@angular/core&#39;;
import { CanActivateFn, Router } from &#39;@angular/router&#39;;
import { AuthService } from &#39;../services/auth.service&#39;;
export const adminGuard: CanActivateFn = (route, state) =&gt; {
  const authService = inject(AuthService);
  const router = inject(Router);
  // Assumeix que authGuard ja va validar autenticació
  if (authService.esAdmin()) {
    return true;  // És admin, accés permès
  }
  // No és admin → Redirigeix a inici
  return router.createUrlTree([&#39;/&#39;], {
    queryParams: { error: &#39;accés denegat&#39; }
  });
};</code></pre>
  </div>
</div>

<p><strong>Aplicar múltiples guàrdies:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;admin&#39;,
  component: AdminLayoutComponent,
  canActivate: [authGuard, adminGuard],
  children: [
    { path: &#39;usuaris&#39;, component: AdminUsuarisComponent }
  ]
}</code></pre>
  </div>
</div>

<p><strong>Ordre d'execució:</strong> <code>authGuard</code> primer → si passa, <code>adminGuard</code> segon → si passa, carrega component.</p>
<h4>3.8.5. Guàrdies asíncrones amb Observable</h4>
<p>Si la validació requereix operacions asíncrones (per exemple, validar token amb el backend):</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { inject } from &#39;@angular/core&#39;;
import { CanActivateFn, Router } from &#39;@angular/router&#39;;
import { AuthService } from &#39;../services/auth.service&#39;;
import { map } from &#39;rxjs/operators&#39;;
export const authGuardAsync: CanActivateFn = (route, state) =&gt; {
  const authService = inject(AuthService);
  const router = inject(Router);
  // Retornar Observable&lt;boolean | UrlTree&gt;
  return authService.validarToken().pipe(
    map(valid =&gt; {
      if (valid) {
        return true;
      }
      return router.createUrlTree([&#39;/login&#39;], {
        queryParams: { returnUrl: state.url }
      });
    })
  );
};</code></pre>
  </div>
</div>

<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Les guàrdies CanActivate s'executen abans de carregar components per validar condicions. Retornen <code>true</code> per permetre navegació, <code>false</code> per bloquejar, o <code>UrlTree</code> per redirigir. Poden ser síncrones o asíncrones (Observable). Múltiples guàrdies s'executen en ordre.
</div>

<h4>3.8.6. Resultat esperat</h4>
<p>Sabeu crear guàrdies d'activació per protegir rutes, implementar lògica de validació d'autenticació i rols, aplicar guàrdies a rutes i crear guàrdies asíncrones amb Observables.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.9. Exemple pràctic: protegir rutes per a usuaris autenticats</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.9.1. Objectiu</h4>
<p>Implementar un sistema complet de protecció de rutes amb autenticació simulada, login, logout i guàrdies funcionals.</p>
<p>Crearem un flux complet: usuari NO autenticat intenta accedir a <code>/preferits</code> → redirigeix a <code>/login</code> → després de login → retorna a <code>/preferits</code>.</p>
<h4>3.9.2. Pas 1: Crear el servei d'autenticació complet</h4>
<p><code>src/app/services/auth.service.ts</code> (versió completa):</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Injectable } from &#39;@angular/core&#39;;
import { BehaviorSubject, Observable, of, delay } from &#39;rxjs&#39;;
import { map } from &#39;rxjs/operators&#39;;

export interface Usuari {
  id: number;
  nom: string;
  email: string;
  rol: &#39;usuari&#39; | &#39;admin&#39;;
}

@Injectable({
  providedIn: &#39;root&#39;
})
export class AuthService {
  private usuariActual$ = new BehaviorSubject&lt;Usuari | null&gt;(null);

  constructor() {
    // Recuperar usuari de localStorage si existeix
    const usuariDesat = localStorage.getItem(&#39;usuari&#39;);
    if (usuariDesat) {
      this.usuariActual$.next(JSON.parse(usuariDesat));
    }
  }

  estaAutenticat(): boolean {
    return this.usuariActual$.value !== null;
  }

  obtenirUsuari(): Observable&lt;Usuari | null&gt; {
    return this.usuariActual$.asObservable();
  }

  login(email: string, password: string): Observable&lt;boolean&gt; {
    // Simulació d&#39;autenticació asíncrona (API)
    return of(true).pipe(
      delay(500),  // Simular latència
      // En producció, aquí feu una crida a l&#39;API real
      map(() =&gt; {
        if (email &amp;&amp; password) {
          const usuari: Usuari = {
            id: 1,
            nom: email.split(&#39;@&#39;)[0],
            email,
            rol: email.includes(&#39;admin&#39;) ? &#39;admin&#39; : &#39;usuari&#39;
          };
          this.usuariActual$.next(usuari);
          localStorage.setItem(&#39;usuari&#39;, JSON.stringify(usuari));
          return true;
        }
        return false;
      })
    );
  }

  logout(): void {
    this.usuariActual$.next(null);
    localStorage.removeItem(&#39;usuari&#39;);
  }

  esAdmin(): boolean {
    return this.usuariActual$.value?.rol === &#39;admin&#39;;
  }
}</code></pre>
  </div>
</div>

<h4>3.9.3. Pas 2: Crear component de login amb estat de càrrega</h4>
<p><code>src/app/login/login.component.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component } from &#39;@angular/core&#39;;
import { CommonModule } from &#39;@angular/common&#39;;
import { FormsModule } from &#39;@angular/forms&#39;;
import { Router, ActivatedRoute } from &#39;@angular/router&#39;;
import { AuthService } from &#39;../services/auth.service&#39;;

@Component({
  selector: &#39;app-login&#39;,
  standalone: true,
  imports: [CommonModule, FormsModule],
  templateUrl: &#39;./login.component.html&#39;,
  styleUrls: [&#39;./login.component.scss&#39;]
})
export class LoginComponent {
  email = &#39;&#39;;
  password = &#39;&#39;;
  error = &#39;&#39;;
  carregant = false;

  constructor(
    private authService: AuthService,
    private router: Router,
    private route: ActivatedRoute
  ) {}

  login(): void {
    this.error = &#39;&#39;;
    this.carregant = true;

    this.authService.login(this.email, this.password).subscribe({
      next: (exit) =&gt; {
        if (exit) {
          // Login exitós → Navegar a returnUrl o inici
          const returnUrl = this.route.snapshot.queryParamMap.get(&#39;returnUrl&#39;) ?? &#39;/&#39;;
          this.router.navigateByUrl(returnUrl);
        } else {
          this.error = &#39;Credencials incorrectes&#39;;
          this.carregant = false;
        }
      },
      error: (err) =&gt; {
        console.error(&#39;Error al fer login:&#39;, err);
        this.error = &#39;Error al connectar amb el servidor&#39;;
        this.carregant = false;
      }
    });
  }
}</code></pre>
  </div>
</div>

<p><code>src/app/login/login.component.html</code>:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;login-container&quot;&gt;
  &lt;div class=&quot;login-card&quot;&gt;
    &lt;h1&gt;Iniciar sessió&lt;/h1&gt;
    &lt;p class=&quot;subtitol&quot;&gt;Accedeix al teu compte&lt;/p&gt;

    &lt;form (ngSubmit)=&quot;login()&quot; #loginForm=&quot;ngForm&quot;&gt;
      &lt;div class=&quot;camp&quot;&gt;
        &lt;label for=&quot;email&quot;&gt;Email:&lt;/label&gt;
        &lt;input
          type=&quot;email&quot;
          id=&quot;email&quot;
          [(ngModel)]=&quot;email&quot;
          name=&quot;email&quot;
          placeholder=&quot;nom@exemple.com&quot;
          required
          [disabled]=&quot;carregant&quot;&gt;
      &lt;/div&gt;

      &lt;div class=&quot;camp&quot;&gt;
        &lt;label for=&quot;password&quot;&gt;Contrasenya:&lt;/label&gt;
        &lt;input
          type=&quot;password&quot;
          id=&quot;password&quot;
          [(ngModel)]=&quot;password&quot;
          name=&quot;password&quot;
          placeholder=&quot;••••••••&quot;
          required
          [disabled]=&quot;carregant&quot;&gt;
      &lt;/div&gt;

      &lt;p *ngIf=&quot;error&quot; class=&quot;error&quot;&gt;{{ error }}&lt;/p&gt;

      &lt;button
        type=&quot;submit&quot;
        [disabled]=&quot;loginForm.invalid || carregant&quot;
        class=&quot;btn-login&quot;&gt;
        {{ carregant ? &#39;Entrant...&#39; : &#39;Entrar&#39; }}
      &lt;/button&gt;

      &lt;div class=&quot;ajuda&quot;&gt;
        &lt;p&gt;Per provar, usa qualsevol email i contrasenya&lt;/p&gt;
        &lt;p class=&quot;hint&quot;&gt;Email amb &quot;admin&quot; → Rol d&#39;administrador&lt;/p&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<h4>3.9.4. Pas 3: Afegir botó de logout al menú</h4>
<p><code>src/app/app.component.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit } from &#39;@angular/core&#39;;
import { CommonModule } from &#39;@angular/common&#39;;
import { RouterOutlet, RouterLink, Router } from &#39;@angular/router&#39;;
import { AuthService, Usuari } from &#39;./services/auth.service&#39;;
import { Observable } from &#39;rxjs&#39;;

@Component({
  selector: &#39;app-root&#39;,
  standalone: true,
  imports: [CommonModule, RouterOutlet, RouterLink],
  templateUrl: &#39;./app.component.html&#39;
})
export class AppComponent implements OnInit {
  usuari$!: Observable&lt;Usuari | null&gt;;

  constructor(
    private authService: AuthService,
    private router: Router
  ) {}

  ngOnInit(): void {
    this.usuari$ = this.authService.obtenirUsuari();
  }

  logout(): void {
    this.authService.logout();
    this.router.navigate([&#39;/&#39;]);
  }
}</code></pre>
  </div>
</div>

<p><code>src/app/app.component.html</code>:</p>

<div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;app&quot;&gt;
  &lt;nav class=&quot;menu-principal&quot;&gt;
    &lt;a routerLink=&quot;/&quot; routerLinkActive=&quot;actiu&quot; [routerLinkActiveOptions]=&quot;{exact: true}&quot;&gt;
      Inici
    &lt;/a&gt;
    &lt;a routerLink=&quot;/cataleg&quot; routerLinkActive=&quot;actiu&quot;&gt;
      Catàleg
    &lt;/a&gt;
    &lt;a routerLink=&quot;/preferits&quot; routerLinkActive=&quot;actiu&quot;&gt;
      Preferits
    &lt;/a&gt;

    &lt;div class=&quot;auth-status&quot; *ngIf=&quot;usuari$ | async as usuari; else noAutenticat&quot;&gt;
      &lt;span class=&quot;usuari-nom&quot;&gt;Hola, {{ usuari.nom }}&lt;/span&gt;
      &lt;button (click)=&quot;logout()&quot; class=&quot;btn-logout&quot;&gt;Sortir&lt;/button&gt;
    &lt;/div&gt;

    &lt;ng-template #noAutenticat&gt;
      &lt;a routerLink=&quot;/login&quot; routerLinkActive=&quot;actiu&quot; class=&quot;btn-login&quot;&gt;
        Iniciar sessió
      &lt;/a&gt;
    &lt;/ng-template&gt;
  &lt;/nav&gt;

  &lt;main class=&quot;contingut&quot;&gt;
    &lt;router-outlet&gt;&lt;/router-outlet&gt;
  &lt;/main&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

<h4>3.9.5. Pas 4: Protegir rutes amb la guàrdia</h4>
<p><code>src/app/navegacio/app.routes.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Routes } from &#39;@angular/router&#39;;
import { authGuard } from &#39;../guards/auth.guard&#39;;

export const routes: Routes = [
  { path: &#39;&#39;, component: InicComponent },
  { path: &#39;cataleg&#39;, component: CatalegComponent },
  { path: &#39;element/:id&#39;, component: DetallElementComponent },
  { path: &#39;login&#39;, component: LoginComponent },

  // Ruta protegida
  {
    path: &#39;preferits&#39;,
    component: PreferitsComponent,
    canActivate: [authGuard]
  },

  // Secció protegida amb rutes niades
  {
    path: &#39;perfil&#39;,
    component: PerfilLayoutComponent,
    canActivate: [authGuard],
    children: [
      { path: &#39;&#39;, redirectTo: &#39;configuracio&#39;, pathMatch: &#39;full&#39; },
      { path: &#39;configuracio&#39;, component: ConfiguracioComponent },
      { path: &#39;privacitat&#39;, component: PrivacitatComponent }
    ]
  }
];</code></pre>
  </div>
</div>

<h4>3.9.6. Pas 5: Verificació manual del flux complet</h4>
<p><strong>Test 1: Accés sense autenticació</strong></p>
<ol>
<li>Obrir <code>http://localhost:4300/preferits</code></li>
<li>Resultat esperat: Redirigeix a <code>/login?returnUrl=/preferits</code></li>
</ol>
<p><strong>Test 2: Login i returnUrl</strong></p>
<ol>
<li>A <code>/login</code>, introduir email: <code>test@test.com</code>, password: <code>test</code></li>
<li>Clicar "Entrar"</li>
<li>Resultat esperat: Redirigeix automàticament a <code>/preferits</code></li>
</ol>
<p><strong>Test 3: Logout</strong></p>
<ol>
<li>Estant autenticat, clicar "Sortir" al menú</li>
<li>Resultat esperat: Desconnecta i navega a <code>/</code></li>
<li>Intentar accedir a <code>/preferits</code></li>
<li>Resultat esperat: Redirigeix a <code>/login</code></li>
</ol>
<p><strong>Test 4: Persistència amb localStorage</strong></p>
<ol>
<li>Fer login</li>
<li>Recarregar la pàgina (F5)</li>
<li>Resultat esperat: L'usuari continua autenticat (dades a localStorage)</li>
</ol>
<p><strong>Test 5: Navegació directa a ruta protegida</strong></p>
<ol>
<li>Estant NO autenticat, escriure URL <code>/perfil/configuracio</code></li>
<li>Resultat esperat: Redirigeix a <code>/login?returnUrl=/perfil/configuracio</code></li>
<li>Després de login: Retorna a <code>/perfil/configuracio</code></li>
</ol>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Un sistema complet d'autenticació amb guàrdies inclou: servei d'autenticació amb persistència (localStorage), guàrdies per protegir rutes, component de login amb returnUrl, i menú dinàmic que mostra estat d'autenticació amb opció de logout.
</div>

<h4>3.9.7. Resultat esperat</h4>
<p>Sabeu implementar un sistema complet de protecció de rutes amb autenticació, login/logout, returnUrl per preservar destinació, persistència amb localStorage i menú dinàmic segons l'estat d'autenticació.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.10. Altres tipus de guàrdies: sortida, càrrega de dades</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.10.1. Objectiu</h4>
<p>Conèixer altres tipus de guàrdies disponibles (CanDeactivate, Resolve) i els seus casos d'ús.</p>
<p>A més de <code>CanActivate</code>, Angular proporciona altres guàrdies per casos específics:</p>
<h4>3.10.2. CanDeactivate - Protegir sortida de rutes</h4>
<p>Aquesta guàrdia s'executa abans de <strong>sortir</strong> d'una ruta. És útil per avisar l'usuari si té canvis sense desar.</p>
<p><strong>Cas d'ús:</strong> Formulari amb canvis no desats.</p>
<p><code>src/app/guards/canvis-no-desats.guard.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { CanDeactivateFn } from &#39;@angular/router&#39;;

export interface ComponentAmbCanvis {
  teCanvisNoDesats(): boolean;
}

export const canvisNoDesatsGuard: CanDeactivateFn&lt;ComponentAmbCanvis&gt; = (component) =&gt; {
  if (component.teCanvisNoDesats()) {
    return confirm(&#39;Tens canvis sense desar. Vols sortir igualment?&#39;);
  }
  return true;
};</code></pre>
  </div>
</div>

<p><strong>Component que implementa la interfície:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component } from &#39;@angular/core&#39;;
import { ComponentAmbCanvis } from &#39;../guards/canvis-no-desats.guard&#39;;

@Component({...})
export class EditarPerfilComponent implements ComponentAmbCanvis {
  formulariModificat = false;

  teCanvisNoDesats(): boolean {
    return this.formulariModificat;
  }

  onInputChange(): void {
    this.formulariModificat = true;
  }

  desar(): void {
    // Desar canvis...
    this.formulariModificat = false;
  }
}</code></pre>
  </div>
</div>

<p><strong>Aplicar la guàrdia:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;editar-perfil&#39;,
  component: EditarPerfilComponent,
  canDeactivate: [canvisNoDesatsGuard]
}</code></pre>
  </div>
</div>

<p><strong>Resultat:</strong> Si l'usuari intenta sortir amb canvis no desats, apareix un diàleg de confirmació.</p>
<h4>3.10.3. Resolve - Carregar dades abans de navegar</h4>
<p>Aquesta guàrdia carrega dades <strong>abans</strong> de mostrar el component, evitant estats de càrrega intermedis.</p>
<p><strong>Cas d'ús:</strong> Pre-carregar dades d'usuari abans de mostrar perfil.</p>
<p><code>src/app/resolvers/perfil.resolver.ts</code>:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { inject } from &#39;@angular/core&#39;;
import { ResolveFn } from &#39;@angular/router&#39;;
import { UsuarisService } from &#39;../services/usuaris.service&#39;;
import { Usuari } from &#39;../models/usuari.interface&#39;;

export const perfilResolver: ResolveFn&lt;Usuari&gt; = (route, state) =&gt; {
  const usuarisService = inject(UsuarisService);
  const id = Number(route.paramMap.get(&#39;id&#39;));

  // Retorna Observable: Angular espera que es resolgui abans de navegar
  return usuarisService.obtenirPerID(id);
};</code></pre>
  </div>
</div>

<p><strong>Aplicar el resolver:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;perfil/:id&#39;,
  component: PerfilComponent,
  resolve: { perfil: perfilResolver }  // &#39;perfil&#39; és la clau
}</code></pre>
  </div>
</div>

<p><strong>Component accedeix a les dades resueltes:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit } from &#39;@angular/core&#39;;
import { ActivatedRoute } from &#39;@angular/router&#39;;
import { Usuari } from &#39;../models/usuari.interface&#39;;

@Component({...})
export class PerfilComponent implements OnInit {
  perfil!: Usuari;

  constructor(private route: ActivatedRoute) {}

  ngOnInit(): void {
    // Dades ja carregades pel resolver
    this.perfil = this.route.snapshot.data[&#39;perfil&#39;];
    console.log(&#39;Perfil carregat:&#39;, this.perfil);
    // NO cal mostrar estat de càrrega!
  }
}</code></pre>
  </div>
</div>

<p><strong>Avantatge:</strong> El component es carrega amb dades ja disponibles. NO cal gestionar estats de càrrega (<code>carregant = true</code>).</p>
<h4>3.10.4. CanActivateChild - Protegir totes les rutes filles</h4>
<p>Similar a <code>CanActivate</code> però s'aplica a totes les rutes filles d'una ruta pare.</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;admin&#39;,
  component: AdminLayoutComponent,
  canActivateChild: [adminGuard],  // Protegeix TOTES les filles
  children: [
    { path: &#39;usuaris&#39;, component: AdminUsuarisComponent },     // Protegida
    { path: &#39;comandes&#39;, component: AdminComandesComponent },   // Protegida
    { path: &#39;logs&#39;, component: AdminLogsComponent }            // Protegida
  ]
}</code></pre>
  </div>
</div>

<p><strong>Diferència amb <code>canActivate</code> al pare:</strong></p>
<ul>
<li><code>canActivate</code>: Protegeix la ruta pare i les filles</li>
<li><code>canActivateChild</code>: Només protegeix les filles, NO el pare</li>
</ul>
<h4>3.10.5. Taula comparativa de guàrdies</h4>
<table>
<thead>
<tr>
<th>Guàrdia</th>
<th>Quan s'executa</th>
<th>Cas d'ús</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>CanActivate</strong></td>
<td>Abans d'entrar a una ruta</td>
<td>Comprovar autenticació, permisos</td>
</tr>
<tr>
<td><strong>CanDeactivate</strong></td>
<td>Abans de sortir d'una ruta</td>
<td>Avisar canvis no desats</td>
</tr>
<tr>
<td><strong>CanActivateChild</strong></td>
<td>Abans d'entrar a rutes filles</td>
<td>Protegir tota una secció (admin)</td>
</tr>
<tr>
<td><strong>Resolve</strong></td>
<td>Abans d'entrar, després de guards</td>
<td>Pre-carregar dades necessàries</td>
</tr>
<tr>
<td><strong>CanMatch</strong></td>
<td>Abans de matching de ruta</td>
<td>Decidir si ruta coincideix (avançat)</td>
</tr>
</tbody>
</table>
<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> CanDeactivate protegeix sortides de rutes (avisos de canvis no desats). Resolve pre-carrega dades abans de mostrar components (sense estats de càrrega intermedis). CanActivateChild protegeix totes les rutes filles sense repetir guards.
</div>

<h4>3.10.6. Resultat esperat</h4>
<p>Coneixeu altres tipus de guàrdies (CanDeactivate, Resolve, CanActivateChild), sabeu quan usar-les i podeu implementar protecció de sortides i pre-càrrega de dades.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.11. Bones pràctiques: quan i com usar guàrdies</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.11.1. Objectiu</h4>
<p>Consolidar el coneixement sobre guàrdies amb recomanacions de bones pràctiques i patrons d'ús.</p>
<h4>3.11.2. Quan usar guàrdies</h4>
<p><strong>Usar guàrdies quan:</strong></p>
<ol>
<li><strong>Protegir rutes sensibles</strong> - Admin, configuració, dades privades</li>
<li><strong>Validar autenticació</strong> - Comprovar si l'usuari té sessió abans de carregar components</li>
<li><strong>Verificar permisos/rols</strong> - Assegurar que l'usuari té els permisos necessaris</li>
<li><strong>Avisar canvis no desats</strong> - Evitar pèrdua de dades en formularis</li>
<li><strong>Pre-carregar dades crítiques</strong> - Dades necessàries per renderitzar el component</li>
</ol>
<p><strong>NO usar guàrdies quan:</strong></p>
<ol>
<li><strong>Validacions simples dins del component</strong> - Si la lògica és específica d'un component, millor a <code>ngOnInit</code></li>
<li><strong>Rutes completament públiques</strong> - No cal protecció</li>
<li><strong>Validacions de negoci complexes</strong> - Millor dins del component on teniu accés a tot l'estat</li>
</ol>
<h4>3.11.3. Bones pràctiques</h4>
<p><strong>1. Centralitzar lògica de validació</strong></p>
<p>NO repetir lògica d'autenticació a cada component. Crear una guàrdia reutilitzable:</p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// INCORRECTE: Validació duplicada a cada component
export class PreferitsComponent {
  ngOnInit() {
    if (!this.authService.estaAutenticat()) {
      this.router.navigate([&#39;/login&#39;]);
    }
  }
}

// CORRECTE: Guàrdia reutilitzable
export const authGuard: CanActivateFn = ...
// Aplicar a múltiples rutes sense duplicar codi</code></pre>
  </div>
</div>

<p><strong>2. Retornar UrlTree en lloc de false + navigate</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// INCORRECTE: Navegar manualment + retornar false
export const authGuard: CanActivateFn = (route, state) =&gt; {
  if (!authService.estaAutenticat()) {
    router.navigate([&#39;/login&#39;]);
    return false;
  }
  return true;
};

// CORRECTE: Retornar UrlTree (més net)
export const authGuard: CanActivateFn = (route, state) =&gt; {
  if (!authService.estaAutenticat()) {
    return router.createUrlTree([&#39;/login&#39;]);
  }
  return true;
};</code></pre>
  </div>
</div>

<p><strong>3. Passar returnUrl per preservar destinació</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Sempre passar returnUrl
return router.createUrlTree([&#39;/login&#39;], {
  queryParams: { returnUrl: state.url }
});</code></pre>
  </div>
</div>

<p><strong>4. Combinar guàrdies per validacions en cadena</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Separar autenticació i permisos en guàrdies diferents
{
  path: &#39;admin&#39;,
  canActivate: [authGuard, adminGuard]  // Ordre: auth → admin
}</code></pre>
  </div>
</div>

<p><strong>5. Usar resolvers per pre-càrrega en lloc de càrrega manual</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// INCORRECTE: Càrrega manual al component
export class PerfilComponent {
  perfil?: Usuari;
  carregant = true;

  ngOnInit() {
    this.service.obtenirPerfil().subscribe(perfil =&gt; {
      this.perfil = perfil;
      this.carregant = false;
    });
  }
}

// CORRECTE: Resolver pre-carrega dades
export const perfilResolver: ResolveFn&lt;Usuari&gt; = ...
// Component rep dades ja carregades</code></pre>
  </div>
</div>

<p><strong>6. Gestionar errors en guàrdies asíncrones</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Gestionar errors en validacions asíncrones
export const authGuardAsync: CanActivateFn = (route, state) =&gt; {
  return authService.validarToken().pipe(
    map(valid =&gt; valid ? true : router.createUrlTree([&#39;/login&#39;])),
    catchError(() =&gt; {
      // Error de xarxa → Redirigir a error
      return of(router.createUrlTree([&#39;/error&#39;]));
    })
  );
};</code></pre>
  </div>
</div>

<p><strong>7. Documentar guards amb comentaris</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">/**
 * Guàrdia d&#39;autenticació que comprova si l&#39;usuari té sessió activa.
 * Si NO està autenticat, redirigeix a /login amb returnUrl.
 *
 * @usage
 * { path: &#39;preferits&#39;, canActivate: [authGuard] }
 */
export const authGuard: CanActivateFn = (route, state) =&gt; {
  // ...
};</code></pre>
  </div>
</div>

<h4>3.11.4. Patrons d'ús comuns</h4>
<p><strong>Patró 1: Protecció d'àrea completa (admin)</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">{
  path: &#39;admin&#39;,
  canActivate: [authGuard, adminGuard],
  canActivateChild: [adminGuard],  // Doble protecció
  children: [...]
}</code></pre>
  </div>
</div>

<p><strong>Patró 2: Login amb returnUrl</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Guàrdia
return router.createUrlTree([&#39;/login&#39;], {
  queryParams: { returnUrl: state.url }
});

// Component login
const returnUrl = this.route.snapshot.queryParamMap.get(&#39;returnUrl&#39;) ?? &#39;/&#39;;
this.router.navigateByUrl(returnUrl);</code></pre>
  </div>
</div>

<p><strong>Patró 3: Avisos de canvis no desats</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Guàrdia CanDeactivate amb interfície
export interface ComponentAmbCanvis {
  teCanvisNoDesats(): boolean;
}

// Component implementa interfície
export class FormulariComponent implements ComponentAmbCanvis {
  formulariModificat = false;
  teCanvisNoDesats() { return this.formulariModificat; }
}</code></pre>
  </div>
</div>

<!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Clau:</strong> Usar guàrdies per centralitzar validacions d'autenticació i permisos, retornar UrlTree en lloc de false + navigate, passar returnUrl per preservar destinació, combinar guàrdies per validacions en cadena i usar resolvers per pre-càrrega de dades.
</div>

<h4>3.11.5. Resultat esperat</h4>
<p>Coneixeu les bones pràctiques per usar guàrdies efectivament: centralització, returnUrl, combinació de guàrdies, gestió d'errors i patrons d'ús comuns.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.12. Mini exemple pràctic · Rutes niades amb guàrdies</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h3>Mini exemple pràctic: Rutes niades amb guàrdies</h3>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Crear secció de perfil amb layout compartit amb menú lateral de sub-seccions (configuració, privacitat)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Definir rutes niades amb <code>children</code> per <code>/perfil/configuracio</code> i <code>/perfil/privacitat</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Implementar component pare amb <code>&lt;router-outlet&gt;</code> per renderitzar rutes filles</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Crear guàrdia d'autenticació que comprova si l'usuari està autenticat abans de carregar perfil</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Aplicar guàrdia al pare per protegir totes les rutes filles automàticament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Crear component de login amb returnUrl per preservar destinació després d'autenticar</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Afegir botó de logout al menú principal que desconnecta i redirigeix a inici</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Testejar flux complet sense auth → redirecció login → després login → retorn a destinació</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Resultat esperat:</strong> Secció de perfil amb sub-pàgines que comparteixen layout, protegida amb guàrdia que redirigeix a login si NO autenticat, i returnUrl que preserva destinació després de login exitós.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.13. Resolució de problemes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.13.1. Problemes transversals</h4>
<table>
<thead>
<tr>
<th>Símptoma</th>
<th>Causa probable</th>
<th>Solució Windows</th>
<th>Solució macOS/Linux</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rutes filles NO es renderitzen</td>
<td>Falta <code>&lt;router-outlet&gt;</code> al component pare</td>
<td>Afegir <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> al template del pare</td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Error "Cannot match any routes" amb rutes niades</td>
<td>Rutes filles definides amb barra inicial</td>
<td>Eliminar <code>/</code> inicial: <code>path: 'usuaris'</code> en lloc de <code>path: '/usuaris'</code></td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Guàrdia NO s'executa</td>
<td>Guàrdia no aplicada correctament a la ruta</td>
<td>Verificar <code>canActivate: [nomGuardia]</code> a la definició de ruta</td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Redirecció infinita amb guàrdies</td>
<td>Guàrdia redirigeix a ruta que també té la guàrdia</td>
<td>Excloure ruta de login de la guàrdia: <code>if (state.url === '/login') return true;</code></td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Component pare es carrega però filles NO</td>
<td><code>children: []</code> buit o mal definit</td>
<td>Verificar sintaxi de <code>children</code> amb array de rutes</td>
<td>Igual que Windows</td>
</tr>
</tbody>
</table>
<h4>3.13.2. Problemes de configuració</h4>
<table>
<thead>
<tr>
<th>Símptoma</th>
<th>Causa probable</th>
<th>Solució Windows</th>
<th>Solució macOS/Linux</th>
</tr>
</thead>
<tbody>
<tr>
<td>Error "No provider for ActivatedRoute" en guàrdia</td>
<td>Intentar injectar ActivatedRoute a guàrdia</td>
<td>Usar paràmetres de guàrdia: <code>route: ActivatedRouteSnapshot</code> en lloc d'injectar</td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Guàrdia asíncrona NO espera Observable</td>
<td>Retornar Observable però Angular no espera</td>
<td>Assegurar que la guàrdia retorna <code>Observable&lt;boolean | UrlTree&gt;</code>, NO <code>.subscribe()</code></td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>UrlTree NO redirigeix</td>
<td>Retornar UrlTree però usar també navigate</td>
<td>Eliminar <code>router.navigate()</code>, només retornar <code>router.createUrlTree()</code></td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>Múltiples guàrdies: només s'executa primera</td>
<td>Error a primera guàrdia impedeix execució de següents</td>
<td>Verificar que primera guàrdia retorna valor vàlid (true/UrlTree)</td>
<td>Igual que Windows</td>
</tr>
<tr>
<td>returnUrl NO funciona després de login</td>
<td>NO capturar queryParam correctament</td>
<td>Verificar: <code>this.route.snapshot.queryParamMap.get('returnUrl')</code></td>
<td>Igual que Windows</td>
</tr>
</tbody>
</table>
<h4>3.13.3. Problemes de dependències</h4>
<table>
<thead>
<tr>
<th>Símptoma</th>
<th>Causa probable</th>
<th>Solució</th>
</tr>
</thead>
<tbody>
<tr>
<td>Error "inject() must be called from an injection context"</td>
<td>Usar inject() fora de context d'injecció</td>
<td>Només usar <code>inject()</code> dins del body de guàrdies funcionals, NO dins de callbacks</td>
</tr>
<tr>
<td>RouterOutlet no reconegut en template</td>
<td>NO importat RouterOutlet al component</td>
<td>Afegir <code>RouterOutlet</code> als imports del component standalone</td>
</tr>
<tr>
<td>Guàrdia sempre retorna false</td>
<td>Lògica invertida o servei no injectat</td>
<td>Afegir logs: <code>console.log('Validant...')</code> per debugar el flux</td>
</tr>
<tr>
<td>Rutes niades amb paràmetres NO capturen ID</td>
<td>Capturar a ruta filla en lloc de pare</td>
<td>Capturar a component pare: <code>this.route.snapshot.paramMap.get('id')</code></td>
</tr>
<tr>
<td>CanDeactivate NO funciona</td>
<td>Component no implementa interfície</td>
<td>Assegurar que component implementa <code>ComponentAmbCanvis</code></td>
</tr>
</tbody>
</table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.14. Prompts d'IA</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.14.1. Prompt 1: Dissenyar arquitectura de rutes niades</h4>
<!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Role:</strong> Ets un arquitecte d'aplicacions Angular expert en organització de rutes i guàrdies.<br><br><strong>Context:</strong> Tinc una aplicació amb les següents seccions: inici (pública), catàleg (pública), perfil d'usuari (privada amb sub-seccions: configuració, privacitat, historial), i administració (només admins, amb sub-seccions: usuaris, comandes, estadístiques).<br><br><strong>Task:</strong> Dissenya l'estructura completa de rutes niades amb guàrdies:<br>1. Definició de rutes amb <code>children</code> per seccions amb sub-pàgines<br>2. Components de layout per compartir estructura entre sub-pàgines<br>3. Guàrdies necessàries (autenticació, rol admin)<br>4. On aplicar cada guàrdia (pare vs filles)<br>5. Estratègia de returnUrl per login<br><br><strong>Format:</strong> Codi TypeScript complet per <code>app.routes.ts</code>, diagrama de jerarquia de rutes i comentaris explicatius.</div>
  </div>
</div>

<h4>3.14.2. Prompt 2: Depurar problema de guàrdies</h4>
<!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Role:</strong> Ets un expert en debugging d'aplicacions Angular.<br><br><strong>Context:</strong> He creat una guàrdia d'autenticació [adjuntar codi de guàrdia] i l'he aplicat a una ruta [adjuntar app.routes.ts]. Quan intento navegar a la ruta protegida, obtinc una redirecció infinita: <code>/preferits</code> → <code>/login</code> → <code>/preferits</code> → <code>/login</code>...<br><br><strong>Task:</strong> Diagnostica el problema i proposa solucions:<br>1. Analitza el codi de la guàrdia per identificar lògica incorrecta<br>2. Comprova si la ruta <code>/login</code> també té la guàrdia aplicada (error comú)<br>3. Verifica la lògica de returnUrl<br>4. Proposa codi corregit amb validacions per evitar redireccions infinites<br>5. Suggereix tests manuals per verificar el flux<br><br><strong>Format:</strong> Llista numerada amb cada possible causa, solució proposada i codi corregit amb comentaris.</div>
  </div>
</div>

<h4>3.14.3. Prompt 3: Implementar sistema complet d'autenticació</h4>
<!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Role:</strong> Ets un desenvolupador Angular expert en autenticació i guàrdies.<br><br><strong>Context:</strong> Necessito implementar un sistema complet d'autenticació per a l'aplicació <code>catalog-elements</code> amb: servei d'autenticació amb persistència (localStorage), guàrdia per protegir rutes, component de login amb returnUrl, i menú dinàmic que mostra nom d'usuari i botó de logout.<br><br><strong>Task:</strong> Genera el codi complet per:<br>1. Servei AuthService amb login/logout i estat d'usuari (Observable)<br>2. Guàrdia authGuard que comprova autenticació i redirigeix amb returnUrl<br>3. Component LoginComponent amb formulari i gestió de returnUrl<br>4. Modificacions a AppComponent per mostrar estat d'autenticació al menú<br>5. Rutes protegides amb la guàrdia aplicada<br><br><strong>Format:</strong> Codi TypeScript complet per cada fitxer amb comentaris explicatius i instruccions de verificació manual del flux.</div>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.15. Autoavaluació</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h4>3.15.1. Criteris objectius (Definition of Done)</h4>
<p><strong>Funcionalitat:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He creat rutes niades amb <code>children</code> i funcionen correctament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He implementat un component pare amb <code>&lt;router-outlet&gt;</code> que renderitza rutes filles</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He creat una guàrdia d'autenticació que protegeix rutes sensibles</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He implementat redirecció amb returnUrl per preservar destinació</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He afegit funcionalitat de login i logout amb persistència (localStorage)</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Projecte i estructura:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Les rutes niades tenen layout compartit sense duplicació de codi</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Les guàrdies centralitzen validacions sense repetir lògica a components</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He aplicat guàrdies al pare per protegir totes les rutes filles automàticament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He documentat a <code>docs/navegacio.md</code> les rutes protegides i les guàrdies aplicades</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Control de versions:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He inicialitzat repositori Git local si no existia</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He fet commit amb el missatge "feat: implementar rutes niades i guàrdies d'autenticació"</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He publicat els canvis a GitHub correctament</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Experiència d'usuari:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">La navegació entre sub-seccions és fluida sense recarregar layout compartit</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">L'usuari és redirigit immediatament a login si intenta accedir a rutes protegides sense autenticació</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Després de login, l'usuari retorna automàticament a la destinació original (returnUrl)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">El menú mostra l'estat d'autenticació amb nom d'usuari i opció de logout</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<h4>3.15.2. Competències adquirides</h4>
<p><strong>Rutes niades:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé definir rutes niades amb la propietat <code>children</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé crear components pare amb <code>&lt;router-outlet&gt;</code> per renderitzar filles</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc com Angular concatena paths pare+filla per generar URLs</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé configurar rutes per defecte dins de <code>children</code> amb redirectTo</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Guàrdies de ruta:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé crear guàrdies funcionals amb <code>CanActivateFn</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé aplicar guàrdies a rutes amb <code>canActivate: [nomGuardia]</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc la diferència entre CanActivate, CanDeactivate i Resolve</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé retornar UrlTree per redirigir des de guàrdies</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Autenticació:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé implementar un servei d'autenticació amb estat observable</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé crear una guàrdia que comprova autenticació abans de carregar components</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé passar returnUrl per preservar destinació després de login</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé implementar logout que neteja estat i redirigeix a inici</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Organització i bones pràctiques:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé quan usar rutes niades vs planes segons la complexitat de l'aplicació</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé combinar múltiples guàrdies per validacions en cadena (auth → admin)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc l'herència de guàrdies: rutes filles hereten guàrdies del pare</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé centralitzar validacions en guàrdies en lloc de repetir-les a components</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Debugging i casos límit:</strong></p>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé diagnosticar problemes de rutes filles que NO es renderitzen (falta router-outlet)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé evitar redireccions infinites amb guàrdies (excloure ruta de login)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé gestionar errors en guàrdies asíncrones amb catchError</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé testejar manualment el flux complet d'autenticació amb diferents escenaris</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.16. Recapitulació</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h3>Què hem aconseguit</h3>
<p>Heu implementat rutes niades amb layouts compartits i guàrdies de protecció al projecte <code>catalog-elements</code>, creant una arquitectura escalable i segura per aplicacions complexes.</p>
<p>Disposeu d'una <strong>aplicació Angular amb navegació avançada</strong> que inclou:</p>
<ol>
<li><strong>Rutes niades amb jerarquia clara:</strong> Secció de perfil o administració amb sub-pàgines (<code>/perfil/configuracio</code>, <code>/perfil/privacitat</code>) que comparteixen layout comú sense duplicar codi</li>
<li><strong>Layouts compartits amb router-outlet:</strong> Components pare que proporcionen estructura, menús i estils a totes les rutes filles, renderitzades dinàmicament en <code>&lt;router-outlet&gt;</code></li>
<li><strong>Guàrdies d'autenticació:</strong> Protecció de rutes sensibles que comprova autenticació abans de carregar components, redirigint automàticament a login si l'accés és denegat</li>
<li><strong>Sistema de login amb returnUrl:</strong> Component de login que preserva la destinació original i hi retorna després d'autenticació exitosa, millorant l'experiència d'usuari</li>
<li><strong>Menú dinàmic amb estat d'autenticació:</strong> Interfície que mostra el nom de l'usuari autenticat i opció de logout, amb persistència mitjançant localStorage</li>
</ol>
<h3>Què queda preparat per a la Lliçó 4.2</h3>
<p>A la <strong>Lliçó 4.2 (Arquitectura i patrons)</strong> ampliareu l'arquitectura de l'aplicació amb:</p>
<ul>
<li><strong>Gestió d'estat centralitzada:</strong> Patrons per compartir estat entre components sense acoblament, amb serveis observables o llibreries com NgRx</li>
<li><strong>Modularització i lazy loading:</strong> Organitzar l'aplicació en mòduls funcionals que es carreguen sota demanda, reduint el bundle inicial en 60-80%</li>
<li><strong>Separació de responsabilitats:</strong> Dividir l'aplicació en capes (presentació, lògica, dades) amb components smart/dumb per millorar mantenibilitat</li>
</ul>
<p>Amb rutes niades i guàrdies dominats, esteu preparats per aplicar patrons arquitectònics avançats que facin l'aplicació escalable, mantenible i optimitzada.</p>
<h3>Contracte de sortida</h3>
<!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé crear rutes niades amb layouts compartits</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé implementar guàrdies per protegir rutes sensibles</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé construir sistemes d'autenticació amb login/logout</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé utilitzar returnUrl per preservar destinació</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc l'herència de guàrdies i l'organització jeràrquica</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

<p><strong>Les vostres aplicacions ara tenen arquitectura escalable amb protecció de seguretat i experiència d'usuari professional!</strong></p>
<h3>Referències ràpides</h3>
<p><strong>Comandes essencials:</strong></p>

<div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng generate guard guards/nom-guardia       # Crear guàrdia
ng generate component nom-component        # Crear component
ng serve --port 4300                       # Executar aplicació</code></pre>
  </div>
</div>

<p><strong>Sintaxi de rutes niades:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Ruta niada
{
  path: &#39;admin&#39;,
  component: AdminLayoutComponent,
  canActivate: [authGuard],  // Protegir pare i filles
  children: [
    { path: &#39;usuaris&#39;, component: AdminUsuarisComponent },
    { path: &#39;comandes&#39;, component: AdminComandesComponent }
  ]
}

// Component pare amb outlet
&lt;router-outlet&gt;&lt;/router-outlet&gt;</code></pre>
  </div>
</div>

<p><strong>Sintaxi de guàrdies:</strong></p>

<div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Crear guàrdia
export const authGuard: CanActivateFn = (route, state) =&gt; {
  const authService = inject(AuthService);
  const router = inject(Router);

  if (authService.estaAutenticat()) {
    return true;  // Permet navegació
  }

  // Redirigeix amb returnUrl
  return router.createUrlTree([&#39;/login&#39;], {
    queryParams: { returnUrl: state.url }
  });
};

// Aplicar guàrdia
{ path: &#39;preferits&#39;, canActivate: [authGuard] }</code></pre>
  </div>
</div>

<p><strong>Troubleshooting ràpid:</strong></p>
<ul>
<li>Rutes filles NO es renderitzen → Afegir <code>&lt;router-outlet&gt;</code> al component pare</li>
<li>Guàrdia NO s'executa → Verificar <code>canActivate: [nomGuardia]</code> a la ruta</li>
<li>Redirecció infinita → Excloure <code>/login</code> de la guàrdia</li>
<li>returnUrl NO funciona → Verificar captura amb <code>queryParamMap.get('returnUrl')</code></li>
</ul>
<p><strong>Resolució de problemes detallada:</strong> Vegeu secció 3.13</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.17. Repàs de conceptes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<h3>Conceptes clau</h3>
<ul>
<li><strong>Rutes niades (nested routes):</strong> Jerarquia de rutes on una ruta pare conté rutes filles definides amb <code>children: []</code>, generant URLs com <code>/pare/filla</code></li>
<li><strong>children:</strong> Propietat d'una ruta que defineix l'array de rutes filles que es renderitzen dins del component pare</li>
<li><strong>router-outlet niat:</strong> <code>&lt;router-outlet&gt;</code> dins d'un component pare on es renderitzen les rutes filles dinàmicament</li>
<li><strong>Component layout:</strong> Component pare que proporciona estructura, menús i estils compartits a totes les rutes filles</li>
<li><strong>Guàrdia de ruta (route guard):</strong> Funció que s'executa abans de la navegació per validar condicions i decidir si permet accés o redirigeix</li>
<li><strong>CanActivateFn:</strong> Tipus TypeScript per guàrdies funcionals modernes que validen accés abans d'activar una ruta</li>
<li><strong>CanActivate:</strong> Guàrdia que s'executa abans de navegar a una ruta per comprovar autenticació, permisos o altres condicions</li>
<li><strong>CanDeactivate:</strong> Guàrdia que s'executa abans de sortir d'una ruta per avisar l'usuari de canvis no desats</li>
<li><strong>Resolve:</strong> Guàrdia que pre-carrega dades abans de mostrar el component, evitant estats de càrrega intermedis</li>
<li><strong>inject():</strong> Funció per injectar serveis dins de guàrdies funcionals, substituint la injecció per constructor</li>
<li><strong>createUrlTree:</strong> Mètode del Router per crear redirecció des d'una guàrdia retornant un UrlTree en lloc de navegar manualment</li>
<li><strong>returnUrl:</strong> Query param que preserva la destinació original quan l'usuari és redirigit a login, permetent retornar-hi després d'autenticar</li>
<li><strong>Herència de guàrdies:</strong> Les rutes filles hereten automàticament les guàrdies del pare sense necessitat de repetir-les</li>
<li><strong>Outlets múltiples:</strong> Múltiples <code>&lt;router-outlet name="nom"&gt;</code> per mostrar diverses vistes simultànies amb navegació independent</li>
<li><strong>canActivateChild:</strong> Guàrdia que protegeix totes les rutes filles d'una ruta pare sense afectar el pare mateix</li>
</ul>
  
  </div>
</div>


</div>


<!-- Exercicis proposats (si estan definits) -->


<!-- Recursos addicionals -->


<!-- Glossari del bloc -->



<!-- Schema.org structured data per SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "name": "Bloc 1: Sistema de rutes i navegació",
  "description": "Configuració de rutes, paràmetres i guàrdies de navegació",
  "author": {
    "@type": "Organization",
    "name": "Institut Obert de Catalunya"
  },
  "provider": {
    "@type": "Organization",
    "name": "Institut Obert de Catalunya"
  },
  "educationalLevel": "Intermediate",
  "learningResourceType": "Course Module",
  "inLanguage": "ca",
  
  
  "isPartOf": {
    "@type": "Course",
    "name": "DA2_OA01 - Programació Avançada (Angular) — IOC",
    "description": "Materials del mòdul DA2_OA01 - Programació Avançada amb Angular"
  }
}
</script>

                </div>
            </article>
            
            <!-- Navegació entre pàgines -->
            
            <nav class="page-navigation" role="navigation" aria-label="Navegació entre blocs">
                <div class="nav-links-container">
                    
                    
                    
                    
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                            
                    
                    
                    
                        
                            
                                
                                
                                
                                
                                
                                
                                
                                
                                
                                    
                                
                                    
                                        
                                        
                                
                                
                    
                    
                    <div class="nav-link-wrapper">
                        
                    </div>
                    
                    <div class="nav-link-wrapper">
                        
                        <a href="/ioc/da2_OA01/unitat-4/bloc-2/" class="nav-button" aria-label="Bloc següent: Arquitectura escalable">Següent →</a>
                        
                    </div>
                </div>
            </nav>
            
        </main>
    </div>

    <!-- Footer fix -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-info">
                Versió v1.0
            </div>
            <div class="footer-progress" aria-label="Progrés de lectura"><!-- Progrés per unitats (posició de la unitat actual) --><div class="progress-group course-progress">
                    <span class="progress-label">Unitat</span>
                    <span class="progress-text" data-pos="4" data-total="4">(4/4)</span>
                    <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 100%"></div></div>
                </div><!-- Progrés per blocs dins de la unitat --><div class="progress-group unit-progress">
                        <span class="progress-label">Bloc</span>
                        <span class="progress-text" data-pos="1" data-total="4">(1/4)</span>
                        <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 25%"></div></div>
                    </div>

                    <!-- Progrés per seccions (H2) dins del bloc --><div class="progress-group section-progress" data-scan-sections="true">
                        <span class="progress-label">Secció</span>
                        <span class="progress-text" data-pos="1" data-total="3">(1/3)</span>
                        <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 33%"></div></div>
                    </div></div>
            <div class="footer-actions" aria-label="Accions ràpides">
                <button class="task-btn footer-collapse-toggle" type="button" aria-expanded="true" aria-label="Amaga el peu de pàgina">
                  <i class="bi bi-chevron-down" aria-hidden="true"></i>
                </button>
                <a href="#top" id="footer-btn-top" class="task-btn" aria-label="Anar a l'inici">↑</a>
                <a href="#bottom" id="footer-btn-bottom" class="task-btn" aria-label="Anar al final">↓</a>
                <a href="#next" id="footer-btn-next" class="task-btn" aria-label="Secció següent">→</a>
                <a href="#prev" id="footer-btn-prev" class="task-btn" aria-label="Secció anterior">←</a>
                <a href="#bookmark" id="footer-btn-bookmark" class="task-btn" aria-label="Desar marcador" title="Desar marcador">
                  <i class="bi bi-bookmark" aria-hidden="true"></i>
                </a>
                <a href="/ioc/da2_OA01/quadern.html" class="task-btn" aria-label="Obrir quadern complet" title="Quadern">
                  <i class="bi bi-journal-text" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Scripts del lloc -->
    <script src="/ioc/da2_OA01/assets/js/site.js" defer></script>
    <!-- Quadern Notes v2 (nou sistema) -->
    <script src="/ioc/da2_OA01/assets/js/quadern-app/constants.js" defer></script>
    <script src="/ioc/da2_OA01/assets/js/quadern-app/utils.js" defer></script>
    <script src="/ioc/da2_OA01/assets/js/quadern-app/store.js" defer></script>
    <script src="/ioc/da2_OA01/assets/js/quadern-app/panel.js" defer></script>
    <script src="/ioc/da2_OA01/assets/js/index-notes.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" defer></script>
    <script src="/ioc/da2_OA01/assets/js/quadern-app/rich-editor.js" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', function(){
        if (window.Quadern && typeof window.Quadern.bootstrapNotes === 'function') {
          try { window.Quadern.bootstrapNotes(); } catch(e) {}
        }
        if (window.Quadern && window.Quadern.RichEditor && typeof window.Quadern.RichEditor.autoInit === 'function') {
          try { window.Quadern.RichEditor.autoInit(); } catch(e) {}
        }
      });
    </script>
</body>
</html>

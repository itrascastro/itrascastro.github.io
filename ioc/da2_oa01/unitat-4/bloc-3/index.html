<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>Bloc 3: Rendiment i optimitzaci√≥ | DA2_OA01 - Programaci√≥ Avan√ßada (Angular) - IOC</title>
    <meta name="description" content="Material educatiu - Institut Obert de Catalunya">
    <meta name="page-unitat" content="4">
    <meta name="page-bloc" content="3">
    
    <!-- SEO Tags -->
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Bloc 3: Rendiment i optimitzaci√≥ | DA2_OA01 - Programaci√≥ Avan√ßada (Angular)</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Bloc 3: Rendiment i optimitzaci√≥" />
<meta property="og:locale" content="ca_ES" />
<meta name="description" content="Detecci√≥ de canvis, virtualitzaci√≥ i desplegament a producci√≥" />
<meta property="og:description" content="Detecci√≥ de canvis, virtualitzaci√≥ i desplegament a producci√≥" />
<link rel="canonical" href="http://localhost:4006/ioc/da2_OA01/unitat-4/bloc-3/" />
<meta property="og:url" content="http://localhost:4006/ioc/da2_OA01/unitat-4/bloc-3/" />
<meta property="og:site_name" content="DA2_OA01 - Programaci√≥ Avan√ßada (Angular)" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Bloc 3: Rendiment i optimitzaci√≥" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Detecci√≥ de canvis, virtualitzaci√≥ i desplegament a producci√≥","headline":"Bloc 3: Rendiment i optimitzaci√≥","url":"http://localhost:4006/ioc/da2_OA01/unitat-4/bloc-3/"}</script>
<!-- End Jekyll SEO tag -->

    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/ioc/da2_OA01/assets/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="canonical" href="http://localhost:4006/ioc/da2_OA01/unitat-4/bloc-3/">
    <!-- Rich editor styles (for embedded notes panel) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.snow.min.css">
    <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" disabled>
    <link rel="stylesheet" href="/ioc/da2_OA01/assets/css/quadern-rich-editor.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/ioc/da2_OA01/assets/images/favicon.ico">
    
    <!-- RSS Feed -->
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4006/ioc/da2_OA01/feed.xml" title="DA2_OA01 - Programaci√≥ Avan√ßada (Angular)" />

    <!-- Syntax Highlighting (Prism) -->
    <link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-jsx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-html.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-tsx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>

    <!-- Code Block Component -->
    <link rel="stylesheet" href="/ioc/da2_OA01/assets/css/code-block.css">
    <script src="/ioc/da2_OA01/assets/js/code-block.js"></script>

</head>

<body class="bloc-layout">
    <!-- Skip to content for accessibility -->
    <a class="skip-link" href="#main-content">Salta al contingut principal</a>


    
    <!-- Header fix -->
    <header class="header" role="banner" id="top">
        <div class="header-brand">
            <a href="/ioc/da2_OA01/" class="logo-link" aria-label="Inici">
                <img src="/ioc/da2_OA01/assets/images/logo_IOC_light.jpg" alt="Institut Obert de Catalunya" class="logo logo-light">
                <img src="/ioc/da2_OA01/assets/images/logo_IOC_dark.png" alt="Institut Obert de Catalunya" class="logo logo-dark">
            </a>
            <a href="/ioc/da2_OA01/" class="title-link">
                <h1>DA2_OA01 - DA2_OA01 - Programaci√≥ Avan√ßada (Angular)</h1>
            </a>
        </div>
        <div class="header-actions">
            <button class="theme-toggle" id="theme-toggle">Mode Fosc</button>
            <button class="nav-panel-toggle" type="button" aria-expanded="false" aria-label="Obre la navegaci√≥">
                <i class="bi bi-list" aria-hidden="true"></i>
                <span class="nav-panel-label">Navegaci√≥</span>
            </button>
        </div>
    </header>

    <div class="offcanvas-backdrop" hidden></div>
    <nav class="offcanvas-nav" aria-hidden="true" aria-label="Navegaci√≥ del curs">
        <div class="offcanvas-header">
            <h2 class="offcanvas-title">Navegaci√≥</h2>
            <button class="offcanvas-close" type="button" aria-label="Tanca la navegaci√≥">
                <i class="bi bi-x-lg" aria-hidden="true"></i>
            </button>
        </div>
        <div class="offcanvas-body">
            <a href="/ioc/da2_OA01/" class="nav-dropdown-item ">√çndex del Curs</a>
            
                
                    <a href="/ioc/da2_OA01/unitat-1/bloc-1/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 1: Conceptes fonamentals i instal¬∑laci√≥
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-1/bloc-2/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 2: Entorn de desenvolupament integrat
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-1/bloc-3/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 3: Creaci√≥ del projecte base
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-1/bloc-4/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 4: Cas d'√∫s: Preparaci√≥ de l'entorn
                    </a>
                
            
                
                    <a href="/ioc/da2_OA01/unitat-2/bloc-1/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 1: Components i comunicaci√≥ b√†sica
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-2/bloc-2/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 2: Data binding i events
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-2/bloc-3/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 3: Formularis amb vinculaci√≥ bidireccional
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-2/bloc-4/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 4: Cas d'√∫s: Cat√†leg d'elements
                    </a>
                
            
                
                    <a href="/ioc/da2_OA01/unitat-3/bloc-1/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 1: Serveis i separaci√≥ de responsabilitats
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-3/bloc-2/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 2: Gesti√≥ d'estat i comunicaci√≥ entre components
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-3/bloc-3/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 3: Optimitzaci√≥ i bones pr√†ctiques
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-3/bloc-4/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 4: Cas d'√∫s: Cat√†leg amb API REST
                    </a>
                
            
                
                    <a href="/ioc/da2_OA01/unitat-4/bloc-1/" class="nav-dropdown-item ">
                        Unitat 4 - Bloc 1: Sistema de rutes i navegaci√≥
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-4/bloc-2/" class="nav-dropdown-item ">
                        Unitat 4 - Bloc 2: Arquitectura escalable
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-4/bloc-3/" class="nav-dropdown-item current">
                        Unitat 4 - Bloc 3: Optimitzaci√≥ de rendiment
                    </a>
                
                    <a href="/ioc/da2_OA01/unitat-4/bloc-4/" class="nav-dropdown-item ">
                        Unitat 4 - Bloc 4: Cas d'√∫s: Aplicaci√≥ completa
                    </a>
                
            
        </div>
    </nav>

    <div class="container">
        <!-- Sidebar Navegaci√≥ -->
        
        <aside class="sidebar">
            <button class="sidebar-toggle" type="button" aria-expanded="false">
                <span>Contingut del bloc</span>
                <i class="bi bi-chevron-down" aria-hidden="true"></i>
            </button>
            <div class="sidebar-scroll">
                <!-- Contingut d'aquest Bloc -->
                <div class="sidebar-section">
                    <h3>Contingut del Bloc</h3>
                    

    
    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat4_Bloc3_Seccio1" class="nav-link" data-section="Unitat4_Bloc3_Seccio1">1. Detecci√≥ de canvis i estrat√®gies d'optimitzaci√≥</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat4_Bloc3_Seccio2" class="nav-link" data-section="Unitat4_Bloc3_Seccio2">2. Virtualitzaci√≥ de llistes i renderitzat eficient</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat4_Bloc3_Seccio3" class="nav-link" data-section="Unitat4_Bloc3_Seccio3">3. Compilaci√≥ i desplegament per a producci√≥</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    



                </div>
            </div>
        </aside>
        

        <main class="main-content" role="main" id="main-content">
            
            <!-- Navegaci√≥ horizontal -->
            
            <nav class="horizontal-nav" aria-label="Navegaci√≥ de ruta">
                <div class="horizontal-nav-list">
                    <a href="/ioc/da2_OA01/" class="horizontal-nav-item">Inici</a>
                    
                    
                        
                        
                            
                        
                            
                        
                            
                        
                            
                                
                                
                        
                        
                            <span class="horizontal-nav-separator"> &gt; </span>
                            <a href="/ioc/da2_OA01/unitat-4/" class="horizontal-nav-item">
                                Unitat 4: Navegaci√≥ i arquitectura d'aplicacions (RA4)
                            </a>
                        
                        
                        
                            
                            
                                
                            
                                
                            
                                
                                    
                                    
                            
                            
                                <span class="horizontal-nav-separator"> &gt; </span>
                                <span class="horizontal-nav-item current">
                                    Bloc 4.3: Optimitzaci√≥ de rendiment
                                </span>
                            
                        
                    
                </div>
            </nav>
            
            
            <!-- Contingut de la P√†gina -->
            <article class="page-content">
                <div class="content-body">
                    

<!-- Objectius del bloc (si estan definits al frontmatter) -->


<!-- Contingut principal -->
<!--
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  BLOC 3 - UNITAT 4
  Contingut migrat des de:
  - .resources/Autoria/Unitat4/Lli√ßo3/OA1/lectura-u4-l3-oa1.md
  - .resources/Autoria/Unitat4/Lli√ßo3/OA2/lectura-u4-l3-oa2.md
  - .resources/Autoria/Unitat4/Lli√ßo3/OA3/lectura-u4-l3-oa3.md
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
-->

<div class="section" id="Unitat4_Bloc3_Seccio1">
  <h2 id="Unitat4_Bloc3_Seccio1">1. Detecci√≥ de canvis i estrat√®gies d'optimitzaci√≥</h2>

  <!-- Component: Objectius del bloc/unitat -->



<div class="objectius-box">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-bullseye" aria-hidden="true"></i> Objectius</div>
  <div class="component-content">
    <ul>
      
        <li>Comprendre com funciona el mecanisme de detecci√≥ de canvis d'Angular i quan s'actualitza la interf√≠cie.</li>
      
        <li>Aplicar l'estrat√®gia OnPush per optimitzar components reduint comprovacions innecess√†ries.</li>
      
        <li>Mantenir immutabilitat en objectes i arrays per garantir el funcionament correcte d'OnPush.</li>
      
        <li>Utilitzar detecci√≥ manual quan calgui for√ßar actualitzacions en situacions espec√≠fiques.</li>
      
    </ul>
  </div>
  <!-- IMPORTANT: tamb√© es pot usar via front matter: page.objectius (array) -->
</div>



  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informaci√≥</div>
    <strong>RA4 ¬∑ Criteri 4</strong> ‚Äî Optimitza els recursos i genera un paquet llest per a publicaci√≥.
    
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.1. Prerequisits</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <ul>
    <li><strong>Unitats 2 i 3 completades:</strong> Heu treballat amb components, data binding, i gesti√≥ d'estat amb observables</li>
    <li><strong>Conceptes de mutabilitat:</strong> Enteneu la difer√®ncia entre modificar un objecte directament i crear-ne un de nou</li>
    <li><strong>Operador spread:</strong> Sabeu utilitzar <code>{ ...obj }</code> i <code>[ ...array ]</code> per crear c√≤pies d'objectes i arrays</li>
    <li><strong>DevTools del navegador:</strong> Domini b√†sic de les eines de desenvolupador per mesurar rendiment (Performance tab)</li>
    <li><strong>Components amb <code>@Input()</code>:</strong> Experi√®ncia passant dades de components pares a fills</li>
  </ul>

  <p><strong>Verificaci√≥ r√†pida:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve --open
# Obrir DevTools (F12) ‚Üí Performance tab ‚Üí gravar perfil</code></pre>
  </div>
</div>


  <p><strong>Punt d'autocomprovaci√≥:</strong> Teniu una aplicaci√≥ funcional amb components que reben dades via <code>@Input()</code> i podeu obrir el Performance profiler de Chrome DevTools.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.2. Marc conceptual</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.2.1. Qu√® √©s la detecci√≥ de canvis</h4>
  <p>La detecci√≥ de canvis (change detection) √©s el mecanisme pel qual Angular detecta quan les dades de l'aplicaci√≥ han canviat i actualitza autom√†ticament la interf√≠cie per reflectir aquests canvis. Cada vegada que hi ha un esdeveniment (clic, petici√≥ HTTP, timer), Angular comprova tots els components per veure si les seves dades han canviat i actualitza el DOM si cal.</p>

  <h4>1.2.2. Problema sense optimitzaci√≥ de detecci√≥ de canvis</h4>
  <p><strong>Situaci√≥ abans:</strong></p>

  <p>Angular comprova tots els components de l'arbre sencer cada vegada que hi ha qualsevol esdeveniment, fins i tot si la majoria de components no han canviat. En una aplicaci√≥ amb 200 components, un sol clic activa 200 comprovacions, la majoria innecess√†ries.</p>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Aplicaci√≥ amb 200 components
‚îú‚îÄ‚îÄ HeaderComponent
‚îú‚îÄ‚îÄ NavigationComponent
‚îú‚îÄ‚îÄ ProductListComponent
‚îÇ   ‚îú‚îÄ‚îÄ ProductCardComponent (√ó50 productes)
‚îÇ   ‚îú‚îÄ‚îÄ FilterPanelComponent
‚îÇ   ‚îî‚îÄ‚îÄ PaginationComponent
‚îú‚îÄ‚îÄ SidebarComponent
‚îî‚îÄ‚îÄ FooterComponent
Usuari clica un bot√≥ al HeaderComponent
‚Üí Angular comprova els 200 components
‚Üí 199 components no han canviat (comprovacions in√∫tils)
‚Üí 1 component ha canviat (HeaderComponent)</code></pre>
  </div>
</div>


  <p>Cada comprovaci√≥ consumeix CPU: comparar propietats, executar funcions getter, avaluar expressions. Amb llistes grans, aix√≤ es multiplica exponencialment.</p>

  <p><strong>Problemes que genera:</strong></p>

  <p><strong>1. Rendiment degradat amb llistes grans</strong></p>

  <p>Una llista de 100 productes amb 5 propietats visibles per producte significa 500 comparacions per cada esdeveniment. Si l'usuari escriu en un camp de cerca (50 esdeveniments/segon mentre escriu), Angular fa 25.000 comparacions per segon. Aix√≤ causa lag perceptible: l'usuari escriu "laptop" per√≤ nom√©s veu "lap" fins 300ms despr√©s.</p>

  <p>Mesures reals en aplicaci√≥ de prova:</p>
  <ul>
    <li>10 components: 2ms per cicle de detecci√≥</li>
    <li>100 components: 18ms per cicle de detecci√≥</li>
    <li>500 components: 85ms per cicle de detecci√≥ (interf√≠cie es sent lenta)</li>
    <li>1000 components: 180ms per cicle de detecci√≥ (interf√≠cie congelada)</li>
  </ul>

  <p><strong>2. Consum excessiu de CPU i bateria</strong></p>

  <p>Cada comprovaci√≥ innecess√†ria consumeix cicles de CPU. En dispositius m√≤bils o port√†tils, aix√≤ dren√† la bateria r√†pidament. Una aplicaci√≥ que fa 50 cicles de detecci√≥ per segon consumeix 15-20% m√©s CPU que una aplicaci√≥ optimitzada que nom√©s fa 5 cicles per segon.</p>

  <p>Usuaris es queixen que "l'aplicaci√≥ web escalfa l'ordinador" o "la bateria del m√≤bil es gasta r√†pidament". Aquests s√≥n s√≠mptomes t√≠pics de detecci√≥ de canvis no optimitzada.</p>

  <p><strong>3. Avaluaci√≥ repetida de funcions getter</strong></p>

  <p>Si utilitzeu funcions al template (<code>{{ calculateTotal() }}</code>), Angular les executa en cada cicle de detecci√≥. Una funci√≥ que es crida 200 vegades per segon pot causar problemes de rendiment si fa c√†lculs complexos.</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Aix√≤ s&#39;executa centenars de vegades per segon
get expensiveCalculation(): number {
  return this.items.reduce((sum, item) =&gt; sum + item.price * item.quantity, 0);
}</code></pre>
  </div>
</div>


  <p><strong>4. Experi√®ncia d'usuari negativa</strong></p>

  <p>Els usuaris perceben retards superiors a 100ms. Una aplicaci√≥ que triga 180ms a respondre a un clic se sent "trencada" o "lenta". Aix√≤ afecta directament la satisfacci√≥ de l'usuari i la taxa de conversi√≥: estudis mostren que cada 100ms de retard redueix les conversions un 7%.</p>

  <p><strong>5. Escalabilitat limitada</strong></p>

  <p>Sense optimitzaci√≥, l'aplicaci√≥ no escala b√©. Afegir nous components degrada progressivament el rendiment. Una aplicaci√≥ que funciona b√© amb 50 components pot ser inutilitzable amb 500 components si no s'optimitza la detecci√≥ de canvis.</p>

  <h4>1.2.3. Soluci√≥ amb estrat√®gies d'optimitzaci√≥</h4>
  <p>Angular ofereix l'estrat√®gia OnPush que nom√©s comprova un component quan les seves entrades (<code>@Input()</code>) canvien de refer√®ncia o quan hi ha un esdeveniment dins del component. Aix√≤ redueix les comprovacions en un 80-95% en aplicacions t√≠piques.</p>

  <p><strong>Avantatges principals:</strong></p>
  <ol>
    <li><strong>Rendiment dram√†ticament millorat:</strong> 180ms ‚Üí 10ms per cicle en aplicacions grans</li>
    <li><strong>Consum de CPU redu√Øt:</strong> 85% menys cicles de detecci√≥ innecessaris</li>
    <li><strong>Escalabilitat:</strong> L'aplicaci√≥ mant√© bon rendiment amb centenars de components</li>
    <li><strong>Bateria preservada:</strong> 15-20% menys consum energ√®tic en dispositius m√≤bils</li>
    <li><strong>Experi√®ncia d'usuari fluida:</strong> Respostes instant√†nies (&lt; 16ms) sense lag perceptible</li>
  </ol>

  <h4>1.2.4. Exemple real complet: Sense vs Amb OnPush</h4>
  <p><strong>Situaci√≥:</strong> Una llista de 100 productes on l'usuari pot clicar "Afegir a preferits" en qualsevol producte.</p>

  <p><strong>Sense OnPush (estrat√®gia Default):</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// product-card.component.ts
@Component({
  selector: &#39;app-product-card&#39;,
  template: `
    &lt;div class=&quot;card&quot;&gt;
      &lt;h3&gt;{{ product.name }}&lt;/h3&gt;
      &lt;p&gt;{{ product.price }}‚Ç¨&lt;/p&gt;
      &lt;button (click)=&quot;toggleFavorite()&quot;&gt;
        {{ isFavorite() ? &#39;‚ù§Ô∏è&#39; : &#39;ü§ç&#39; }}
      &lt;/button&gt;
    &lt;/div&gt;
  `
  // changeDetection: ChangeDetectionStrategy.Default (per defecte)
})
export class ProductCardComponent {
  @Input() product!: Product;
  @Input() favorites: number[] = [];
  // Incorrecte: Aquesta funci√≥ s&#39;executa 100 vegades (una per cada component)
  // en CADA cicle de detecci√≥
  isFavorite(): boolean {
    return this.favorites.includes(this.product.id);
  }
  toggleFavorite(): void {
    // Quan l&#39;usuari clica aqu√≠, Angular comprova els 100 components
  }
}</code></pre>
  </div>
</div>


  <p><strong>Comportament:</strong></p>
  <ul>
    <li>Usuari clica "Afegir a preferits" en un producte</li>
    <li>Angular comprova els 100 ProductCardComponent</li>
    <li>Cada component executa <code>isFavorite()</code> ‚Üí 100 execucions</li>
    <li>Nom√©s 1 component ha canviat realment</li>
    <li><strong>Temps: 85ms per cicle</strong></li>
  </ul>

  <p><strong>Amb OnPush (optimitzat):</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// product-card.component.ts
@Component({
  selector: &#39;app-product-card&#39;,
  template: `
    &lt;div class=&quot;card&quot;&gt;
      &lt;h3&gt;{{ product.name }}&lt;/h3&gt;
      &lt;p&gt;{{ product.price }}‚Ç¨&lt;/p&gt;
      &lt;button (click)=&quot;toggleFavorite.emit(product.id)&quot;&gt;
        {{ isFavorite ? &#39;‚ù§Ô∏è&#39; : &#39;ü§ç&#39; }}
      &lt;/button&gt;
    &lt;/div&gt;
  `,
  changeDetection: ChangeDetectionStrategy.OnPush // Correcte: Optimitzat
})
export class ProductCardComponent {
  @Input() product!: Product;
  @Input() isFavorite: boolean = false; // Rebut del pare, ja calculat
  @Output() toggleFavorite = new EventEmitter&lt;number&gt;();
  // Correcte: No hi ha funcions getter; nom√©s propietats
}</code></pre>
  </div>
</div>


  <p><strong>Comportament:</strong></p>
  <ul>
    <li>Usuari clica "Afegir a preferits" en un producte</li>
    <li>Angular nom√©s comprova el component que va rebre el clic</li>
    <li>Cap altre component es comprova (les seves entrades no han canviat)</li>
    <li><strong>Temps: 5ms per cicle</strong></li>
  </ul>

  <p><strong>Millora: 94% m√©s r√†pid.</strong></p>

  <h4>1.2.5. Taula comparativa: Abans vs Despr√©s</h4>
  <table>
    <thead>
      <tr>
        <th>Aspecte</th>
        <th>Estrat√®gia Default</th>
        <th>Estrat√®gia OnPush</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Components comprovats per cicle</strong></td>
        <td>100 (tots)</td>
        <td>1-5 (nom√©s els afectats)</td>
      </tr>
      <tr>
        <td><strong>Temps per cicle (100 components)</strong></td>
        <td>85ms</td>
        <td>5ms</td>
      </tr>
      <tr>
        <td><strong>CPU utilitzada</strong></td>
        <td>100% (baseline)</td>
        <td>15%</td>
      </tr>
      <tr>
        <td><strong>Funcions getter executades</strong></td>
        <td>100 per cicle</td>
        <td>0 per cicle</td>
      </tr>
      <tr>
        <td><strong>Escalabilitat</strong></td>
        <td>Degrada amb m√©s components</td>
        <td>Mant√© rendiment constant</td>
      </tr>
      <tr>
        <td><strong>Bateria m√≤bil</strong></td>
        <td>Drena 20% m√©s r√†pid</td>
        <td>Consum normal</td>
      </tr>
    </tbody>
  </table>

  <h4>1.2.6. Conceptes clau de detecci√≥ de canvis</h4>
  <table>
    <thead>
      <tr>
        <th>Concepte</th>
        <th>Descripci√≥</th>
        <th>Exemple</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Change detection</strong></td>
        <td>Mecanisme que detecta canvis en dades i actualitza DOM</td>
        <td>Usuari clica ‚Üí Angular comprova components ‚Üí Actualitza vista</td>
      </tr>
      <tr>
        <td><strong>Estrat√®gia Default</strong></td>
        <td>Comprova tots els components en cada esdeveniment</td>
        <td>100 components ‚Üí 100 comprovacions per clic</td>
      </tr>
      <tr>
        <td><strong>Estrat√®gia OnPush</strong></td>
        <td>Nom√©s comprova quan entrades canvien de refer√®ncia</td>
        <td>100 components ‚Üí 1-5 comprovacions per clic</td>
      </tr>
      <tr>
        <td><strong>Refer√®ncia d'objecte</strong></td>
        <td>Adre√ßa de mem√≤ria de l'objecte, no el contingut</td>
        <td><code>obj = { ...obj }</code> crea nova refer√®ncia</td>
      </tr>
      <tr>
        <td><strong>Immutabilitat</strong></td>
        <td>No modificar objectes directament; crear-ne de nous</td>
        <td><code>arr.push()</code> Incorrecte vs <code>arr = [...arr, item]</code> Correcte</td>
      </tr>
    </tbody>
  </table>

  <h4>1.2.7. Quan usar estrat√®gia OnPush</h4>
  <p><strong>Correcte: Sempre que sigui possible:</strong></p>
  <ul>
    <li>Components presentacionals que nom√©s mostren dades</li>
    <li>Components de llistes amb molts elements repetits</li>
    <li>Components que reben dades via <code>@Input()</code> sense modificar-les internament</li>
    <li>Aplicacions grans amb m√©s de 50 components</li>
    <li>Quan el rendiment √©s cr√≠tica (aplicacions m√≤bils, dashboards en temps real)</li>
  </ul>

  <p><strong>Incorrecte: Evitar en casos espec√≠fics:</strong></p>
  <ul>
    <li>Components amb l√≤gica molt complexa interna que modifica dades constantment</li>
    <li>Quan no podeu garantir immutabilitat (integracions amb llibreries externes que muten objectes)</li>
    <li>Components que necessiten actualitzar-se autom√†ticament amb intervals (<code>setInterval</code>)</li>
  </ul>

  <p><strong>Regla pr√†ctica:</strong> Comenceu amb OnPush per defecte i nom√©s torneu a Default si trobeu problemes espec√≠fics que no podeu resoldre amb immutabilitat o detecci√≥ manual.</p>

  <h4>1.2.8. Caracter√≠stiques principals</h4>
  <p><strong>1. Comprovaci√≥ basada en refer√®ncies</strong></p>
  <p>OnPush compara refer√®ncies d'objectes, no el contingut. Si passeu el mateix objecte per√≤ heu modificat una propietat interna, OnPush no detecta el canvi. Heu de crear un nou objecte per activar la detecci√≥.</p>

  <p><strong>2. Millora dram√†tica de rendiment</strong></p>
  <p>En aplicacions reals, OnPush redueix les comprovacions en un 80-95%. Una aplicaci√≥ amb 500 components passa de 180ms per cicle a 10ms per cicle, fent la interf√≠cie sentir-se instant√†nia.</p>

  <p><strong>3. Requereix immutabilitat</strong></p>
  <p>Per funcionar correctament, OnPush necessita que seguiu patrons d'immutabilitat: crear nous objectes i arrays en lloc de modificar els existents. Aix√≤ √©s un canvi de mentalitat per√≤ garanteix rendiment i predictibilitat.</p>

  <p><strong>4. Compatible amb observables</strong></p>
  <p>OnPush funciona perfectament amb observables i l'<code>async</code> pipe. Quan un observable emet un nou valor, l'<code>async</code> pipe activa la detecci√≥ autom√†ticament.</p>

  <p><strong>5. Detecci√≥ manual disponible</strong></p>
  <p>En situacions on necessiteu for√ßar una actualitzaci√≥ (per exemple, despr√©s d'un <code>setTimeout</code>), podeu cridar manualment <code>ChangeDetectorRef.detectChanges()</code> o <code>markForCheck()</code>.</p>

  <h4>1.2.9. Integraci√≥ amb el flux de treball del cat√†leg d'elements</h4>
  <p>En el projecte del cat√†leg d'elements, l'estrat√®gia OnPush √©s ideal per:</p>
  <ul>
    <li><strong>Targetes de productes:</strong> Cada <code>ElementCardComponent</code> amb OnPush redueix les comprovacions de 50 elements a nom√©s els que canvien quan l'usuari filtra o ordena.</li>
    <li><strong>Llista filtrada:</strong> Quan l'usuari aplica un filtre, nom√©s els components afectats pel canvi de llista es recomproven, no tots els components de l'aplicaci√≥.</li>
    <li><strong>Components de paginaci√≥:</strong> El component de paginaci√≥ amb OnPush nom√©s es comprova quan l'usuari canvia de p√†gina, no en cada esdeveniment de l'aplicaci√≥.</li>
  </ul>

  <p>Aix√≤ garanteix que l'aplicaci√≥ mant√© bon rendiment fins i tot amb centenars d'elements al cat√†leg, oferint una experi√®ncia fluida sense lag.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.3. Model mental</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p><strong>Inspector d'edificis amb zones diferenciades</strong></p>
  <p>Imagineu un inspector que ha de revisar un edifici de 100 apartaments cada dia. Amb l'estrat√®gia Default, l'inspector entra a tots els 100 apartaments cada dia, fins i tot si nom√©s 2 apartaments han tingut canvis. Amb l'estrat√®gia OnPush, l'inspector nom√©s entra als apartaments que tenen una nota a la porta dient "Hi ha canvis aqu√≠". Aix√≤ redueix 100 inspeccions a nom√©s 2.</p>

  <p><strong>Biblioteca amb sistema de notificacions</strong></p>
  <p>Una biblioteca t√© milers de llibres. Amb Default, el bibliotecari revisa cada llibre cada dia per veure si est√† danyat. Amb OnPush, cada llibre t√© un sensor que envia una notificaci√≥ nom√©s quan hi ha un problema. El bibliotecari nom√©s revisa els llibres que han enviat notificaci√≥, estalviant centenars d'hores de comprovacions innecess√†ries.</p>

  <p><strong>Sistema d'alarmes per zones</strong></p>
  <p>Un centre comercial t√© 200 botigues. Amb Default, el gu√†rdia de seguretat revisa les 200 botigues cada 5 minuts tot el dia. Amb OnPush, cada botiga t√© una alarma que salta nom√©s quan hi ha un problema. El gu√†rdia nom√©s investiga quan salta una alarma, en lloc de revisar constantment totes les botigues.</p>

  <p><strong>Servei postal amb notificacions</strong></p>
  <p>El carter tradicional (Default) comprova totes les adreces cada dia, fins i tot les que no tenen correu. El servei modern (OnPush) nom√©s notifica les adreces que tenen correu nou. Si no hi ha notificaci√≥, el carter no perd temps visitant aquella adre√ßa. Aix√≤ permet gestionar moltes m√©s adreces amb el mateix esfor√ß.</p>

  <p><strong>Hospital amb monitors de pacients</strong></p>
  <p>En un hospital, el metge tradicional (Default) revisa tots els 100 pacients cada hora, prenent constants vitals encara que estiguin estables. Amb monitors intel¬∑ligents (OnPush), nom√©s salta l'alarma quan hi ha un canvi significatiu en les constants d'un pacient. El metge nom√©s revisa els pacients amb alertes, permetent atendre m√©s pacients eficientment.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.4. Com funciona la detecci√≥ de canvis: quan s'actualitza la interf√≠cie</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.4.1. Objectiu</h4>
  <p>Comprendre el mecanisme b√†sic de detecci√≥ de canvis d'Angular i quan s'activa.</p>

  <h4>1.4.2. El cicle de detecci√≥ de canvis</h4>
  <p>Angular comprova autom√†ticament si les dades dels components han canviat i actualitza el DOM quan detecta difer√®ncies. Aquest proc√©s s'anomena "cicle de detecci√≥ de canvis" i s'activa despr√©s de qualsevol esdeveniment as√≠ncron.</p>

  <h4>1.4.3. Esdeveniments que activen la detecci√≥</h4>
  <p>Angular intercepta esdeveniments as√≠ncrons mitjan√ßant Zone.js i llan√ßa un cicle de detecci√≥ despr√©s de cadascun:</p>

  <p><strong>1. Esdeveniments d'usuari:</strong></p>
  <ul>
    <li>Clics de botons: <code>(click)="handleClick()"</code></li>
    <li>Canvis en inputs: <code>(input)="handleInput($event)"</code></li>
    <li>Enviament de formularis: <code>(submit)="handleSubmit()"</code></li>
  </ul>

  <p><strong>2. Peticions HTTP:</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.http.get(&#39;/api/products&#39;).subscribe(data =&gt; {
  this.products = data; // ‚Üê Detecci√≥ s&#39;activa despr√©s de l&#39;assignaci√≥
});</code></pre>
  </div>
</div>


  <p><strong>3. Timers:</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">setTimeout(() =&gt; {
  this.message = &#39;Actualitzat!&#39;; // ‚Üê Detecci√≥ s&#39;activa despr√©s del timeout
}, 1000);
setInterval(() =&gt; {
  this.counter++; // ‚Üê Detecci√≥ s&#39;activa cada interval
}, 1000);</code></pre>
  </div>
</div>


  <h4>1.4.4. El proc√©s de comprovaci√≥</h4>
  <p>Quan s'activa un cicle de detecci√≥, Angular:</p>
  <ol>
    <li>Comprova cada component de l'arbre des del root fins a les fulles</li>
    <li>Compara els valors actuals de les propietats amb els valors anteriors</li>
    <li>Si detecta difer√®ncies, actualitza el DOM corresponent</li>
    <li>Repeteix el proc√©s per components fills</li>
  </ol>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">AppComponent (root)
  ‚Üì comprova propietats
HeaderComponent
  ‚Üì comprova propietats
ProductListComponent
  ‚Üì comprova propietats
ProductCardComponent (√ó100)
  ‚Üì comprova propietats de cada un</code></pre>
  </div>
</div>


  <h4>1.4.5. Exemple visual: Qu√® comprova Angular</h4>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  template: `
    &lt;h1&gt;{{ title }}&lt;/h1&gt;
    &lt;p&gt;Preu: {{ product.price }}‚Ç¨&lt;/p&gt;
    &lt;button (click)=&quot;increment()&quot;&gt;{{ counter }}&lt;/button&gt;
  `
})
export class MyComponent {
  title = &#39;Botiga&#39;;
  product = { price: 10 };
  counter = 0;
  increment() {
    this.counter++; // ‚Üê Canvi detectat
  }
}</code></pre>
  </div>
</div>


  <p>Quan l'usuari clica el bot√≥:</p>
  <ol>
    <li>S'executa <code>increment()</code> ‚Üí <code>counter</code> passa de 0 a 1</li>
    <li>Angular comprova: <code>title</code> (no ha canviat), <code>product.price</code> (no ha canviat), <code>counter</code> (ha canviat! 0 ‚Üí 1)</li>
    <li>Angular actualitza nom√©s el DOM del bot√≥ amb el nou valor de <code>counter</code></li>
  </ol>

  <!-- Component: Caixa d'√®xit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> √àxit</div>
    <strong>Clau:</strong> Angular activa un cicle de detecci√≥ de canvis despr√©s de cada esdeveniment as√≠ncron, comprovant tots els components de l'arbre per defecte.
</div>


  <h4>1.4.6. Resultat esperat</h4>
  <p>Comprensi√≥ de quan Angular activa la detecci√≥ de canvis i qu√® comprova en cada cicle.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.5. Cost de la detecci√≥ de canvis: arbres grans, components complexos</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.5.1. Objectiu</h4>
  <p>Quantificar el cost de rendiment de la detecci√≥ de canvis en aplicacions grans i identificar colls d'ampolla.</p>

  <h4>1.5.2. Mesures reals de rendiment</h4>
  <p>El cost de la detecci√≥ de canvis creix linealment amb el nombre de components i exponencialment amb la complexitat de cada component.</p>

  <p><strong>Aplicaci√≥ de prova amb components simples:</strong></p>
  <ul>
    <li>10 components: ~2ms per cicle</li>
    <li>50 components: ~8ms per cicle</li>
    <li>100 components: ~18ms per cicle</li>
    <li>500 components: ~85ms per cicle</li>
    <li>1000 components: ~180ms per cicle</li>
  </ul>

  <p><strong>Aplicaci√≥ de prova amb llista de 100 elements:</strong></p>
  <ul>
    <li>Cada element amb 5 propietats simples: ~18ms</li>
    <li>Cada element amb 2 funcions getter: ~45ms</li>
    <li>Cada element amb transformacions de dades: ~120ms</li>
  </ul>

  <h4>1.5.3. On es perd el temps</h4>
  <p><strong>1. Avaluaci√≥ d'expressions al template</strong></p>
  <p>Cada expressi√≥ al template s'avalua en cada cicle:</p>


  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div&gt;
{{ calculateTotal() }}           ‚Üê Executa la funci√≥ cada cicle
{{ product.price * 1.21 }}      ‚Üê Calcula cada cicle
{{ items.length &gt; 0 ? &#39;S√≠&#39; : &#39;No&#39; }} ‚Üê Avalua cada cicle
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p>Amb 100 components, aix√≤ significa 100 execucions de <code>calculateTotal()</code> per cada esdeveniment d'usuari.</p>

  <p><strong>2. Funcions getter costoses</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">get filteredProducts(): Product[] {
  return this.products.filter(p =&gt; p.category === this.selectedCategory);
  // Incorrecte: Aix√≤ filtra l&#39;array complet en cada cicle de detecci√≥
  // Amb 1000 productes i 50 cicles/segon = 50.000 iteracions/segon
}</code></pre>
  </div>
</div>


  <h4>1.5.4. Comparaci√≥: Component simple vs complex</h4>
  <table>
    <thead>
      <tr>
        <th>Tipus component</th>
        <th>Propietats</th>
        <th>Getters</th>
        <th>Temps/component</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Simple</td>
        <td>3</td>
        <td>0</td>
        <td>0.15ms</td>
      </tr>
      <tr>
        <td>Mitj√†</td>
        <td>8</td>
        <td>2</td>
        <td>0.45ms</td>
      </tr>
      <tr>
        <td>Complex</td>
        <td>15</td>
        <td>5</td>
        <td>1.2ms</td>
      </tr>
    </tbody>
  </table>

  <p>Una llista de 100 components complexos consumeix 120ms per cicle vs 15ms amb components simples.</p>

  <h4>1.5.5. Impacte en experi√®ncia d'usuari</h4>
  <p><strong>L√≠mits de percepci√≥ humana:</strong></p>
  <ul>
    <li>&lt; 16ms: Sentit com instantani (60 FPS)</li>
    <li>16-100ms: Lleugerament perceptible</li>
    <li>100-300ms: Lag notable, aplicaci√≥ se sent lenta</li>
    <li>&gt; 300ms: Usuari pensa que l'aplicaci√≥ est√† trencada</li>
  </ul>

  <p><strong>Aplicaci√≥ amb 500 components simples:</strong> 85ms ‚Üí Lag perceptible</p>
  <p><strong>Aplicaci√≥ amb 100 components complexos:</strong> 120ms ‚Üí Lag molt notable</p>

  <h4>1.5.6. Mesurar rendiment amb DevTools</h4>
  <p>Podeu mesurar el cost de detecci√≥ de canvis:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Afegir temporalment per mesurar
ngAfterViewChecked() {
  console.time(&#39;check&#39;);
}
ngAfterViewChecked() {
  console.timeEnd(&#39;check&#39;);
}</code></pre>
  </div>
</div>


  <p>O utilitzar Chrome DevTools:</p>
  <ol>
    <li>Obrir DevTools (F12)</li>
    <li>Performance tab ‚Üí Record</li>
    <li>Interactuar amb l'aplicaci√≥</li>
    <li>Stop recording</li>
    <li>Analitzar "Scripting" time (temps en codi Angular)</li>
  </ol>

  <!-- Component: Caixa d'√®xit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> √àxit</div>
    <strong>Clau:</strong> El cost de detecci√≥ de canvis creix amb el nombre i complexitat de components, causant lag perceptible a partir de 100ms per cicle.
</div>


  <h4>1.5.7. Resultat esperat</h4>
  <p>Quantificaci√≥ del cost de rendiment de la detecci√≥ de canvis i identificaci√≥ de quan es converteix en un problema.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.6. Estrat√®gia de detecci√≥ per defecte vs optimitzada</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.6.1. Objectiu</h4>
  <p>Comparar les dues estrat√®gies de detecci√≥ de canvis i comprendre quan usar cadascuna.</p>

  <h4>1.6.2. Estrat√®gia Default (per defecte)</h4>
  <p>Amb <code>ChangeDetectionStrategy.Default</code>, Angular comprova tots els components de l'arbre en cada cicle, independentment de si han canviat o no.</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  selector: &#39;app-product-card&#39;,
  template: `...`,
  changeDetection: ChangeDetectionStrategy.Default // ‚Üê Valor per defecte
})
export class ProductCardComponent {
  @Input() product!: Product;
}</code></pre>
  </div>
</div>


  <p><strong>Comportament:</strong></p>
  <ul>
    <li>Event ocorre (clic, HTTP, timer)</li>
    <li>Angular comprova TOTS els components</li>
    <li>Compara propietats actuals vs anteriors</li>
    <li>Actualitza DOM si troba difer√®ncies</li>
  </ul>

  <p><strong>Avantatges:</strong></p>
  <ul>
    <li>Simple: no cal pensar en immutabilitat</li>
    <li>Funciona sempre, fins i tot amb mutacions d'objectes</li>
    <li>No requereix canvis en l'arquitectura</li>
  </ul>

  <p><strong>Desavantatges:</strong></p>
  <ul>
    <li>Comprovacions innecess√†ries (99% dels components no han canviat)</li>
    <li>Rendiment degradat amb molts components</li>
    <li>Executa funcions getter repetidament</li>
  </ul>

  <h4>1.6.3. Estrat√®gia OnPush (optimitzada)</h4>
  <p>Amb <code>ChangeDetectionStrategy.OnPush</code>, Angular nom√©s comprova un component quan:</p>
  <ol>
    <li>Les seves entrades (<code>@Input()</code>) canvien de refer√®ncia</li>
    <li>Hi ha un esdeveniment dins del component mateix</li>
    <li>Un observable amb <code>async</code> pipe emet un valor</li>
  </ol>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  selector: &#39;app-product-card&#39;,
  template: `...`,
  changeDetection: ChangeDetectionStrategy.OnPush // ‚Üê Optimitzat
})
export class ProductCardComponent {
  @Input() product!: Product;
}</code></pre>
  </div>
</div>


  <p><strong>Comportament:</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Component pare canvia la refer√®ncia del producte
this.product = { ...this.product, price: 20 }; // Correcte: Nova refer√®ncia
// Angular detecta:
// - product_anterior !== product_actual ‚Üí Comprova component
// - Altres components: inputs no han canviat ‚Üí NO comprova
// Resultat: 1 comprovaci√≥ en lloc de 100</code></pre>
  </div>
</div>


  <p><strong>Avantatges:</strong></p>
  <ul>
    <li>80-95% menys comprovacions</li>
    <li>Rendiment dram√†ticament millorat</li>
    <li>Escalabilitat: mant√© rendiment amb centenars de components</li>
    <li>Funcions getter s'executen molt menys</li>
  </ul>

  <p><strong>Desavantatges:</strong></p>
  <ul>
    <li>Requereix immutabilitat (crear nous objectes)</li>
    <li>Canvi de mentalitat per developers</li>
    <li>Pot causar bugs si s'oblida immutabilitat</li>
  </ul>

  <h4>1.6.4. Comparativa detallada</h4>
  <table>
    <thead>
      <tr>
        <th>Aspecte</th>
        <th>Default</th>
        <th>OnPush</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Quan comprova</strong></td>
        <td>Sempre, en cada cicle</td>
        <td>Nom√©s quan inputs canvien de refer√®ncia</td>
      </tr>
      <tr>
        <td><strong>Components comprovats</strong></td>
        <td>Tots (100%)</td>
        <td>Nom√©s afectats (5-20%)</td>
      </tr>
      <tr>
        <td><strong>Temps cicle (100 comp)</strong></td>
        <td>18ms</td>
        <td>2ms</td>
      </tr>
      <tr>
        <td><strong>Requereix immutabilitat</strong></td>
        <td>No</td>
        <td>S√≠</td>
      </tr>
      <tr>
        <td><strong>Risc bugs</strong></td>
        <td>Baix</td>
        <td>Mitj√† (si no s'aplica immutabilitat)</td>
      </tr>
      <tr>
        <td><strong>Escalabilitat</strong></td>
        <td>Limitada</td>
        <td>Excel¬∑lent</td>
      </tr>
      <tr>
        <td><strong>Codi necessari</strong></td>
        <td>Cap canvi</td>
        <td>Afegir <code>changeDetection: OnPush</code></td>
      </tr>
    </tbody>
  </table>

  <h4>1.6.5. Quan usar cada estrat√®gia</h4>
  <p><strong>Usar Default quan:</strong></p>
  <ul>
    <li>Component t√© l√≤gica interna complexa amb moltes mutacions</li>
    <li>Treballeu amb llibreries externes que muten objectes</li>
    <li>Prototipatge r√†pid on rendiment no √©s prioritat</li>
    <li>Equip no est√† familiaritzat amb immutabilitat</li>
  </ul>

  <p><strong>Usar OnPush quan:</strong></p>
  <ul>
    <li>Component presentacional que nom√©s mostra dades</li>
    <li>Llistes amb molts elements</li>
    <li>Aplicaci√≥ gran (&gt; 50 components)</li>
    <li>Rendiment √©s cr√≠tica</li>
    <li>Podeu garantir immutabilitat</li>
  </ul>

  <p><strong>Estrat√®gia recomanada:</strong> Comenceu amb OnPush per defecte en tots els components nous. Nom√©s useu Default si trobeu problemes espec√≠fics que no podeu resoldre.</p>

  <!-- Component: Caixa d'√®xit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> √àxit</div>
    <strong>Clau:</strong> Default comprova sempre tots els components; OnPush nom√©s comprova quan inputs canvien de refer√®ncia, reduint comprovacions en un 80-95%.
</div>


  <h4>1.6.6. Resultat esperat</h4>
  <p>Comprensi√≥ de les difer√®ncies entre Default i OnPush i saber quan usar cada estrat√®gia.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.7. OnPush: nom√©s comprovar quan canvien les entrades</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.7.1. Objectiu</h4>
  <p>Aprendre a implementar OnPush i comprendre exactament quan Angular comprova components amb aquesta estrat√®gia.</p>

  <h4>1.7.2. Implementaci√≥ b√†sica d'OnPush</h4>
  <p>Afegir OnPush a un component nom√©s requereix una l√≠nia:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, ChangeDetectionStrategy, Input } from &#39;@angular/core&#39;;
@Component({
  selector: &#39;app-product-card&#39;,
  template: `
    &lt;div class=&quot;card&quot;&gt;
      &lt;h3&gt;{{ product.name }}&lt;/h3&gt;
      &lt;p&gt;{{ product.price }}‚Ç¨&lt;/p&gt;
    &lt;/div&gt;
  `,
  changeDetection: ChangeDetectionStrategy.OnPush // ‚Üê Afegir aquesta l√≠nia
})
export class ProductCardComponent {
  @Input() product!: Product;
}</code></pre>
  </div>
</div>


  <p>Ja est√†! Ara aquest component nom√©s es comprovar√† quan <code>product</code> canvi√Ø de refer√®ncia.</p>

  <h4>1.7.3. Quan Angular comprova amb OnPush</h4>
  <p><strong>Cas 1: Input canvia de refer√®ncia</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Component pare
export class ProductListComponent {
  product = { id: 1, name: &#39;Laptop&#39;, price: 800 };
  updatePrice() {
    // Correcte: Crea nou objecte ‚Üí OnPush detecta canvi
    this.product = { ...this.product, price: 750 };
    // Incorrecte: Mutaci√≥ directa ‚Üí OnPush NO detecta canvi
    // this.product.price = 750;
  }
}</code></pre>
  </div>
</div>


  <p><strong>Cas 2: Esdeveniment dins del component</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  selector: &#39;app-counter&#39;,
  template: `
    &lt;button (click)=&quot;increment()&quot;&gt;{{ count }}&lt;/button&gt;
  `,
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class CounterComponent {
  count = 0;
  increment() {
    this.count++; // Correcte: Component es comprova perqu√® hi ha esdeveniment intern
  }
}</code></pre>
  </div>
</div>


  <p><strong>Cas 3: Observable amb async pipe</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  selector: &#39;app-products&#39;,
  template: `
    &lt;div *ngFor=&quot;let product of products$ | async&quot;&gt;
      {{ product.name }}
    &lt;/div&gt;
  `,
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class ProductsComponent {
  products$ = this.http.get&lt;Product[]&gt;(&#39;/api/products&#39;);
  // Correcte: async pipe activa detecci√≥ quan observable emet
  constructor(private http: HttpClient) {}
}</code></pre>
  </div>
</div>


  <h4>1.7.4. Errors comuns amb OnPush</h4>
  <p><strong>Error 1: Mutar objectes directament</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Mutaci√≥ directa amb OnPush
@Input() product!: Product;
ngOnInit() {
  this.product.price = 100; // NO es detecta perqu√® refer√®ncia √©s igual
}
// Correcte: Crear nou objecte
@Input() product!: Product;
ngOnInit() {
  this.product = { ...this.product, price: 100 }; // Es detecta
}</code></pre>
  </div>
</div>


  <p><strong>Error 2: Modificar arrays amb push/splice</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Mutaci√≥ d&#39;array amb OnPush
@Input() items: number[] = [];
addItem(item: number) {
  this.items.push(item); // NO es detecta
}
// Correcte: Crear nou array
@Input() items: number[] = [];
addItem(item: number) {
  this.items = [...this.items, item]; // Es detecta
}</code></pre>
  </div>
</div>


  <h4>1.7.5. Beneficis mesurables d'OnPush</h4>
  <p><strong>Aplicaci√≥ de prova amb 100 ProductCardComponent:</strong></p>

  <p>Sense OnPush:</p>
  <ul>
    <li>Usuari clica "Afegir a cistella" en un producte</li>
    <li>Angular comprova 100 components</li>
    <li>Temps: 18ms</li>
  </ul>

  <p>Amb OnPush:</p>
  <ul>
    <li>Usuari clica "Afegir a cistella" en un producte</li>
    <li>Angular comprova 1 component (el que ha rebut el clic)</li>
    <li>Temps: 0.8ms</li>
  </ul>

  <p><strong>Millora: 95% m√©s r√†pid (18ms ‚Üí 0.8ms).</strong></p>

  <h4>1.7.6. Propagaci√≥ de detecci√≥ amb OnPush</h4>
  <p>OnPush no impedeix que fills es comprovin si el pare canvia:</p>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">ParentComponent (OnPush) ‚Üê Input canvia
  ‚Üì Angular comprova el pare
 ChildComponent (OnPush) ‚Üê Angular tamb√© comprova fills
  ‚Üì
GrandchildComponent (OnPush) ‚Üê I nets</code></pre>
  </div>
</div>


  <p>Per√≤ si el pare NO canvia, els fills tampoc es comproven, estalviant moltes comprovacions.</p>

  <!-- Component: Caixa d'√®xit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> √àxit</div>
    <strong>Clau:</strong> OnPush nom√©s comprova components quan inputs canvien de refer√®ncia, hi ha esdeveniments interns, o observables amb async pipe emeten valors.
</div>


  <h4>1.7.7. Resultat esperat</h4>
  <p>Implementaci√≥ correcta d'OnPush i comprensi√≥ exacta de quan Angular comprova components amb aquesta estrat√®gia.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.8. Exemple pr√†ctic: component amb detecci√≥ OnPush</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.8.1. Objectiu</h4>
  <p>Crear un exemple complet d'un component amb OnPush que funciona correctament amb immutabilitat.</p>

  <h4>1.8.2. Component de llista de productes amb OnPush</h4>
  <p><strong>Component fill (ProductCardComponent amb OnPush):</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, ChangeDetectionStrategy, Input, Output, EventEmitter } from &#39;@angular/core&#39;;
interface Product {
  id: number;
  name: string;
  price: number;
  inStock: boolean;
}
@Component({
  selector: &#39;app-product-card&#39;,
  template: `
    &lt;div class=&quot;card&quot;&gt;
      &lt;h3&gt;{{ product.name }}&lt;/h3&gt;
      &lt;p class=&quot;price&quot;&gt;{{ product.price }}‚Ç¨&lt;/p&gt;
      &lt;span class=&quot;stock&quot; [class.out-of-stock]=&quot;!product.inStock&quot;&gt;
        {{ product.inStock ? &#39;Disponible&#39; : &#39;Esgotat&#39; }}
      &lt;/span&gt;
      &lt;button (click)=&quot;onAddToCart()&quot; [disabled]=&quot;!product.inStock&quot;&gt;
        Afegir a cistella
      &lt;/button&gt;
    &lt;/div&gt;
  `,
  styles: [`
    .card { border: 1px solid #ddd; padding: 1rem; margin: 0.5rem; }
    .price { font-size: 1.5rem; font-weight: bold; color: #2c3e50; }
    .stock { display: block; margin: 0.5rem 0; }
    .out-of-stock { color: #e74c3c; }
  `],
  changeDetection: ChangeDetectionStrategy.OnPush // ‚Üê OnPush activat
})
export class ProductCardComponent {
  @Input() product!: Product;
  @Output() addToCart = new EventEmitter&lt;Product&gt;();
  onAddToCart(): void {
    this.addToCart.emit(this.product);
  }
}</code></pre>
  </div>
</div>


  <p><strong>Component pare (ProductListComponent que gestiona estat):</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component } from &#39;@angular/core&#39;;
@Component({
  selector: &#39;app-product-list&#39;,
  template: `
    &lt;div class=&quot;controls&quot;&gt;
      &lt;button (click)=&quot;updatePrice()&quot;&gt;Actualitzar preu primer producte&lt;/button&gt;
      &lt;button (click)=&quot;toggleStock()&quot;&gt;Canviar stock primer producte&lt;/button&gt;
    &lt;/div&gt;
    &lt;div class=&quot;product-grid&quot;&gt;
      &lt;app-product-card
        *ngFor=&quot;let product of products; trackBy: trackByProduct&quot;
        [product]=&quot;product&quot;
        (addToCart)=&quot;handleAddToCart($event)&quot;&gt;
      &lt;/app-product-card&gt;
    &lt;/div&gt;
  `
})
export class ProductListComponent {
  products: Product[] = [
    { id: 1, name: &#39;Laptop&#39;, price: 800, inStock: true },
    { id: 2, name: &#39;Mouse&#39;, price: 25, inStock: true },
    { id: 3, name: &#39;Keyboard&#39;, price: 60, inStock: false }
  ];
  // Correcte: Crea nou objecte (OnPush detecta canvi)
  updatePrice(): void {
    this.products = this.products.map((p, index) =&gt;
      index === 0 ? { ...p, price: p.price - 50 } : p
    );
  }
  // Correcte: Crea nou objecte (OnPush detecta canvi)
  toggleStock(): void {
    this.products = this.products.map((p, index) =&gt;
      index === 0 ? { ...p, inStock: !p.inStock } : p
    );
  }
  handleAddToCart(product: Product): void {
    console.log(&#39;Afegit a cistella:&#39;, product.name);
  }
  trackByProduct(index: number, product: Product): number {
    return product.id;
  }
}</code></pre>
  </div>
</div>


  <h4>1.8.3. Codi incorrecte (NO funciona amb OnPush)</h4>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Mutaci√≥ directa
updatePrice(): void {
  this.products[0].price -= 50; // Refer√®ncia igual ‚Üí NO es detecta
}
// Incorrecte: push muta l&#39;array
addProduct(product: Product): void {
  this.products.push(product); // Refer√®ncia igual ‚Üí NO es detecta
}</code></pre>
  </div>
</div>


  <h4>1.8.4. Verificaci√≥ de funcionament</h4>
  <ol>
    <li>Serviu l'aplicaci√≥: <code>ng serve</code></li>
    <li>Obriu DevTools ‚Üí Console</li>
    <li>Cliqueu "Actualitzar preu primer producte"</li>
    <li>Observeu que el preu es canvia immediatament (OnPush funciona)</li>
    <li>Afegiu temporalment detecci√≥ de canvis per mesurar:</li>
  </ol>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngAfterViewChecked() {
  console.log(&#39;Component comprovat:&#39;, this.product.name);
}</code></pre>
  </div>
</div>


  <p>Amb OnPush, veureu molts menys logs "Component comprovat" que sense OnPush.</p>

  <h4>1.8.5. Comparaci√≥ abans/despr√©s</h4>
  <p><strong>Abans (tots els components Default):</strong></p>
  <ul>
    <li>Clic ‚Üí 3 logs "Component comprovat" (un per cada ProductCard)</li>
    <li>Temps: 2.5ms</li>
  </ul>

  <p><strong>Despr√©s (tots els components OnPush):</strong></p>
  <ul>
    <li>Clic ‚Üí 1 log "Component comprovat" (nom√©s el que ha canviat)</li>
    <li>Temps: 0.6ms</li>
  </ul>

  <p><strong>Millora: 76% m√©s r√†pid.</strong></p>

  <!-- Component: Caixa d'√®xit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> √àxit</div>
    <strong>Clau:</strong> Amb OnPush, sempre crear nous objectes/arrays per canviar dades; mai mutar directament les propietats.
</div>


  <h4>1.8.6. Resultat esperat</h4>
  <p>Creaci√≥ de components amb OnPush que funcionen correctament aplicant immutabilitat per canviar dades.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.9. Immutabilitat: per qu√® √©s crucial amb OnPush</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.9.1. Objectiu</h4>
  <p>Comprendre el concepte d'immutabilitat i per qu√® √©s essencial per al funcionament correcte d'OnPush.</p>

  <h4>1.9.2. Qu√® √©s la immutabilitat</h4>
  <p>La immutabilitat significa que no modifiqueu un valor existent; en lloc d'aix√≤, creeu un nou valor amb els canvis aplicats. En lloc de <code>obj.prop = newValue</code>, feu <code>obj = { ...obj, prop: newValue }</code>.</p>

  <h4>1.9.3. Per qu√® OnPush necessita immutabilitat</h4>
  <p>OnPush compara refer√®ncies d'objectes per detectar canvis:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const obj1 = { name: &#39;Product&#39;, price: 100 };
const obj2 = obj1;
obj2.price = 200;
console.log(obj1 === obj2); // true ‚Üê Mateixa refer√®ncia!
// OnPush NO detecta aquest canvi perqu√® refer√®ncia no ha canviat</code></pre>
  </div>
</div>


  <p>Per activar OnPush, necessiteu crear un nou objecte:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const obj1 = { name: &#39;Product&#39;, price: 100 };
const obj2 = { ...obj1, price: 200 }; // Nou objecte
console.log(obj1 === obj2); // false ‚Üê Refer√®ncia diferent!
// OnPush S√ç detecta aquest canvi</code></pre>
  </div>
</div>


  <h4>1.9.4. Patrons d'immutabilitat per objectes</h4>
  <p><strong>Operador spread per objectes:</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Mutaci√≥ directa
product.price = 200;
product.name = &#39;New Name&#39;;
// Correcte: Immutabilitat amb spread
product = {
  ...product,
  price: 200,
  name: &#39;New Name&#39;
};</code></pre>
  </div>
</div>


  <p><strong>Immutabilitat amb objectes niats:</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Mutaci√≥ niada
product.details.warranty = 24;
// Correcte: Immutabilitat niada
product = {
  ...product,
  details: {
    ...product.details,
    warranty: 24
  }
};</code></pre>
  </div>
</div>


  <h4>1.9.5. Patrons d'immutabilitat per arrays</h4>
  <p><strong>Operador spread per arrays:</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Mutaci√≥ amb push
items.push(newItem);
// Correcte: Immutabilitat amb spread
items = [...items, newItem];
// Incorrecte: Mutaci√≥ amb splice
items.splice(index, 1);
// Correcte: Immutabilitat amb filter
items = items.filter((_, i) =&gt; i !== index);
// Incorrecte: Mutaci√≥ amb sort
items.sort((a, b) =&gt; a.price - b.price);
// Correcte: Immutabilitat amb slice + sort
items = [...items].sort((a, b) =&gt; a.price - b.price);</code></pre>
  </div>
</div>


  <p><strong>Map per transformar arrays:</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Mutaci√≥ en bucle
for (let i = 0; i &lt; products.length; i++) {
  products[i].price *= 1.1;
}
// Correcte: Immutabilitat amb map
products = products.map(p =&gt; ({ ...p, price: p.price * 1.1 }));</code></pre>
  </div>
</div>


  <h4>1.9.6. Avantatges addicionals de la immutabilitat</h4>
  <p><strong>1. Historial de canvis</strong></p>
  <p>Amb immutabilitat, podeu guardar estats anteriors sense que es modifiquin:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const history: Product[] = [];
// Guardar estat actual
history.push(product);
// Modificar producte
product = { ...product, price: 200 };
// history[0] segueix tenint price: 100 (no s&#39;ha modificat)</code></pre>
  </div>
</div>


  <p>Aix√≤ permet implementar "desfer/refer" f√†cilment.</p>

  <p><strong>2. Depuraci√≥ m√©s senzilla</strong></p>
  <p>Amb mutabilitat, no sabeu quan o on va canviar un objecte. Amb immutabilitat, cada canvi crea un nou objecte, facilitant el tracking de canvis.</p>

  <p><strong>3. Predicibilitat</strong></p>
  <p>Amb immutabilitat, sabeu que passar un objecte a una funci√≥ no el modificar√†:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">function processProduct(product: Product): Product {
  return { ...product, price: product.price * 1.1 };
  // Correcte: No modifica l&#39;original
}
const original = { name: &#39;Laptop&#39;, price: 100 };
const processed = processProduct(original);
console.log(original.price); // 100 (no ha canviat)
console.log(processed.price); // 110 (nou objecte)</code></pre>
  </div>
</div>


  <h4>1.9.7. Taula de patrons d'immutabilitat</h4>
  <table>
    <thead>
      <tr>
        <th>Operaci√≥</th>
        <th>Mutable (Incorrecte)</th>
        <th>Immutable (Correcte)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Afegir a array</td>
        <td><code>arr.push(x)</code></td>
        <td><code>arr = [...arr, x]</code></td>
      </tr>
      <tr>
        <td>Eliminar d'array</td>
        <td><code>arr.splice(i, 1)</code></td>
        <td><code>arr = arr.filter((_, idx) => idx !== i)</code></td>
      </tr>
      <tr>
        <td>Modificar element array</td>
        <td><code>arr[i].prop = x</code></td>
        <td><code>arr = arr.map((item, idx) => idx === i ? {...item, prop: x} : item)</code></td>
      </tr>
      <tr>
        <td>Modificar propietat objecte</td>
        <td><code>obj.prop = x</code></td>
        <td><code>obj = { ...obj, prop: x }</code></td>
      </tr>
      <tr>
        <td>Ordenar array</td>
        <td><code>arr.sort(fn)</code></td>
        <td><code>arr = [...arr].sort(fn)</code></td>
      </tr>
    </tbody>
  </table>

  <!-- Component: Caixa d'√®xit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> √àxit</div>
    <strong>Clau:</strong> OnPush necessita immutabilitat perqu√® compara refer√®ncies d'objectes; crear nous objectes activa detecci√≥, mutar objectes existents no.
</div>


  <h4>1.9.8. Resultat esperat</h4>
  <p>Aplicaci√≥ de patrons d'immutabilitat creant nous objectes i arrays en lloc de modificar els existents per garantir funcionament d'OnPush.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.10. Detecci√≥ manual: for√ßar actualitzaci√≥ quan cal</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.10.1. Objectiu</h4>
  <p>Aprendre a for√ßar detecci√≥ de canvis manualment en situacions on OnPush no detecta canvis autom√†ticament.</p>

  <h4>1.10.2. Quan necessiteu detecci√≥ manual</h4>
  <p>Hi ha situacions on OnPush no detecta canvis autom√†ticament:</p>
  <ol>
    <li><strong>Callbacks de llibreries externes</strong> (no interceptades per Zone.js)</li>
    <li><strong>setTimeout/setInterval fora de Zone</strong></li>
    <li><strong>WebSockets o EventSource</strong></li>
    <li><strong>Integracions amb llibreries que muten objectes</strong></li>
  </ol>

  <h4>1.10.3. M√®todes de detecci√≥ manual</h4>
  <p>Angular proporciona <code>ChangeDetectorRef</code> amb dos m√®todes principals:</p>

  <p><strong>1. detectChanges() - Comprova aquest component i fills</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, ChangeDetectorRef, ChangeDetectionStrategy } from &#39;@angular/core&#39;;
@Component({
  selector: &#39;app-timer&#39;,
  template: `&lt;p&gt;Temps: {{ seconds }}s&lt;/p&gt;`,
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class TimerComponent implements OnInit, OnDestroy {
  seconds = 0;
  private intervalId: any;
  constructor(private cdr: ChangeDetectorRef) {}
  ngOnInit() {
    this.intervalId = setInterval(() =&gt; {
      this.seconds++;
      this.cdr.detectChanges(); // ‚Üê For√ßar detecci√≥ manual
    }, 1000);
  }
  ngOnDestroy() {
    clearInterval(this.intervalId);
  }
}</code></pre>
  </div>
</div>


  <p><strong>2. markForCheck() - Marca component per comprovar en proper cicle</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  selector: &#39;app-websocket&#39;,
  template: `&lt;p&gt;Missatge: {{ message }}&lt;/p&gt;`,
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class WebSocketComponent implements OnInit {
  message = &#39;&#39;;
  constructor(
    private cdr: ChangeDetectorRef,
    private wsService: WebSocketService
  ) {}
  ngOnInit() {
    this.wsService.messages$.subscribe(msg =&gt; {
      this.message = msg;
      this.cdr.markForCheck(); // ‚Üê Marca per comprovar
    });
  }
}</code></pre>
  </div>
</div>


  <h4>1.10.4. Difer√®ncia entre detectChanges() i markForCheck()</h4>
  <p><strong>detectChanges():</strong></p>
  <ul>
    <li>Executa detecci√≥ immediatament</li>
    <li>Comprova aquest component i fills</li>
    <li>M√©s cost√≥s (executa detecci√≥ ara)</li>
  </ul>

  <p><strong>markForCheck():</strong></p>
  <ul>
    <li>Marca component per comprovar</li>
    <li>Espera al proper cicle de detecci√≥</li>
    <li>M√©s eficient (nom√©s marca, no executa)</li>
  </ul>

  <p><strong>Regla general:</strong> Useu <code>markForCheck()</code> si sabeu que hi haur√† un cicle de detecci√≥ aviat (per exemple, despr√©s d'un observable). Useu <code>detectChanges()</code> si necessiteu actualitzaci√≥ immediata.</p>

  <h4>1.10.5. Exemple: Integraci√≥ amb llibreria externa</h4>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit, OnDestroy, ChangeDetectorRef, ChangeDetectionStrategy } from &#39;@angular/core&#39;;
declare var ExternalLibrary: any;
@Component({
  selector: &#39;app-external-integration&#39;,
  template: `
    &lt;div&gt;
      &lt;p&gt;Valor de llibreria externa: {{ externalValue }}&lt;/p&gt;
    &lt;/div&gt;
  `,
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class ExternalIntegrationComponent implements OnInit, OnDestroy {
  externalValue = 0;
  private lib: any;
  constructor(private cdr: ChangeDetectorRef) {}
  ngOnInit() {
    this.lib = new ExternalLibrary();
    // Callback de llibreria externa (fora de Zone.js)
    this.lib.onChange((newValue: number) =&gt; {
      this.externalValue = newValue;
      // ‚Üê OnPush NO detecta aquest canvi autom√†ticament
      this.cdr.markForCheck(); // ‚Üê For√ßar detecci√≥ manual
    });
  }
  ngOnDestroy() {
    this.lib.destroy();
  }
}</code></pre>
  </div>
</div>


  <h4>1.10.6. Advert√®ncies sobre detecci√≥ manual</h4>
  <p><strong>1. No abusar de detectChanges()</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Cridar detectChanges() a cada canvi petit
updateValue() {
  this.value1 = 10;
  this.cdr.detectChanges();
  this.value2 = 20;
  this.cdr.detectChanges();
  this.value3 = 30;
  this.cdr.detectChanges();
}
// Correcte: Fer tots els canvis i despr√©s cridar una vegada
updateValue() {
  this.value1 = 10;
  this.value2 = 20;
  this.value3 = 30;
  this.cdr.detectChanges();
}</code></pre>
  </div>
</div>


  <p><strong>2. Evitar detecci√≥ manual si podeu usar observables</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Sub√≤ptim: setInterval + detecci√≥ manual
ngOnInit() {
  setInterval(() =&gt; {
    this.value++;
    this.cdr.detectChanges();
  }, 1000);
}
// Millor: Usar observable + async pipe
value$ = interval(1000);
// Template: {{ value$ | async }}</code></pre>
  </div>
</div>


  <!-- Component: Caixa d'√®xit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> √àxit</div>
    <strong>Clau:</strong> Useu <code>ChangeDetectorRef.markForCheck()</code> o <code>detectChanges()</code> per for√ßar detecci√≥ manual quan OnPush no detecta canvis autom√†ticament (callbacks externs, WebSockets).
</div>


  <h4>1.10.7. Resultat esperat</h4>
  <p>Utilitzaci√≥ de detecci√≥ manual amb <code>ChangeDetectorRef</code> en situacions on OnPush no detecta canvis autom√†ticament.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.11. Quan aplicar cada estrat√®gia: criteri de decisi√≥</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.11.1. Objectiu</h4>
  <p>Establir criteris clars per decidir quan usar Default, OnPush, o detecci√≥ manual segons el context.</p>

  <h4>1.11.2. Arbre de decisi√≥</h4>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Component nou?
  ‚Üì
Comen√ßar amb OnPush
  ‚Üì
√âs component presentacional (nom√©s mostra dades)?
  ‚Üì S√≠
OnPush
  ‚Üì No
T√© l√≤gica interna complexa amb moltes mutacions?
  ‚Üì S√≠
Default (considerar refactoritzaci√≥)
  ‚Üì No
Podeu garantir immutabilitat?
  ‚Üì S√≠
OnPush
  ‚Üì No
Treballa amb llibreries externes que muten?
  ‚Üì S√≠
Default + considerar wrapper amb OnPush
  ‚Üì No
OnPush + detecci√≥ manual si cal</code></pre>
  </div>
</div>


  <h4>1.11.3. Matriu de decisi√≥</h4>
  <table>
    <thead>
      <tr>
        <th>Situaci√≥</th>
        <th>Estrat√®gia</th>
        <th>Ra√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Component presentacional (nom√©s @Input/@Output)</td>
        <td>OnPush</td>
        <td>M√†xim rendiment, dades externes</td>
      </tr>
      <tr>
        <td>Llista amb &gt; 50 elements</td>
        <td>OnPush</td>
        <td>Cr√≠tica: 50 comprovacions vs 1-2</td>
      </tr>
      <tr>
        <td>Component amb formularis reactius</td>
        <td>OnPush</td>
        <td>Observables funcionen b√© amb OnPush</td>
      </tr>
      <tr>
        <td>Component amb setInterval/setTimeout</td>
        <td>OnPush + manual</td>
        <td>Necessita markForCheck()</td>
      </tr>
      <tr>
        <td>Component amb WebSocket</td>
        <td>OnPush + manual</td>
        <td>Necessita markForCheck()</td>
      </tr>
      <tr>
        <td>Integraci√≥ llibreria que muta objectes</td>
        <td>Default</td>
        <td>Immutabilitat no garantida</td>
      </tr>
      <tr>
        <td>Component root (AppComponent)</td>
        <td>Default</td>
        <td>Poques comprovacions, simple</td>
      </tr>
      <tr>
        <td>Prototipatge r√†pid</td>
        <td>Default</td>
        <td>Velocitat desenvolupament &gt; rendiment</td>
      </tr>
    </tbody>
  </table>

  <h4>1.11.4. Estrat√®gia per aplicaci√≥ completa</h4>
  <p><strong>Recomanaci√≥ general: OnPush per defecte</strong></p>
  <ol>
    <li>Comenceu amb OnPush en tots els components nous</li>
    <li>Mantenir immutabilitat des del principi</li>
    <li>Usar Default nom√©s si trobeu problemes insolubles</li>
    <li>Mesurar rendiment amb DevTools</li>
  </ol>

  <p><strong>Migraci√≥ gradual:</strong></p>
  <p>Si teniu aplicaci√≥ existent amb Default:</p>
  <ol>
    <li><strong>Fase 1:</strong> Components presentacionals (fulles de l'arbre) ‚Üí OnPush</li>
    <li><strong>Fase 2:</strong> Components de llistes ‚Üí OnPush</li>
    <li><strong>Fase 3:</strong> Components intermedis ‚Üí OnPush</li>
    <li><strong>Fase 4:</strong> Components root ‚Üí Mantenir Default (opcional)</li>
  </ol>

  <p>No cal migrar tot simult√†niament; OnPush i Default poden conviure.</p>

  <h4>1.11.5. Checklist abans d'aplicar OnPush</h4>
  <ul>
    <li>Component rep dades via <code>@Input()</code> o observables</li>
    <li>Puc garantir immutabilitat (crear nous objectes per canviar dades)</li>
    <li>He verificat que no hi ha mutacions directes d'objectes/arrays</li>
    <li>Si necessito detecci√≥ manual, s√© quan cridar <code>markForCheck()</code></li>
    <li>He provat que el component funciona correctament amb OnPush</li>
  </ul>

  <h4>1.11.6. Mesura d'√®xit</h4>
  <p>Despr√©s d'aplicar OnPush, mesureu:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Afegir temporalment per mesurar impacte
ngAfterViewChecked() {
  console.log(&#39;Component comprovat&#39;);
}</code></pre>
  </div>
</div>


  <p><strong>Abans d'OnPush:</strong> ~100 logs per interacci√≥</p>
  <p><strong>Despr√©s d'OnPush:</strong> ~5 logs per interacci√≥</p>
  <p><strong>Objectiu:</strong> Reduir logs en un 80-95%.</p>

  <!-- Component: Caixa d'√®xit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> √àxit</div>
    <strong>Clau:</strong> Useu OnPush per defecte excepte en casos espec√≠fics (llibreries externes amb mutacions, l√≤gica complexa que no es pot refactoritzar); mesureu impacte amb DevTools.
</div>


  <h4>1.11.7. Resultat esperat</h4>
  <p>Aplicaci√≥ de criteris objectius per decidir quan usar Default, OnPush, o detecci√≥ manual segons el context del component.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.12. Mini exemple pr√†ctic ¬∑ Component de llista optimitzat amb OnPush</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <ol>
    <li>Crear component <code>ProductCardComponent</code> amb OnPush i nom√©s <code>@Input()</code> i <code>@Output()</code></li>
    <li>Crear component pare <code>ProductListComponent</code> amb array de productes</li>
    <li>Al pare, crear funci√≥ <code>updatePrice()</code> que crea nou objecte amb operador spread</li>
    <li>Afegir bot√≥ que crida <code>updatePrice()</code> per modificar el primer producte</li>
    <li>Verificar que el canvi es reflecteix immediatament (OnPush funciona)</li>
    <li>Afegir temporalment <code>ngAfterViewChecked()</code> amb <code>console.log()</code> per comptar comprovacions</li>
    <li>Comparar nombre de logs abans i despr√©s d'aplicar OnPush</li>
    <li>Mesurar temps amb DevTools Performance tab i verificar millora de rendiment</li>
  </ol>

  <p><strong>Resultat esperat:</strong> Component amb OnPush que es comprova nom√©s quan les seves dades canvien, reduint comprovacions en un 80-95% amb millora de rendiment mesurable.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.13. Resoluci√≥ de problemes (Win/macOS/Linux)</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <table>
    <thead>
      <tr>
        <th>S√≠mptoma</th>
        <th>Possible causa</th>
        <th>Soluci√≥ r√†pida</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Component amb OnPush no s'actualitza quan canvien dades</td>
        <td>Esteu mutant l'objecte directament sense crear-ne un de nou</td>
        <td>Usar operador spread per crear nou objecte: <code>obj = { ...obj, prop: newValue }</code></td>
      </tr>
      <tr>
        <td>Array no s'actualitza amb OnPush despr√©s de push()</td>
        <td>push() muta l'array; mateixa refer√®ncia</td>
        <td>Usar spread: <code>arr = [...arr, newItem]</code> en lloc de <code>arr.push(newItem)</code></td>
      </tr>
      <tr>
        <td>Component es comprova massa sovint fins i tot amb OnPush</td>
        <td>Teniu funcions getter al template que s'executen constantment</td>
        <td>Moure c√†lculs a propietats calculades en <code>ngOnInit()</code> o usar pipes pures</td>
      </tr>
      <tr>
        <td>Error "ExpressionChangedAfterItHasBeenCheckedError" amb OnPush</td>
        <td>Esteu modificant dades durant el cicle de detecci√≥</td>
        <td>Moure modificacions a <code>setTimeout(() => {...}, 0)</code> o usar <code>ChangeDetectorRef.markForCheck()</code></td>
      </tr>
      <tr>
        <td>OnPush no detecta canvis d'observable</td>
        <td>Observable no est√† amb async pipe o falta markForCheck()</td>
        <td>Usar async pipe al template o cridar <code>this.cdr.markForCheck()</code> despr√©s de rebre dades</td>
      </tr>
      <tr>
        <td>Component amb setInterval no s'actualitza amb OnPush</td>
        <td>setInterval no activa OnPush autom√†ticament</td>
        <td>Afegir <code>this.cdr.markForCheck()</code> dins del callback del setInterval</td>
      </tr>
      <tr>
        <td>Detecci√≥ manual amb detectChanges() causa errors</td>
        <td>Esteu cridant detectChanges() durant el cicle de detecci√≥</td>
        <td>Usar <code>markForCheck()</code> en lloc de <code>detectChanges()</code> o moure a <code>setTimeout</code></td>
      </tr>
      <tr>
        <td>Rendiment no millora despr√©s d'aplicar OnPush</td>
        <td>Alguns components pares encara s√≥n Default, for√ßant comprovaci√≥ fills</td>
        <td>Aplicar OnPush tamb√© als components pares de la jerarquia</td>
      </tr>
    </tbody>
  </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.14. Prompts d'IA</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <!-- Component: Prompt per IA amb caixa de text i bot√≥ de c√≤pia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Expert en optimitzaci√≥ de rendiment d'aplicacions Angular. <strong>Context:</strong> Tinc una aplicaci√≥ Angular amb una llista de 200 productes on cada producte es mostra amb un component ProductCardComponent. Cada interacci√≥ d'usuari (clic, hover, escriptura) causa lag perceptible de 150-200ms. Sospito que el problema √©s la detecci√≥ de canvis no optimitzada. <strong>Tasca:</strong> Diagnostica el problema de rendiment, explica com funciona la detecci√≥ de canvis i els seus costos, proposa una soluci√≥ completa aplicant OnPush amb exemples de codi concrets mostrant com refactoritzar els components, i estima la millora de rendiment esperada. <strong>Format:</strong> Document amb diagn√≤stic del problema, explicaci√≥ de detecci√≥ de canvis, codi refactoritzat amb OnPush (abans/despr√©s), patrons d'immutabilitat necessaris, i estimaci√≥ quantitativa de millora.</div>
  </div>
</div>


  <!-- Component: Prompt per IA amb caixa de text i bot√≥ de c√≤pia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Instructor d'Angular especialitzat en estrat√®gies de detecci√≥ de canvis. <strong>Context:</strong> Estic migrant una aplicaci√≥ Angular gran (300 components) que utilitza ChangeDetectionStrategy.Default a OnPush per millorar el rendiment. Alguns components s'integren amb una llibreria de gr√†fics externa (Chart.js) que muta objectes internament, i altres components utilitzen setInterval per actualitzar comptadors. <strong>Tasca:</strong> Proporciona una estrat√®gia de migraci√≥ gradual a OnPush especificant: (1) Ordre de migraci√≥ (quins components primer), (2) Com gestionar components amb llibreries externes que muten, (3) Com implementar detecci√≥ manual per setInterval i altres casos especials, (4) Checklist de verificaci√≥ per cada component migrat. <strong>Format:</strong> Guia de migraci√≥ pas a pas amb exemples de codi per cada cas especial, patrons d'immutabilitat, √∫s de ChangeDetectorRef, i criteris de decisi√≥ per quan usar Default vs OnPush vs manual.</div>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.15. Autoavaluaci√≥</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>1.15.1. Conceptes de detecci√≥ de canvis</h4>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Comprenc com funciona la detecci√≥ de canvis d'Angular i quan s'activa (esdeveniments d'usuari, HTTP, timers)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc la difer√®ncia entre ChangeDetectionStrategy.Default i OnPush</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">S√© quan Angular comprova components amb OnPush (inputs canvien, esdeveniments interns, async pipe)</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <h4>1.15.2. Implementaci√≥ d'OnPush</h4>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Aplico l'estrat√®gia OnPush afegint <code>changeDetection: ChangeDetectionStrategy.OnPush</code> per optimitzar components</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Mantinc immutabilitat creant nous objectes amb operador spread en lloc de mutar directament propietats</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Creo nous arrays amb [...arr, item] en lloc de usar push() o splice()</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <h4>1.15.3. Detecci√≥ manual i mesurament</h4>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Utilitzo <code>ChangeDetectorRef.markForCheck()</code> per for√ßar detecci√≥ manual quan OnPush no detecta canvis autom√†ticament (WebSockets, callbacks externs)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Mesuro l'impacte de l'optimitzaci√≥ amb DevTools i verifico reducci√≥ del 80-95% en comprovacions de components</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Aplico criteris objectius per decidir quan usar Default, OnPush, o detecci√≥ manual segons el context</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.16. S√≠ntesi</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <ul>
    <li>La detecci√≥ de canvis √©s el mecanisme pel qual Angular detecta canvis en dades i actualitza el DOM autom√†ticament despr√©s de cada esdeveniment as√≠ncron, per√≤ comprova tots els components per defecte causant problemes de rendiment en aplicacions grans.</li>
    <li>L'estrat√®gia Default comprova tots els components en cada cicle independentment de si han canviat, mentre que OnPush nom√©s comprova components quan les seves entrades canvien de refer√®ncia, reduint comprovacions en un 80-95% i millorant rendiment dram√†ticament.</li>
    <li>OnPush requereix immutabilitat: crear nous objectes i arrays amb operador spread (<code>{ ...obj, prop: newValue }</code>, <code>[...arr, item]</code>) en lloc de mutar directament, perqu√® OnPush compara refer√®ncies d'objectes per detectar canvis.</li>
    <li>Quan OnPush no detecta canvis autom√†ticament (callbacks externs, WebSockets, setInterval), s'utilitza <code>ChangeDetectorRef.markForCheck()</code> per marcar component per comprovar o <code>detectChanges()</code> per for√ßar detecci√≥ immediata.</li>
    <li>La recomanaci√≥ √©s usar OnPush per defecte en tots els components nous excepte en casos espec√≠fics (integracions amb llibreries externes que muten objectes, l√≤gica interna complexa irrefactoritzable), mesurant impacte amb DevTools per verificar millora de rendiment.</li>
  </ul>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.17. Rep√†s de conceptes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Detecci√≥ de canvis:</strong> Mecanisme d'Angular que detecta canvis en dades dels components i actualitza el DOM autom√†ticament.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Cicle de detecci√≥:</strong> Proc√©s on Angular comprova tots els components per detectar canvis i actualitzar la interf√≠cie.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>ChangeDetectionStrategy.Default:</strong> Estrat√®gia per defecte que comprova tots els components en cada cicle independentment de si han canviat.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>ChangeDetectionStrategy.OnPush:</strong> Estrat√®gia optimitzada que nom√©s comprova components quan inputs canvien de refer√®ncia o hi ha esdeveniments interns.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Refer√®ncia d'objecte:</strong> Adre√ßa de mem√≤ria de l'objecte; OnPush compara refer√®ncies, no contingut, per detectar canvis.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Immutabilitat:</strong> Principi de crear nous objectes en lloc de modificar els existents per garantir funcionament correcte d'OnPush.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Operador spread:</strong> Sintaxi (<code>{ ...obj }</code>, <code>[ ...arr ]</code>) per crear c√≤pies d'objectes i arrays amb modificacions aplicades.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>ChangeDetectorRef:</strong> Servei que permet for√ßar detecci√≥ de canvis manualment amb <code>markForCheck()</code> o <code>detectChanges()</code>.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>markForCheck():</strong> M√®tode que marca un component per comprovar en el proper cicle de detecci√≥ sense executar detecci√≥ immediatament.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>detectChanges():</strong> M√®tode que executa detecci√≥ de canvis immediatament per aquest component i els seus fills.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>async pipe:</strong> Pipe d'Angular que gestiona subscripcions a observables i activa detecci√≥ autom√†ticament quan emeten valors, compatible amb OnPush.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Zone.js:</strong> Llibreria que Angular utilitza per interceptar esdeveniments as√≠ncrons i activar cicles de detecci√≥ autom√†ticament.</p>
  </div>
</div>

  
  </div>
</div>


</div>

<div class="section" id="Unitat4_Bloc3_Seccio2">
  <h2 id="Unitat4_Bloc3_Seccio2">2. Virtualitzaci√≥ de llistes i renderitzat eficient</h2>

  <!-- MULTIM√àDIA -->
  <!--
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  Component: Enlla√ßos multim√®dia YouTube
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

  Par√†metres:
    - unitat: n√∫mero de la unitat (1-4)
    - bloc: n√∫mero del bloc (1-4)
    - seccio: n√∫mero de la secci√≥ (1-3)

  Exemple d'√∫s:
    {% include multimedia-youtube.html unitat=1 bloc=1 seccio=1 %}

  El component busca autom√†ticament les URLs corresponents a
  site.data.multimedia i mostra els botons de v√≠deo i √†udio.
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
-->





  
  
  
  
  

  

  

  
<div class="multimedia-resources">
  <div class="multimedia-header">
    <i class="bi bi-play-circle-fill"></i>
    <span>Contingut multim√®dia d'aquesta lectura</span>
  </div>

  <div class="multimedia-buttons">
    
    <a href="https://www.youtube.com/watch?v=NQqXwxQWO38" target="_blank" rel="noopener noreferrer" class="multimedia-btn video-btn" title="Lectura 4.3.2 ¬∑ Virtualitzaci√≥ de llistes i renderitzat eficient">
      <i class="bi bi-youtube"></i>
      <span>Veure v√≠deo</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    

    
    <a href="https://www.youtube.com/watch?v=IsVV3Pr0peU" target="_blank" rel="noopener noreferrer" class="multimedia-btn audio-btn" title="[Audio] Lectura 4.3.2 ¬∑ Virtualitzaci√≥ de llistes i renderitzat eficient">
      <i class="bi bi-mic-fill"></i>
      <span>Escoltar √†udio</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    
  </div>

  
  
</div>
  




  <!-- Component: Objectius del bloc/unitat -->



<div class="objectius-box">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-bullseye" aria-hidden="true"></i> Objectius</div>
  <div class="component-content">
    <ul>
      
        <li>Implementar virtualitzaci√≥ per gestionar llistes amb milers d'elements de forma eficient.</li>
      
        <li>Configurar components de scroll virtual amb al√ßades fixes i din√†miques.</li>
      
        <li>Aplicar t√®cniques de renderitzat optimitzat amb trackBy i pipes purs.</li>
      
        <li>Mesurar millores de rendiment abans i despr√©s d'aplicar optimitzacions.</li>
      
    </ul>
  </div>
  <!-- IMPORTANT: tamb√© es pot usar via front matter: page.objectius (array) -->
</div>



  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informaci√≥</div>
    <strong>RA4 ¬∑ Criteri 4</strong> ‚Äî Optimitza els recursos i genera un paquet llest per a publicaci√≥.
    
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.1. Prerequisits</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p>Abans de comen√ßar, necessiteu:</p>
  <ul>
    <li><strong>Projecte Angular funcional:</strong> Servidor de desenvolupament operatiu amb almenys un component de llista</li>
    <li><strong>Coneixements de directives estructurals:</strong> √ös de <code>*ngFor</code> per iterar col¬∑leccions</li>
    <li><strong>Components b√†sics:</strong> Saber crear i usar components per mostrar elements de llista</li>
    <li><strong>Conceptes de rendiment:</strong> Comprensi√≥ b√†sica de com el DOM afecta el rendiment</li>
  </ul>

  <p><strong>Verificaci√≥ r√†pida:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng version          # Verificar Angular CLI ‚â•15
ng serve            # Servidor ha d&#39;arrencar sense errors</code></pre>
  </div>
</div>


  <p><strong>Punt d'autocomprovaci√≥:</strong> El projecte ha d'arrencar i mostrar almenys una llista amb <code>*ngFor</code> funcional.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.2. Marc conceptual</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.2.1. Qu√® √©s la virtualitzaci√≥ de llistes</h4>
  <p>La virtualitzaci√≥ √©s una t√®cnica que renderitza nom√©s els elements visibles al viewport (√†rea visible de la pantalla), creant la il¬∑lusi√≥ d'una llista completa sense carregar tots els elements al DOM simult√†niament.</p>

  <h4>2.2.2. Problema sense virtualitzaci√≥</h4>
  <p><strong>Situaci√≥ abans:</strong></p>
  <p>Imagineu una aplicaci√≥ de cat√†leg amb 5.000 productes. Sense virtualitzaci√≥, Angular crea 5.000 nodes al DOM:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Component amb llista gran (incorrecte: mal rendiment)
export class ProductListComponent {
  products: Product[] = [];  // 5.000 elements
  ngOnInit() {
    this.loadProducts();  // Carrega tots els productes
  }
}</code></pre>
  </div>
</div>



  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;product-grid&quot;&gt;
  &lt;app-product-card
    *ngFor=&quot;let product of products&quot;
    [product]=&quot;product&quot;&gt;
  &lt;/app-product-card&gt;
&lt;/div&gt;
&lt;!-- Crea 5.000 nodes al DOM, encara que nom√©s en vegis 20 --&gt;</code></pre>
  </div>
</div>


  <p><strong>Problemes que genera:</strong></p>

  <p><strong>1. Temps d'inicialitzaci√≥ lent</strong></p>
  <p>Quan la p√†gina carrega, Angular crea els 5.000 components al DOM. Amb 500ms per cada 100 components, aix√≤ significa 25 segons de c√†rrega inicial completament innecess√†ria.</p>

  <p><strong>2. Consum excessiu de mem√≤ria</strong></p>
  <p>Cada node del DOM ocupa mem√≤ria. 5.000 nodes amb imatges, estils i esdeveniments poden consumir 200-500 MB de RAM, provocant que dispositius antics vagin lents o es pengin.</p>

  <p><strong>3. Scroll pesant i poc fluid</strong></p>
  <p>Quan l'usuari fa scroll, el navegador ha de recalcular posicions i estils de milers de nodes, resultant en un scroll a 10-15 FPS (molt per sota dels 60 FPS desitjables).</p>

  <p><strong>4. Detecci√≥ de canvis costosa</strong></p>
  <p>Cada cop que Angular detecta canvis, comprova tots els 5.000 components. Amb estrat√®gia per defecte, aix√≤ pot suposar comprovacions cada pocs mil¬∑lisegons.</p>

  <p><strong>5. Impacte en dispositius m√≤bils</strong></p>
  <p>Tel√®fons i tauletes tenen menys pot√®ncia i mem√≤ria. Una llista gran pot fer-los completament inutilitzables, especialment amb dades complexes.</p>

  <h4>2.2.3. Soluci√≥ amb virtualitzaci√≥</h4>
  <p><strong>Situaci√≥ despr√©s:</strong></p>
  <p>Amb virtualitzaci√≥, nom√©s es renderitzen 20-30 elements visibles, independentment de la mida total de la llista:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Component amb llista virtualitzada (correcte: bon rendiment)
export class ProductListVirtualComponent {
  products: Product[] = [];  // 5.000 elements (array complet)
  itemHeight = 120;          // Al√ßada de cada element en p√≠xels
  ngOnInit() {
    this.loadProducts();  // Carrega tots els productes
  }
}</code></pre>
  </div>
</div>



  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;cdk-virtual-scroll-viewport
  [itemSize]=&quot;itemHeight&quot;
  class=&quot;viewport&quot;&gt;
  &lt;app-product-card
    *cdkVirtualFor=&quot;let product of products&quot;
    [product]=&quot;product&quot;&gt;
  &lt;/app-product-card&gt;
&lt;/cdk-virtual-scroll-viewport&gt;
&lt;!-- Nom√©s renderitza 20-30 nodes, independentment del total --&gt;</code></pre>
  </div>
</div>


  <p><strong>Beneficis immediats:</strong></p>
  <ol>
    <li><strong>C√†rrega inicial r√†pida:</strong> Nom√©s es creen 20-30 nodes inicials (&lt; 1 segon)</li>
    <li><strong>Mem√≤ria optimitzada:</strong> Consum de nom√©s 10-20 MB, 95% de reducci√≥</li>
    <li><strong>Scroll fluid:</strong> 60 FPS constants amb reciclatge de nodes</li>
    <li><strong>Detecci√≥ eficient:</strong> Nom√©s comprova els elements visibles</li>
    <li><strong>Funciona en m√≤bils:</strong> Experi√®ncia fluida fins i tot en dispositius antics</li>
  </ol>

  <h4>2.2.4. Context dins del framework</h4>
  <p>Angular ofereix el <strong>Component Development Kit (CDK)</strong> amb <code>ScrollingModule</code>, que proporciona:</p>
  <ul>
    <li><strong>VirtualScrollViewport:</strong> Contenidor amb scroll virtual</li>
    <li><strong>cdkVirtualFor:</strong> Directiva optimitzada per iterar nom√©s elements visibles</li>
    <li><strong>Estrat√®gies d'al√ßada:</strong> Fixa i din√†mica segons necessitats</li>
    <li><strong>Reciclatge de nodes:</strong> Reutilitza nodes DOM en lloc de crear-ne de nous</li>
  </ul>

  <h4>2.2.5. Integraci√≥ amb conceptes anteriors</h4>
  <p><strong>Relaci√≥ amb components (Unitat 2):</strong></p>
  <ul>
    <li>Els components de llista es creen i destrueixen din√†micament segons la posici√≥ del scroll</li>
    <li>Cal dissenyar components lleugers i r√†pids d'inicialitzar</li>
  </ul>

  <p><strong>Relaci√≥ amb serveis (Unitat 3):</strong></p>
  <ul>
    <li>Les dades provinents d'APIs es gestionen igual, per√≤ el renderitzat √©s molt m√©s eficient</li>
    <li>La virtualitzaci√≥ nom√©s afecta la presentaci√≥, no la l√≤gica de negoci</li>
  </ul>

  <p><strong>Relaci√≥ amb detecci√≥ de canvis (Lectura 4.3.1):</strong></p>
  <ul>
    <li>Combinar OnPush amb virtualitzaci√≥ ofereix millores exponencials</li>
    <li>Menys nodes + menys comprovacions = aplicaci√≥ extremadament r√†pida</li>
  </ul>

  <h4>2.2.6. Casos d'√∫s reals</h4>
  <p><strong>1. Cat√†legs de comer√ß electr√≤nic</strong></p>
  <p>Amazon renderitza milers de productes amb virtualitzaci√≥. Nom√©s els 15-20 productes visibles estan realment al DOM.</p>

  <p><strong>2. Aplicacions de missatgeria</strong></p>
  <p>WhatsApp Web virtualitza converses i missatges. Amb milers de missatges, nom√©s els visibles estan renderitzats.</p>

  <p><strong>3. Taules de dades grans</strong></p>
  <p>Google Sheets virtualitza files i columnes. Pots tenir 100.000 files, per√≤ nom√©s veus 30 a la vegada.</p>

  <p><strong>4. Feeds de xarxes socials</strong></p>
  <p>Twitter i Instagram virtualitzen publicacions. El scroll infinit carrega contingut din√†mic per√≤ nom√©s renderitza el visible.</p>

  <h4>2.2.7. Comparativa t√®cnica: llista normal vs virtualitzada</h4>
  <table>
    <thead>
      <tr>
        <th>Aspecte</th>
        <th>Llista normal (*ngFor)</th>
        <th>Llista virtualitzada (CDK)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Nodes al DOM</strong></td>
        <td>Tots (5.000)</td>
        <td>Nom√©s visibles (20-30)</td>
      </tr>
      <tr>
        <td><strong>Temps c√†rrega</strong></td>
        <td>25s per 5.000 elements</td>
        <td>&lt; 1s independent del total</td>
      </tr>
      <tr>
        <td><strong>Mem√≤ria</strong></td>
        <td>200-500 MB</td>
        <td>10-20 MB</td>
      </tr>
      <tr>
        <td><strong>FPS del scroll</strong></td>
        <td>10-15 FPS</td>
        <td>60 FPS</td>
      </tr>
      <tr>
        <td><strong>Detecci√≥ canvis</strong></td>
        <td>5.000 comprovacions</td>
        <td>20-30 comprovacions</td>
      </tr>
      <tr>
        <td><strong>Dispositius m√≤bils</strong></td>
        <td>Inutilitzable</td>
        <td>Fluid</td>
      </tr>
      <tr>
        <td><strong>L√≠mit pr√†ctic</strong></td>
        <td>~500 elements</td>
        <td>Milers/milions</td>
      </tr>
    </tbody>
  </table>

  <h4>2.2.8. Comparativa quantitativa de rendiment</h4>
  <table>
    <thead>
      <tr>
        <th>M√®trica</th>
        <th>100 elements</th>
        <th>1.000 elements</th>
        <th>5.000 elements</th>
        <th>10.000 elements</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Normal: nodes DOM</strong></td>
        <td>100</td>
        <td>1.000</td>
        <td>5.000</td>
        <td>10.000</td>
      </tr>
      <tr>
        <td><strong>Virtual: nodes DOM</strong></td>
        <td>20</td>
        <td>25</td>
        <td>30</td>
        <td>30</td>
      </tr>
      <tr>
        <td><strong>Normal: temps init</strong></td>
        <td>0.5s</td>
        <td>4s</td>
        <td>25s</td>
        <td>60s</td>
      </tr>
      <tr>
        <td><strong>Virtual: temps init</strong></td>
        <td>0.3s</td>
        <td>0.4s</td>
        <td>0.5s</td>
        <td>0.5s</td>
      </tr>
      <tr>
        <td><strong>Normal: mem√≤ria</strong></td>
        <td>20 MB</td>
        <td>100 MB</td>
        <td>500 MB</td>
        <td>1 GB</td>
      </tr>
      <tr>
        <td><strong>Virtual: mem√≤ria</strong></td>
        <td>8 MB</td>
        <td>10 MB</td>
        <td>15 MB</td>
        <td>20 MB</td>
      </tr>
      <tr>
        <td><strong>Reducci√≥ mem√≤ria</strong></td>
        <td>60%</td>
        <td>90%</td>
        <td>97%</td>
        <td>98%</td>
      </tr>
    </tbody>
  </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.3. Model mental</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.3.1. Esquema conceptual</h4>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">LLISTA TRADICIONAL (5.000 elements)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [Element 1] ‚óÑ‚îÄ Node al DOM               ‚îÇ
‚îÇ [Element 2] ‚óÑ‚îÄ Node al DOM               ‚îÇ
‚îÇ [Element 3] ‚óÑ‚îÄ Node al DOM               ‚îÇ
‚îÇ ...                                       ‚îÇ
‚îÇ [Element 4.998] ‚óÑ‚îÄ Node al DOM           ‚îÇ
‚îÇ [Element 4.999] ‚óÑ‚îÄ Node al DOM           ‚îÇ
‚îÇ [Element 5.000] ‚óÑ‚îÄ Node al DOM           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Tots els 5.000 nodes estan sempre al DOM
Consum: 500 MB mem√≤ria, 25s c√†rrega


LLISTA VIRTUALITZADA (5.000 elements)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                           ‚îÇ
‚îÇ  [Element 1] ‚óÑ‚îÄ No renderitzat           ‚îÇ
‚îÇ  [Element 2] ‚óÑ‚îÄ No renderitzat           ‚îÇ
‚îÇ  ...                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê            ‚îÇ
‚îÇ  ‚îÇ VIEWPORT (√†rea visible)  ‚îÇ            ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§            ‚îÇ
‚îÇ  ‚îÇ [Element 45] ‚óÑ‚îÄ DOM      ‚îÇ ‚óÑ‚îÄ Visible ‚îÇ
‚îÇ  ‚îÇ [Element 46] ‚óÑ‚îÄ DOM      ‚îÇ ‚óÑ‚îÄ Visible ‚îÇ
‚îÇ  ‚îÇ [Element 47] ‚óÑ‚îÄ DOM      ‚îÇ ‚óÑ‚îÄ Visible ‚îÇ
‚îÇ  ‚îÇ ...                      ‚îÇ            ‚îÇ
‚îÇ  ‚îÇ [Element 65] ‚óÑ‚îÄ DOM      ‚îÇ ‚óÑ‚îÄ Visible ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
‚îÇ  [Element 66] ‚óÑ‚îÄ No renderitzat          ‚îÇ
‚îÇ  ...                                      ‚îÇ
‚îÇ  [Element 5.000] ‚óÑ‚îÄ No renderitzat       ‚îÇ
‚îÇ                                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
Nom√©s 20 nodes al DOM (els visibles)
Consum: 15 MB mem√≤ria, 0.5s c√†rrega</code></pre>
  </div>
</div>


  <h4>2.3.2. Flux de funcionament</h4>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">SCROLL SENSE VIRTUALITZACI√ì
Usuario fa scroll ‚Üì
  ‚Üí Navegador recalcula 5.000 posicions
  ‚Üí Angular comprova 5.000 components
  ‚Üí Pantalla actualitza (10-15 FPS)
  ‚Üí Experi√®ncia lenta i pesant


SCROLL AMB VIRTUALITZACI√ì
Usuario fa scroll ‚Üì
  ‚Üí CDK detecta nou rang visible (ex: 55-75)
  ‚Üí Recicla nodes DOM existents
  ‚Üí Angular nom√©s comprova 20 components
  ‚Üí Pantalla actualitza (60 FPS)
  ‚Üí Experi√®ncia fluida</code></pre>
  </div>
</div>


  <h4>2.3.3. Analogia pr√†ctica</h4>
  <p>Penseu en la virtualitzaci√≥ com <strong>mirar per una finestra estreta a una gran galeria d'art</strong>:</p>
  <ul>
    <li><strong>Galeria completa:</strong> Teniu 5.000 quadres (elements de la llista)</li>
    <li><strong>Finestra:</strong> Nom√©s podeu veure 20 quadres a la vegada (viewport)</li>
    <li><strong>Sense virtualitzaci√≥:</strong> Porteu els 5.000 quadres a casa (tots al DOM)</li>
    <li><strong>Amb virtualitzaci√≥:</strong> Nom√©s porteu els 20 que esteu mirant (nom√©s visibles al DOM)</li>
    <li><strong>Quan us moveu:</strong> Canvieu els 20 quadres per altres 20 nous (reciclatge de nodes)</li>
  </ul>

  <p><strong>Avantatge:</strong> Mai necessiteu tenir m√©s de 20 quadres a casa, independentment de quants hi hagi a la galeria.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.4. Problema de llistes grans: milers d'elements al DOM</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.4.1. El problema del DOM sobrecarregat</h4>
  <p>Quan renderitzeu una llista gran amb <code>*ngFor</code>, cada element crea nodes al DOM. El DOM no √©s infinit ‚Äî t√© costos:</p>


  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div *ngFor=&quot;let item of items&quot; class=&quot;card&quot;&gt;
  &lt;img [src]=&quot;item.image&quot;&gt;          &lt;!-- Node IMG --&gt;
  &lt;h3&gt;{{ item.title }}&lt;/h3&gt;          &lt;!-- Node H3 --&gt;
  &lt;p&gt;{{ item.description }}&lt;/p&gt;      &lt;!-- Node P --&gt;
  &lt;button (click)=&quot;select(item)&quot;&gt;   &lt;!-- Node BUTTON --&gt;
    Seleccionar
  &lt;/button&gt;
&lt;/div&gt;
&lt;!-- Si items.length === 5.000 ‚Üí 20.000 nodes creats! --&gt;</code></pre>
  </div>
</div>


  <h4>2.4.2. S√≠mptomes d'una llista amb problemes</h4>
  <p><strong>C√†rrega inicial lenta:</strong></p>
  <ul>
    <li>La p√†gina triga 10-30 segons a apar√®ixer</li>
    <li>L'usuari veu una pantalla en blanc</li>
    <li>Chrome mostra "La p√†gina no respon"</li>
  </ul>

  <p><strong>Scroll pesant:</strong></p>
  <ul>
    <li>El scroll es mou a salts (&lt; 15 FPS)</li>
    <li>Hi ha retard entre l'acci√≥ i el moviment</li>
    <li>En m√≤bils, el scroll simplement no funciona</li>
  </ul>

  <p><strong>Consum excessiu de mem√≤ria:</strong></p>
  <ul>
    <li>Devtools mostra 300-500 MB nom√©s per la llista</li>
    <li>Dispositius antics es pengen</li>
    <li>El navegador mata la pestanya (Out of memory)</li>
  </ul>

  <h4>2.4.3. Exemples pr√†ctics de llistes problem√†tiques</h4>
  <table>
    <thead>
      <tr>
        <th>Tipus d'aplicaci√≥</th>
        <th>Elements t√≠pics</th>
        <th>Problema sense virtualitzaci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Cat√†leg productes</td>
        <td>2.000-10.000</td>
        <td>C√†rrega inicial de 15-60s</td>
      </tr>
      <tr>
        <td>Historial transaccions</td>
        <td>5.000-50.000</td>
        <td>Scroll inutilitzable</td>
      </tr>
      <tr>
        <td>Feed xarxes socials</td>
        <td>Infinit</td>
        <td>Mem√≤ria creix fins crash</td>
      </tr>
      <tr>
        <td>Cerca resultats Google</td>
        <td>100-1.000</td>
        <td>Acceptable per√≤ millorable</td>
      </tr>
    </tbody>
  </table>

  <h4>2.4.4. Exemple visual del problema</h4>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  selector: &#39;app-slow-list&#39;,
  template: `
    &lt;div class=&quot;container&quot;&gt;
      &lt;h2&gt;{{ items.length }} productes&lt;/h2&gt;
      &lt;div class=&quot;list&quot;&gt;
        &lt;div *ngFor=&quot;let item of items&quot; class=&quot;card&quot;&gt;
          &lt;img [src]=&quot;item.image&quot; alt=&quot;{{ item.name }}&quot;&gt;
          &lt;h3&gt;{{ item.name }}&lt;/h3&gt;
          &lt;p&gt;{{ item.price | currency }}&lt;/p&gt;
          &lt;button (click)=&quot;addToCart(item)&quot;&gt;Afegir&lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  `
})
export class SlowListComponent implements OnInit {
  items: Product[] = [];
  ngOnInit() {
    // Simula c√†rrega de 5.000 productes
    this.items = Array.from({length: 5000}, (_, i) =&gt; ({
      id: i,
      name: `Producte ${i}`,
      price: Math.random() * 100,
      image: `https://via.placeholder.com/150`
    }));
  }
  addToCart(item: Product) {
    console.log(&#39;Afegit:&#39;, item.name);
  }
}</code></pre>
  </div>
</div>


  <p><strong>Resultat:</strong></p>
  <ul>
    <li><strong>Temps c√†rrega inicial:</strong> 25-30 segons</li>
    <li><strong>Nodes al DOM:</strong> 20.000 (4 per element √ó 5.000)</li>
    <li><strong>Mem√≤ria:</strong> 450 MB</li>
    <li><strong>Scroll FPS:</strong> 8-12 FPS</li>
  </ul>

  <h4>2.4.5. Quan la virtualitzaci√≥ √©s necess√†ria</h4>
  <table>
    <thead>
      <tr>
        <th>Elements</th>
        <th>Necessitat virtualitzaci√≥</th>
        <th>Ra√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>&lt; 100</td>
        <td>No necess√†ria</td>
        <td>Rendiment acceptable</td>
      </tr>
      <tr>
        <td>100-500</td>
        <td>Recomanable</td>
        <td>Millora experi√®ncia m√≤bil</td>
      </tr>
      <tr>
        <td>500-2.000</td>
        <td>Molt recomanable</td>
        <td>Difer√®ncia notable</td>
      </tr>
      <tr>
        <td>&gt; 2.000</td>
        <td><strong>Imprescindible</strong></td>
        <td>Inutilitzable sense ella</td>
      </tr>
    </tbody>
  </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.5. Qu√® √©s la virtualitzaci√≥: nom√©s renderitzar elements visibles</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.5.1. Concepte fonamental</h4>
  <p>La virtualitzaci√≥ √©s una t√®cnica que mant√© nom√©s els elements visibles al DOM. La resta d'elements existeixen a la mem√≤ria (array de dades) per√≤ no estan renderitzats.</p>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">ARRAY DE DADES (sempre complet)
[0, 1, 2, ..., 4998, 4999]  ‚Üê 5.000 elements en mem√≤ria
NODES AL DOM (nom√©s visibles)
[Element 45, Element 46, ..., Element 65]  ‚Üê 20 nodes al DOM</code></pre>
  </div>
</div>


  <h4>2.5.2. Com funciona internament</h4>
  <p><strong>1. Viewport amb scroll</strong></p>
  <p>El component crea un contenidor amb scroll que simula l'al√ßada total de la llista:</p>


  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div style=&quot;height: 600000px&quot;&gt;  &lt;!-- 5.000 √ó 120px = 600.000px --&gt;
  &lt;div style=&quot;transform: translateY(5400px)&quot;&gt;  &lt;!-- Posici√≥ actual --&gt;
    &lt;!-- Nom√©s 20 elements reals --&gt;
    &lt;div&gt;Element 45&lt;/div&gt;
    &lt;div&gt;Element 46&lt;/div&gt;
    ...
    &lt;div&gt;Element 65&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p><strong>2. C√†lcul de rang visible</strong></p>
  <p>Quan l'usuari fa scroll, el sistema calcula quins elements s√≥n visibles:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// C√†lcul intern del CDK (simplificat)
const scrollTop = viewport.scrollTop;        // Ex: 5400px
const viewportHeight = viewport.clientHeight; // Ex: 600px
const startIndex = Math.floor(scrollTop / itemHeight);  // 5400 / 120 = 45
const endIndex = Math.ceil((scrollTop + viewportHeight) / itemHeight);  // 50
// Rang visible: elements 45-50</code></pre>
  </div>
</div>


  <p><strong>3. Reciclatge de nodes</strong></p>
  <p>En lloc de destruir i crear nodes, els reutilitza canviant nom√©s les dades:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Pseudo-codi del proc√©s de reciclatge
function updateVisibleItems(newRange: [start, end]) {
  // Nodes existents al DOM
  const existingNodes = getDOMNodes();  // 20 nodes
  // Actualitza cada node amb dades noves
  existingNodes.forEach((node, i) =&gt; {
    const dataIndex = newRange[0] + i;
    node.updateData(items[dataIndex]);  // Nom√©s canvia dades
  });
  // NO destrueix ni crea nodes, nom√©s actualitza contingut
}</code></pre>
  </div>
</div>


  <h4>2.5.3. Avantatges de la virtualitzaci√≥</h4>
  <table>
    <thead>
      <tr>
        <th>Aspecte</th>
        <th>Benefici</th>
        <th>Mesura quantitativa</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Nodes DOM</strong></td>
        <td>Sempre constant</td>
        <td>20-30 (vs 5.000)</td>
      </tr>
      <tr>
        <td><strong>Mem√≤ria</strong></td>
        <td>95% menys</td>
        <td>15 MB (vs 500 MB)</td>
      </tr>
      <tr>
        <td><strong>Temps c√†rrega</strong></td>
        <td>98% m√©s r√†pid</td>
        <td>0.5s (vs 25s)</td>
      </tr>
      <tr>
        <td><strong>FPS scroll</strong></td>
        <td>60 FPS constant</td>
        <td>Fluid (vs 10 FPS)</td>
      </tr>
      <tr>
        <td><strong>Dispositius m√≤bils</strong></td>
        <td>Funciona perfecte</td>
        <td>Experi√®ncia nativa</td>
      </tr>
    </tbody>
  </table>

  <h4>2.5.4. Comparativa visual: normal vs virtualitzada</h4>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">LLISTA NORMAL - TOTS ELS ELEMENTS AL DOM
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë [El 0]    [El 1]    [El 2]    [El 3]      ‚ïë ‚óÑ‚îÄ Tots al DOM
‚ïë [El 4]    [El 5]    [El 6]    [El 7]      ‚ïë ‚óÑ‚îÄ Sempre
‚ïë ...       ...       ...       ...         ‚ïë
‚ïë [El 4996] [El 4997] [El 4998] [El 4999]   ‚ïë ‚óÑ‚îÄ Sempre
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
Mem√≤ria: 500 MB | C√†rrega: 25s | FPS: 10


LLISTA VIRTUALITZADA - NOM√âS VISIBLES
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                            ‚ïë
‚ïë  [Espai virtual per elements 0-44]        ‚ïë ‚óÑ‚îÄ No renderitzats
‚ïë  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚ïë
‚ïë  ‚îÇ VIEWPORT (√†rea visible)        ‚îÇ       ‚ïë
‚ïë  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚ïë
‚ïë  ‚îÇ [El 45]  [El 46]  [El 47]      ‚îÇ       ‚ïë ‚óÑ‚îÄ Al DOM
‚ïë  ‚îÇ [El 48]  [El 49]  [El 50]      ‚îÇ       ‚ïë ‚óÑ‚îÄ Al DOM
‚ïë  ‚îÇ ...      ...      ...          ‚îÇ       ‚ïë
‚ïë  ‚îÇ [El 63]  [El 64]  [El 65]      ‚îÇ       ‚ïë ‚óÑ‚îÄ Al DOM
‚ïë  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚ïë
‚ïë  [Espai virtual per elements 66-4999]     ‚ïë ‚óÑ‚îÄ No renderitzats
‚ïë                                            ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
Mem√≤ria: 15 MB | C√†rrega: 0.5s | FPS: 60</code></pre>
  </div>
</div>


  <h4>2.5.5. Quan NO cal virtualitzar</h4>
  <table>
    <thead>
      <tr>
        <th>Situaci√≥</th>
        <th>Ra√≥</th>
        <th>Alternativa</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>&lt; 100 elements</td>
        <td>Rendiment acceptable</td>
        <td><code>*ngFor</code> normal</td>
      </tr>
      <tr>
        <td>Elements complexos</td>
        <td>Al√ßada molt variable</td>
        <td>Paginaci√≥</td>
      </tr>
      <tr>
        <td>Necessites SEO</td>
        <td>Contingut no indexable</td>
        <td>Server-side rendering</td>
      </tr>
      <tr>
        <td>Llista est√†tica</td>
        <td>No es modifica</td>
        <td><code>*ngFor</code> amb trackBy</td>
      </tr>
    </tbody>
  </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.6. Llibreria de virtualitzaci√≥: importar i configurar</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.6.1. Importar Angular CDK</h4>
  <p>El Component Development Kit (CDK) d'Angular proporciona el <code>ScrollingModule</code> amb virtualitzaci√≥ integrada.</p>

  <p><strong>Instal¬∑laci√≥:</strong></p>

  
  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng add @angular/cdk</code></pre>
  </div>
</div>


  <p>Aquesta comanda:</p>
  <ol>
    <li>Instal¬∑la el paquet <code>@angular/cdk</code></li>
    <li>Actualitza <code>package.json</code></li>
    <li>Configura estils globals si cal</li>
  </ol>

  <p><strong>Importaci√≥ al m√≤dul:</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// app.module.ts o component.module.ts
import { NgModule } from &#39;@angular/core&#39;;
import { BrowserModule } from &#39;@angular/platform-browser&#39;;
import { ScrollingModule } from &#39;@angular/cdk/scrolling&#39;;  // Importar CDK

import { AppComponent } from &#39;./app.component&#39;;
import { ProductListVirtualComponent } from &#39;./components/product-list-virtual/product-list-virtual.component&#39;;

@NgModule({
  declarations: [
    AppComponent,
    ProductListVirtualComponent
  ],
  imports: [
    BrowserModule,
    ScrollingModule  // Afegir al imports
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }</code></pre>
  </div>
</div>


  <h4>2.6.2. Components principals del CDK Scrolling</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Component/Directiva</th>
        <th>Funci√≥</th>
        <th>√ös obligatori</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>cdk-virtual-scroll-viewport</code></td>
        <td>Contenidor amb scroll virtual</td>
        <td>S√≠</td>
      </tr>
      <tr>
        <td><code>*cdkVirtualFor</code></td>
        <td>Directiva per iterar elements</td>
        <td>S√≠</td>
      </tr>
      <tr>
        <td><code>itemSize</code></td>
        <td>Al√ßada de cada element</td>
        <td>S√≠ (al√ßada fixa)</td>
      </tr>
      <tr>
        <td><code>[minBufferPx]</code></td>
        <td>P√≠xels buffer abans visible</td>
        <td>Opcional</td>
      </tr>
      <tr>
        <td><code>[maxBufferPx]</code></td>
        <td>P√≠xels buffer despr√©s visible</td>
        <td>Opcional</td>
      </tr>
    </tbody>
  </table>

  <h4>2.6.3. Configuraci√≥ b√†sica del viewport</h4>
  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// product-list-virtual.component.ts
import { Component, OnInit } from &#39;@angular/core&#39;;
import { Product } from &#39;../../models/product.model&#39;;
import { ProductService } from &#39;../../services/product.service&#39;;

@Component({
  selector: &#39;app-product-list-virtual&#39;,
  templateUrl: &#39;./product-list-virtual.component.html&#39;,
  styleUrls: [&#39;./product-list-virtual.component.css&#39;]
})
export class ProductListVirtualComponent implements OnInit {
  products: Product[] = [];
  itemHeight = 120;  // Al√ßada de cada producte en p√≠xels

  constructor(private productService: ProductService) {}

  ngOnInit(): void {
    this.loadProducts();
  }

  loadProducts(): void {
    this.productService.getProducts().subscribe({
      next: (data) =&gt; {
        this.products = data;
        console.log(`Carregats ${this.products.length} productes`);
      },
      error: (err) =&gt; console.error(&#39;Error carregant productes:&#39;, err)
    });
  }

  trackByProductId(index: number, product: Product): number {
    return product.id;
  }
}</code></pre>
  </div>
</div>


  <h4>2.6.4. Plantilla amb viewport virtual</h4>
  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;container&quot;&gt;
  &lt;h2&gt;Cat√†leg de productes ()&lt;/h2&gt;

  &lt;cdk-virtual-scroll-viewport
    [itemSize]=&quot;itemHeight&quot;
    class=&quot;viewport&quot;&gt;

    &lt;div *cdkVirtualFor=&quot;let product of products; trackBy: trackByProductId&quot;
         class=&quot;product-card&quot;&gt;
      &lt;img [src]=&quot;product.image&quot; [alt]=&quot;product.name&quot;&gt;
      &lt;h3&gt;&lt;/h3&gt;
      &lt;p class=&quot;price&quot;&gt;&lt;/p&gt;
      &lt;p class=&quot;description&quot;&gt;&lt;/p&gt;
      &lt;button (click)=&quot;addToCart(product)&quot;&gt;
        Afegir al carret√≥
      &lt;/button&gt;
    &lt;/div&gt;

  &lt;/cdk-virtual-scroll-viewport&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <h4>2.6.5. Estils del viewport</h4>
  
  <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">/* product-list-virtual.component.css */
.viewport {
  height: 600px;           /* Al√ßada visible del viewport */
  width: 100%;
  border: 1px solid #ddd;
  overflow-y: auto;        /* Scroll vertical */
}

.product-card {
  height: 120px;           /* Ha de coincidir amb itemHeight */
  padding: 10px;
  border-bottom: 1px solid #eee;
  display: flex;
  gap: 15px;
  align-items: center;
}

.product-card img {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 8px;
}

.product-card h3 {
  margin: 0;
  font-size: 16px;
}

.product-card .price {
  font-size: 18px;
  font-weight: bold;
  color: #2196F3;
}

.product-card .description {
  font-size: 14px;
  color: #666;
  flex: 1;
}</code></pre>
  </div>
</div>


  <h4>2.6.6. Opcions de configuraci√≥ avan√ßada</h4>
  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;cdk-virtual-scroll-viewport
  [itemSize]=&quot;itemHeight&quot;
  [minBufferPx]=&quot;400&quot;
  [maxBufferPx]=&quot;800&quot;
  class=&quot;viewport&quot;&gt;
&lt;/cdk-virtual-scroll-viewport&gt;</code></pre>
  </div>
</div>


  <p><strong>Explicaci√≥ dels buffers:</strong></p>
  <ul>
    <li><strong>minBufferPx:</strong> P√≠xels m√≠nims renderitzats abans i despr√©s de la zona visible (evita blanc temporal)</li>
    <li><strong>maxBufferPx:</strong> P√≠xels m√†xims renderitzats. Quan se supera, es reciclen nodes</li>
  </ul>

  <p><strong>Recomanaci√≥:</strong> Valors per defecte (200px/400px) funcionen b√© en el 95% dels casos.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.7. Implementar llista virtual: sintaxi i opcions</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.7.1. Sintaxi completa de cdkVirtualFor</h4>
  <p>La directiva <code>*cdkVirtualFor</code> √©s similar a <code>*ngFor</code> per√≤ optimitzada per virtualitzaci√≥:</p>

  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div *cdkVirtualFor=&quot;let item of items;
                     let i = index;
                     let first = first;
                     let last = last;
                     trackBy: trackByFn&quot;&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <h4>2.7.2. Variables locals disponibles</h4>
  
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Variable</th>
        <th>Tipus</th>
        <th>Descripci√≥</th>
        <th>Exemple d'√∫s</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>item</code></td>
        <td>T</td>
        <td>Element actual</td>
        <td><code>{{ item.name }}</code></td>
      </tr>
      <tr>
        <td><code>index</code></td>
        <td>number</td>
        <td>√çndex de l'element</td>
        <td><code>#{{ index + 1 }}</code></td>
      </tr>
      <tr>
        <td><code>first</code></td>
        <td>boolean</td>
        <td>Primer element</td>
        <td>Aplicar classe especial</td>
      </tr>
      <tr>
        <td><code>last</code></td>
        <td>boolean</td>
        <td>√öltim element</td>
        <td>Aplicar classe especial</td>
      </tr>
      <tr>
        <td><code>even</code></td>
        <td>boolean</td>
        <td>√çndex parell</td>
        <td>Alternar colors files</td>
      </tr>
      <tr>
        <td><code>odd</code></td>
        <td>boolean</td>
        <td>√çndex senar</td>
        <td>Alternar colors files</td>
      </tr>
    </tbody>
  </table>
  

  <h4>2.7.3. Exemple complet amb totes les opcions</h4>
  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// advanced-virtual-list.component.ts
import { Component, OnInit } from &#39;@angular/core&#39;;
import { ProductService } from &#39;../../services/product.service&#39;;
import { Product } from &#39;../../models/product.model&#39;;

@Component({
  selector: &#39;app-advanced-virtual-list&#39;,
  templateUrl: &#39;./advanced-virtual-list.component.html&#39;,
  styleUrls: [&#39;./advanced-virtual-list.component.css&#39;]
})
export class AdvancedVirtualListComponent implements OnInit {
  products: Product[] = [];
  itemHeight = 150;

  constructor(private productService: ProductService) {}

  ngOnInit(): void {
    this.loadProducts();
  }

  loadProducts(): void {
    // Simula c√†rrega de 10.000 productes
    this.products = Array.from({length: 10000}, (_, i) =&gt; ({
      id: i + 1,
      name: `Producte ${i + 1}`,
      price: Math.random() * 500,
      category: [&#39;Electr√≤nica&#39;, &#39;Roba&#39;, &#39;Esports&#39;, &#39;Llar&#39;][i % 4],
      stock: Math.floor(Math.random() * 100),
      image: `https://via.placeholder.com/120?text=P${i + 1}`
    }));
  }

  trackByProductId(index: number, product: Product): number {
    return product.id;  // IMPORTANT: usar ID √∫nic
  }

  addToCart(product: Product): void {
    console.log(&#39;Afegit al carret√≥:&#39;, product.name);
  }

  toggleFavorite(product: Product): void {
    console.log(&#39;Toggle favorit:&#39;, product.name);
  }
}</code></pre>
  </div>
</div>


  <h4>2.7.4. Plantilla amb funcionalitats avan√ßades</h4>
  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;container&quot;&gt;
  &lt;header class=&quot;list-header&quot;&gt;
    &lt;h2&gt;Cat√†leg complet&lt;/h2&gt;
    &lt;p class=&quot;stats&quot;&gt;{{ products.length }} productes disponibles&lt;/p&gt;
  &lt;/header&gt;

  &lt;cdk-virtual-scroll-viewport
    [itemSize]=&quot;itemHeight&quot;
    [minBufferPx]=&quot;300&quot;
    [maxBufferPx]=&quot;600&quot;
    class=&quot;viewport&quot;&gt;

    &lt;div *cdkVirtualFor=&quot;let product of products;
                         let i = index;
                         let first = first;
                         let last = last;
                         let even = even;
                         trackBy: trackByProductId&quot;
         class=&quot;product-card&quot;
         [class.first]=&quot;first&quot;
         [class.last]=&quot;last&quot;
         [class.even]=&quot;even&quot;&gt;

      &lt;span class=&quot;badge&quot;&gt;{{ i + 1 }}&lt;/span&gt;

      &lt;img [src]=&quot;product.image&quot; [alt]=&quot;product.name&quot;&gt;

      &lt;div class=&quot;info&quot;&gt;
        &lt;h3&gt;{{ product.name }}&lt;/h3&gt;
        &lt;p class=&quot;category&quot;&gt;{{ product.category }}&lt;/p&gt;
        &lt;p class=&quot;price&quot;&gt;{{ product.price | currency:&#39;EUR&#39; }}&lt;/p&gt;
        &lt;p class=&quot;stock&quot; [class.low-stock]=&quot;product.stock &lt; 10&quot;&gt;
          Stock: {{ product.stock }} unitats
        &lt;/p&gt;
      &lt;/div&gt;

      &lt;div class=&quot;actions&quot;&gt;
        &lt;button (click)=&quot;toggleFavorite(product)&quot; class=&quot;btn-icon&quot;&gt;
          Favorit
        &lt;/button&gt;
        &lt;button (click)=&quot;addToCart(product)&quot; class=&quot;btn-primary&quot;&gt;
          Afegir
        &lt;/button&gt;
      &lt;/div&gt;

      &lt;span *ngIf=&quot;first&quot; class=&quot;label&quot;&gt;PRIMER&lt;/span&gt;
      &lt;span *ngIf=&quot;last&quot; class=&quot;label&quot;&gt;√öLTIM&lt;/span&gt;
    &lt;/div&gt;

  &lt;/cdk-virtual-scroll-viewport&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <h4>2.7.5. Estils avan√ßats</h4>
  
  <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">/* advanced-virtual-list.component.css */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.list-header {
  margin-bottom: 20px;
}

.stats {
  color: #666;
  font-size: 14px;
}

.viewport {
  height: 700px;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  overflow-y: auto;
}

.product-card {
  height: 150px;
  padding: 15px;
  display: flex;
  gap: 20px;
  align-items: center;
  border-bottom: 1px solid #f0f0f0;
  position: relative;
  transition: background-color 0.2s;
}

.product-card:hover {
  background-color: #f9f9f9;
}

.product-card.even {
  background-color: #fafafa;
}

.product-card.first {
  border-top: 3px solid #4CAF50;
}

.product-card.last {
  border-bottom: 3px solid #2196F3;
}

.badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: #9E9E9E;
  color: white;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: bold;
}

.product-card img {
  width: 120px;
  height: 120px;
  object-fit: cover;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.info {
  flex: 1;
}

.info h3 {
  margin: 0 0 8px 0;
  font-size: 18px;
  color: #333;
}

.category {
  font-size: 13px;
  color: #888;
  margin: 0 0 8px 0;
  text-transform: uppercase;
}

.price {
  font-size: 22px;
  font-weight: bold;
  color: #2196F3;
  margin: 0 0 8px 0;
}

.stock {
  font-size: 14px;
  color: #4CAF50;
  margin: 0;
}

.stock.low-stock {
  color: #f44336;
  font-weight: bold;
}

.actions {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.btn-icon {
  padding: 8px 12px;
  border: none;
  background: #FFF3E0;
  border-radius: 4px;
  cursor: pointer;
  font-size: 18px;
}

.btn-icon:hover {
  background: #FFE0B2;
}

.btn-primary {
  padding: 10px 20px;
  background: #2196F3;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
}

.btn-primary:hover {
  background: #1976D2;
}

.label {
  position: absolute;
  top: 10px;
  right: 10px;
  background: #FF5722;
  color: white;
  padding: 4px 12px;
  border-radius: 4px;
  font-size: 11px;
  font-weight: bold;
}</code></pre>
  </div>
</div>


  <h4>2.7.6. TrackBy obligatori per rendiment</h4>
  <p>La funci√≥ <code>trackBy</code> √©s <strong>fonamental</strong> per optimitzar el reciclatge de nodes:</p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// MAL: sense trackBy
&lt;div *cdkVirtualFor=&quot;let product of products&quot;&gt;
&lt;/div&gt;

// B√â: amb trackBy
&lt;div *cdkVirtualFor=&quot;let product of products; trackBy: trackByProductId&quot;&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p><strong>Com funciona trackBy:</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">trackByProductId(index: number, product: Product): number {
  return product.id;
  // Angular sap que si product.id no canvia, pot reutilitzar el node
}</code></pre>
  </div>
</div>


  <p><strong>Impacte quantitatiu:</strong></p>
  <ul>
    <li><strong>Sense trackBy:</strong> Destrueix i crea 20-30 nodes cada cop que feu scroll</li>
    <li><strong>Amb trackBy:</strong> Reutilitza nodes canviant nom√©s dades (95% m√©s r√†pid)</li>
  </ul>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.8. Al√ßada d'elements: fixa vs din√†mica</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.8.1. Al√ßada fixa (recomanada)</h4>
  <p>L'al√ßada fixa √©s la m√©s senzilla i eficient. Tots els elements tenen exactament la mateixa al√ßada.</p>

  <p><strong>Avantatges:</strong></p>
  <ul>
    <li>C√†lcul de posicions extremadament r√†pid</li>
    <li>Reciclatge de nodes perfecte</li>
    <li>No cal mesurar elements</li>
    <li>Rendiment √≤ptim</li>
  </ul>

  <p><strong>Configuraci√≥:</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class ProductListComponent {
  itemHeight = 120;  // Tots els elements: 120px d&#39;al√ßada
}</code></pre>
  </div>
</div>


  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;cdk-virtual-scroll-viewport [itemSize]=&quot;itemHeight&quot; class=&quot;viewport&quot;&gt;
  &lt;div *cdkVirtualFor=&quot;let item of items&quot; class=&quot;item&quot;&gt;
  &lt;/div&gt;
&lt;/cdk-virtual-scroll-viewport&gt;</code></pre>
  </div>
</div>


  
  <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">.item {
  height: 120px;  /* Ha de coincidir amb itemHeight */
  box-sizing: border-box;
}</code></pre>
  </div>
</div>


  <h4>2.8.2. Al√ßada din√†mica (avan√ßada)</h4>
  <p>Quan els elements tenen al√ßades variables, necessiteu una estrat√®gia diferent.</p>

  <p><strong>Inconvenients:</strong></p>
  <ul>
    <li>C√†lculs m√©s costosos</li>
    <li>Necessita mesurar elements</li>
    <li>Rendiment lleugerament inferior</li>
    <li>M√©s complex de configurar</li>
  </ul>

  <p><strong>Estrat√®gia 1: Al√ßada mitjana estimada</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class VariableHeightListComponent {
  averageItemHeight = 150;  // Al√ßada mitjana estimada
}</code></pre>
  </div>
</div>


  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;cdk-virtual-scroll-viewport
  [itemSize]=&quot;averageItemHeight&quot;
  class=&quot;viewport&quot;&gt;
  &lt;div *cdkVirtualFor=&quot;let item of items&quot; class=&quot;item&quot;&gt;
  &lt;/div&gt;
&lt;/cdk-virtual-scroll-viewport&gt;</code></pre>
  </div>
</div>


  <p><strong>Limitaci√≥:</strong> Si les al√ßades varien molt, apareixen salts en el scroll.</p>

  <p><strong>Estrat√®gia 2: AutoSizeVirtualScrollStrategy (experimental)</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, ViewChild, AfterViewInit } from &#39;@angular/core&#39;;
import { CdkVirtualScrollViewport } from &#39;@angular/cdk/scrolling&#39;;

@Component({
  selector: &#39;app-auto-size-list&#39;,
  templateUrl: &#39;./auto-size-list.component.html&#39;
})
export class AutoSizeListComponent implements AfterViewInit {
  @ViewChild(CdkVirtualScrollViewport) viewport!: CdkVirtualScrollViewport;

  items: any[] = [];

  ngAfterViewInit(): void {
    // For√ßa actualitzaci√≥ despr√©s de renderitzar
    this.viewport.checkViewportSize();
  }
}</code></pre>
  </div>
</div>


  <p><strong>Nota:</strong> Aquesta estrat√®gia encara √©s experimental i t√© limitacions.</p>

  <h4>2.8.3. Comparativa al√ßada fixa vs din√†mica</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Aspecte</th>
        <th>Al√ßada fixa</th>
        <th>Al√ßada din√†mica</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Rendiment</strong></td>
        <td>Excel¬∑lent</td>
        <td>Bo</td>
      </tr>
      <tr>
        <td><strong>Complexitat</strong></td>
        <td>Baixa</td>
        <td>Alta</td>
      </tr>
      <tr>
        <td><strong>Precisi√≥ scroll</strong></td>
        <td>Perfecta</td>
        <td>Acceptable</td>
      </tr>
      <tr>
        <td><strong>C√†lculs necessaris</strong></td>
        <td>M√≠nims</td>
        <td>Continus</td>
      </tr>
      <tr>
        <td><strong>Reciclatge nodes</strong></td>
        <td>√íptim</td>
        <td>Menys eficient</td>
      </tr>
      <tr>
        <td><strong>Recomanaci√≥</strong></td>
        <td>Usar sempre que sigui possible</td>
        <td>Nom√©s si imprescindible</td>
      </tr>
    </tbody>
  </table>

  <h4>2.8.4. Exemple pr√†ctic: for√ßar al√ßada fixa</h4>
  <p>Si el contingut √©s variable, podeu for√ßar al√ßada fixa amb CSS:</p>

  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div *cdkVirtualFor=&quot;let item of items&quot; class=&quot;item&quot;&gt;
  &lt;div class=&quot;content&quot;&gt;
    &lt;h3&gt;&lt;/h3&gt;
    &lt;p&gt;&lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  
  <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">.item {
  height: 150px;           /* Al√ßada fixa for√ßada */
  overflow: hidden;        /* Talla contingut extra */
  box-sizing: border-box;
}

.content {
  height: 100%;
  overflow-y: auto;        /* Scroll intern si cal */
}</code></pre>
  </div>
</div>


  <h4>2.8.5. Bones pr√†ctiques per al√ßades</h4>
  <p><strong>1. Prioritzeu al√ßada fixa sempre que sigui possible</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// B√â: al√ßada fixa
itemHeight = 120;

// EVITAR: al√ßada variable sense justificaci√≥</code></pre>
  </div>
</div>


  <p><strong>2. Calculeu l'al√ßada real abans de desplegar</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Mesureu un element representatiu
const sampleElement = document.querySelector(&#39;.item&#39;);
const computedHeight = sampleElement.getBoundingClientRect().height;
console.log(&#39;Al√ßada real:&#39;, computedHeight);
// Ajusteu itemHeight amb aquest valor</code></pre>
  </div>
</div>


  <p><strong>3. Considereu padding i borders</strong></p>

  
  <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">/* MAL: padding fa que al√ßada total sigui 140px */
.item {
  height: 120px;
  padding: 10px;  /* +20px total */
}

/* B√â: box-sizing inclou padding */
.item {
  height: 120px;
  padding: 10px;
  box-sizing: border-box;  /* Al√ßada total: 120px */
}</code></pre>
  </div>
</div>


  <h4>2.8.6. Mesurar l'al√ßada program√†ticament</h4>
  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, ViewChild, ElementRef, AfterViewInit } from &#39;@angular/core&#39;;

@Component({
  selector: &#39;app-measured-list&#39;,
  template: `
    &lt;div #sampleItem class=&quot;item&quot; style=&quot;visibility: hidden; position: absolute;&quot;&gt;
      &lt;h3&gt;T√≠tol mostra&lt;/h3&gt;
      &lt;p&gt;Descripci√≥ mostra amb contingut t√≠pic...&lt;/p&gt;
    &lt;/div&gt;

    &lt;cdk-virtual-scroll-viewport [itemSize]=&quot;itemHeight&quot; class=&quot;viewport&quot;&gt;
      &lt;div *cdkVirtualFor=&quot;let item of items&quot; class=&quot;item&quot;&gt;
        &lt;h3&gt;&lt;/h3&gt;
        &lt;p&gt;&lt;/p&gt;
      &lt;/div&gt;
    &lt;/cdk-virtual-scroll-viewport&gt;
  `
})
export class MeasuredListComponent implements AfterViewInit {
  @ViewChild(&#39;sampleItem&#39;) sampleItem!: ElementRef;

  itemHeight = 120;  // Valor per defecte
  items: any[] = [];

  ngAfterViewInit(): void {
    // Mesura l&#39;al√ßada real
    const realHeight = this.sampleItem.nativeElement.offsetHeight;
    this.itemHeight = realHeight;
    console.log(&#39;Al√ßada mesurada:&#39;, this.itemHeight);
  }
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.9. Comparativa de rendiment: 1000 elements normals vs virtualitzats</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.9.1. Metodologia de mesura</h4>
  <p>Per comparar el rendiment, utilitzarem les eines de desenvolupador de Chrome:</p>

  <p><strong>1. Performance tab:</strong></p>
  <ul>
    <li>Grava mentre carregues la llista</li>
    <li>Mesura temps de c√†rrega inicial</li>
    <li>Analitza frames per segon (FPS) durant scroll</li>
  </ul>

  <p><strong>2. Memory tab:</strong></p>
  <ul>
    <li>Pren snapshot despr√©s de carregar</li>
    <li>Compara mem√≤ria usada</li>
    <li>Identifica nodes DOM</li>
  </ul>

  <p><strong>3. Lighthouse:</strong></p>
  <ul>
    <li>Analitza puntuaci√≥ de rendiment</li>
    <li>Mesura Time to Interactive (TTI)</li>
  </ul>

  <h4>2.9.2. Configuraci√≥ de tests</h4>
  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// test-list-normal.component.ts (SENSE virtualitzaci√≥)
@Component({
  selector: &#39;app-test-list-normal&#39;,
  template: `
    &lt;div class=&quot;container&quot;&gt;
      &lt;h2&gt;Llista normal ( elements)&lt;/h2&gt;
      &lt;button (click)=&quot;loadItems()&quot;&gt;Carregar 5.000 elements&lt;/button&gt;

      &lt;div class=&quot;list&quot;&gt;
        &lt;div *ngFor=&quot;let item of items; trackBy: trackById&quot; class=&quot;item&quot;&gt;
          &lt;img [src]=&quot;item.image&quot; alt=&quot;&quot;&gt;
          &lt;div class=&quot;info&quot;&gt;
            &lt;h3&gt;&lt;/h3&gt;
            &lt;p&gt;&lt;/p&gt;
            &lt;span class=&quot;price&quot;&gt;&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  `
})
export class TestListNormalComponent {
  items: any[] = [];

  loadItems() {
    const startTime = performance.now();

    this.items = Array.from({length: 5000}, (_, i) =&gt; ({
      id: i,
      name: `Producte ${i}`,
      description: `Descripci√≥ del producte ${i} amb text variable`,
      price: Math.random() * 500,
      image: `https://via.placeholder.com/80?text=${i}`
    }));

    setTimeout(() =&gt; {
      const endTime = performance.now();
      console.log(`Temps c√†rrega: ${(endTime - startTime).toFixed(0)}ms`);
      console.log(`Nodes al DOM: ${document.querySelectorAll(&#39;.item&#39;).length}`);
    }, 100);
  }

  trackById(index: number, item: any): number {
    return item.id;
  }
}</code></pre>
  </div>
</div>


  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// test-list-virtual.component.ts (AMB virtualitzaci√≥)
@Component({
  selector: &#39;app-test-list-virtual&#39;,
  template: `
    &lt;div class=&quot;container&quot;&gt;
      &lt;h2&gt;Llista virtualitzada ( elements)&lt;/h2&gt;
      &lt;button (click)=&quot;loadItems()&quot;&gt;Carregar 5.000 elements&lt;/button&gt;

      &lt;cdk-virtual-scroll-viewport [itemSize]=&quot;120&quot; class=&quot;viewport&quot;&gt;
        &lt;div *cdkVirtualFor=&quot;let item of items; trackBy: trackById&quot; class=&quot;item&quot;&gt;
          &lt;img [src]=&quot;item.image&quot; alt=&quot;&quot;&gt;
          &lt;div class=&quot;info&quot;&gt;
            &lt;h3&gt;&lt;/h3&gt;
            &lt;p&gt;&lt;/p&gt;
            &lt;span class=&quot;price&quot;&gt;&lt;/span&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/cdk-virtual-scroll-viewport&gt;
    &lt;/div&gt;
  `
})
export class TestListVirtualComponent {
  items: any[] = [];

  loadItems() {
    const startTime = performance.now();

    this.items = Array.from({length: 5000}, (_, i) =&gt; ({
      id: i,
      name: `Producte ${i}`,
      description: `Descripci√≥ del producte ${i} amb text variable`,
      price: Math.random() * 500,
      image: `https://via.placeholder.com/80?text=${i}`
    }));

    setTimeout(() =&gt; {
      const endTime = performance.now();
      console.log(`Temps c√†rrega: ${(endTime - startTime).toFixed(0)}ms`);
      console.log(`Nodes al DOM: ${document.querySelectorAll(&#39;.item&#39;).length}`);
    }, 100);
  }

  trackById(index: number, item: any): number {
    return item.id;
  }
}</code></pre>
  </div>
</div>


  <h4>2.9.3. Resultats quantitatius</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>M√®trica</th>
        <th>Llista normal</th>
        <th>Llista virtual</th>
        <th>Millora</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Temps c√†rrega inicial</strong></td>
        <td>8.500 ms</td>
        <td>450 ms</td>
        <td><strong>95% m√©s r√†pid</strong></td>
      </tr>
      <tr>
        <td><strong>Nodes al DOM</strong></td>
        <td>5.000</td>
        <td>25</td>
        <td><strong>99.5% menys</strong></td>
      </tr>
      <tr>
        <td><strong>Mem√≤ria (heap)</strong></td>
        <td>420 MB</td>
        <td>18 MB</td>
        <td><strong>95% menys</strong></td>
      </tr>
      <tr>
        <td><strong>FPS durant scroll</strong></td>
        <td>12 FPS</td>
        <td>60 FPS</td>
        <td><strong>5√ó m√©s fluid</strong></td>
      </tr>
      <tr>
        <td><strong>Time to Interactive</strong></td>
        <td>9.2 s</td>
        <td>0.6 s</td>
        <td><strong>93% m√©s r√†pid</strong></td>
      </tr>
      <tr>
        <td><strong>Lighthouse Performance</strong></td>
        <td>32/100</td>
        <td>98/100</td>
        <td><strong>3√ó millor</strong></td>
      </tr>
    </tbody>
  </table>

  <h4>2.9.4. An√†lisi detallada per escenaris</h4>
  <p><strong>Escenari 1: C√†rrega inicial</strong></p>

  
  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">NORMAL (5.000 elements):
‚îú‚îÄ Parse HTML: 1.200ms
‚îú‚îÄ Create components: 5.800ms
‚îú‚îÄ Render DOM: 1.200ms
‚îú‚îÄ Paint: 300ms
‚îî‚îÄ TOTAL: 8.500ms

VIRTUAL (5.000 elements):
‚îú‚îÄ Parse HTML: 50ms
‚îú‚îÄ Create components: 280ms  (nom√©s 25)
‚îú‚îÄ Render DOM: 80ms
‚îú‚îÄ Paint: 40ms
‚îî‚îÄ TOTAL: 450ms

Difer√®ncia: 8.050ms (18√ó m√©s r√†pid)</code></pre>
  </div>
</div>


  <p><strong>Escenari 2: Scroll de 0 a 2.500 (meitat)</strong></p>

  
  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">NORMAL:
‚îú‚îÄ Recalcular posicions: 5.000 nodes
‚îú‚îÄ Check detecci√≥ canvis: 5.000 components
‚îú‚îÄ Temps per frame: 83ms (12 FPS)
‚îî‚îÄ Experi√®ncia: Lenta i a salts

VIRTUAL:
‚îú‚îÄ Recalcular posicions: 25 nodes
‚îú‚îÄ Reciclar nodes: 25 components
‚îú‚îÄ Temps per frame: 16ms (60 FPS)
‚îî‚îÄ Experi√®ncia: Fluida i immediata

Difer√®ncia: 5√ó m√©s FPS</code></pre>
  </div>
</div>


  <p><strong>Escenari 3: Mem√≤ria en dispositiu m√≤bil</strong></p>

  
  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">NORMAL en iPhone 12:
‚îú‚îÄ DOM nodes: 5.000 √ó 4 elements = 20.000 nodes
‚îú‚îÄ Event listeners: 5.000 botons √ó 2 = 10.000 listeners
‚îú‚îÄ Mem√≤ria total: ~450 MB
‚îî‚îÄ Resultat: Aplicaci√≥ es penja

VIRTUAL en iPhone 12:
‚îú‚îÄ DOM nodes: 25 √ó 4 elements = 100 nodes
‚îú‚îÄ Event listeners: 25 botons √ó 2 = 50 listeners
‚îú‚îÄ Mem√≤ria total: ~20 MB
‚îî‚îÄ Resultat: Funciona perfecte</code></pre>
  </div>
</div>


  <h4>2.9.5. Gr√†fic de rendiment visual</h4>
  
  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">TEMPS DE C√ÄRREGA (ms)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                         ‚îÇ
‚îÇ  Normal    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 8.500  ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  Virtual   ‚ñà 450                        ‚îÇ
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         0    2000   4000   6000   8000


NODES AL DOM
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                         ‚îÇ
‚îÇ  Normal    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 5.000  ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  Virtual   ‚ñå 25                         ‚îÇ
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         0    1000   2000   3000   4000


MEM√íRIA (MB)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                                         ‚îÇ
‚îÇ  Normal    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 420        ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  Virtual   ‚ñà 18                         ‚îÇ
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         0     100    200    300    400</code></pre>
  </div>
</div>


  <h4>2.9.6. Casos extrems testejats</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Elements</th>
        <th>Normal: temps</th>
        <th>Virtual: temps</th>
        <th>Difer√®ncia</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>100</td>
        <td>180ms</td>
        <td>50ms</td>
        <td>3.6√ó</td>
      </tr>
      <tr>
        <td>500</td>
        <td>850ms</td>
        <td>120ms</td>
        <td>7√ó</td>
      </tr>
      <tr>
        <td>1.000</td>
        <td>1.700ms</td>
        <td>180ms</td>
        <td>9.4√ó</td>
      </tr>
      <tr>
        <td>5.000</td>
        <td>8.500ms</td>
        <td>450ms</td>
        <td>18.8√ó</td>
      </tr>
      <tr>
        <td>10.000</td>
        <td>18.200ms</td>
        <td>520ms</td>
        <td>35√ó</td>
      </tr>
      <tr>
        <td>50.000</td>
        <td>Inutilitzable</td>
        <td>680ms</td>
        <td>‚àû</td>
      </tr>
    </tbody>
  </table>

  <h4>2.9.7. Conclusions de les proves</h4>
  <p><strong>1. Virtualitzaci√≥ √©s imprescindible per > 500 elements</strong></p>
  <p>Per sota de 500, la millora √©s notable per√≤ no cr√≠tica. Per sobre de 500, la difer√®ncia √©s d'√∫s o inutilitat.</p>

  <p><strong>2. Els beneficis creixen exponencialment</strong></p>
  <ul>
    <li>Amb 100 elements: 3√ó m√©s r√†pid</li>
    <li>Amb 5.000 elements: 18√ó m√©s r√†pid</li>
    <li>Amb 10.000 elements: 35√ó m√©s r√†pid</li>
  </ul>

  <p><strong>3. Dispositius m√≤bils s√≥n el coll d'ampolla</strong></p>
  <p>En desktop modern, 1.000 elements normals s√≥n acceptables. En m√≤bil, 500 elements ja s√≥n problem√†tics.</p>

  <p><strong>4. La mem√≤ria √©s tan cr√≠tica com la velocitat</strong></p>
  <p>Una aplicaci√≥ lenta es pot tolerar. Una aplicaci√≥ que consumeix 500 MB i es penja no es pot usar.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.10. Bones pr√†ctiques: quan val la pena virtualitzar</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.10.1. Criteri de decisi√≥ quantitatiu</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Elements</th>
        <th>Virtualitzaci√≥</th>
        <th>Ra√≥</th>
        <th>Temps estalviat</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>&lt; 50</td>
        <td>No necess√†ria</td>
        <td>Overhead innecessari</td>
        <td>0ms</td>
      </tr>
      <tr>
        <td>50-100</td>
        <td>Opcional</td>
        <td>Benefici marginal</td>
        <td>100ms</td>
      </tr>
      <tr>
        <td>100-500</td>
        <td>Recomanable</td>
        <td>Millora notable</td>
        <td>500-1.000ms</td>
      </tr>
      <tr>
        <td>500-2.000</td>
        <td>Molt recomanable</td>
        <td>Gran difer√®ncia</td>
        <td>1-5s</td>
      </tr>
      <tr>
        <td>&gt; 2.000</td>
        <td><strong>Imprescindible</strong></td>
        <td>Inutilitzable sense</td>
        <td>5-30s</td>
      </tr>
    </tbody>
  </table>

  <h4>2.10.2. Quan S√ç virtualitzar</h4>
  <p><strong>1. Cat√†legs de productes amb > 500 elements</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Cat√†leg e-commerce
products: Product[] = [];  // 2.000-10.000 productes
// ‚Üí Virtualitzaci√≥ obligat√≤ria</code></pre>
  </div>
</div>


  <p><strong>2. Taules de dades amb moltes files</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Historial de transaccions
transactions: Transaction[] = [];  // 5.000-50.000 files
// ‚Üí Virtualitzaci√≥ obligat√≤ria</code></pre>
  </div>
</div>


  <p><strong>3. Feeds de xarxes socials amb scroll infinit</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Feed infinit
posts: Post[] = [];  // Creix indefinidament
// ‚Üí Virtualitzaci√≥ obligat√≤ria</code></pre>
  </div>
</div>


  <p><strong>4. Llistes de cerca amb > 100 resultats</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Resultats de cerca
searchResults: Result[] = [];  // 100-1.000 resultats
// ‚Üí Virtualitzaci√≥ recomanada</code></pre>
  </div>
</div>


  <h4>2.10.3. Quan NO virtualitzar</h4>
  <p><strong>1. Llistes petites (&lt; 50 elements)</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Men√∫ de navegaci√≥
menuItems: MenuItem[] = [/* 10 elements */];
// ‚Üí *ngFor normal √©s millor</code></pre>
  </div>
</div>


  <p><strong>2. Elements amb al√ßada molt variable</strong></p>

  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div *ngFor=&quot;let post of posts&quot;&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p><strong>3. Llistes amb interaccions complexes</strong></p>

  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div *ngFor=&quot;let item of items&quot; cdkDrag&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p><strong>4. Necessites SEO (indexaci√≥ Google)</strong></p>

  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;article *ngFor=&quot;let article of articles&quot;&gt;
&lt;/article&gt;</code></pre>
  </div>
</div>


  <h4>2.10.4. Alternatives a la virtualitzaci√≥</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Situaci√≥</th>
        <th>Alternativa</th>
        <th>Quan usar-la</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Al√ßada variable</td>
        <td>Paginaci√≥</td>
        <td>Elements 100-500px</td>
      </tr>
      <tr>
        <td>SEO necessari</td>
        <td>SSR + paginaci√≥</td>
        <td>Blogs, not√≠cies</td>
      </tr>
      <tr>
        <td>Interaccions complexes</td>
        <td>Lazy loading</td>
        <td>Drag & drop, edici√≥</td>
      </tr>
      <tr>
        <td>Poques dades</td>
        <td>*ngFor normal</td>
        <td>&lt; 50 elements</td>
      </tr>
    </tbody>
  </table>

  <h4>2.10.5. Checklist de decisi√≥</h4>
  
  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">‚ñ° La llista t√© m√©s de 100 elements?
  ‚îî‚îÄ No ‚Üí Usar *ngFor normal
  ‚îî‚îÄ S√≠ ‚Üí Continuar

‚ñ° Els elements tenen al√ßada fixa o similar (¬±20%)?
  ‚îî‚îÄ No ‚Üí Considerar paginaci√≥
  ‚îî‚îÄ S√≠ ‚Üí Continuar

‚ñ° Necessites SEO o indexaci√≥?
  ‚îî‚îÄ S√≠ ‚Üí Usar SSR amb paginaci√≥
  ‚îî‚îÄ No ‚Üí Continuar

‚ñ° Hi ha interaccions complexes (drag &amp; drop)?
  ‚îî‚îÄ S√≠ ‚Üí Testejar virtualitzaci√≥ + llibreries
  ‚îî‚îÄ No ‚Üí Continuar

‚ñ° √âs una aplicaci√≥ m√≤bil o t√© usuaris m√≤bils?
  ‚îî‚îÄ S√≠ ‚Üí Virtualitzaci√≥ obligat√≤ria
  ‚îî‚îÄ No ‚Üí Virtualitzaci√≥ recomanada

RESULTAT: Implementar virtualitzaci√≥</code></pre>
  </div>
</div>


  <h4>2.10.6. Errors comuns a evitar</h4>
  <p><strong>1. Virtualitzar llistes petites</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// MAL: overhead innecessari
items = [1, 2, 3, 4, 5];  // Nom√©s 5 elements
// ‚Üí Usar *ngFor normal</code></pre>
  </div>
</div>


  <p><strong>2. No establir itemSize correcte</strong></p>

  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;cdk-virtual-scroll-viewport [itemSize]=&quot;100&quot;&gt;
  &lt;div *cdkVirtualFor=&quot;let item of items&quot; style=&quot;height: 150px&quot;&gt;
  &lt;/div&gt;
&lt;/cdk-virtual-scroll-viewport&gt;</code></pre>
  </div>
</div>


  <p><strong>3. Oblidar trackBy</strong></p>

  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;!-- MAL: sense trackBy --&gt;
&lt;div *cdkVirtualFor=&quot;let item of items&quot;&gt;
&lt;/div&gt;

&lt;!-- B√â: amb trackBy --&gt;
&lt;div *cdkVirtualFor=&quot;let item of items; trackBy: trackById&quot;&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p><strong>4. Viewport sense al√ßada definida</strong></p>

  
  <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">/* MAL: viewport sense al√ßada */
.viewport {
  width: 100%;
  /* Falta height! */
}

/* B√â: viewport amb al√ßada */
.viewport {
  width: 100%;
  height: 600px;  /* Obligatori */
}</code></pre>
  </div>
</div>


  <h4>2.10.7. Patr√≥ recomanat per implementaci√≥</h4>
  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// 1. Definir interface
interface Product {
  id: number;
  name: string;
  price: number;
}

// 2. Component amb virtualitzaci√≥
@Component({
  selector: &#39;app-product-list&#39;,
  template: `
    &lt;cdk-virtual-scroll-viewport [itemSize]=&quot;itemHeight&quot; class=&quot;viewport&quot;&gt;
      &lt;div *cdkVirtualFor=&quot;let product of products; trackBy: trackById&quot;
           class=&quot;item&quot;&gt;
        
      &lt;/div&gt;
    &lt;/cdk-virtual-scroll-viewport&gt;
  `,
  styles: [`
    .viewport { height: 600px; }
    .item { height: 120px; box-sizing: border-box; }
  `]
})
export class ProductListComponent {
  products: Product[] = [];
  itemHeight = 120;

  trackById(index: number, item: Product): number {
    return item.id;
  }
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.11. Altres optimitzacions de renderitzat: trackBy, pipes purs</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.11.1. TrackBy: identificador √∫nic per elements</h4>
  <p>La funci√≥ <code>trackBy</code> √©s cr√≠tica per optimitzar el renderitzat de llistes, virtualitzades o no.</p>

  <p><strong>Problema sense trackBy:</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Component amb llista
items: Product[] = [];

updateItems() {
  this.items = [...this.items];  // Nova refer√®ncia
  // Angular recrea TOTS els nodes encara que les dades siguin iguals
}</code></pre>
  </div>
</div>


  <p><strong>Soluci√≥ amb trackBy:</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">items: Product[] = [];

trackByProductId(index: number, product: Product): number {
  return product.id;
  // Angular nom√©s recrea nodes amb ID diferents
}

updateItems() {
  this.items = [...this.items];
  // Angular compara IDs i nom√©s actualitza els canviats
}</code></pre>
  </div>
</div>


  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div *ngFor=&quot;let product of products; trackBy: trackByProductId&quot;&gt;
  
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p><strong>Impacte quantitatiu:</strong></p>
  <ul>
    <li><strong>Sense trackBy:</strong> Destrueix i recrea 1.000 nodes ‚Üí 800ms</li>
    <li><strong>Amb trackBy:</strong> Actualitza nom√©s 50 nodes canviats ‚Üí 40ms</li>
    <li><strong>Millora:</strong> 95% m√©s r√†pid</li>
  </ul>

  <h4>2.11.2. Pipes purs vs impurs</h4>
  <p>Els pipes transformen dades a la plantilla. Angular ofereix dos tipus:</p>

  <p><strong>1. Pipes purs (per defecte - recomanat)</strong></p>
  <p>Nom√©s es recalculen quan l'entrada canvia:</p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Pipe({
  name: &#39;formatPrice&#39;,
  pure: true  // Per defecte
})
export class FormatPricePipe implements PipeTransform {
  transform(value: number): string {
    console.log(&#39;Pipe executat&#39;);
    return `${value.toFixed(2)} ‚Ç¨`;
  }
}</code></pre>
  </div>
</div>


  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div *ngFor=&quot;let product of products&quot;&gt;
  
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p><strong>2. Pipes impurs (usar amb precauci√≥)</strong></p>
  <p>Es recalculen en CADA cicle de detecci√≥:</p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Pipe({
  name: &#39;filterProducts&#39;,
  pure: false  // Impure
})
export class FilterProductsPipe implements PipeTransform {
  transform(products: Product[], query: string): Product[] {
    console.log(&#39;Pipe executat&#39;);  // Es veur√† constantment
    return products.filter(p =&gt; p.name.includes(query));
  }
}</code></pre>
  </div>
</div>


  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div *ngFor=&quot;let product of products | filterProducts:searchQuery&quot;&gt;
  
&lt;/div&gt;</code></pre>
  </div>
</div>


  <p><strong>Cost dels pipes impurs:</strong></p>
  <ul>
    <li><strong>Pipe pur:</strong> 1 execuci√≥ per canvi real ‚Üí 0.5ms</li>
    <li><strong>Pipe impur:</strong> 100 execucions per segon ‚Üí 50ms/s</li>
    <li><strong>Difer√®ncia:</strong> 100√ó m√©s cost</li>
  </ul>

  <h4>2.11.3. Comparativa pipes purs vs impurs</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Aspecte</th>
        <th>Pipe pur</th>
        <th>Pipe impur</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Execucions</strong></td>
        <td>1 per canvi real</td>
        <td>100+ per segon</td>
      </tr>
      <tr>
        <td><strong>Rendiment</strong></td>
        <td>Excel¬∑lent</td>
        <td>Problem√†tic</td>
      </tr>
      <tr>
        <td><strong>√ös recomanat</strong></td>
        <td>Transformacions simples</td>
        <td>Filtres complexos</td>
      </tr>
      <tr>
        <td><strong>Impacte llista 1.000</strong></td>
        <td>M√≠nim</td>
        <td>Bloqueja UI</td>
      </tr>
    </tbody>
  </table>

  <h4>2.11.4. Optimitzaci√≥: filtrar al component</h4>
  <p>En lloc d'un pipe impur, filtreu al component:</p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// MAL: pipe impur
@Pipe({ name: &#39;filter&#39;, pure: false })
export class FilterPipe {
  transform(items: any[], query: string): any[] {
    return items.filter(item =&gt; item.name.includes(query));
  }
}

// B√â: filtre al component
export class ProductListComponent {
  allProducts: Product[] = [];
  filteredProducts: Product[] = [];
  searchQuery = &#39;&#39;;

  onSearch(query: string) {
    this.searchQuery = query;
    this.filteredProducts = this.allProducts
      .filter(p =&gt; p.name.includes(query));
    // Nom√©s filtra quan l&#39;usuari escriu
  }
}</code></pre>
  </div>
</div>


  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;!-- MAL: pipe impur --&gt;
&lt;div *ngFor=&quot;let p of products | filter:searchQuery&quot;&gt;

&lt;!-- B√â: array prefiltrat --&gt;
&lt;div *ngFor=&quot;let p of filteredProducts&quot;&gt;</code></pre>
  </div>
</div>


  <h4>2.11.5. OnPush amb virtualitzaci√≥ (combinaci√≥ √≤ptima)</h4>
  <p>Combinar estrat√®gia <code>OnPush</code> amb virtualitzaci√≥ ofereix el m√†xim rendiment:</p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  selector: &#39;app-optimized-list&#39;,
  changeDetection: ChangeDetectionStrategy.OnPush,  // OnPush
  template: `
    &lt;cdk-virtual-scroll-viewport [itemSize]=&quot;120&quot; class=&quot;viewport&quot;&gt;
      &lt;div *cdkVirtualFor=&quot;let item of items; trackBy: trackById&quot;
           class=&quot;item&quot;&gt;
         - 
      &lt;/div&gt;
    &lt;/cdk-virtual-scroll-viewport&gt;
  `
})
export class OptimizedListComponent {
  items: Product[] = [];

  trackById(index: number, item: Product): number {
    return item.id;
  }

  updateItems(newItems: Product[]) {
    // Crea nova refer√®ncia per activar OnPush
    this.items = [...newItems];
  }
}</code></pre>
  </div>
</div>


  <p><strong>Resultat combinat:</strong></p>
  <ul>
    <li><strong>Virtualitzaci√≥:</strong> Nom√©s 25 nodes al DOM</li>
    <li><strong>OnPush:</strong> Nom√©s comprova quan canvia l'input</li>
    <li><strong>TrackBy:</strong> Recicla nodes eficientment</li>
    <li><strong>Millora total:</strong> 99.9% m√©s eficient que llista normal</li>
  </ul>

  <h4>2.11.6. Resum d'optimitzacions</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>T√®cnica</th>
        <th>Aplicaci√≥</th>
        <th>Millora</th>
        <th>Complexitat</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Virtualitzaci√≥</strong></td>
        <td>Llistes > 500 elements</td>
        <td>95% c√†rrega</td>
        <td>Baixa</td>
      </tr>
      <tr>
        <td><strong>TrackBy</strong></td>
        <td>Totes les llistes</td>
        <td>90% actualitzaci√≥</td>
        <td>Molt baixa</td>
      </tr>
      <tr>
        <td><strong>OnPush</strong></td>
        <td>Components pesats</td>
        <td>80% detecci√≥</td>
        <td>Mitjana</td>
      </tr>
      <tr>
        <td><strong>Pipes purs</strong></td>
        <td>Transformacions</td>
        <td>99% vs impurs</td>
        <td>Molt baixa</td>
      </tr>
      <tr>
        <td><strong>Filtrat component</strong></td>
        <td>Filtres complexos</td>
        <td>95% vs pipe</td>
        <td>Baixa</td>
      </tr>
    </tbody>
  </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.12. Mini exemple pr√†ctic</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.12.1. Objectiu</h4>
  <p>Crear una llista virtualitzada de 2.000 productes amb filtre de cerca i ordenaci√≥, mesurant el rendiment abans i despr√©s.</p>

  <h4>2.12.2. Pas 1: Model de dades</h4>
  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// models/product.model.ts
export interface Product {
  id: number;
  name: string;
  category: string;
  price: number;
  stock: number;
  image: string;
}</code></pre>
  </div>
</div>


  <h4>2.12.3. Pas 2: Servei de dades</h4>
  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// services/product.service.ts
import { Injectable } from &#39;@angular/core&#39;;
import { Observable, of } from &#39;rxjs&#39;;
import { delay } from &#39;rxjs/operators&#39;;
import { Product } from &#39;../models/product.model&#39;;

@Injectable({
  providedIn: &#39;root&#39;
})
export class ProductService {

  generateProducts(count: number): Observable&lt;Product[]&gt; {
    const categories = [&#39;Electr√≤nica&#39;, &#39;Roba&#39;, &#39;Esports&#39;, &#39;Llar&#39;, &#39;Joguines&#39;];

    const products: Product[] = Array.from({length: count}, (_, i) =&gt; ({
      id: i + 1,
      name: `Producte ${i + 1}`,
      category: categories[i % categories.length],
      price: Math.random() * 500,
      stock: Math.floor(Math.random() * 100),
      image: `https://via.placeholder.com/80?text=P${i + 1}`
    }));

    return of(products).pipe(delay(500));  // Simula lat√®ncia API
  }
}</code></pre>
  </div>
</div>


  <h4>2.12.4. Pas 3: Component amb virtualitzaci√≥</h4>
  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// components/product-catalog/product-catalog.component.ts
import { Component, OnInit, ChangeDetectionStrategy } from &#39;@angular/core&#39;;
import { Product } from &#39;../../models/product.model&#39;;
import { ProductService } from &#39;../../services/product.service&#39;;

@Component({
  selector: &#39;app-product-catalog&#39;,
  templateUrl: &#39;./product-catalog.component.html&#39;,
  styleUrls: [&#39;./product-catalog.component.css&#39;],
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class ProductCatalogComponent implements OnInit {
  allProducts: Product[] = [];
  filteredProducts: Product[] = [];
  itemHeight = 100;
  searchQuery = &#39;&#39;;
  sortBy: &#39;name&#39; | &#39;price&#39; = &#39;name&#39;;
  loading = true;

  constructor(private productService: ProductService) {}

  ngOnInit(): void {
    this.loadProducts();
  }

  loadProducts(): void {
    const startTime = performance.now();
    this.loading = true;

    this.productService.generateProducts(2000).subscribe({
      next: (products) =&gt; {
        this.allProducts = products;
        this.filteredProducts = [...products];
        this.loading = false;

        const endTime = performance.now();
        console.log(`Carregats ${products.length} productes en ${(endTime - startTime).toFixed(0)}ms`);
      },
      error: (err) =&gt; {
        console.error(&#39;Error carregant productes:&#39;, err);
        this.loading = false;
      }
    });
  }

  onSearch(query: string): void {
    this.searchQuery = query.toLowerCase();
    this.applyFilters();
  }

  onSort(sortBy: &#39;name&#39; | &#39;price&#39;): void {
    this.sortBy = sortBy;
    this.applyFilters();
  }

  private applyFilters(): void {
    let filtered = this.allProducts;

    // Filtrar per cerca
    if (this.searchQuery) {
      filtered = filtered.filter(p =&gt;
        p.name.toLowerCase().includes(this.searchQuery) ||
        p.category.toLowerCase().includes(this.searchQuery)
      );
    }

    // Ordenar
    filtered = [...filtered].sort((a, b) =&gt; {
      if (this.sortBy === &#39;name&#39;) {
        return a.name.localeCompare(b.name);
      } else {
        return a.price - b.price;
      }
    });

    this.filteredProducts = filtered;
  }

  trackByProductId(index: number, product: Product): number {
    return product.id;
  }
}</code></pre>
  </div>
</div>


  <h4>2.12.5. Pas 4: Plantilla</h4>
  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;container&quot;&gt;
  &lt;header class=&quot;catalog-header&quot;&gt;
    &lt;h2&gt;Cat√†leg de productes&lt;/h2&gt;

    &lt;div class=&quot;controls&quot;&gt;
      &lt;input
        type=&quot;text&quot;
        placeholder=&quot;Cerca productes...&quot;
        (input)=&quot;onSearch($event.target.value)&quot;
        class=&quot;search-input&quot;&gt;

      &lt;select (change)=&quot;onSort($event.target.value)&quot; class=&quot;sort-select&quot;&gt;
        &lt;option value=&quot;name&quot;&gt;Ordenar per nom&lt;/option&gt;
        &lt;option value=&quot;price&quot;&gt;Ordenar per preu&lt;/option&gt;
      &lt;/select&gt;

      &lt;span class=&quot;stats&quot;&gt;
        {{ filteredProducts.length }} / {{ allProducts.length }} productes
      &lt;/span&gt;
    &lt;/div&gt;
  &lt;/header&gt;

  &lt;div *ngIf=&quot;loading&quot; class=&quot;loading&quot;&gt;
    Carregant productes...
  &lt;/div&gt;

  &lt;cdk-virtual-scroll-viewport
    *ngIf=&quot;!loading&quot;
    [itemSize]=&quot;itemHeight&quot;
    [minBufferPx]=&quot;300&quot;
    [maxBufferPx]=&quot;600&quot;
    class=&quot;viewport&quot;&gt;

    &lt;div *cdkVirtualFor=&quot;let product of filteredProducts;
                         trackBy: trackByProductId&quot;
         class=&quot;product-card&quot;&gt;

      &lt;img [src]=&quot;product.image&quot; [alt]=&quot;product.name&quot;&gt;

      &lt;div class=&quot;product-info&quot;&gt;
        &lt;h3&gt;{{ product.name }}&lt;/h3&gt;
        &lt;span class=&quot;category&quot;&gt;{{ product.category }}&lt;/span&gt;
        &lt;p class=&quot;price&quot;&gt;{{ product.price | currency:&#39;EUR&#39;:&#39;symbol&#39;:&#39;1.2-2&#39; }}&lt;/p&gt;
        &lt;p class=&quot;stock&quot; [class.low]=&quot;product.stock &lt; 20&quot;&gt;
          Stock: {{ product.stock }} unitats
        &lt;/p&gt;
      &lt;/div&gt;

      &lt;button class=&quot;btn-add&quot;&gt;Afegir&lt;/button&gt;
    &lt;/div&gt;

  &lt;/cdk-virtual-scroll-viewport&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>


  <h4>2.12.6. Pas 5: Estils</h4>
  
  <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">/* product-catalog.component.css */
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.catalog-header {
  margin-bottom: 20px;
}

.catalog-header h2 {
  margin: 0 0 15px 0;
}

.controls {
  display: flex;
  gap: 15px;
  align-items: center;
  flex-wrap: wrap;
}

.search-input {
  flex: 1;
  min-width: 200px;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.sort-select {
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.stats {
  color: #666;
  font-size: 14px;
  font-weight: 500;
}

.loading {
  text-align: center;
  padding: 40px;
  color: #666;
  font-size: 18px;
}

.viewport {
  height: 700px;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  overflow-y: auto;
}

.product-card {
  height: 100px;
  padding: 10px;
  border-bottom: 1px solid #f0f0f0;
  display: flex;
  align-items: center;
  gap: 15px;
  transition: background-color 0.2s;
}

.product-card:hover {
  background-color: #f9f9f9;
}

.product-card img {
  width: 80px;
  height: 80px;
  object-fit: cover;
  border-radius: 8px;
}

.product-info {
  flex: 1;
}

.product-info h3 {
  margin: 0 0 5px 0;
  font-size: 16px;
  color: #333;
}

.category {
  display: inline-block;
  background: #E3F2FD;
  color: #1976D2;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 12px;
  margin-bottom: 5px;
}

.price {
  font-size: 18px;
  font-weight: bold;
  color: #2196F3;
  margin: 5px 0;
}

.stock {
  font-size: 13px;
  color: #4CAF50;
  margin: 0;
}

.stock.low {
  color: #f44336;
}

.btn-add {
  padding: 8px 16px;
  background: #2196F3;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-weight: 500;
}

.btn-add:hover {
  background: #1976D2;
}</code></pre>
  </div>
</div>


  <h4>2.12.7. Verificaci√≥ de funcionament</h4>
  <p><strong>Passos:</strong></p>

  <ol>
    <li>Executeu l'aplicaci√≥: <code>ng serve</code></li>
    <li>Obriu devtools (F12) ‚Üí pesta√±a Console</li>
    <li>Carregueu la p√†gina i observeu:
      <ul>
        <li>Temps de c√†rrega: ~500ms</li>
        <li>Nodes al DOM: ~30 (no 2.000)</li>
      </ul>
    </li>
    <li>Feu scroll r√†pid i observeu:
      <ul>
        <li>FPS: 60 constants</li>
        <li>Flu√Ødesa perfecta</li>
      </ul>
    </li>
    <li>Cerqueu "Producte 1500":
      <ul>
        <li>Filtre instantani</li>
        <li>Nom√©s 1 resultat</li>
      </ul>
    </li>
    <li>Canvieu ordenaci√≥:
      <ul>
        <li>Reordena instant√†niament</li>
      </ul>
    </li>
  </ol>

  <p><strong>Resultat esperat:</strong></p>
  <ul>
    <li>C√†rrega inicial: &lt; 1s</li>
    <li>Scroll fluid: 60 FPS</li>
    <li>Cerca i ordenaci√≥: instantanis</li>
    <li>Mem√≤ria: &lt; 30 MB</li>
  </ul>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.13. Resoluci√≥ de problemes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.13.1. Errors transversals</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa</th>
        <th>Soluci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Scroll no funciona</td>
        <td>Viewport sense al√ßada CSS</td>
        <td>Afegir <code>height: 600px</code> al <code>.viewport</code></td>
      </tr>
      <tr>
        <td>Elements no es veuen</td>
        <td>itemSize incorrecte</td>
        <td>Verificar que coincideix amb al√ßada CSS</td>
      </tr>
      <tr>
        <td>Salts en el scroll</td>
        <td>Al√ßada variable</td>
        <td>Usar al√ßada fixa o estrat√®gia din√†mica</td>
      </tr>
      <tr>
        <td>Llista no actualitza</td>
        <td>Falta trackBy</td>
        <td>Afegir <code>trackBy: trackByFn</code></td>
      </tr>
      <tr>
        <td>Mem√≤ria creix</td>
        <td>Imatges no alliberades</td>
        <td>Usar lazy loading per imatges</td>
      </tr>
    </tbody>
  </table>

  <h4>2.13.2. Errors de configuraci√≥</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa</th>
        <th>Soluci√≥ Windows</th>
        <th>Soluci√≥ Linux/macOS</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>@angular/cdk no trobat</td>
        <td>CDK no instal¬∑lat</td>
        <td><code>ng add @angular/cdk</code></td>
        <td><code>ng add @angular/cdk</code></td>
      </tr>
      <tr>
        <td>ScrollingModule error</td>
        <td>M√≤dul no importat</td>
        <td>Afegir a <code>imports: []</code></td>
        <td>Afegir a <code>imports: []</code></td>
      </tr>
      <tr>
        <td>cdkVirtualFor unknown</td>
        <td>Directiva no reconeguda</td>
        <td>Verificar imports al m√≤dul</td>
        <td>Verificar imports al m√≤dul</td>
      </tr>
      <tr>
        <td>Viewport no renderitza</td>
        <td>Contenidor sense dimensions</td>
        <td>Establir <code>width</code> i <code>height</code></td>
        <td>Establir <code>width</code> i <code>height</code></td>
      </tr>
    </tbody>
  </table>

  <h4>2.13.3. Problemes de depend√®ncies</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa</th>
        <th>Soluci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Versi√≥ incompatible</td>
        <td>CDK no coincideix amb Angular</td>
        <td><code>ng update @angular/cdk</code></td>
      </tr>
      <tr>
        <td>Peer dependencies</td>
        <td>Versions conflictives</td>
        <td><code>npm install --legacy-peer-deps</code></td>
      </tr>
      <tr>
        <td>Build error</td>
        <td>Tipus TypeScript</td>
        <td>Actualitzar <code>tsconfig.json</code></td>
      </tr>
    </tbody>
  </table>

  <h4>2.13.4. Errors de rendiment</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Problema</th>
        <th>Causa</th>
        <th>Diagn√≤stic</th>
        <th>Soluci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Scroll lent</td>
        <td>trackBy absent</td>
        <td>Console: "recreating nodes"</td>
        <td>Afegir <code>trackBy</code></td>
      </tr>
      <tr>
        <td>C√†rrega lenta</td>
        <td>itemSize massa gran</td>
        <td>Devtools: 100+ nodes</td>
        <td>Reduir <code>itemSize</code></td>
      </tr>
      <tr>
        <td>Mem√≤ria creix</td>
        <td>Pipes impurs</td>
        <td>Memory profiler</td>
        <td>Canviar a pipes purs</td>
      </tr>
      <tr>
        <td>FPS baixos</td>
        <td>OnPush no usat</td>
        <td>Performance tab</td>
        <td>Afegir <code>OnPush</code></td>
      </tr>
    </tbody>
  </table>

  <h4>2.13.5. Problemes d'al√ßada</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>S√≠mptoma</th>
        <th>Causa</th>
        <th>Verificaci√≥</th>
        <th>Soluci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Scroll salta</td>
        <td>itemSize ‚â† al√ßada CSS</td>
        <td>Inspeccionar element</td>
        <td>Igualar valors</td>
      </tr>
      <tr>
        <td>Elements tallats</td>
        <td>box-sizing incorrecte</td>
        <td>Computed styles</td>
        <td>Afegir <code>box-sizing: border-box</code></td>
      </tr>
      <tr>
        <td>Espai blanc</td>
        <td>minBufferPx insuficient</td>
        <td>Scroll r√†pid</td>
        <td>Augmentar <code>minBufferPx</code></td>
      </tr>
      <tr>
        <td>Elements duplicats</td>
        <td>trackBy retorna mateix valor</td>
        <td>Console logs</td>
        <td>Usar ID √∫nic</td>
      </tr>
    </tbody>
  </table>

  <h4>2.13.6. Debug avan√ßat</h4>
  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Afegir logs per debug
export class DebugVirtualListComponent implements AfterViewInit {
  @ViewChild(CdkVirtualScrollViewport) viewport!: CdkVirtualScrollViewport;

  ngAfterViewInit(): void {
    // Log quan canvia el rang visible
    this.viewport.renderedRangeStream.subscribe(range =&gt; {
      console.log(&#39;Rang visible:&#39;, range);
    });

    // Log scroll offset
    this.viewport.elementScrolled().subscribe(() =&gt; {
      console.log(&#39;Scroll offset:&#39;, this.viewport.measureScrollOffset());
    });
  }
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.14. Prompts d'IA</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<!-- Component: Prompt per IA amb caixa de text i bot√≥ de c√≤pia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Ets un desenvolupador Angular senior especialitzat en optimitzaci√≥ de rendiment i virtualitzaci√≥ de llistes. <strong>Context:</strong> Estic aprenent a implementar virtualitzaci√≥ de llistes amb Angular CDK per primera vegada. He completat la lectura 4.3.2 on he configurat <code>cdk-virtual-scroll-viewport</code>, <code>*cdkVirtualFor</code> i <code>trackBy</code>. <strong>Tasca:</strong> Crea una taula comparativa que m'ajudi a comprendre quan √©s necessari virtualitzar una llista i quan no. Inclou 5-6 escenaris diferents amb el nombre d'elements, impacte en rendiment (temps de c√†rrega, mem√≤ria, FPS) i recomanaci√≥ final. <strong>Format:</strong> Taula markdown amb columnes: Nombre d'elements | Sense virtualitzaci√≥ (temps/mem√≤ria/FPS) | Amb virtualitzaci√≥ (temps/mem√≤ria/FPS) | Recomanaci√≥ | Cas d'√∫s real.</div>
  </div>
</div>

<!-- Component: Prompt per IA amb caixa de text i bot√≥ de c√≤pia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Ets un auditor de rendiment d'aplicacions web especialitzat en Angular i optimitzaci√≥ DOM. <strong>Context:</strong> He implementat una llista virtualitzada amb 2.000 productes que inclou cerca, ordenaci√≥ i <code>trackBy</code>. El scroll fa salts i el rendiment no √©s l'esperat. <strong>Tasca:</strong> Genera un pla de diagn√≤stic exhaustiu per identificar i solucionar problemes de rendiment en llistes virtualitzades. Inclou comprovacions de configuraci√≥ (itemSize, CSS, trackBy), mesures amb DevTools (Performance, Memory, Elements), i solucions espec√≠fiques per cada problema detectat. <strong>Format:</strong> Llista numerada amb 12-15 punts de verificaci√≥. Cada punt ha de tenir: Qu√® comprovar | Com fer-ho amb DevTools | Problema si falla | Soluci√≥ concreta amb codi.</div>
  </div>
</div>


  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.15. Autoavaluaci√≥</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.15.1. Criteris objectius (Definition of Done)</h4>
  <p><strong>Funcionalitat:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He implementat una llista virtualitzada amb m√©s de 500 elements funcional</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He configurat correctament `itemSize` coincidint amb l'al√ßada CSS</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He afegit `trackBy` i verificat que millora el rendiment</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He mesurat i comparat temps de c√†rrega abans/despr√©s de virtualitzar</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Projecte i estructura:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He importat `ScrollingModule` al m√≤dul corresponent</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He creat un viewport amb al√ßada definida (`height: 600px`)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He utilitzat `*cdkVirtualFor` en lloc de `*ngFor`</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He establert `box-sizing: border-box` per evitar problemes d'al√ßada</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Rendiment:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He verificat que nom√©s 20-30 elements estan al DOM (DevTools)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He mesurat FPS durant scroll i √©s constant a 60</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He comprovat que la mem√≤ria no supera 30-50 MB</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He aplicat `OnPush` quan √©s possible per optimitzaci√≥ extra</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Bones pr√†ctiques:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He utilitzat pipes purs per transformacions</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He filtrat dades al component, no amb pipes impurs</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He documentat per qu√® he triat virtualitzaci√≥</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He testat en dispositiu m√≤bil o simulador</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <h4>2.15.2. Compet√®ncies adquirides</h4>
  <p><strong>Virtualitzaci√≥:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Comprenc quan √©s necessari virtualitzar una llista (> 500 elements)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">S√© implementar scroll virtual amb Angular CDK</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc configurar itemSize, minBufferPx i maxBufferPx adequadament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc com funciona el reciclatge de nodes</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Rendiment:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">S√© mesurar temps de c√†rrega amb performance.now()</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc analitzar nodes al DOM amb DevTools</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Comprenc l'impacte de la mem√≤ria en aplicacions</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">S√© diagnosticar problemes de scroll lent</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>TrackBy i optimitzacions:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc per qu√® trackBy √©s imprescindible</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc crear funcions trackBy amb identificadors √∫nics</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">S√© diferenciar pipes purs i impurs</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc combinar OnPush amb virtualitzaci√≥</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Debug i soluci√≥ de problemes:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">S√© identificar descordances entre itemSize i CSS</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc solucionar salts en el scroll</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc com configurar buffers per evitar espais en blanc</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">S√© usar DevTools per analitzar rendiment</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>Aplicaci√≥ pr√†ctica:</strong></p>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He creat una llista virtualitzada completa funcional</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He integrat cerca i ordenaci√≥ amb rendiment √≤ptim</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He mesurat millores quantitatives (temps, mem√≤ria, FPS)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc explicar els beneficis a altres desenvolupadors</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.16. Recapitulaci√≥</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.16.1. Qu√® hem aconseguit</h4>
  <p>Heu apr√®s a implementar virtualitzaci√≥ de llistes per gestionar milers d'elements de forma eficient. Aquesta t√®cnica √©s fonamental per aplicacions modernes amb grans volums de dades.</p>

  <p>Disposeu d'un <strong>component de llista virtualitzada</strong> amb:</p>

  <ol>
    <li><strong>Virtualitzaci√≥ CDK:</strong> Nom√©s renderitza 20-30 elements visibles, independentment del total</li>
    <li><strong>Rendiment optimitzat:</strong> C√†rrega inicial 95% m√©s r√†pida, scroll fluid a 60 FPS constant</li>
    <li><strong>TrackBy implementat:</strong> Reciclatge eficient de nodes, actualitzacions instant√†nies</li>
    <li><strong>Cerca i ordenaci√≥:</strong> Filtrat al component sense pipes impurs, respostes immediates</li>
    <li><strong>Bones pr√†ctiques aplicades:</strong> OnPush, pipes purs, gesti√≥ de mem√≤ria optimitzada</li>
  </ol>

  <h4>2.16.2. Amb les compet√®ncies adquirides en virtualitzaci√≥, esteu preparats per:</h4>
  <ul>
    <li>Implementar scroll infinit amb paginaci√≥ autom√†tica</li>
    <li>Crear taules de dades virtuals amb milers de files</li>
    <li>Optimitzar aplicacions m√≤bils amb llistes grans</li>
    <li>Combinar virtualitzaci√≥ amb lazy loading avan√ßat</li>
    <li>Aplicar t√®cniques de rendiment a components complexos</li>
  </ul>

  <p>A futures ampliacions del curs, podreu explorar <strong>t√®cniques avan√ßades</strong> com virtualitzaci√≥ bidimensional (files i columnes), integraci√≥ amb WebWorkers per processament en segon pla, i estrat√®gies de pre-c√†rrega intel¬∑ligent.</p>

  <h4>2.16.3. Contracte de sortida</h4>
  <ul>
    <li>Implementeu llistes virtualitzades per > 500 elements</li>
    <li>Mesureu i comproveu millores de rendiment quantitatives</li>
    <li>Configureu itemSize, buffers i trackBy correctament</li>
    <li>Diagnostiqueu i resoleu problemes de scroll i al√ßada</li>
  </ul>

  <p><strong>Esteu preparats per optimitzar qualsevol aplicaci√≥ amb llistes grans!</strong></p>

  <h4>2.16.4. Refer√®ncies r√†pides</h4>
  <p><strong>Imports essencials:</strong></p>

  
  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { ScrollingModule } from &#39;@angular/cdk/scrolling&#39;;
import { ChangeDetectionStrategy } from &#39;@angular/core&#39;;</code></pre>
  </div>
</div>


  <p><strong>Configuraci√≥ b√†sica:</strong></p>

  
  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;cdk-virtual-scroll-viewport [itemSize]=&quot;120&quot; class=&quot;viewport&quot;&gt;
  &lt;div *cdkVirtualFor=&quot;let item of items; trackBy: trackById&quot;&gt;
    
  &lt;/div&gt;
&lt;/cdk-virtual-scroll-viewport&gt;</code></pre>
  </div>
</div>


  <p><strong>CSS obligatori:</strong></p>

  
  <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">.viewport {
  height: 600px;
}
.item {
  height: 120px;
  box-sizing: border-box;
}</code></pre>
  </div>
</div>


  <p><strong>Troubleshooting r√†pid:</strong></p>
  <ul>
    <li>Scroll no funciona ‚Üí Afegir <code>height</code> al viewport</li>
    <li>Salts en el scroll ‚Üí Igualar <code>itemSize</code> amb al√ßada CSS</li>
    <li>Llista no actualitza ‚Üí Afegir <code>trackBy</code></li>
    <li>Mem√≤ria creix ‚Üí Verificar pipes impurs</li>
  </ul>

  <p><strong>Resoluci√≥ de problemes detallada:</strong> Vegeu secci√≥ 2.13</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.17. Rep√†s de conceptes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>2.17.1. Glossari de termes clau</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Terme</th>
        <th>Definici√≥</th>
        <th>Exemple</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Virtualitzaci√≥</strong></td>
        <td>T√®cnica que nom√©s renderitza elements visibles al viewport</td>
        <td>5.000 elements ‚Üí 25 al DOM</td>
      </tr>
      <tr>
        <td><strong>Viewport</strong></td>
        <td>√Ärea visible on es mostren els elements</td>
        <td>Contenidor de 600px d'al√ßada</td>
      </tr>
      <tr>
        <td><strong>itemSize</strong></td>
        <td>Al√ßada de cada element en p√≠xels</td>
        <td>120px per element</td>
      </tr>
      <tr>
        <td><strong>Reciclatge de nodes</strong></td>
        <td>Reutilitzar nodes DOM canviant dades</td>
        <td>Node existent canvia de "Element 45" a "Element 46"</td>
      </tr>
      <tr>
        <td><strong>Buffer</strong></td>
        <td>P√≠xels extra renderitzats abans/despr√©s del visible</td>
        <td>300px abans + 300px despr√©s</td>
      </tr>
      <tr>
        <td><strong>TrackBy</strong></td>
        <td>Funci√≥ que identifica elements √∫nicament</td>
        <td><code>trackById(i, item) => item.id</code></td>
      </tr>
      <tr>
        <td><strong>OnPush</strong></td>
        <td>Estrat√®gia de detecci√≥ nom√©s quan canvien inputs</td>
        <td>Redueix comprovacions 90%</td>
      </tr>
      <tr>
        <td><strong>Pipe pur</strong></td>
        <td>Pipe que nom√©s recalcula quan entrada canvia</td>
        <td><code></code></td>
      </tr>
      <tr>
        <td><strong>Pipe impur</strong></td>
        <td>Pipe que recalcula cada cicle</td>
        <td><code></code></td>
      </tr>
    </tbody>
  </table>

  <h4>2.17.2. Conceptes fonamentals</h4>
  <p><strong>1. Per qu√® virtualitzar?</strong></p>
  <p>Sense virtualitzaci√≥, 5.000 elements creen 20.000 nodes al DOM, consumint 500 MB i trigant 25 segons a carregar. Amb virtualitzaci√≥, nom√©s es creen 30 nodes, consumint 15 MB i carregant en 0.5 segons.</p>

  <p><strong>2. Com funciona?</strong></p>
  <p>El sistema crea un contenidor amb l'al√ßada total simulada (5.000 √ó 120px = 600.000px) per√≤ nom√©s renderitza elements visibles. Quan feu scroll, recicla nodes DOM canviant les dades en lloc de destruir i crear nous nodes.</p>

  <p><strong>3. Quan usar-la?</strong></p>
  <ul>
    <li><strong>Obligat√≤ria:</strong> > 2.000 elements</li>
    <li><strong>Molt recomanada:</strong> 500-2.000 elements</li>
    <li><strong>Recomanada:</strong> 100-500 elements</li>
    <li><strong>Opcional:</strong> &lt; 100 elements</li>
  </ul>

  <h4>2.17.3. F√≥rmules i c√†lculs</h4>
  <p><strong>Nodes al DOM sense virtualitzaci√≥:</strong></p>

  
  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Nodes = Elements √ó Nodes_per_element
Exemple: 5.000 √ó 4 = 20.000 nodes</code></pre>
  </div>
</div>


  <p><strong>Nodes al DOM amb virtualitzaci√≥:</strong></p>

  
  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Nodes = (Viewport_height / Item_height) √ó Nodes_per_element
Exemple: (600 / 120) √ó 4 = 20 nodes</code></pre>
  </div>
</div>


  <p><strong>Mem√≤ria aproximada:</strong></p>

  
  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Mem√≤ria ‚âà Nodes √ó 25KB
Sense virtual: 20.000 √ó 25KB = 500 MB
Amb virtual: 20 √ó 25KB = 0.5 MB</code></pre>
  </div>
</div>


  <p><strong>Temps de c√†rrega estimat:</strong></p>

  
  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Temps ‚âà Nodes / 200 (nodes per segon)
Sense virtual: 20.000 / 200 = 100 segons
Amb virtual: 20 / 200 = 0.1 segons</code></pre>
  </div>
</div>


  <h4>2.17.4. Checklist final de comprovaci√≥</h4>
  
  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">ABANS DE DESPLEGAR:
‚ñ° itemSize coincideix amb al√ßada CSS real?
‚ñ° Viewport t√© height definida?
‚ñ° trackBy implementat amb ID √∫nic?
‚ñ° box-sizing: border-box aplicat?
‚ñ° OnPush activat quan sigui possible?
‚ñ° Pipes s√≥n purs?
‚ñ° Mesurat rendiment amb DevTools?
‚ñ° Testat en dispositiu m√≤bil?
‚ñ° Mem√≤ria &lt; 50 MB per 1.000+ elements?
‚ñ° Scroll a 60 FPS constant?</code></pre>
  </div>
</div>


  <h4>2.17.5. Recursos addicionals</h4>
  <p><strong>Documentaci√≥ oficial:</strong></p>
  <ul>
    <li>Angular CDK Scrolling: https://material.angular.io/cdk/scrolling</li>
    <li>API Reference: Busqueu "CdkVirtualScrollViewport"</li>
  </ul>

  <p><strong>Exemples pr√†ctics:</strong></p>
  <ul>
    <li>Angular Material Table amb virtualitzaci√≥</li>
    <li>Exemples a StackBlitz: cerqueu "angular cdk virtual scroll"</li>
  </ul>

  <p><strong>Eines de mesura:</strong></p>
  <ul>
    <li>Chrome DevTools ‚Üí Performance tab</li>
    <li>Chrome DevTools ‚Üí Memory tab</li>
    <li>Lighthouse per puntuaci√≥ global</li>
  </ul>

  <h4>2.17.6. Errors freq√ºents i solucions</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Error com√∫</th>
        <th>Per qu√® passa</th>
        <th>Soluci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>"No es veu res"</td>
        <td>Viewport sense height</td>
        <td>Afegir <code>height: 600px</code></td>
      </tr>
      <tr>
        <td>"Scroll fa salts"</td>
        <td>itemSize incorrecte</td>
        <td>Igualar amb CSS</td>
      </tr>
      <tr>
        <td>"Llista no actualitza"</td>
        <td>Falta trackBy</td>
        <td>Afegir funci√≥ trackBy</td>
      </tr>
      <tr>
        <td>"Va lent igualment"</td>
        <td>Pipes impurs</td>
        <td>Canviar a pipes purs</td>
      </tr>
      <tr>
        <td>"Mem√≤ria creix"</td>
        <td>Imatges no optimitzades</td>
        <td>Lazy loading</td>
      </tr>
    </tbody>
  </table>
  
  </div>
</div>


</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- SECCI√ì 3: Compilaci√≥ i desplegament per a producci√≥           -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="section" id="Unitat4_Bloc3_Seccio3">
  <h2 id="Unitat4_Bloc3_Seccio3">3. Compilaci√≥ i desplegament per a producci√≥</h2>

  <!-- MULTIM√àDIA -->
  <!--
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  Component: Enlla√ßos multim√®dia YouTube
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

  Par√†metres:
    - unitat: n√∫mero de la unitat (1-4)
    - bloc: n√∫mero del bloc (1-4)
    - seccio: n√∫mero de la secci√≥ (1-3)

  Exemple d'√∫s:
    {% include multimedia-youtube.html unitat=1 bloc=1 seccio=1 %}

  El component busca autom√†ticament les URLs corresponents a
  site.data.multimedia i mostra els botons de v√≠deo i √†udio.
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
-->





  
  
  
  
  

  

  

  
<div class="multimedia-resources">
  <div class="multimedia-header">
    <i class="bi bi-play-circle-fill"></i>
    <span>Contingut multim√®dia d'aquesta lectura</span>
  </div>

  <div class="multimedia-buttons">
    
    <a href="https://www.youtube.com/watch?v=iHdU9Gb1jFI" target="_blank" rel="noopener noreferrer" class="multimedia-btn video-btn" title="Lectura 4.3.3 ¬∑ Compilaci√≥ i desplegament per a producci√≥">
      <i class="bi bi-youtube"></i>
      <span>Veure v√≠deo</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    

    
    <a href="https://www.youtube.com/watch?v=hn36mpx3rH8" target="_blank" rel="noopener noreferrer" class="multimedia-btn audio-btn" title="[Audio] Lectura 4.3.3 ¬∑ Compilaci√≥ i desplegament per a producci√≥">
      <i class="bi bi-mic-fill"></i>
      <span>Escoltar √†udio</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    
  </div>

  
  
</div>
  




  <!-- Component: Objectius del bloc/unitat -->



<div class="objectius-box">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-bullseye" aria-hidden="true"></i> Objectius</div>
  <div class="component-content">
    <ul>
      
        <li>Compilar l'aplicaci√≥ per a producci√≥ amb optimitzacions autom√†tiques</li>
      
        <li>Analitzar la mida del bundle i identificar components o llibreries pesades</li>
      
        <li>Configurar variables d'entorn per a diferents contextos de desplegament</li>
      
        <li>Desplegar l'aplicaci√≥ en plataformes d'allotjament est√†tic</li>
      
    </ul>
  </div>
  <!-- IMPORTANT: tamb√© es pot usar via front matter: page.objectius (array) -->
</div>



  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informaci√≥</div>
    <strong>RA4 ¬∑ Criteri 4</strong> ‚Äî Optimitza els recursos i genera un paquet llest per a publicaci√≥<br><strong>RA4 ¬∑ Criteri 5</strong> ‚Äî Verifica el funcionament global i documenta el proc√©s de publicaci√≥
    
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.1. Prerequisits</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p>Abans de comen√ßar, necessiteu:</p>
  <ul>
    <li><strong>Aplicaci√≥ Angular completa:</strong> Projecte funcional amb components, serveis i rutes</li>
    <li><strong>Git configurat:</strong> Control de versions operatiu amb repositori remot</li>
    <li><strong>Node.js i npm:</strong> Versions actualitzades per garantir compatibilitat</li>
    <li><strong>Coneixements b√†sics de terminal:</strong> Executar comandes i interpretar sortida</li>
  </ul>

  <p><strong>Verificaci√≥ r√†pida:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng version
git --version
node --version
npm --version</code></pre>
  </div>
</div>


  <p><strong>Punt d'autocomprovaci√≥:</strong> L'aplicaci√≥ ha d'arrencar amb <code>ng serve</code> sense errors i mostrar contingut funcional al navegador.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.2. Marc conceptual</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.2.1. Qu√® √©s la compilaci√≥ per a producci√≥</h4>
  <p>La compilaci√≥ per a producci√≥ √©s el proc√©s de transformar el codi font d'Angular en un paquet optimitzat, minificat i llest per desplegar en servidors reals. Aquest proc√©s aplica autom√†ticament m√∫ltiples optimitzacions que milloren el rendiment, redueixen la mida i preparen l'aplicaci√≥ per a usuaris finals.</p>

  <h4>3.2.2. Problema sense compilaci√≥ de producci√≥</h4>
  <p><strong>Situaci√≥ abans:</strong></p>

  <p>Quan desenvolupeu amb <code>ng serve</code>, Angular compila el codi en mode desenvolupament:</p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve</code></pre>
  </div>
</div>


  <p>Genera: ~15 MB de JavaScript<br>
  Temps c√†rrega: 3-5 segons<br>
  Sense optimitzacions<br>
  Amb source maps visibles</p>

  <p><strong>Problemes que genera:</strong></p>

  <p><strong>1. Mida de fitxers excessiva</strong></p>

  <p>En mode desenvolupament, Angular genera codi llegible amb noms de variables originals, comentaris i source maps. Una aplicaci√≥ t√≠pica pot ocupar 15-25 MB, quan en producci√≥ hauria d'ocupar 500 KB - 2 MB.</p>

  <p><strong>2. Rendiment sub√≤ptim</strong></p>

  <p>Sense minificaci√≥ ni tree-shaking, el navegador ha de descarregar, parsejar i executar molt m√©s codi del necessari. Aix√≤ implica:</p>
  <ul>
    <li>Temps de c√†rrega inicial: 3-8 segons</li>
    <li>Time to Interactive (TTI): 5-10 segons</li>
    <li>Puntuaci√≥ Lighthouse: 30-50/100</li>
  </ul>

  <p><strong>3. Seguretat compromesa</strong></p>

  <p>El codi de desenvolupament cont√©:</p>
  <ul>
    <li>Source maps que exposen el codi original complet</li>
    <li>Noms de variables i funcions originals</li>
    <li>Comentaris amb informaci√≥ sensible</li>
    <li>Configuracions de debug actives</li>
  </ul>

  <p><strong>4. Experi√®ncia d'usuari pobre</strong></p>

  <p>Usuaris amb connexions lentes o dispositius antics pateixen:</p>
  <ul>
    <li>Pantalles en blanc de 10-15 segons</li>
    <li>Consum de dades m√≤bils innecessari (15-25 MB vs 1-2 MB)</li>
    <li>Aplicaci√≥ lenta i pesant</li>
  </ul>

  <h4>3.2.3. Soluci√≥ amb compilaci√≥ de producci√≥</h4>
  <p><strong>Situaci√≥ despr√©s:</strong></p>

  <p>Angular ofereix la comanda <code>ng build --configuration production</code> que aplica optimitzacions autom√†tiques:</p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --configuration production
ng build --prod</code></pre>
  </div>
</div>


  <p>Genera: ~500 KB - 2 MB de JavaScript<br>
  Temps c√†rrega: 0.5-1.5 segons<br>
  Optimitzat i minificat<br>
  Sense source maps p√∫blics</p>

  <p><strong>Beneficis immediats:</strong></p>

  <ul>
    <li><strong>Reducci√≥ dr√†stica de mida:</strong> 85-95% menys (15 MB ‚Üí 1 MB)</li>
    <li><strong>C√†rrega ultrar√†pida:</strong> 80-90% m√©s r√†pid (5s ‚Üí 0.8s)</li>
    <li><strong>Millor SEO i rendiment:</strong> Lighthouse 95-100/100</li>
    <li><strong>Seguretat millorada:</strong> Codi ofuscat sense source maps</li>
    <li><strong>Experi√®ncia d'usuari √≤ptima:</strong> Aplicaci√≥ instant√†nia fins i tot en 3G</li>
  </ul>

  <h4>3.2.4. Context dins del framework</h4>
  <p>Angular CLI proporciona m√∫ltiples optimitzacions autom√†tiques en compilar per a producci√≥:</p>

  <p><strong>Optimitzacions principals:</strong></p>

  <ul>
    <li><strong>Minificaci√≥ (Uglify):</strong> Elimina espais en blanc, comentaris i escur√ßa noms de variables</li>
    <li><strong>Tree-shaking:</strong> Elimina codi no utilitzat de llibreries</li>
    <li><strong>Ahead-of-Time (AOT) Compilation:</strong> Compila plantilles durant el build, no al navegador</li>
    <li><strong>Dead Code Elimination:</strong> Elimina codi inaccessible</li>
    <li><strong>Bundle Optimization:</strong> Agrupa i optimitza fitxers de forma intel¬∑ligent</li>
    <li><strong>Compression:</strong> Genera versions gzip i brotli per a servidors</li>
  </ul>

  <h4>3.2.5. Integraci√≥ amb conceptes anteriors</h4>
  <p><strong>Relaci√≥ amb components (Unitat 2):</strong></p>
  <ul>
    <li>Components pesants incrementen la mida del bundle</li>
    <li>Lazy loading de components ajuda a reduir bundle inicial</li>
  </ul>

  <p><strong>Relaci√≥ amb serveis (Unitat 3):</strong></p>
  <ul>
    <li>Llibreries externes importades als serveis afecten mida total</li>
    <li>Tree-shaking elimina funcions no usades d'aquestes llibreries</li>
  </ul>

  <p><strong>Relaci√≥ amb rutes (Lli√ß√≥ 4.1):</strong></p>
  <ul>
    <li>Lazy loading de m√≤duls crea chunks separats optimitzats</li>
    <li>Cada m√≤dul pesat es compila al seu propi fitxer</li>
  </ul>

  <h4>3.2.6. Casos d'√∫s reals</h4>
  <p><strong>1. E-commerce amb tr√†fic internacional</strong></p>

  <p>Amazon compila per a producci√≥ amb optimitzacions extremes. Bundle inicial: &lt; 200 KB. La resta en chunks carregats sota demanda.</p>

  <p><strong>2. Aplicacions SaaS empresarials</strong></p>

  <p>Salesforce Lightning usa builds de producci√≥ amb lazy loading agressiu. M√≤duls pesats (informes, dashboards) es carreguen nom√©s quan s'usen.</p>

  <p><strong>3. Progressive Web Apps</strong></p>

  <p>Twitter Lite compila per a producci√≥ optimitzant per a xarxes 2G/3G. Bundle inicial: 600 KB complet. Carrega en &lt; 3 segons amb 3G.</p>

  <p><strong>4. Aplicacions m√≤bils h√≠brides</strong></p>

  <p>Ionic apps compilen per a producci√≥ per minimitzar l'espai ocupat. Una app t√≠pica passa de 50 MB (dev) a 15 MB (prod).</p>

  <h4>3.2.7. Comparativa t√®cnica: desenvolupament vs producci√≥</h4>
  <table>
    <thead>
      <tr>
        <th>Aspecte</th>
        <th>Desenvolupament</th>
        <th>Producci√≥</th>
        <th>Difer√®ncia</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Mida bundle</strong></td>
        <td>15-25 MB</td>
        <td>500 KB - 2 MB</td>
        <td>90-95% menys</td>
      </tr>
      <tr>
        <td><strong>Temps build</strong></td>
        <td>5-10s</td>
        <td>30-90s</td>
        <td>Build m√©s lent</td>
      </tr>
      <tr>
        <td><strong>Temps c√†rrega</strong></td>
        <td>3-8s</td>
        <td>0.5-1.5s</td>
        <td>80-90% m√©s r√†pid</td>
      </tr>
      <tr>
        <td><strong>Source maps</strong></td>
        <td>S√≠ (visibles)</td>
        <td>No (o externs)</td>
        <td>Seguretat</td>
      </tr>
      <tr>
        <td><strong>Minificaci√≥</strong></td>
        <td>No</td>
        <td>S√≠</td>
        <td>Codi ofuscat</td>
      </tr>
      <tr>
        <td><strong>AOT</strong></td>
        <td>Opcional</td>
        <td>Sempre</td>
        <td>Plantilles precompilades</td>
      </tr>
      <tr>
        <td><strong>Lighthouse</strong></td>
        <td>30-50</td>
        <td>95-100</td>
        <td>2-3√ó millor</td>
      </tr>
    </tbody>
  </table>

  <h4>3.2.8. Comparativa quantitativa de mides</h4>
  <table>
    <thead>
      <tr>
        <th>Component</th>
        <th>Desenvolupament</th>
        <th>Producci√≥</th>
        <th>Reducci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>main.js</strong></td>
        <td>8.5 MB</td>
        <td>450 KB</td>
        <td>95%</td>
      </tr>
      <tr>
        <td><strong>polyfills.js</strong></td>
        <td>2.3 MB</td>
        <td>180 KB</td>
        <td>92%</td>
      </tr>
      <tr>
        <td><strong>vendor.js</strong></td>
        <td>4.8 MB</td>
        <td>380 KB</td>
        <td>92%</td>
      </tr>
      <tr>
        <td><strong>runtime.js</strong></td>
        <td>12 KB</td>
        <td>6 KB</td>
        <td>50%</td>
      </tr>
      <tr>
        <td><strong>styles.css</strong></td>
        <td>250 KB</td>
        <td>45 KB</td>
        <td>82%</td>
      </tr>
      <tr>
        <td><strong>TOTAL</strong></td>
        <td>~16 MB</td>
        <td>~1 MB</td>
        <td>94%</td>
      </tr>
    </tbody>
  </table>

  <h4>3.2.9. Fluxos de compilaci√≥</h4>

  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">MODE DESENVOLUPAMENT (ng serve)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Codi TypeScript                      ‚îÇ
‚îÇ ‚Üì                                     ‚îÇ
‚îÇ Compilaci√≥ TypeScript ‚Üí JavaScript   ‚îÇ
‚îÇ ‚Üì                                     ‚îÇ
‚îÇ NO minificat                         ‚îÇ
‚îÇ NO tree-shaking                      ‚îÇ
‚îÇ Source maps inclu√Øts                 ‚îÇ
‚îÇ ‚Üì                                     ‚îÇ
‚îÇ Bundle: 15 MB                        ‚îÇ
‚îÇ C√†rrega: 5 segons                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
MODE PRODUCCI√ì (ng build --prod)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Codi TypeScript                      ‚îÇ
‚îÇ ‚Üì                                     ‚îÇ
‚îÇ AOT: Compila plantilles              ‚îÇ
‚îÇ ‚Üì                                     ‚îÇ
‚îÇ Tree-shaking: Elimina codi no usat   ‚îÇ
‚îÇ ‚Üì                                     ‚îÇ
‚îÇ Minificaci√≥: Uglify / Terser         ‚îÇ
‚îÇ ‚Üì                                     ‚îÇ
‚îÇ Dead code elimination                ‚îÇ
‚îÇ ‚Üì                                     ‚îÇ
‚îÇ Bundle splitting: Chunks separats    ‚îÇ
‚îÇ ‚Üì                                     ‚îÇ
‚îÇ Compressi√≥: Gzip / Brotli            ‚îÇ
‚îÇ ‚Üì                                     ‚îÇ
‚îÇ Bundle: 1 MB                         ‚îÇ
‚îÇ C√†rrega: 0.8 segons                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.3. Model mental</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.3.1. Esquema conceptual</h4>

  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">ABANS: Mode desenvolupament
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Codi Font (src/)                            ‚îÇ
‚îÇ   ‚îú‚îÄ app.component.ts        (llegible)     ‚îÇ
‚îÇ   ‚îú‚îÄ product.service.ts      (llegible)     ‚îÇ
‚îÇ   ‚îú‚îÄ styles.css              (llegible)     ‚îÇ
‚îÇ   ‚îî‚îÄ ...                                    ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ          ng serve                           ‚îÇ
‚îÇ             ‚Üì                               ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ Bundle desenvolupament (dist/)              ‚îÇ
‚îÇ   ‚îú‚îÄ main.js           8.5 MB               ‚îÇ
‚îÇ   ‚îú‚îÄ vendor.js         4.8 MB               ‚îÇ
‚îÇ   ‚îú‚îÄ polyfills.js      2.3 MB               ‚îÇ
‚îÇ   ‚îî‚îÄ styles.css        250 KB               ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ TOTAL: ~16 MB                               ‚îÇ
‚îÇ Temps c√†rrega: 5 segons                     ‚îÇ
‚îÇ Lighthouse: 35/100                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
DESPR√âS: Mode producci√≥
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Codi Font (src/)                            ‚îÇ
‚îÇ   ‚îú‚îÄ app.component.ts                       ‚îÇ
‚îÇ   ‚îú‚îÄ product.service.ts                     ‚îÇ
‚îÇ   ‚îú‚îÄ styles.css                             ‚îÇ
‚îÇ   ‚îî‚îÄ ...                                    ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ     ng build --configuration production     ‚îÇ
‚îÇ             ‚Üì                               ‚îÇ
‚îÇ  [AOT + Tree-shake + Minify + Optimize]    ‚îÇ
‚îÇ             ‚Üì                               ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ Bundle producci√≥ (dist/)                    ‚îÇ
‚îÇ   ‚îú‚îÄ main.a8f3d2b.js      450 KB (ofuscat) ‚îÇ
‚îÇ   ‚îú‚îÄ vendor.7e9c1f4.js    380 KB (ofuscat) ‚îÇ
‚îÇ   ‚îú‚îÄ polyfills.2d8a9e.js  180 KB (ofuscat) ‚îÇ
‚îÇ   ‚îî‚îÄ styles.f4e8b3a.css    45 KB           ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ TOTAL: ~1 MB (94% reducci√≥)                 ‚îÇ
‚îÇ Temps c√†rrega: 0.8 segons                   ‚îÇ
‚îÇ Lighthouse: 98/100                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre>
  </div>
</div>


  <h4>3.3.2. Flux de desplegament complet</h4>

  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">DESENVOLUPADOR
    ‚îÇ
    ‚îÇ Crea codi
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  git commit          ‚îÇ
‚îÇ  git push            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ
    ‚îÇ
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ng build --configuration production ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  Optimitzacions autom√†tiques:        ‚îÇ
‚îÇ  &lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; AOT Compilation                   ‚îÇ
‚îÇ  &lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Tree-shaking                      ‚îÇ
‚îÇ  &lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Minificaci√≥                       ‚îÇ
‚îÇ  &lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Dead code elimination             ‚îÇ
‚îÇ  &lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Hashing de fitxers                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ
    ‚îÇ Genera dist/
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Fitxers optimitzats ‚îÇ
‚îÇ  a dist/browser/     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ
    ‚îÇ Pujar a servidor
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Netlify / Vercel / Firebase     ‚îÇ
‚îÇ  GitHub Pages / AWS S3           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ
    ‚îÇ Desplegar
    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  APLICACI√ì P√öBLICA   ‚îÇ
‚îÇ  https://myapp.com   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚îÇ
    ‚îÇ Usuaris accedeixen
    ‚Üì
USUARIS FINALS
- C√†rrega r√†pida (&lt; 2s)
- Experi√®ncia fluida
- Funciona en m√≤bils</code></pre>
  </div>
</div>


  <h4>3.3.3. Analogia pr√†ctica</h4>
  <p>Penseu en la compilaci√≥ per a producci√≥ com <strong>preparar una casa per vendre</strong>:</p>

  <ul>
    <li><strong>Desenvolupament:</strong> Casa amb materials de construcci√≥, cables visibles, notes dels treballadors</li>
    <li><strong>Producci√≥:</strong> Casa neta, acabada, sense restes, llesta per habitar</li>
  </ul>

  <p><strong>Transformacions espec√≠fiques:</strong></p>

  <table>
    <thead>
      <tr>
        <th>Desenvolupament</th>
        <th>Producci√≥</th>
        <th>Analogia</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Cables visibles</td>
        <td>Cables ocults</td>
        <td>Source maps eliminats</td>
      </tr>
      <tr>
        <td>Mobles embolicats</td>
        <td>Mobles desplegats</td>
        <td>Codi minificat</td>
      </tr>
      <tr>
        <td>Habitacions buides</td>
        <td>Habitacions necess√†ries</td>
        <td>Tree-shaking</td>
      </tr>
      <tr>
        <td>Etiquetes dels mobles</td>
        <td>Sense etiquetes</td>
        <td>Noms ofuscats</td>
      </tr>
      <tr>
        <td>200 m¬≤ desordenats</td>
        <td>120 m¬≤ optimitzats</td>
        <td>Bundle redu√Øt</td>
      </tr>
    </tbody>
  </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.4. Difer√®ncies entre desenvolupament i producci√≥</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.4.1. Objectiu</h4>
  <p>Comprendre les difer√®ncies fonamentals entre els modes de desenvolupament i producci√≥ d'Angular, identificar quan usar cada mode i recon√®ixer els errors comuns que es produeixen per no compilar correctament abans de desplegar.</p>

  <h4>3.4.2. Comparativa detallada dels modes</h4>
  <p>Angular proporciona dos modes principals de compilaci√≥ amb caracter√≠stiques molt diferents:</p>

  <table>
    <thead>
      <tr>
        <th>Caracter√≠stica</th>
        <th>Desenvolupament (ng serve)</th>
        <th>Producci√≥ (ng build --prod)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Compilaci√≥ plantilles</strong></td>
        <td>JIT (navegador)</td>
        <td>AOT (build time)</td>
      </tr>
      <tr>
        <td><strong>Source maps</strong></td>
        <td>S√≠ (inline)</td>
        <td>No (o externs)</td>
      </tr>
      <tr>
        <td><strong>Minificaci√≥</strong></td>
        <td>No</td>
        <td>S√≠ (Terser)</td>
      </tr>
      <tr>
        <td><strong>Tree-shaking</strong></td>
        <td>No</td>
        <td>S√≠</td>
      </tr>
      <tr>
        <td><strong>Dead code removal</strong></td>
        <td>No</td>
        <td>S√≠</td>
      </tr>
      <tr>
        <td><strong>CSS optimization</strong></td>
        <td>No</td>
        <td>S√≠</td>
      </tr>
      <tr>
        <td><strong>Hashing fitxers</strong></td>
        <td>No</td>
        <td>S√≠ (cache busting)</td>
      </tr>
      <tr>
        <td><strong>Compression</strong></td>
        <td>No</td>
        <td>S√≠ (gzip/brotli)</td>
      </tr>
      <tr>
        <td><strong>Bundle splitting</strong></td>
        <td>B√†sic</td>
        <td>Avan√ßat</td>
      </tr>
      <tr>
        <td><strong>Lazy loading</strong></td>
        <td>Funcional</td>
        <td>Optimitzat</td>
      </tr>
    </tbody>
  </table>

  <h4>3.4.3. Impacte pr√†ctic de cada difer√®ncia</h4>
  <p><strong>1. JIT vs AOT Compilation</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  template: `&lt;div&gt;&lt;/div&gt;`
})</code></pre>
  </div>
</div>


  <p><strong>Cost JIT (desenvolupament):</strong></p>
  <ul>
    <li>Inclou el compilador d'Angular al bundle (+500 KB)</li>
    <li>Compila plantilles despr√©s de descarregar-les (temps extra)</li>
    <li>Errors de plantilla es detecten en runtime</li>
  </ul>

  <p><strong>Benefici AOT (producci√≥):</strong></p>
  <ul>
    <li>NO inclou el compilador (-500 KB)</li>
    <li>Plantilles s√≥n JavaScript pur (execuci√≥ immediata)</li>
    <li>Errors de plantilla detectats en build time</li>
  </ul>

  <p><strong>2. Source Maps</strong></p>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Error: Cannot read property &#39;name&#39; of undefined
  at ProductComponent.ngOnInit (product.component.ts:25)</code></pre>
  </div>
</div>



  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Error: Cannot read property &#39;name&#39; of undefined
  at e.n (main.f8a2d3.js:1:28492)</code></pre>
  </div>
</div>


  <p><strong>3. Minificaci√≥</strong></p>


  <div class="code-block" data-lang="javascript" role="region" aria-label="Bloc de codi javascript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVASCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-javascript">function getProductById(productId) {
  const products = this.productService.getProducts();
  const foundProduct = products.find(product =&gt; product.id === productId);
  if (foundProduct) {
    return foundProduct;
  } else {
    throw new Error(&#39;Product not found&#39;);
  }
}</code></pre>
  </div>
</div>



  <div class="code-block" data-lang="javascript" role="region" aria-label="Bloc de codi javascript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVASCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-javascript">function t(e){const t=this.n.o();const r=t.find(t=&gt;t.id===e);if(r)return r;throw new Error(&quot;Product not found&quot;)}</code></pre>
  </div>
</div>


  <p><strong>Reducci√≥:</strong> 250 l√≠nies ‚Üí 2 l√≠nies = 99% menys espai</p>

  <h4>3.4.4. Quan usar cada mode</h4>
  <table>
    <thead>
      <tr>
        <th>Situaci√≥</th>
        <th>Mode recomanat</th>
        <th>Ra√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Desenvolupant funcionalitats</td>
        <td>Desenvolupament</td>
        <td>Errors clars, source maps</td>
      </tr>
      <tr>
        <td>Provant abans de desplegar</td>
        <td>Producci√≥</td>
        <td>Detectar problemes d'optimitzaci√≥</td>
      </tr>
      <tr>
        <td>Verificant rendiment</td>
        <td>Producci√≥</td>
        <td>M√®triques reals</td>
      </tr>
      <tr>
        <td>Desplegant a staging</td>
        <td>Producci√≥</td>
        <td>Simulaci√≥ d'entorn real</td>
      </tr>
      <tr>
        <td>Desplegant a producci√≥</td>
        <td><strong>Producci√≥</strong></td>
        <td>SEMPRE optimitzat</td>
      </tr>
    </tbody>
  </table>

  <h4>3.4.5. Errors comuns per no compilar correctament</h4>
  <p><strong>1. Desplegar build de desenvolupament</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build</code></pre>
  </div>
</div>


  <p><strong>Conseq√º√®ncia:</strong></p>
  <ul>
    <li>Aplicaci√≥ lent√≠ssima per a usuaris</li>
    <li>Puntuaci√≥ SEO p√®ssima</li>
    <li>Experi√®ncia d'usuari horrible</li>
  </ul>

  <p><strong>2. No provar el build de producci√≥ localment</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve
ng build --prod</code></pre>
  </div>
</div>


  <p><strong>Conseq√º√®ncia:</strong></p>
  <ul>
    <li>Errors d'optimitzaci√≥ apareixen en producci√≥</li>
    <li>Lazy loading pot fallar</li>
    <li>Imports circulars causen problemes</li>
  </ul>

  <p><strong>3. Ignorar warnings del build</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --prod
WARNING: Exceeded maximum budget for initial bundle
WARNING: CommonJS dependency detected</code></pre>
  </div>
</div>


  <p><strong>Conseq√º√®ncia:</strong></p>
  <ul>
    <li>Bundle massa gran (&gt; 2 MB)</li>
    <li>Rendiment sub√≤ptim</li>
    <li>Problemes de tree-shaking</li>
  </ul>

  <h4>3.4.6. Verificaci√≥ de mode correcte</h4>

  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --configuration production
&lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Browser application bundle generation complete.
&lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Copying assets complete.
&lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Index html generation complete.
Initial Chunk Files   | Names         |  Raw Size | Estimated Transfer Size
main.f8a2d3c.js       | main          | 450.23 KB |               125.42 KB
polyfills.2e8d9af.js  | polyfills     | 180.45 KB |                65.21 KB
styles.a4c7e2f.css    | styles        |  45.12 KB |                 8.93 KB
                      | Initial Total |   1.02 MB |               199.56 KB</code></pre>
  </div>
</div>


  <p><strong>Clau:</strong> Fitxers amb hash = BUILD DE PRODUCCI√ì</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.5. Comanda de compilaci√≥ per a producci√≥: opcions i flags</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.5.1. Objectiu</h4>
  <p>Aprendre a utilitzar la comanda de compilaci√≥ per a producci√≥ amb les seves opcions i flags, configurar builds personalitzats per a diferents entorns (producci√≥, staging) i crear scripts npm per automatitzar el proc√©s de build.</p>

  <h4>3.5.2. Comanda b√†sica de producci√≥</h4>
  <p>La forma est√†ndard de compilar per a producci√≥:</p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --configuration production
ng build --prod</code></pre>
  </div>
</div>


  <p><strong>Sortida esperada:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">$ ng build --configuration production
&lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Browser application bundle generation complete.
&lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Copying assets complete.
&lt;i class=&quot;bi bi-check-circle-fill text-success&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Index html generation complete.
Initial Chunk Files   | Names         |  Raw Size | Estimated Transfer Size
main.a8f3d2b4c.js     | main          | 456.23 KB |               128.42 KB
polyfills.7e9c1f4.js  | polyfills     | 182.45 KB |                66.21 KB
runtime.2d8a9e5c.js   | runtime       |   6.15 KB |                 2.93 KB
styles.f4e8b3a7.css   | styles        |  48.12 KB |                10.24 KB
                      | Initial Total |   1.08 MB |               207.80 KB
Build at: 2024-03-15T10:30:45.123Z - Hash: 8f9a3d2e4c1b7f6a
Time: 45203ms</code></pre>
  </div>
</div>


  <h4>3.5.3. Flags i opcions importants</h4>
  <p><strong>1. --base-href: Configurar ruta base</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --prod --base-href /myapp/</code></pre>
  </div>
</div>


  <p><strong>Exemple pr√†ctic:</strong></p>
  <ul>
    <li>URL: <code>https://example.com/myapp/</code></li>
    <li>Sense flag: Enlla√ßos trenquen</li>
    <li>Amb flag: Tot funciona</li>
  </ul>

  <p><strong>2. --output-path: Canviar directori de sortida</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --prod --output-path=build</code></pre>
  </div>
</div>


  <p><strong>3. --source-map: Generar source maps</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --prod --source-map=true
ng build --prod --source-map=false</code></pre>
  </div>
</div>


  <p><strong>Consideracions:</strong></p>
  <ul>
    <li><strong>Amb source maps:</strong> M√©s f√†cil debugar, per√≤ exposa codi</li>
    <li><strong>Sense source maps:</strong> Seguretat, per√≤ debug dif√≠cil</li>
  </ul>

  <p><strong>4. --optimization: Controlar optimitzacions</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --prod --optimization=false
ng build --prod --optimization={
  &quot;scripts&quot;: true,
  &quot;styles&quot;: {
    &quot;minify&quot;: true,
    &quot;inlineCritical&quot;: true
  },
  &quot;fonts&quot;: true
}</code></pre>
  </div>
</div>


  <p><strong>5. --build-optimizer: Tree-shaking avan√ßat</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --prod --build-optimizer=true
ng build --prod --build-optimizer=false</code></pre>
  </div>
</div>


  <h4>3.5.4. Taula completa de flags</h4>
  <table>
    <thead>
      <tr>
        <th>Flag</th>
        <th>Valor per defecte</th>
        <th>Descripci√≥</th>
        <th>Recomanaci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>--configuration</code></td>
        <td>development</td>
        <td>Configuraci√≥ (dev/prod)</td>
        <td>Sempre <code>production</code></td>
      </tr>
      <tr>
        <td><code>--base-href</code></td>
        <td>/</td>
        <td>Ruta base HTML</td>
        <td>Ajustar si subfolder</td>
      </tr>
      <tr>
        <td><code>--output-path</code></td>
        <td>dist/project/</td>
        <td>Directori sortida</td>
        <td>Deixar per defecte</td>
      </tr>
      <tr>
        <td><code>--source-map</code></td>
        <td>false (prod)</td>
        <td>Generar source maps</td>
        <td><code>false</code> per seguretat</td>
      </tr>
      <tr>
        <td><code>--optimization</code></td>
        <td>true (prod)</td>
        <td>Optimitzar bundle</td>
        <td>Sempre <code>true</code></td>
      </tr>
      <tr>
        <td><code>--build-optimizer</code></td>
        <td>true (prod)</td>
        <td>Tree-shaking avan√ßat</td>
        <td>Sempre <code>true</code></td>
      </tr>
      <tr>
        <td><code>--vendor-chunk</code></td>
        <td>true</td>
        <td>Separar llibreries</td>
        <td>Sempre <code>true</code></td>
      </tr>
      <tr>
        <td><code>--aot</code></td>
        <td>true (prod)</td>
        <td>AOT compilation</td>
        <td>Sempre <code>true</code></td>
      </tr>
      <tr>
        <td><code>--extract-licenses</code></td>
        <td>true (prod)</td>
        <td>Extreure llic√®ncies</td>
        <td>Sempre <code>true</code></td>
      </tr>
    </tbody>
  </table>

  <h4>3.5.5. Configuracions personalitzades</h4>
  <p>Podeu definir configuracions personalitzades a <code>angular.json</code>:</p>


  <div class="code-block" data-lang="json" role="region" aria-label="Bloc de codi json">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JSON</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-json">{
  &quot;projects&quot;: {
    &quot;my-app&quot;: {
      &quot;architect&quot;: {
        &quot;build&quot;: {
          &quot;configurations&quot;: {
            &quot;production&quot;: {
              &quot;optimization&quot;: true,
              &quot;outputHashing&quot;: &quot;all&quot;,
              &quot;sourceMap&quot;: false,
              &quot;namedChunks&quot;: false,
              &quot;aot&quot;: true,
              &quot;extractLicenses&quot;: true,
              &quot;vendorChunk&quot;: true,
              &quot;buildOptimizer&quot;: true,
              &quot;budgets&quot;: [
                {
                  &quot;type&quot;: &quot;initial&quot;,
                  &quot;maximumWarning&quot;: &quot;2mb&quot;,
                  &quot;maximumError&quot;: &quot;5mb&quot;
                }
              ]
            },
            &quot;staging&quot;: {
              &quot;optimization&quot;: true,
              &quot;sourceMap&quot;: true,
              &quot;namedChunks&quot;: true
            }
          }
        }
      }
    }
  }
}</code></pre>
  </div>
</div>


  <p><strong>√ös:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --configuration production
ng build --configuration staging</code></pre>
  </div>
</div>


  <h4>3.5.6. Errors comuns i solucions</h4>
  <table>
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa</th>
        <th>Soluci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code>Exceeded maximum budget</code></td>
        <td>Bundle massa gran</td>
        <td>Revisar imports pesats</td>
      </tr>
      <tr>
        <td><code>Module not found</code></td>
        <td>Lazy loading trencat</td>
        <td>Verificar rutes</td>
      </tr>
      <tr>
        <td><code>Cannot find module</code></td>
        <td>Paths incorrectes</td>
        <td>Revisar tsconfig paths</td>
      </tr>
      <tr>
        <td><code>Minification failed</code></td>
        <td>Sintaxi ES6+ no suportada</td>
        <td>Actualitzar target</td>
      </tr>
    </tbody>
  </table>

  <h4>3.5.7. Scripts npm recomanats</h4>
  <p>Afegiu al <code>package.json</code>:</p>


  <div class="code-block" data-lang="json" role="region" aria-label="Bloc de codi json">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JSON</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;ng serve&quot;,
    &quot;build&quot;: &quot;ng build --configuration production&quot;,
    &quot;build:staging&quot;: &quot;ng build --configuration staging&quot;,
    &quot;build:dev&quot;: &quot;ng build&quot;,
    &quot;serve:prod&quot;: &quot;ng build --prod &amp;&amp; http-server dist/my-app/browser -p 8080&quot;
  }
}</code></pre>
  </div>
</div>


  <p><strong>√ös:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm run build
npm run build:staging
npm run serve:prod</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.6. Optimitzacions autom√†tiques: minificaci√≥, tree-shaking, uglify</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.6.1. Objectiu</h4>
  <p>Entendre les optimitzacions autom√†tiques que Angular aplica durant la compilaci√≥ per a producci√≥ (minificaci√≥, tree-shaking, AOT, uglify) i com aquestes transformacions redueixen dr√†sticament la mida del bundle i milloren el rendiment.</p>

  <h4>3.6.2. Optimitzacions que Angular aplica autom√†ticament</h4>
  <p>Quan executeu <code>ng build --prod</code>, Angular aplica m√∫ltiples optimitzacions sense que hagueu de configurar res:</p>

  <p><strong>1. Minificaci√≥ amb Terser</strong></p>

  <p>Elimina espais en blanc, comentaris, escur√ßa noms de variables i funcions:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class ProductService {
  private products: Product[] = [];
  constructor(private http: HttpClient) {}
  getProducts(): Observable&lt;Product[]&gt; {
    return this.http.get&lt;Product[]&gt;(&#39;/api/products&#39;);
  }
  getProductById(id: number): Observable&lt;Product&gt; {
    return this.http.get&lt;Product&gt;(`/api/products/${id}`);
  }
}</code></pre>
  </div>
</div>



  <div class="code-block" data-lang="javascript" role="region" aria-label="Bloc de codi javascript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVASCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-javascript">class t{constructor(t){this.t=t}e(){return this.t.get(&quot;/api/products&quot;)}n(t){return this.t.get(`/api/products/${t}`)}}</code></pre>
  </div>
</div>


  <p><strong>Reducci√≥:</strong> 15 l√≠nies ‚Üí 1 l√≠nia = 95% menys</p>

  <p><strong>2. Tree-shaking</strong></p>

  <p>Elimina codi que no s'usa mai:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import * as _ from &#39;lodash&#39;;
const result = _.map([1, 2, 3], n =&gt; n * 2);</code></pre>
  </div>
</div>


  <p>Despr√©s de tree-shaking (producci√≥): Nom√©s inclou la funci√≥ map (2 KB). Les altres 699 funcions s'eliminen.</p>

  <p><strong>Reducci√≥:</strong> 700 KB ‚Üí 2 KB = 99.7% menys</p>

  <p><strong>3. Dead Code Elimination</strong></p>

  <p>Elimina codi inaccessible:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">if (false) {
  console.log(&#39;Aquest codi mai s\&#39;executa&#39;);
}
const DEBUG = false;
if (DEBUG) {
}</code></pre>
  </div>
</div>


  <p>Despr√©s de compilar per a producci√≥, aquestes branques desapareixen completament del bundle.</p>

  <p><strong>4. AOT (Ahead-of-Time) Compilation</strong></p>

  <p>Compila plantilles durant el build en lloc de runtime:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  template: `
    &lt;div *ngFor=&quot;let item of items&quot;&gt;
      
    &lt;/div&gt;
  `
})</code></pre>
  </div>
</div>


  <p><strong>Beneficis AOT:</strong></p>
  <ul>
    <li>No cal incloure el compilador (-500 KB)</li>
    <li>Detecci√≥ d'errors en build time</li>
    <li>Renderitzat 3-5√ó m√©s r√†pid</li>
  </ul>

  <p><strong>5. Uglification / Obfuscation</strong></p>

  <p>Fa el codi dif√≠cil de llegir per humans:</p>


  <div class="code-block" data-lang="javascript" role="region" aria-label="Bloc de codi javascript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVASCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-javascript">function calculateTotalPrice(items, taxRate) {
  const subtotal = items.reduce((sum, item) =&gt; sum + item.price, 0);
  const tax = subtotal * taxRate;
  const total = subtotal + tax;
  return total;
}</code></pre>
  </div>
</div>



  <div class="code-block" data-lang="javascript" role="region" aria-label="Bloc de codi javascript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVASCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-javascript">function t(e,t){const n=e.reduce((e,t)=&gt;e+t.price,0);return n+n*t}</code></pre>
  </div>
</div>


  <p><strong>Benefici:</strong> Protecci√≥ b√†sica de propietat intel¬∑lectual</p>

  <h4>3.6.3. Taula comparativa d'optimitzacions</h4>
  <table>
    <thead>
      <tr>
        <th>Optimitzaci√≥</th>
        <th>Qu√® fa</th>
        <th>Reducci√≥ t√≠pica</th>
        <th>Benefici principal</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Minificaci√≥</strong></td>
        <td>Elimina espais, comentaris, escur√ßa noms</td>
        <td>40-50%</td>
        <td>Menys bytes descarregats</td>
      </tr>
      <tr>
        <td><strong>Tree-shaking</strong></td>
        <td>Elimina codi no usat</td>
        <td>60-90%</td>
        <td>Llibreries m√©s petites</td>
      </tr>
      <tr>
        <td><strong>Dead code</strong></td>
        <td>Elimina branques inaccessibles</td>
        <td>5-15%</td>
        <td>Codi m√©s net</td>
      </tr>
      <tr>
        <td><strong>AOT</strong></td>
        <td>Precompila plantilles</td>
        <td>30-40%</td>
        <td>No cal compilador</td>
      </tr>
      <tr>
        <td><strong>Uglify</strong></td>
        <td>Ofusca codi</td>
        <td>10-20%</td>
        <td>Seguretat + compressi√≥</td>
      </tr>
      <tr>
        <td><strong>CSS optimize</strong></td>
        <td>Minifica i elimina CSS no usat</td>
        <td>50-70%</td>
        <td>Styles m√≠nims</td>
      </tr>
    </tbody>
  </table>

  <h4>3.6.4. Exemples pr√†ctics</h4>
  <p><strong>Exemple 1: Llibreria amb tree-shaking</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { format } from &#39;date-fns&#39;;
const formattedDate = format(new Date(), &#39;dd/MM/yyyy&#39;);</code></pre>
  </div>
</div>


  <p><strong>Sense tree-shaking (desenvolupament):</strong> Inclou tota la llibreria date-fns: 280 KB. Nom√©s usa 1 funci√≥.</p>

  <p><strong>Amb tree-shaking (producci√≥):</strong> Inclou nom√©s la funci√≥ <code>format</code>: 8 KB. Reducci√≥: 97%</p>

  <p><strong>Exemple 2: Angular Material amb tree-shaking</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { MatButtonModule, MatCardModule, MatInputModule, MatTableModule } from &#39;@angular/material&#39;;
import { MatButtonModule } from &#39;@angular/material/button&#39;;
import { MatCardModule } from &#39;@angular/material/card&#39;;</code></pre>
  </div>
</div>


  <p><strong>Reducci√≥ amb imports espec√≠fics:</strong> 1.2 MB ‚Üí 45 KB = 96% menys</p>

  <h4>3.6.5. Verificar optimitzacions aplicades</h4>
  <p>Podeu comprovar que les optimitzacions s'han aplicat:</p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --prod
ls -lh dist/my-app/browser/</code></pre>
  </div>
</div>


  <p><strong>Sortida esperada:</strong></p>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">-rw-r--r--  1 user  staff   128K  main.a8f3d2b.js
-rw-r--r--  1 user  staff    66K  polyfills.7e9c1f.js
-rw-r--r--  1 user  staff    10K  styles.f4e8b3a.css
-rw-r--r--  1 user  staff     3K  runtime.2d8a9e.js</code></pre>
  </div>
</div>


  <p><strong>Sense optimitzacions (desenvolupament):</strong></p>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">-rw-r--r--  1 user  staff   8.5M  main.js
-rw-r--r--  1 user  staff   4.8M  vendor.js
-rw-r--r--  1 user  staff   250K  styles.css
-rw-r--r--  1 user  staff    12K  runtime.js</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.7. An√†lisi de la mida del bundle: identificar components pesats</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.7.1. Objectiu</h4>
  <p>Aprendre a analitzar la mida del bundle per identificar components o llibreries pesades, utilitzar eines com Webpack Bundle Analyzer i Source Map Explorer, i interpretar els resultats per optimitzar la mida del paquet final.</p>

  <h4>3.7.2. Per qu√® √©s important analitzar el bundle</h4>
  <p>Saber QU√à ocupa espai al bundle us permet:</p>

  <ul>
    <li><strong>Identificar llibreries pesades</strong> que es poden reempla√ßar</li>
    <li><strong>Detectar imports innecessaris</strong> que incrementen mida</li>
    <li><strong>Optimitzar lazy loading</strong> per reduir bundle inicial</li>
    <li><strong>Complir budgets</strong> de mida establerts</li>
  </ul>

  <h4>3.7.3. Webpack Bundle Analyzer</h4>
  <p>L'eina m√©s popular per analitzar bundles d'Angular:</p>

  <p><strong>Instal¬∑laci√≥:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm install --save-dev webpack-bundle-analyzer</code></pre>
  </div>
</div>


  <p><strong>Configuraci√≥ al package.json:</strong></p>


  <div class="code-block" data-lang="json" role="region" aria-label="Bloc de codi json">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JSON</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-json">{
  &quot;scripts&quot;: {
    &quot;build:stats&quot;: &quot;ng build --stats-json&quot;,
    &quot;analyze&quot;: &quot;webpack-bundle-analyzer dist/my-app/browser/stats.json&quot;
  }
}</code></pre>
  </div>
</div>


  <p><strong>√ös:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm run build:stats
npm run analyze</code></pre>
  </div>
</div>


  <p><strong>Sortida visual:</strong> El Bundle Analyzer mostra un mapa de calor (treemap) on:</p>
  <ul>
    <li><strong>Caixes grans</strong> = Components/llibreries que ocupen molt</li>
    <li><strong>Colors c√†lids</strong> = M√©s espai ocupat</li>
    <li><strong>Clicable</strong> = Navegar per l'arbre de depend√®ncies</li>
  </ul>

  <h4>3.7.4. Interpretar els resultats</h4>
  <p><strong>Exemple de sortida:</strong></p>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">BUNDLE SIZE BREAKDOWN
‚îú‚îÄ main.js (450 KB)
‚îÇ  ‚îú‚îÄ @angular/core (180 KB)
‚îÇ  ‚îú‚îÄ @angular/common (95 KB)
‚îÇ  ‚îú‚îÄ lodash (120 KB)
‚îÇ  ‚îî‚îÄ app components (55 KB)
‚îÇ
‚îú‚îÄ vendor.js (380 KB)
‚îÇ  ‚îú‚îÄ rxjs (180 KB)
‚îÇ  ‚îú‚îÄ zone.js (95 KB)
‚îÇ  ‚îî‚îÄ tslib (105 KB)
‚îÇ
‚îî‚îÄ polyfills.js (180 KB)
   ‚îî‚îÄ core-js (180 KB)</code></pre>
  </div>
</div>


  <p><strong>An√†lisi:</strong></p>
  <ul>
    <li><strong>Lodash ocupa 120 KB:</strong> Es pot reempla√ßar amb lodash-es (tree-shakeable)</li>
    <li><strong>RxJS ocupa 180 KB:</strong> Verificar si s'usen nom√©s operadors necessaris</li>
    <li><strong>Angular core √©s inevitable:</strong> 180 KB √©s normal</li>
  </ul>

  <h4>3.7.5. Identificar problemes comuns</h4>
  <p><strong>1. Imports complets de llibreries</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import * as moment from &#39;moment&#39;;
import { format } from &#39;date-fns&#39;;</code></pre>
  </div>
</div>


  <p><strong>Impacte:</strong> -685 KB (98% reducci√≥)</p>

  <p><strong>2. M√∫ltiples versions de la mateixa llibreria</strong></p>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">BUNDLE:
‚îú‚îÄ rxjs@7.5.0 (180 KB)
‚îî‚îÄ rxjs@6.6.0 (180 KB)
TOTAL: 360 KB (hauria de ser 180 KB)</code></pre>
  </div>
</div>


  <p><strong>Soluci√≥:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm dedupe</code></pre>
  </div>
</div>


  <p><strong>3. Llibreries CSS pesades</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import &#39;bootstrap/dist/css/bootstrap.min.css&#39;;
@import &#39;bootstrap/scss/utilities&#39;;</code></pre>
  </div>
</div>


  <p><strong>Impacte:</strong> -170 KB (85% reducci√≥)</p>

  <p><strong>4. Imatges no optimitzades</strong></p>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">assets/
‚îú‚îÄ banner.png (2.5 MB)
‚îú‚îÄ logo.png (800 KB)
‚îî‚îÄ icon.png (150 KB)</code></pre>
  </div>
</div>


  <p><strong>Soluci√≥:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">convert banner.png -quality 80 -resize 1920x banner-opt.jpg</code></pre>
  </div>
</div>


  <h4>3.7.6. Eines d'an√†lisi alternatives</h4>
  <p><strong>1. Source Map Explorer</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm install --save-dev source-map-explorer
{
  &quot;scripts&quot;: {
    &quot;analyze:source&quot;: &quot;source-map-explorer dist/**/*.js&quot;
  }
}
npm run analyze:source</code></pre>
  </div>
</div>


  <p><strong>2. Angular CLI Bundle Budgets</strong></p>

  <p>Configurar l√≠mits autom√†tics a <code>angular.json</code>:</p>


  <div class="code-block" data-lang="json" role="region" aria-label="Bloc de codi json">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JSON</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-json">{
  &quot;budgets&quot;: [
    {
      &quot;type&quot;: &quot;initial&quot;,
      &quot;maximumWarning&quot;: &quot;1mb&quot;,
      &quot;maximumError&quot;: &quot;2mb&quot;
    },
    {
      &quot;type&quot;: &quot;anyComponentStyle&quot;,
      &quot;maximumWarning&quot;: &quot;6kb&quot;,
      &quot;maximumError&quot;: &quot;10kb&quot;
    }
  ]
}</code></pre>
  </div>
</div>


  <p>Si el bundle supera els l√≠mits:</p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --prod
Warning: bundle initial exceeds maximum budget.
Budget: 1.00 MB was not met by 127.45 KB with a total of 1.12 MB.</code></pre>
  </div>
</div>


  <h4>3.7.7. Taula d'an√†lisi t√≠pica</h4>
  <table>
    <thead>
      <tr>
        <th>Component</th>
        <th>Mida t√≠pica</th>
        <th>Considerar problema si &gt;</th>
        <th>Soluci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>@angular/core</strong></td>
        <td>150-200 KB</td>
        <td>-</td>
        <td>Inevitable</td>
      </tr>
      <tr>
        <td><strong>RxJS</strong></td>
        <td>150-180 KB</td>
        <td>250 KB</td>
        <td>Imports espec√≠fics</td>
      </tr>
      <tr>
        <td><strong>Lodash</strong></td>
        <td>0-15 KB</td>
        <td>50 KB</td>
        <td>Usar lodash-es</td>
      </tr>
      <tr>
        <td><strong>Moment.js</strong></td>
        <td>0 KB</td>
        <td>200 KB</td>
        <td>Reempla√ßar amb date-fns</td>
      </tr>
      <tr>
        <td><strong>Bootstrap CSS</strong></td>
        <td>0-30 KB</td>
        <td>150 KB</td>
        <td>Imports parcials</td>
      </tr>
      <tr>
        <td><strong>App components</strong></td>
        <td>50-150 KB</td>
        <td>300 KB</td>
        <td>Lazy loading</td>
      </tr>
      <tr>
        <td><strong>TOTAL bundle</strong></td>
        <td>500 KB - 1.5 MB</td>
        <td>3 MB</td>
        <td>Revisar tot</td>
      </tr>
    </tbody>
  </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.8. Estrat√®gies per reduir mida: imports espec√≠fics, llibreries alternatives</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.8.1. Objectiu</h4>
  <p>Dominar estrat√®gies avan√ßades per reduir la mida del bundle: utilitzar imports espec√≠fics en lloc de m√≤duls complets, reempla√ßar llibreries pesades amb alternatives lleugeres, optimitzar imatges i assets, i aplicar lazy loading agressiu per minimitzar el bundle inicial.</p>

  <h4>3.8.2. Estrat√®gia 1: Imports espec√≠fics (path imports)</h4>
  <p>En lloc d'importar m√≤duls complets, importeu nom√©s el necessari:</p>

  <p><strong>Exemple amb Lodash:</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import _ from &#39;lodash&#39;;
const result = _.map([1, 2, 3], n =&gt; n * 2);
import map from &#39;lodash/map&#39;;
const result = map([1, 2, 3], n =&gt; n * 2);
import { map } from &#39;lodash-es&#39;;
const result = map([1, 2, 3], n =&gt; n * 2);</code></pre>
  </div>
</div>


  <p><strong>Impacte:</strong> 700 KB ‚Üí 2 KB = 99.7% reducci√≥</p>

  <h4>3.8.3. Estrat√®gia 2: Reempla√ßar llibreries pesades</h4>
  <table>
    <thead>
      <tr>
        <th>Llibreria pesada</th>
        <th>Mida</th>
        <th>Alternativa lleugera</th>
        <th>Mida</th>
        <th>Reducci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Moment.js</strong></td>
        <td>290 KB</td>
        <td>date-fns</td>
        <td>15 KB</td>
        <td>95%</td>
      </tr>
      <tr>
        <td><strong>Lodash</strong></td>
        <td>700 KB</td>
        <td>lodash-es</td>
        <td>2-50 KB</td>
        <td>93-99%</td>
      </tr>
      <tr>
        <td><strong>Axios</strong></td>
        <td>45 KB</td>
        <td>Angular HttpClient</td>
        <td>0 KB</td>
        <td>100%</td>
      </tr>
      <tr>
        <td><strong>jQuery</strong></td>
        <td>280 KB</td>
        <td>JavaScript natiu</td>
        <td>0 KB</td>
        <td>100%</td>
      </tr>
      <tr>
        <td><strong>Bootstrap</strong></td>
        <td>200 KB</td>
        <td>Tailwind + purge</td>
        <td>10-30 KB</td>
        <td>85-95%</td>
      </tr>
    </tbody>
  </table>

  <p><strong>Exemple: Reempla√ßar Moment.js amb date-fns</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import * as moment from &#39;moment&#39;;
formatDate(date: Date): string {
  return moment(date).format(&#39;DD/MM/YYYY&#39;);
}
addDays(date: Date, days: number): Date {
  return moment(date).add(days, &#39;days&#39;).toDate();
}</code></pre>
  </div>
</div>



  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { format, addDays } from &#39;date-fns&#39;;
formatDate(date: Date): string {
  return format(date, &#39;dd/MM/yyyy&#39;);
}
addDaysToDate(date: Date, days: number): Date {
  return addDays(date, days);
}</code></pre>
  </div>
</div>


  <p><strong>Benefici:</strong> -275 KB (95% reducci√≥)</p>

  <h4>3.8.4. Estrat√®gia 3: Lazy loading agressiu</h4>
  <p>Mou funcionalitats pesades a m√≤duls carregats sota demanda:</p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const routes: Routes = [
  {
    path: &#39;admin&#39;,
    loadChildren: () =&gt; import(&#39;./admin/admin.module&#39;).then(m =&gt; m.AdminModule)
  }
];</code></pre>
  </div>
</div>


  <p><strong>Impacte:</strong></p>
  <ul>
    <li>Bundle inicial: -200 KB</li>
    <li>Bundle admin (carregat sota demanda): +200 KB</li>
    <li>Temps c√†rrega inicial: 40% m√©s r√†pid</li>
  </ul>

  <h4>3.8.5. Estrat√®gia 4: Eliminar imports no utilitzats</h4>

  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit, OnDestroy, ViewChild, ElementRef } from &#39;@angular/core&#39;;
import { HttpClient, HttpHeaders, HttpParams } from &#39;@angular/common/http&#39;;
import { Observable, Subject, BehaviorSubject, ReplaySubject, interval } from &#39;rxjs&#39;;
import { map, filter, take, debounceTime, distinctUntilChanged, switchMap } from &#39;rxjs/operators&#39;;
import { Component, OnInit } from &#39;@angular/core&#39;;
import { HttpClient } from &#39;@angular/common/http&#39;;
import { Observable } from &#39;rxjs&#39;;
import { map } from &#39;rxjs/operators&#39;;</code></pre>
  </div>
</div>


  <h4>3.8.6. Estrat√®gia 5: Optimitzar imatges i assets</h4>
  <p><strong>1. Comprimir imatges:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">convert original.png -quality 80 -resize 1200x optimized.jpg</code></pre>
  </div>
</div>


  <p><strong>2. Usar WebP amb fallback:</strong></p>


  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;picture&gt;
&lt;source srcset=&quot;image.webp&quot; type=&quot;image/webp&quot;&gt;
&lt;source srcset=&quot;image.jpg&quot; type=&quot;image/jpeg&quot;&gt;
&lt;img src=&quot;image.jpg&quot; alt=&quot;Product&quot;&gt;
&lt;/picture&gt;</code></pre>
  </div>
</div>


  <p><strong>3. Lazy loading d'imatges:</strong></p>


  <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;img src=&quot;product.jpg&quot; alt=&quot;Product&quot; loading=&quot;lazy&quot;&gt;</code></pre>
  </div>
</div>


  <h4>3.8.7. Checklist d'optimitzaci√≥ de mida</h4>
  <ul>
    <li>Reempla√ßat Moment.js amb date-fns (-275 KB)</li>
    <li>Lodash ‚Üí lodash-es amb imports espec√≠fics (-650 KB)</li>
    <li>Imatges comprimides i convertides a WebP (-1-3 MB)</li>
    <li>Lazy loading per m√≤duls pesats (-200-500 KB)</li>
    <li>Eliminats imports no utilitzats (-50-100 KB)</li>
    <li>Angular Material: imports espec√≠fics (-200 KB)</li>
    <li>Bootstrap: nom√©s utilities necessaris (-170 KB)</li>
  </ul>

  <p><strong>Reducci√≥ total t√≠pica:</strong> 2-4 MB ‚Üí 500 KB - 1 MB</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.9. Variables d'entorn: configuraci√≥ per a producci√≥</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.9.1. Objectiu</h4>
  <p>Aprendre a utilitzar variables d'entorn per configurar diferents comportaments segons l'entorn de desplegament (desenvolupament, staging, producci√≥), gestionar configuracions sensibles de manera segura i implementar feature flags per activar/desactivar funcionalitats.</p>

  <h4>3.9.2. Per qu√® necessitem variables d'entorn</h4>
  <p>Les aplicacions necessiten configuracions diferents segons l'entorn:</p>

  <table>
    <thead>
      <tr>
        <th>Configuraci√≥</th>
        <th>Desenvolupament</th>
        <th>Staging</th>
        <th>Producci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>API URL</strong></td>
        <td>http://localhost:3000</td>
        <td>https://staging-api.myapp.com</td>
        <td>https://api.myapp.com</td>
      </tr>
      <tr>
        <td><strong>Debug</strong></td>
        <td>true</td>
        <td>true</td>
        <td>false</td>
      </tr>
      <tr>
        <td><strong>Analytics</strong></td>
        <td>desactivat</td>
        <td>activat</td>
        <td>activat</td>
      </tr>
      <tr>
        <td><strong>Source maps</strong></td>
        <td>activat</td>
        <td>activat</td>
        <td>desactivat</td>
      </tr>
      <tr>
        <td><strong>Logs</strong></td>
        <td>verbose</td>
        <td>normal</td>
        <td>errors nom√©s</td>
      </tr>
    </tbody>
  </table>

  <h4>3.9.3. Estructura de fitxers d'entorn</h4>
  <p>Angular proporciona <code>environment.ts</code> i <code>environment.prod.ts</code>:</p>


  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">src/
‚îú‚îÄ‚îÄ environments/
‚îÇ   ‚îú‚îÄ‚îÄ environment.ts
‚îÇ   ‚îú‚îÄ‚îÄ environment.staging.ts
‚îÇ   ‚îî‚îÄ‚îÄ environment.prod.ts</code></pre>
  </div>
</div>


  <p><strong>environment.ts (desenvolupament):</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export const environment = {
  production: false,
  apiUrl: &#39;http://localhost:3000/api&#39;,
  debug: true,
  enableAnalytics: false,
  enableSourceMaps: true,
  logLevel: &#39;debug&#39;,
  version: &#39;1.0.0-dev&#39;,
  features: {
    newDashboard: true,
    betaFeatures: true
  }
};</code></pre>
  </div>
</div>


  <p><strong>environment.prod.ts (producci√≥):</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export const environment = {
  production: true,
  apiUrl: &#39;https://api.myapp.com&#39;,
  debug: false,
  enableAnalytics: true,
  enableSourceMaps: false,
  logLevel: &#39;error&#39;,
  version: &#39;1.0.0&#39;,
  features: {
    newDashboard: true,
    betaFeatures: false
  }
};</code></pre>
  </div>
</div>


  <h4>3.9.4. Usar variables d'entorn al codi</h4>

  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Injectable } from &#39;@angular/core&#39;;
import { HttpClient } from &#39;@angular/common/http&#39;;
import { environment } from &#39;../environments/environment&#39;;
@Injectable({
  providedIn: &#39;root&#39;
})
export class ProductService {
  private apiUrl = environment.apiUrl;
  constructor(private http: HttpClient) {
    if (environment.debug) {
      console.log(&#39;ProductService initialized&#39;);
      console.log(&#39;API URL:&#39;, this.apiUrl);
    }
  }
  getProducts() {
    return this.http.get(`${this.apiUrl}/products`);
  }
}</code></pre>
  </div>
</div>


  <h4>3.9.5. Configurar m√∫ltiples entorns a angular.json</h4>

  <div class="code-block" data-lang="json" role="region" aria-label="Bloc de codi json">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JSON</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-json">{
  &quot;projects&quot;: {
    &quot;my-app&quot;: {
      &quot;architect&quot;: {
        &quot;build&quot;: {
          &quot;configurations&quot;: {
            &quot;production&quot;: {
              &quot;fileReplacements&quot;: [
                {
                  &quot;replace&quot;: &quot;src/environments/environment.ts&quot;,
                  &quot;with&quot;: &quot;src/environments/environment.prod.ts&quot;
                }
              ]
            },
            &quot;staging&quot;: {
              &quot;fileReplacements&quot;: [
                {
                  &quot;replace&quot;: &quot;src/environments/environment.ts&quot;,
                  &quot;with&quot;: &quot;src/environments/environment.staging.ts&quot;
                }
              ]
            }
          }
        }
      }
    }
  }
}</code></pre>
  </div>
</div>


  <p><strong>√ös:</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build
ng build --configuration production
ng build --configuration staging</code></pre>
  </div>
</div>


  <h4>3.9.6. Bones pr√†ctiques amb variables d'entorn</h4>
  <p><strong>1. Mai cometre secrets al repositori</strong></p>

  <p><strong>2. Validar configuraci√≥ en runtime</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class AppComponent implements OnInit {
  ngOnInit() {
    if (!environment.apiUrl) {
      throw new Error(&#39;API URL not configured!&#39;);
    }
    if (environment.production &amp;&amp; environment.debug) {
      console.warn(&#39;Warning: Debug mode active in production!&#39;);
    }
  }
}</code></pre>
  </div>
</div>


  <p><strong>3. Feature flags per funcionalitats noves</strong></p>


  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })
export class FeatureGuard implements CanActivate {
  canActivate(): boolean {
    if (!environment.features.newDashboard) {
      return false;
    }
    return true;
  }
}
{
  path: &#39;dashboard-new&#39;,
  component: NewDashboardComponent,
  canActivate: [FeatureGuard]
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.10. Opcions de desplegament: servidors est√†tics, plataformes cloud</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.10.1. Objectiu</h4>
  <p>Con√®ixer les principals plataformes de desplegament per a aplicacions Angular (Netlify, Vercel, Firebase, GitHub Pages, AWS S3), entendre com configurar i desplegar l'aplicaci√≥ a cada plataforma, i comparar les seves caracter√≠stiques per triar la m√©s adequada.</p>

  <h4>3.10.2. Plataformes populars de desplegament</h4>
  <p>Angular genera una SPA (Single Page Application) est√†tica, compatible amb qualsevol servidor de fitxers est√†tics:</p>

  <table>
    <thead>
      <tr>
        <th>Plataforma</th>
        <th>Dificultat</th>
        <th>Gratu√Øt</th>
        <th>SSL</th>
        <th>CI/CD</th>
        <th>Recomanaci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Netlify</strong></td>
        <td>Molt f√†cil</td>
        <td>S√≠</td>
        <td>S√≠</td>
        <td>S√≠</td>
        <td><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i></td>
      </tr>
      <tr>
        <td><strong>Vercel</strong></td>
        <td>Molt f√†cil</td>
        <td>S√≠</td>
        <td>S√≠</td>
        <td>S√≠</td>
        <td><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i></td>
      </tr>
      <tr>
        <td><strong>Firebase Hosting</strong></td>
        <td>F√†cil</td>
        <td>S√≠</td>
        <td>S√≠</td>
        <td>S√≠</td>
        <td><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i></td>
      </tr>
      <tr>
        <td><strong>GitHub Pages</strong></td>
        <td>F√†cil</td>
        <td>S√≠</td>
        <td>S√≠</td>
        <td>No natiu</td>
        <td><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i></td>
      </tr>
      <tr>
        <td><strong>AWS S3 + CloudFront</strong></td>
        <td>Mitj√†</td>
        <td>No</td>
        <td>S√≠</td>
        <td>Manual</td>
        <td><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i></td>
      </tr>
      <tr>
        <td><strong>Azure Static Web Apps</strong></td>
        <td>Mitj√†</td>
        <td>S√≠ (limitat)</td>
        <td>S√≠</td>
        <td>S√≠</td>
        <td><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i><i class="bi bi-star-fill" aria-hidden="true"></i></td>
      </tr>
    </tbody>
  </table>

  <h4>3.10.3. Desplegament amb Netlify</h4>
  <p><strong>Opci√≥ 1: Interf√≠cie web (m√©s f√†cil)</strong></p>

  <ul>
    <li>Crear compte a https://netlify.com</li>
    <li>"Add new site" ‚Üí "Import from Git"</li>
    <li>Connectar repositori GitHub</li>
    <li>Configurar:</li>
  </ul>

  <ul>
    <li><strong>Build command:</strong> <code>ng build --configuration production</code></li>
    <li><strong>Publish directory:</strong> <code>dist/my-app/browser</code></li>
  </ul>

  <p><strong>Opci√≥ 2: Netlify CLI</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm install -g netlify-cli
ng build --configuration production
netlify deploy --prod --dir=dist/my-app/browser</code></pre>
  </div>
</div>


  <p><strong>Configurar redirects per Angular (netlify.toml):</strong></p>


  <div class="code-block" data-lang="toml" role="region" aria-label="Bloc de codi toml">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TOML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-toml">[[redirects]]
  from = &quot;/*&quot;
  to = &quot;/index.html&quot;
  status = 200</code></pre>
  </div>
</div>


  <h4>3.10.4. Desplegament amb Vercel</h4>

  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm install -g vercel
vercel --prod</code></pre>
  </div>
</div>


  <p><strong>vercel.json:</strong></p>


  <div class="code-block" data-lang="json" role="region" aria-label="Bloc de codi json">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JSON</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-json">{
  &quot;buildCommand&quot;: &quot;ng build --configuration production&quot;,
  &quot;outputDirectory&quot;: &quot;dist/my-app/browser&quot;,
  &quot;routes&quot;: [
    { &quot;handle&quot;: &quot;filesystem&quot; },
    { &quot;src&quot;: &quot;/.*&quot;, &quot;dest&quot;: &quot;/index.html&quot; }
  ]
}</code></pre>
  </div>
</div>


  <h4>3.10.5. Desplegament amb Firebase Hosting</h4>

  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm install -g firebase-tools
firebase login
firebase init hosting
ng build --configuration production
firebase deploy --only hosting</code></pre>
  </div>
</div>


  <p><strong>firebase.json:</strong></p>


  <div class="code-block" data-lang="json" role="region" aria-label="Bloc de codi json">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JSON</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-json">{
  &quot;hosting&quot;: {
    &quot;public&quot;: &quot;dist/my-app/browser&quot;,
    &quot;ignore&quot;: [
      &quot;firebase.json&quot;,
      &quot;**/.*&quot;,
      &quot;**/node_modules/**&quot;
    ],
    &quot;rewrites&quot;: [
      {
        &quot;source&quot;: &quot;**&quot;,
        &quot;destination&quot;: &quot;/index.html&quot;
      }
    ]
  }
}</code></pre>
  </div>
</div>


  <h4>3.10.6. Desplegament amb GitHub Pages</h4>

  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm install --save-dev angular-cli-ghpages
{
  &quot;scripts&quot;: {
    &quot;deploy&quot;: &quot;ng deploy --base-href=/my-app/&quot;
  }
}
npm run deploy</code></pre>
  </div>
</div>


  <h4>3.10.7. Comparativa de plataformes</h4>
  <table>
    <thead>
      <tr>
        <th>Caracter√≠stica</th>
        <th>Netlify</th>
        <th>Vercel</th>
        <th>Firebase</th>
        <th>GitHub Pages</th>
        <th>AWS S3</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Setup</strong></td>
        <td>2 min</td>
        <td>2 min</td>
        <td>5 min</td>
        <td>5 min</td>
        <td>15 min</td>
      </tr>
      <tr>
        <td><strong>SSL gratu√Øt</strong></td>
        <td><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i></td>
        <td><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i></td>
        <td><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i></td>
        <td><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i></td>
        <td><i class="bi bi-x-circle-fill text-danger" aria-hidden="true"></i></td>
      </tr>
      <tr>
        <td><strong>CI/CD</strong></td>
        <td>Autom√†tic</td>
        <td>Autom√†tic</td>
        <td>Manual</td>
        <td>Semi-auto</td>
        <td>Manual</td>
      </tr>
      <tr>
        <td><strong>Custom domain</strong></td>
        <td><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> F√†cil</td>
        <td><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> F√†cil</td>
        <td><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> F√†cil</td>
        <td><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> F√†cil</td>
        <td><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> Complex</td>
      </tr>
      <tr>
        <td><strong>Preu (< 100 GB)</strong></td>
        <td>Gratu√Øt</td>
        <td>Gratu√Øt</td>
        <td>Gratu√Øt</td>
        <td>Gratu√Øt</td>
        <td>~$3/mes</td>
      </tr>
    </tbody>
  </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.11. Verificaci√≥ post-desplegament: comprovar que tot funciona</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.11.1. Objectiu</h4>
  <p>Establir un protocol de verificaci√≥ post-desplegament per assegurar que l'aplicaci√≥ funciona correctament en producci√≥, identificar problemes comuns i utilitzar eines de diagn√≤stic per validar rendiment, funcionalitat i SEO.</p>

  <h4>3.11.2. Checklist de verificaci√≥</h4>
  <p>Despr√©s de desplegar, comproveu sistem√†ticament:</p>

  <p><strong>1. Acc√©s b√†sic:</strong></p>

  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">URL p√∫blica accessible</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">HTTPS actiu (candau verd)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">P√†gina inicial carrega correctament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sense errors 404 al navegador</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Console sense errors JavaScript</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>2. Funcionalitats principals:</strong></p>

  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Navegaci√≥ entre p√†gines funciona</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Formularis envien dades</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Crides a API completen correctament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Autenticaci√≥ funciona (si aplicable)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Assets (imatges, fonts) carreguen correctament</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>3. Rendiment:</strong></p>

  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Lighthouse score &gt; 90</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Temps c√†rrega inicial &lt; 3s</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Time to Interactive (TTI) &lt; 5s</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Bundle size dins de budgets</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">No bloqueigs de renderitzat</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <p><strong>4. SEO i metadades:</strong></p>

  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Meta tags presents i correctes</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Open Graph tags configurats</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Favicon visible</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sitemap.xml accessible</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Robots.txt configurat</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <h4>3.11.3. Eines de diagn√≤stic</h4>
  <p><strong>1. Google Lighthouse</strong></p>


  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm install -g lighthouse
lighthouse https://your-app.com --view</code></pre>
  </div>
</div>


  <p><strong>Resultats esperats:</strong></p>
  <ul>
    <li>Performance: 90-100</li>
    <li>Accessibility: 90-100</li>
    <li>Best Practices: 90-100</li>
    <li>SEO: 90-100</li>
  </ul>

  <p><strong>2. Chrome DevTools Network tab</strong></p>

  <p>Verificar:</p>
  <ul>
    <li>Tots els recursos carreguen (status 200)</li>
    <li>No hi ha errors 404 o 500</li>
    <li>Fitxers tenen cache headers adequats</li>
    <li>Compressi√≥ gzip/brotli activa</li>
  </ul>

  <p><strong>3. WebPageTest</strong></p>

  <p>Provar des de m√∫ltiples ubicacions i connexions:</p>
  <ul>
    <li>https://www.webpagetest.org</li>
    <li>Simular 3G, 4G, cable</li>
    <li>Diferents pa√Øsos i dispositius</li>
  </ul>

  <h4>3.11.4. Problemes comuns post-desplegament</h4>
  <table>
    <thead>
      <tr>
        <th>Problema</th>
        <th>S√≠mptoma</th>
        <th>Soluci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Rutes 404</td>
        <td>Refresh dona 404</td>
        <td>Configurar redirects a index.html</td>
      </tr>
      <tr>
        <td>API cors errors</td>
        <td>Peticions HTTP fallen</td>
        <td>Configurar CORS al backend</td>
      </tr>
      <tr>
        <td>Assets 404</td>
        <td>Imatges/fonts no carreguen</td>
        <td>Verificar base-href i paths</td>
      </tr>
      <tr>
        <td>Cache agressiu</td>
        <td>Canvis no es veuen</td>
        <td>Cache-Control headers correctes</td>
      </tr>
      <tr>
        <td>Bundle massa gran</td>
        <td>C√†rrega lenta</td>
        <td>Revisar bundle analyzer</td>
      </tr>
    </tbody>
  </table>

  <h4>3.11.5. Monitoratge continu</h4>
  <p>Configurar eines de monitoratge per detectar problemes proactivament:</p>

  <ul>
    <li><strong>Google Analytics:</strong> Tr√†fic i comportament usuaris</li>
    <li><strong>Sentry:</strong> Errors JavaScript en producci√≥</li>
    <li><strong>Uptime monitoring:</strong> Pingdom, UptimeRobot</li>
    <li><strong>Real User Monitoring (RUM):</strong> M√®triques reals d'usuaris</li>
  </ul>

  <h4>3.11.6. Protocol complet de verificaci√≥</h4>

  <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">ABANS DE DESPLEGAR:
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Tests passen (ng test)
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Build producci√≥ exit√≥s
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Bundle analyzer revisat
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Variables entorn configurades
DESPR√âS DE DESPLEGAR:
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; URL accessible amb HTTPS
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Navegaci√≥ funciona
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; API calls completen
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Lighthouse score &amp;gt; 90
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; No errors a Console
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Metadades correctes
&lt;i class=&quot;bi bi-square&quot; aria-hidden=&quot;true&quot;&gt;&lt;/i&gt; Monitoring configurat</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.12. Mini exemple pr√†ctic</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.12.1. Objectiu</h4>
  <p>Compilar una aplicaci√≥ Angular per a producci√≥, analitzar el bundle, aplicar optimitzacions i desplegar a Netlify.</p>

  <h4>3.12.2. Pas 1: Preparar l'aplicaci√≥</h4>

  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve</code></pre>
  </div>
</div>


  <h4>3.12.3. Pas 2: Build inicial de producci√≥</h4>

  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --configuration production
Initial Chunk Files   | Names         |  Raw Size
main.a8f3d2b4c.js     | main          | 856.23 KB
polyfills.7e9c1f4.js  | polyfills     | 182.45 KB
styles.f4e8b3a7.css   | styles        |  48.12 KB
                      | Initial Total |   1.08 MB</code></pre>
  </div>
</div>


  <p><strong>Problema detectat:</strong> main.js √©s massa gran (&gt; 500 KB)</p>

  <h4>3.12.4. Pas 3: Analitzar el bundle</h4>

  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm run build:stats
npm run analyze</code></pre>
  </div>
</div>


  <p><strong>Descobriment:</strong> Lodash ocupa 120 KB</p>

  <h4>3.12.5. Pas 4: Optimitzar imports</h4>

  <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import * as _ from &#39;lodash&#39;;
sortProducts(products: Product[]): Product[] {
  return _.sortBy(products, &#39;price&#39;);
}
import { sortBy } from &#39;lodash-es&#39;;
sortProducts(products: Product[]): Product[] {
  return sortBy(products, &#39;price&#39;);
}</code></pre>
  </div>
</div>


  <h4>3.12.6. Pas 5: Rebuild i verificar</h4>

  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --configuration production
Initial Chunk Files   | Names         |  Raw Size
main.a8f3d2b4c.js     | main          | 456.23 KB
polyfills.7e9c1f4.js  | polyfills     | 182.45 KB
styles.f4e8b3a7.css   | styles        |  48.12 KB
                      | Initial Total | 686.80 KB</code></pre>
  </div>
</div>


  <p><strong>Millora:</strong> -400 KB (47% reducci√≥)</p>

  <h4>3.12.7. Pas 6: Desplegar a Netlify</h4>

  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">npm install -g netlify-cli
netlify login
netlify deploy --prod --dir=dist/my-app/browser</code></pre>
  </div>
</div>


  <h4>3.12.8. Resultat final</h4>
  <p><strong>Abans d'optimitzar:</strong></p>
  <ul>
    <li>Bundle: 1.08 MB</li>
    <li>C√†rrega: 3.2s</li>
    <li>Lighthouse: 65/100</li>
  </ul>

  <p><strong>Despr√©s d'optimitzar:</strong></p>
  <ul>
    <li>Bundle: 686 KB (36% reducci√≥)</li>
    <li>C√†rrega: 1.8s (44% m√©s r√†pid)</li>
    <li>Lighthouse: 98/100</li>
  </ul>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.13. Resoluci√≥ de problemes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>3.13.1. Errors transversals</h4>
  <table>
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa</th>
        <th>Soluci√≥</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Build falla</td>
        <td>Errors TypeScript</td>
        <td>Corregir errors amb <code>ng build</code></td>
      </tr>
      <tr>
        <td>Bundle massa gran</td>
        <td>Imports pesats</td>
        <td>Analitzar amb webpack-bundle-analyzer</td>
      </tr>
      <tr>
        <td>C√†rrega lenta</td>
        <td>Assets no optimitzats</td>
        <td>Comprimir imatges, lazy loading</td>
      </tr>
      <tr>
        <td>404 en refresh</td>
        <td>Falta rewrite</td>
        <td>Configurar redirect a index.html</td>
      </tr>
      <tr>
        <td>CORS errors</td>
        <td>Backend no configurat</td>
        <td>Afegir headers CORS al servidor</td>
      </tr>
    </tbody>
  </table>

  <h4>3.13.2. Errors de configuraci√≥</h4>
  <table>
    <thead>
      <tr>
        <th>Error</th>
        <th>Causa</th>
        <th>Soluci√≥ Windows</th>
        <th>Soluci√≥ Linux/macOS</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>ng: command not found</td>
        <td>CLI no instal¬∑lat</td>
        <td><code>npm install -g @angular/cli</code></td>
        <td><code>sudo npm install -g @angular/cli</code></td>
      </tr>
      <tr>
        <td>Permission denied</td>
        <td>Permisos insuficients</td>
        <td>Executar com administrador</td>
        <td><code>sudo</code> abans de comandes</td>
      </tr>
      <tr>
        <td>Module not found</td>
        <td>node_modules corruptes</td>
        <td><code>rmdir /s node_modules && npm install</code></td>
        <td><code>rm -rf node_modules && npm install</code></td>
      </tr>
      <tr>
        <td>Out of memory</td>
        <td>Build massa gran</td>
        <td colspan="2">Augmentar heap: <code>NODE_OPTIONS=--max_old_space_size=4096</code></td>
      </tr>
    </tbody>
  </table>

  <h4>3.13.3. Debug de build de producci√≥</h4>

  <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col¬∑lapsar al√ßada" aria-label="Expandir o col¬∑lapsar al√ßada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar n√∫meros de l√≠nia" aria-label="Mostrar o ocultar n√∫meros de l√≠nia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng build --configuration production --source-map=true
npx http-server dist/my-app/browser -p 8080</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.14. Prompts d'IA</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
<!-- Component: Prompt per IA amb caixa de text i bot√≥ de c√≤pia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Sou un expert en optimitzaci√≥ de bundles JavaScript per a frameworks moderns com Angular, React i Vue. <strong>Context:</strong> Heu auditat centenars d'aplicacions web i identificat patrons d'optimitzaci√≥ efectius. Coneixeu totes les t√®cniques de reducci√≥ de mida de bundle. <strong>Tasca:</strong> Expliqueu les 5 difer√®ncies principals entre compilar Angular en mode desenvolupament vs producci√≥. Incloeu exemples pr√†ctics i quantitatius de mides de bundle abans i despr√©s, mostrant percentatges de reducci√≥ i temps de c√†rrega. <strong>Format:</strong> Presenteu cada difer√®ncia amb el seg√ºent format: Nom | Desenvolupament vs Producci√≥ | Impacte quantificat | Exemple concret amb codi.</div>
  </div>
</div>

<!-- Component: Prompt per IA amb caixa de text i bot√≥ de c√≤pia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Sou un desenvolupador senior especialitzat en arquitectura d'aplicacions Angular enterprise. <strong>Context:</strong> Heu implementat estrat√®gies de lazy loading en projectes amb m√©s de 50 m√≤duls funcionals, aconseguint reduccions de bundle inicial de fins al 80%. <strong>Tasca:</strong> Creeu una estrat√®gia completa de lazy loading per una aplicaci√≥ Angular amb 10 m√≤duls funcionals (dashboard, users, products, orders, analytics, reports, settings, notifications, chat, help). Incloeu codi complet de routing amb loadChildren, c√†lculs d'impacte en el bundle inicial i configuraci√≥ de preloading strategies. <strong>Format:</strong> Estructura de m√≤duls | Codi app-routing.module.ts | Taula comparativa (abans/despr√©s) | Estrat√®gia de preloading.</div>
  </div>
</div>

<!-- Component: Prompt per IA amb caixa de text i bot√≥ de c√≤pia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Sou un DevOps engineer especialitzat en desplegament continu (CI/CD) per a aplicacions Angular. <strong>Context:</strong> Heu configurat pipelines de desplegament per a dotzenes d'aplicacions Angular usant GitHub Actions, GitLab CI i Jenkins. <strong>Tasca:</strong> Escriviu un workflow complet de GitHub Actions que: 1) Compili l'aplicaci√≥ Angular per a producci√≥, 2) Executi tests unitaris i e2e, 3) Analitzi el bundle i falli si supera 2 MB, 4) Desplegui autom√†ticament a Netlify si tots els passos passen. Incloeu gesti√≥ d'errors, logs detallats i notificacions. <strong>Format:</strong> Fitxer YAML complet (.github/workflows/deploy.yml) amb comentaris explicatius en cada secci√≥.</div>
  </div>
</div>


  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.15. Autoavaluaci√≥</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <h4>Conceptes te√≤rics</h4>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Comprenc les difer√®ncies entre mode desenvolupament i producci√≥</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">S√© executar builds amb diferents configuracions (dev/staging/prod)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc les optimitzacions autom√†tiques que aplica Angular</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc configurar flags de compilaci√≥ segons necessitats</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Comprenc per qu√® s√≥n necess√†ries les variables d'entorn</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Conec almenys 3 plataformes de desplegament diferents</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <h4>Habilitats pr√†ctiques</h4>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He compilat l'aplicaci√≥ per a producci√≥ amb ng build --prod sense errors</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He analitzat el bundle amb webpack-bundle-analyzer</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He configurat variables d'entorn per a producci√≥ correctament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He desplegat l'aplicaci√≥ a una plataforma p√∫blica accessible</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He verificat que totes les rutes funcionen despr√©s de desplegar</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He executat Lighthouse amb puntuaci√≥ > 90 en Performance</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>


  <h4>Resoluci√≥ de problemes</h4>
  <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">S√© analitzar el bundle per identificar components pesats</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc aplicar tree-shaking efectivament amb imports espec√≠fics</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He aplicat almenys 3 optimitzacions de mida documentades</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc configurar redirects per a SPAs correctament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc identificar i solucionar errors post-desplegament</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">S√© usar Lighthouse per mesurar rendiment</div>
  </div>
  
  <!-- Interacci√≥ via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.16. S√≠ntesi</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <p>Amb aquesta lectura heu completat el proc√©s de preparaci√≥ i desplegament d'aplicacions Angular per a producci√≥.</p>

  <h4>3.16.1. Transformaci√≥ desenvolupament ‚Üí producci√≥</h4>

  <p>Heu apr√®s a transformar una aplicaci√≥ de desenvolupament en una aplicaci√≥ optimitzada:</p>

  <ul>
    <li><strong>Abans:</strong> 15-25 MB, c√†rrega en 5-10 segons</li>
    <li><strong>Despr√©s:</strong> 500 KB - 2 MB, c√†rrega en menys de 2 segons</li>
    <li><strong>Resultat:</strong> Reducci√≥ del 85-95% en mida i 80-90% en temps</li>
  </ul>

  <h4>3.16.2. Optimitzacions autom√†tiques dominades</h4>

  <p>Heu compr√®s i aplicat les optimitzacions que Angular executa durant la compilaci√≥:</p>

  <ul>
    <li><strong>Minificaci√≥:</strong> Elimina espais i escur√ßa noms de variables</li>
    <li><strong>Tree-shaking:</strong> Elimina codi no utilitzat de llibreries</li>
    <li><strong>AOT Compilation:</strong> Precompila les plantilles abans de desplegar</li>
    <li><strong>Uglification:</strong> Ofusca el codi per seguretat</li>
  </ul>

  <h4>3.16.3. An√†lisi i optimitzaci√≥ del bundle</h4>

  <p>Ara sabeu identificar i solucionar problemes de rendiment:</p>

  <ul>
    <li>Analitzar el bundle amb webpack-bundle-analyzer</li>
    <li>Identificar llibreries pesades i reempla√ßar-les amb alternatives lleugeres</li>
    <li>Aplicar imports espec√≠fics i lazy loading agressiu</li>
    <li>Reduir la mida del bundle inicial en 60-90%</li>
  </ul>

  <h4>3.16.4. Configuraci√≥ multi-entorn</h4>

  <p>Heu apr√®s a adaptar l'aplicaci√≥ a diferents contextos:</p>

  <ul>
    <li>Variables d'entorn per desenvolupament, staging i producci√≥</li>
    <li>URLs d'API diferents segons l'entorn</li>
    <li>Feature flags per activar/desactivar funcionalitats</li>
    <li>Configuracions de debug i analytics adaptades</li>
  </ul>

  <h4>3.16.5. Desplegament professional</h4>

  <p>Domineu m√∫ltiples plataformes i t√®cniques de publicaci√≥:</p>

  <ul>
    <li>Desplegament a Netlify, Vercel, Firebase i GitHub Pages</li>
    <li>Configuraci√≥ autom√†tica de SSL/HTTPS</li>
    <li>Redirects per a SPAs correctament implementats</li>
    <li>Dominis personalitzats configurats</li>
  </ul>

  <h4>3.16.6. Verificaci√≥ i qualitat</h4>

  <p>Heu establert protocols professionals de comprovaci√≥:</p>

  <ul>
    <li>Verificaci√≥ de funcionalitat en m√∫ltiples navegadors</li>
    <li>An√†lisi de rendiment amb Lighthouse (&gt; 90/100)</li>
    <li>Comprovaci√≥ d'errors a la consola i Network tab</li>
    <li>Tests en dispositius m√≤bils reals</li>
  </ul>

  <p><strong>Disposeu ara de totes les compet√®ncies necess√†ries per construir, optimitzar i desplegar aplicacions web modernes amb Angular de forma professional i eficient.</strong></p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secci√≥ -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.17. Rep√†s de conceptes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Build de producci√≥:</strong> Compilaci√≥ optimitzada d'una aplicaci√≥ Angular per desplegar en servidors reals, aplicant autom√†ticament minificaci√≥, tree-shaking, AOT compilation i altres optimitzacions que redueixen la mida del bundle en un 85-95%.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Minificaci√≥:</strong> Proc√©s d'eliminaci√≥ d'espais en blanc, comentaris i noms de variables llargs del codi JavaScript i CSS, convertint 15 l√≠nies de codi llegible en 1 l√≠nia de codi compacte, aconseguint reduccions de mida del 40-50%.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Tree-shaking:</strong> T√®cnica d'eliminaci√≥ de codi no utilitzat d'una aplicaci√≥ o llibreria. Quan importeu nom√©s una funci√≥ de Lodash, tree-shaking elimina les altres 699 funcions, reduint la mida de 700 KB a nom√©s 2 KB.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>AOT Compilation:</strong> Ahead-of-Time Compilation: compilaci√≥ de les plantilles Angular durant el build en lloc de fer-ho al navegador. Redueix la mida del bundle en 500 KB (no cal incloure el compilador) i millora el rendiment en un 300-500%.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Bundle:</strong> Conjunt de fitxers JavaScript i CSS generats durant la compilaci√≥ d'Angular (main.js, polyfills.js, vendor.js, styles.css). En desenvolupament ocupa 15-25 MB, en producci√≥ 500 KB - 2 MB.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Variables d'entorn:</strong> Configuracions que canvien segons l'entorn on s'executa l'aplicaci√≥ (desenvolupament, staging, producci√≥). Permeten usar diferents URLs d'API, activar/desactivar debug, i gestionar funcionalitats amb feature flags.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Lazy loading:</strong> C√†rrega diferida de m√≤duls Angular nom√©s quan l'usuari els necessita. Redueix el bundle inicial en 200-500 KB movent funcionalitats pesades (admin, reports) a chunks separats que es descarreguen sota demanda.</p>
  </div>
</div>


  <!-- Component: Definici√≥ curta -->
<div class="definition-box" role="definition" aria-label="Definici√≥">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definici√≥</div>
  <div class="component-content">
    <p><strong>Deployment:</strong> Proc√©s de publicar una aplicaci√≥ Angular compilada per a producci√≥ en un servidor accessible p√∫blicament (Netlify, Vercel, Firebase), configurant HTTPS, redirects per a SPAs i dominis personalitzats.</p>
  </div>
</div>

  
  </div>
</div>


</div>


<!-- Exercicis proposats (si estan definits) -->


<!-- Recursos addicionals -->


<!-- Glossari del bloc -->



<!-- Schema.org structured data per SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "name": "Bloc 3: Rendiment i optimitzaci√≥",
  "description": "Detecci√≥ de canvis, virtualitzaci√≥ i desplegament a producci√≥",
  "author": {
    "@type": "Organization",
    "name": "Institut Obert de Catalunya"
  },
  "provider": {
    "@type": "Organization",
    "name": "Institut Obert de Catalunya"
  },
  "educationalLevel": "Intermediate",
  "learningResourceType": "Course Module",
  "inLanguage": "ca",
  
  
  "isPartOf": {
    "@type": "Course",
    "name": "DA2_OA01 - Programaci√≥ Avan√ßada (Angular) ‚Äî IOC",
    "description": "Materials del m√≤dul DA2_OA01 - Programaci√≥ Avan√ßada amb Angular"
  }
}
</script>

                </div>
            </article>
            
            <!-- Navegaci√≥ entre p√†gines -->
            
            <nav class="page-navigation" role="navigation" aria-label="Navegaci√≥ entre blocs">
                <div class="nav-links-container">
                    
                    
                    
                    
                    
                    
                    
                    
                        
                    
                        
                    
                        
                    
                        
                            
                            
                    
                    
                    
                        
                            
                        
                            
                        
                            
                                
                                
                                
                                
                                
                                    
                                    
                                        
                                    
                                        
                                            
                                            
                                
                                
                                
                                
                                
                                    
                                
                                    
                                
                                    
                                
                                    
                                        
                                        
                                
                                
                    
                    
                    <div class="nav-link-wrapper">
                        
                        <a href="/ioc/da2_OA01/unitat-4/bloc-2/" class="nav-button" aria-label="Bloc anterior: Arquitectura escalable">‚Üê Anterior</a>
                        
                    </div>
                    
                    <div class="nav-link-wrapper">
                        
                        <a href="/ioc/da2_OA01/unitat-4/bloc-4/" class="nav-button" aria-label="Bloc seg√ºent: Cas d'√∫s: Aplicaci√≥ completa">Seg√ºent ‚Üí</a>
                        
                    </div>
                </div>
            </nav>
            
        </main>
    </div>

    <!-- Footer fix -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-info">
                Versi√≥ v1.0
            </div>
            <div class="footer-progress" aria-label="Progr√©s de lectura"><!-- Progr√©s per unitats (posici√≥ de la unitat actual) --><div class="progress-group course-progress">
                    <span class="progress-label">Unitat</span>
                    <span class="progress-text" data-pos="4" data-total="4">(4/4)</span>
                    <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 100%"></div></div>
                </div><!-- Progr√©s per blocs dins de la unitat --><div class="progress-group unit-progress">
                        <span class="progress-label">Bloc</span>
                        <span class="progress-text" data-pos="3" data-total="4">(3/4)</span>
                        <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 75%"></div></div>
                    </div>

                    <!-- Progr√©s per seccions (H2) dins del bloc --><div class="progress-group section-progress" data-scan-sections="true">
                        <span class="progress-label">Secci√≥</span>
                        <span class="progress-text" data-pos="1" data-total="3">(1/3)</span>
                        <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 33%"></div></div>
                    </div></div>
            <div class="footer-actions" aria-label="Accions r√†pides">
                <button class="task-btn footer-collapse-toggle" type="button" aria-expanded="true" aria-label="Amaga el peu de p√†gina">
                  <i class="bi bi-chevron-down" aria-hidden="true"></i>
                </button>
                <a href="#top" id="footer-btn-top" class="task-btn" aria-label="Anar a l'inici">‚Üë</a>
                <a href="#bottom" id="footer-btn-bottom" class="task-btn" aria-label="Anar al final">‚Üì</a>
                <a href="#next" id="footer-btn-next" class="task-btn" aria-label="Secci√≥ seg√ºent">‚Üí</a>
                <a href="#prev" id="footer-btn-prev" class="task-btn" aria-label="Secci√≥ anterior">‚Üê</a>
                <a href="#bookmark" id="footer-btn-bookmark" class="task-btn" aria-label="Desar marcador" title="Desar marcador">
                  <i class="bi bi-bookmark" aria-hidden="true"></i>
                </a>
                <a href="/ioc/da2_OA01/quadern.html" class="task-btn" aria-label="Obrir quadern complet" title="Quadern">
                  <i class="bi bi-journal-text" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Scripts del lloc -->
    <script src="/ioc/da2_OA01/assets/js/site.js" defer></script>
    <!-- Quadern Notes v2 (nou sistema) -->
    <script src="/ioc/da2_OA01/assets/js/quadern-app/constants.js" defer></script>
    <script src="/ioc/da2_OA01/assets/js/quadern-app/utils.js" defer></script>
    <script src="/ioc/da2_OA01/assets/js/quadern-app/store.js" defer></script>
    <script src="/ioc/da2_OA01/assets/js/quadern-app/panel.js" defer></script>
    <script src="/ioc/da2_OA01/assets/js/index-notes.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" defer></script>
    <script src="/ioc/da2_OA01/assets/js/quadern-app/rich-editor.js" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', function(){
        if (window.Quadern && typeof window.Quadern.bootstrapNotes === 'function') {
          try { window.Quadern.bootstrapNotes(); } catch(e) {}
        }
        if (window.Quadern && window.Quadern.RichEditor && typeof window.Quadern.RichEditor.autoInit === 'function') {
          try { window.Quadern.RichEditor.autoInit(); } catch(e) {}
        }
      });
    </script>
</body>
</html>

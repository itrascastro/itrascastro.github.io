---
layout: quadern
title: "Quadern de Notes"
quadern: true
sidebar: false
breadcrumb: false
---

<!-- Vista Dashboard -->
<div id="dashboard-view" class="view active" role="tabpanel" aria-labelledby="dashboard-btn">
  <div class="dashboard-container">
    <!-- Capçalera: Cerca i Filtres -->
    <div class="content-item">
      <div style="width: 100%;">
        <div class="dash-header" role="region" aria-label="Cerca i filtres">
          <div class="search-wrapper">
            <i class="bi bi-search search-icon" aria-hidden="true"></i>
            <input type="text" id="dashboard-search" class="search-input" placeholder="Buscar notes..." aria-label="Buscar notes">
            <button type="button" id="dashboard-search-clear" class="search-clear" aria-label="Netejar cerca i etiquetes" title="Netejar">
              <i class="bi bi-x-circle" aria-hidden="true"></i>
            </button>
          </div>
            <div class="dash-actions">
              <button class="btn btn-outline" data-action="open-filter" aria-label="Filtrar per etiquetes">
                <i class="bi bi-funnel" aria-hidden="true"></i>
                <span class="hide-sm">Etiquetes</span>
              </button>
              <div class="mode-toggle" title="Mode d'Estudi">
                <span class="label hide-sm">Estudi</span>
                <label class="switch">
                  <input type="checkbox" id="study-mode-toggle" aria-label="Mode d'Estudi">
                  <span class="slider"></span>
                </label>
              </div>
            </div>
        </div>
        
        <!-- Navegació per etiquetes (píndoles) -->
        <nav class="tag-filters" id="dashboard-tag-filters" aria-label="Filtre ràpid per etiqueta"></nav>
      </div>
    </div>

    <!-- Llista de notes agrupades per data -->
    <section id="recent-notes" class="notes-timeline" aria-live="polite">
      <div class="empty-state">
        <p>Encara no tens notes. Crea la teva primera nota!</p>
      </div>
    </section>
  </div>
</div>

<!-- Vista Editor -->
<div id="editor-view" class="view" role="tabpanel" aria-labelledby="editor-btn">
    <div class="editor-container editor-single">
        <div class="editor-main">

            <!-- Capçalera Editor amb migas de pa i botó de sortida -->
            <div class="editor-header">
                <nav class="editor-breadcrumb">
                    <button class="crumb-link" id="breadcrumb-quadern" title="Tornar al Quadern" aria-label="Tornar al Quadern">
                        <i class="bi bi-journal-text"></i>
                        <span>Quadern</span>
                    </button>
                    <i class="bi bi-chevron-right crumb-separator"></i>
                    <span class="crumb-current">
                        <i class="bi bi-pencil-square"></i>
                        <span>Editor</span>
                    </span>
                </nav>
                <button class="exit-editor-btn" id="editor-back-btn" title="Sortir del mode editor" aria-label="Sortir del mode editor">
                    <i class="bi bi-x-lg" aria-hidden="true"></i>
                    <span>Sortir de Mode Editor</span>
                </button>
            </div>

            <div class="editor-form" role="region" aria-label="Editor de notes">
                <div id="note-select-row" class="note-select-row">
                  <select id="note-select" aria-label="Selecciona una nota de la secció">
                      <option value="">Selecciona una nota…</option>
                  </select>
                  <button type="button" id="note-select-edit-btn" class="inline-edit-btn" aria-label="Editar títol de la nota" title="Editar títol">
                    <i class="bi bi-pencil"></i>
                  </button>
                  <button type="button" id="note-select-confirm-btn" class="inline-confirm-btn" aria-label="Confirmar títol" title="Confirmar títol">
                    <i class="bi bi-check"></i>
                  </button>
                </div>
                <input type="text" id="note-tags" placeholder="Etiquetes (separades per comes)" aria-label="Etiquetes de la nota">
                <!-- Hidden sync field for compatibility with existing JS -->
                <textarea id="note-content" aria-hidden="true" hidden></textarea>
                <!-- Rich editor container (auto-initialized by Quadern.RichEditor) -->
                <div id="qre-editor" class="qre" role="region" aria-label="Àrea d'edició" data-no-theme data-full-toolbar data-status-left data-sync-target="#note-content"></div>
            </div>

            <!-- Panell de notes de la secció seleccionada (controlat per Editor.js) -->
            <div id="notes-list" class="notes-list" role="region" aria-live="polite"></div>
        </div>
    </div>
</div>

<!-- Vista Import/Export -->
<div id="import-export-view" class="view" role="tabpanel" aria-labelledby="import-export-btn">
    <div class="import-export-container">
        <!-- Capçalera -->
        <div class="content-item">
            <div class="section-header">
                <h2><i class="bi bi-cloud-download"></i> Backup del Quadern</h2>
                <p>Exporta les teves notes en format JSON per crear una còpia de seguretat o transferir-les a un altre equip.</p>
            </div>
        </div>

        <!-- Informació de l'estat actual -->
        <div class="content-item">
            <div class="backup-stats">
                <div class="stat-item">
                    <i class="bi bi-journal-text"></i>
                    <div class="stat-info">
                        <span class="stat-number" id="export-notes-count">0</span>
                        <span class="stat-label">Notes guardades</span>
                    </div>
                </div>
                <div class="stat-item">
                    <i class="bi bi-calendar"></i>
                    <div class="stat-info">
                        <span class="stat-number" id="export-last-modified">Mai</span>
                        <span class="stat-label">Última modificació</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Botó d'exportació -->
        <div class="content-item">
            <div class="export-actions">
                <button type="button" class="btn btn-primary export-btn" data-format="json" id="export-json-btn">
                    <i class="bi bi-download"></i>
                    Descarregar Backup JSON
                </button>
                <p class="help-text">
                    El fitxer JSON conté totes les teves notes amb la seva informació completa. 
                    Pots usar aquest fitxer per restaurar les notes en un altre navegador o equip.
                </p>
            </div>
        </div>
    </div>
</div>

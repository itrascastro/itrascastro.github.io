---
layout: bloc
title: "Bloc 3: Formularis amb vinculaci√≥ bidireccional"
description: "FormsModule, validacions i accessibilitat en formularis Angular"
keywords: "ngModel, FormsModule, formularis, validacions, accessibilitat, angular"
unitat: 2
bloc: 3
bloc_numero: 3
---

<!-- SECCI√ì 1: Formularis b√†sics amb vinculaci√≥ bidireccional -->
<div class="section" id="Unitat2_Bloc3_Seccio1">
  <h2 id="Unitat2_Bloc3_Seccio1">1. Formularis b√†sics amb vinculaci√≥ bidireccional</h2>

  <!-- MULTIM√àDIA -->
  {% include multimedia-youtube.html unitat=2 bloc=3 seccio=1 %}


  {% include objectius.html llista="Importar FormsModule en un component standalone i configurar l'entorn per treballar amb formularis basats en plantilla|Construir formularis senzills amb controls HTML est√†ndard (input, select, textarea, checkbox) utilitzant vinculaci√≥ bidireccional [(ngModel)]|Capturar dades d'entrada d'usuari en temps real, mostrar previsualitzacions din√†miques i gestionar l'enviament del formulari amb (ngSubmit)" %}

  {% include info_box.html contingut="<strong>RA2 ¬∑ Criteri 3</strong> ‚Äî Construeix formularis amb camps, validacions i missatges d'ajuda." %}

  {% capture section_point_1_1 %}
    <p>Abans de comen√ßar aquesta lectura, necessiteu:</p>
    <ul>
      <li><strong>Lectures 2.2.1‚Äì2.2.3 completades:</strong> el projecte <code>catalog-elements</code> mostra llistes amb <code>*ngFor</code>, estats amb directives condicionals, i dades formatades amb transformadors (pipes).</li>
      <li><strong>Projecte funcional:</strong> servidor <code>ng serve --port 4300</code> actiu (o llest per arrencar) i editor obert al workspace del projecte.</li>
      <li><strong>Estructura de carpetes:</strong> directori <code>docs/</code> creat amb fitxers de documentaci√≥ anteriors (<code>directives.md</code>, <code>presentacio-dades.md</code>).</li>
      <li><strong>Node.js i Angular CLI:</strong> versions compatibles instal¬∑lades i verificades.</li>
    </ul>

    <p><strong>Verificaci√≥ r√†pida:</strong></p>

    {% capture code_245 %}# Comproveu que no hi ha canvis pendents de commit
git status
# Verifiqueu que el servidor compila sense errors
ng serve --port 4300
# Al navegador, obriu: http://localhost:4300
# Heu de veure la llista d'elements amb estats i transformacions{% endcapture %}
    {% include code-block.html lang="bash" code=code_245 %}

    <p><strong>Punt d'autocomprovaci√≥:</strong> confirmeu que <code>elementsCataleg</code> es mostra correctament al navegador amb les dades formatades (dates, preus, percentatges) abans de comen√ßar amb formularis.</p>
  {% endcapture %}
  {% include section-point.html numero="1.1" titol="Prerequisits" contingut=section_point_1_1 %}

  {% capture section_point_1_2 %}
    <h4>1.2.1. Qu√® √©s la vinculaci√≥ bidireccional</h4>

    <p>La vinculaci√≥ bidireccional √©s un mecanisme que sincronitza autom√†ticament les dades entre el model (component) i la vista (plantilla) en ambd√≥s sentits: quan l'usuari modifica un control HTML, el valor s'actualitza al component; quan el component modifica el valor, el control HTML es reactualitza. Angular implementa aquesta funcionalitat amb la directiva <code>[(ngModel)]</code>, que combina property binding <code>[ngModel]</code> (component ‚Üí vista) i event binding <code>(ngModelChange)</code> (vista ‚Üí component) en una sola expressi√≥.</p>

    <h4>1.2.2. Problema sense vinculaci√≥ bidireccional</h4>

    <p>Imagineu que voleu crear un formulari per afegir nous elements al cat√†leg. L'usuari escriu al camp "T√≠tol" i voleu mostrar una previsualitzaci√≥ en temps real a sota del formulari. Sense vinculaci√≥ bidireccional, haur√≠eu de gestionar manualment la sincronitzaci√≥ en ambd√≥s sentits.</p>

    <p><strong>Situaci√≥ abans (sense [(ngModel)]):</strong></p>

    {% capture code_246 %}// Component amb sincronitzaci√≥ manual - NO RECOMANAT
export class AppComponent {
  titolElement = '';
  categoriaElement = 'Components UI';
  preuElement = 0;
  // M√®tode per actualitzar des de la vista cap al component
  actualitzarTitol(event: Event): void {
    const input = event.target as HTMLInputElement;
    this.titolElement = input.value;
  }
  actualitzarCategoria(event: Event): void {
    const select = event.target as HTMLSelectElement;
    this.categoriaElement = select.value;
  }
  actualitzarPreu(event: Event): void {
    const input = event.target as HTMLInputElement;
    this.preuElement = Number(input.value);
  }
  // I aix√≠ per cada camp... üò±
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_246 %}

    {% capture code_247 %}<!-- Plantilla amb vinculaci√≥ manual verbose -->
<form>
<label>
T√≠tol
<input type="text" [value]="titolElement" (input)="actualitzarTitol($event)" />
</label>
<label>
Categoria
<select [value]="categoriaElement" (change)="actualitzarCategoria($event)" >
<option value="Components UI">Components UI</option>
<option value="Paletes">Paletes</option>
</select>
</label>
<label>
Preu
<input type="number" [value]="preuElement" (input)="actualitzarPreu($event)" />
</label>
</form>
<!-- Previsualitzaci√≥ -->
<div class="preview">
<p>T√≠tol: {% raw %}{{ titolElement }}{% endraw %}</p>
<p>Categoria: {% raw %}{{ categoriaElement }}{% endraw %}</p>
<p>Preu: {% raw %}{{ preuElement }}{% endraw %}</p>
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_247 %}

    <p><strong>Problemes que genera aquesta aproximaci√≥:</strong></p>

    <p><strong>1. Codi verbose i repetitiu</strong><br>
    Per cada camp del formulari heu de crear un m√®tode que extregui el valor de l'esdeveniment, el converteixi si cal (string a number) i l'assigni a la propietat corresponent. Si teniu 10 camps, necessiteu 10 m√®todes.</p>

    <p><strong>2. Gesti√≥ manual de tipus</strong><br>
    Els valors dels controls HTML sempre s√≥n strings. Heu de convertir manualment a <code>number</code>, <code>boolean</code> o altres tipus segons el camp. Aix√≤ √©s propens a errors i oblit.</p>

    <p><strong>3. Sincronitzaci√≥ unidireccional complexa</strong><br>
    Si necessiteu modificar el valor des del component (per exemple, reiniciar el formulari o carregar dades existents), heu de gestionar manualment l'actualitzaci√≥ del DOM amb <code>[value]</code>.</p>

    <p><strong>4. Dificultat per mantenir</strong><br>
    Afegir un nou camp requereix: (1) crear la propietat, (2) crear el m√®tode d'actualitzaci√≥, (3) vincular <code>[value]</code> i <code>(input)</code> correctament. √âs f√†cil oblidar algun pas.</p>

    <p><strong>5. No integrat amb formularis Angular</strong><br>
    Aquesta aproximaci√≥ manual no aprofita les capacitats de validaci√≥, estat dels controls (pristine, dirty, touched) ni altres funcionalitats del sistema de formularis d'Angular.</p>

    <h4>1.2.3. Soluci√≥ amb vinculaci√≥ bidireccional [(ngModel)]</h4>

    <p>Angular proporciona <code>FormsModule</code> amb la directiva <code>[(ngModel)]</code> que simplifica dr√†sticament la gesti√≥ de formularis:</p>

    {% capture code_248 %}// Component net amb FormsModule - RECOMANAT
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
@Component({
  selector: 'app-root',
  standalone: true,
  imports: [CommonModule, FormsModule],
  templateUrl: './app.component.html'
})
export class AppComponent {
  // Nom√©s propietats, sense m√®todes de sincronitzaci√≥
  formulariElement = {
    titol: '',
    categoria: 'Components UI',
    preu: 0
  };
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_248 %}

    {% capture code_249 %}<!-- Plantilla concisa amb [(ngModel)] -->
<form>
<label>
T√≠tol
<input type="text" name="titol" [(ngModel)]="formulariElement.titol" />
</label>
<label>
Categoria
<select name="categoria" [(ngModel)]="formulariElement.categoria">
<option value="Components UI">Components UI</option>
<option value="Paletes">Paletes</option>
</select>
</label>
<label>
Preu
<input type="number" name="preu" [(ngModel)]="formulariElement.preu" />
</label>
</form>
<!-- Previsualitzaci√≥ autom√†tica -->
<div class="preview">
<p>T√≠tol: {% raw %}{{ formulariElement.titol }}{% endraw %}</p>
<p>Categoria: {% raw %}{{ formulariElement.categoria }}{% endraw %}</p>
<p>Preu: {% raw %}{{ formulariElement.preu }}{% endraw %}</p>
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_249 %}

    <p><strong>Avantatges d'aquesta aproximaci√≥:</strong></p>

    <ul>
      <li><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> <strong>Codi dr√†sticament m√©s curt:</strong> 15 l√≠nies de plantilla en lloc de 30+, sense cap m√®tode de sincronitzaci√≥ al component.</li>
      <li><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> <strong>Sincronitzaci√≥ autom√†tica bidireccional:</strong> qualsevol canvi a l'input s'actualitza al model, i viceversa, sense codi addicional.</li>
      <li><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> <strong>Conversi√≥ de tipus autom√†tica:</strong> <code>type="number"</code> converteix autom√†ticament a number, <code>type="checkbox"</code> a boolean, etc.</li>
      <li><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> <strong>Previsualitzaci√≥ en temps real sense esfor√ß:</strong> la interpolaci√≥ <code>{% raw %}{{ formulariElement.titol }}{% endraw %}</code> es reactualitza autom√†ticament.</li>
      <li><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> <strong>Integrat amb Angular Forms:</strong> acc√©s a estat dels controls, validaci√≥, i altres funcionalitats avan√ßades.</li>
      <li><i class="bi bi-check-circle-fill text-success" aria-hidden="true"></i> <strong>Mantenible i escalable:</strong> afegir un nou camp nom√©s requereix afegir-lo al model i a la plantilla amb <code>[(ngModel)]</code>.</li>
    </ul>

    <h4>1.2.4. Taula comparativa: vinculaci√≥ manual vs [(ngModel)]</h4>

    <table>
      <thead>
        <tr>
          <th>Aspecte</th>
          <th>Vinculaci√≥ manual</th>
          <th>Amb [(ngModel)]</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>L√≠nies de codi</strong></td>
          <td>60+ l√≠nies (component + plantilla)</td>
          <td>18 l√≠nies</td>
        </tr>
        <tr>
          <td><strong>M√®todes necessaris</strong></td>
          <td>1 per cada camp (5 m√®todes per 5 camps)</td>
          <td>0 m√®todes</td>
        </tr>
        <tr>
          <td><strong>Conversi√≥ de tipus</strong></td>
          <td>Manual amb casting i conversi√≥</td>
          <td>Autom√†tica segons type</td>
        </tr>
        <tr>
          <td><strong>Sincronitzaci√≥</strong></td>
          <td>Unidireccional per defecte, bidireccional manual</td>
          <td>Bidireccional autom√†tica</td>
        </tr>
        <tr>
          <td><strong>Previsualitzaci√≥ temps real</strong></td>
          <td>Funciona per√≤ requereix sincronitzaci√≥ manual</td>
          <td>Autom√†tica sense codi extra</td>
        </tr>
        <tr>
          <td><strong>Mantenibilitat</strong></td>
          <td>Alta complexitat per afegir camps</td>
          <td>Baixa complexitat (model + plantilla)</td>
        </tr>
        <tr>
          <td><strong>Integraci√≥ Angular Forms</strong></td>
          <td>No integrat</td>
          <td>Totalment integrat (validaci√≥, estat)</td>
        </tr>
        <tr>
          <td><strong>Propens a errors</strong></td>
          <td>Alt (oblit de sincronitzar, conversions)</td>
          <td>Baix (Angular ho gestiona)</td>
        </tr>
      </tbody>
    </table>

    <h4>1.2.5. Taula de controls HTML i [(ngModel)]</h4>

    <table>
      <thead>
        <tr>
          <th>Control HTML</th>
          <th>Type</th>
          <th>Valor vinculat</th>
          <th>Exemple [(ngModel)]</th>
          <th>Conversi√≥ autom√†tica</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>&lt;input type="text"&gt;</code></td>
          <td>Text</td>
          <td><code>string</code></td>
          <td><code>[(ngModel)]="nom"</code></td>
          <td>‚Äî</td>
        </tr>
        <tr>
          <td><code>&lt;input type="number"&gt;</code></td>
          <td>N√∫mero</td>
          <td><code>number</code></td>
          <td><code>[(ngModel)]="preu"</code></td>
          <td>string ‚Üí number <i class="bi bi-check-circle text-success" aria-hidden="true"></i></td>
        </tr>
        <tr>
          <td><code>&lt;input type="email"&gt;</code></td>
          <td>Email</td>
          <td><code>string</code></td>
          <td><code>[(ngModel)]="email"</code></td>
          <td>‚Äî</td>
        </tr>
        <tr>
          <td><code>&lt;input type="checkbox"&gt;</code></td>
          <td>Checkbox</td>
          <td><code>boolean</code></td>
          <td><code>[(ngModel)]="actiu"</code></td>
          <td>checked ‚Üí boolean <i class="bi bi-check-circle text-success" aria-hidden="true"></i></td>
        </tr>
        <tr>
          <td><code>&lt;input type="radio"&gt;</code></td>
          <td>Radio</td>
          <td><code>string</code></td>
          <td><code>[(ngModel)]="opcio"</code></td>
          <td>‚Äî</td>
        </tr>
        <tr>
          <td><code>&lt;select&gt;</code></td>
          <td>Select</td>
          <td><code>string</code></td>
          <td><code>[(ngModel)]="categoria"</code></td>
          <td>‚Äî</td>
        </tr>
        <tr>
          <td><code>&lt;textarea&gt;</code></td>
          <td>Textarea</td>
          <td><code>string</code></td>
          <td><code>[(ngModel)]="descripcio"</code></td>
          <td>‚Äî</td>
        </tr>
      </tbody>
    </table>

    <h4>1.2.6. Quan usar formularis template-driven (amb [(ngModel)])</h4>

    <p><strong><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Useu formularis template-driven ([(ngModel)]) SEMPRE que:</strong></p>

    <ul>
      <li><strong>El formulari √©s simple amb pocs camps</strong> (3-10 camps): afegir element, cerca b√†sica, formulari de contacte.</li>
      <li><strong>Les validacions s√≥n b√†siques:</strong> required, minlength, maxlength, pattern, email (validacions HTML est√†ndard).</li>
      <li><strong>No necessiteu l√≤gica complexa de validaci√≥ creuada</strong> (camps que depenen uns dels altres).</li>
      <li><strong>Voleu prototipatge r√†pid:</strong> template-driven √©s m√©s r√†pid per comen√ßar.</li>
      <li><strong>El formulari no t√© l√≤gica din√†mica complexa:</strong> no afegiu/eliminau camps program√†ticament.</li>
    </ul>

    <p><strong><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> NO useu template-driven quan:</strong></p>

    <ul>
      <li><strong>El formulari √©s molt complex</strong> (15+ camps amb m√∫ltiples seccions): millor usar reactive forms.</li>
      <li><strong>Necessiteu validacions complexes personalitzades</strong> que depenen de m√∫ltiples camps.</li>
      <li><strong>El formulari canvia din√†micament:</strong> afegiu/eliminau camps segons condicions.</li>
      <li><strong>Voleu testejar el formulari a√Øllat del component:</strong> reactive forms s√≥n m√©s testables.</li>
      <li><strong>Necessiteu control program√†tic total:</strong> subscriure's a canvis, desactivar camps din√†micament, etc.</li>
    </ul>

    <h4>1.2.7. Integraci√≥ amb el projecte Cat√†leg d'elements</h4>

    <p>Al projecte del cat√†leg, utilitzareu formularis template-driven per:</p>

    <ul>
      <li><strong>Formulari d'alta d'elements:</strong> afegir nous elements amb t√≠tol, categoria, preu, descripci√≥.</li>
      <li><strong>Cerca i filtres:</strong> formulari per cercar elements per categoria, rang de preu, disponibilitat.</li>
      <li><strong>Configuraci√≥ de previsualitzaci√≥:</strong> checkbox per mostrar/amagar previsualitzaci√≥ en temps real.</li>
    </ul>

    <p>Aquesta aproximaci√≥ us permet crear formularis funcionals r√†pidament sense codi complex, mantenint la separaci√≥ entre dades (component) i vista (plantilla), i preparant el terreny per afegir validacions a la seg√ºent lectura.</p>
  {% endcapture %}
  {% include section-point.html numero="1.2" titol="Marc conceptual" contingut=section_point_1_2 %}

  {% capture section_point_1_3 %}
    <p>Penseu en la vinculaci√≥ bidireccional <code>[(ngModel)]</code> com un <strong>cable bidireccional</strong> que connecta el control HTML (input, select, etc.) amb la propietat del component:</p>

    <ul>
      <li><strong>Direcci√≥ 1 (Component ‚Üí Vista):</strong> Quan el component assigna un valor (p.ex. <code>formulariElement.titol = 'Nou t√≠tol'</code>), el control HTML es reactualitza autom√†ticament mostrant "Nou t√≠tol".</li>
      <li><strong>Direcci√≥ 2 (Vista ‚Üí Component):</strong> Quan l'usuari escriu al control HTML, el valor es sincronitza autom√†ticament a la propietat del component sense cap m√®tode manual.</li>
    </ul>

    <h4>1.3.1. Expansi√≥ de [(ngModel)]</h4>

    <p>La sintaxi <code>[(ngModel)]</code> √©s <em>sugar syntax</em> (sintaxi abreujada) per:</p>

    {% capture code_250 %}<!-- Forma abreujada (recomanada) -->
<input [(ngModel)]="nom" />
<!-- Forma expandida (equivalent) -->
<input [ngModel]="nom" (ngModelChange)="nom = $event" />{% endcapture %}
    {% include code-block.html lang="html" code=code_250 %}

    <p>Angular combina property binding <code>[ngModel]</code> (component ‚Üí vista) i event binding <code>(ngModelChange)</code> (vista ‚Üí component) en una sola directiva.</p>

    <h4>1.3.2. Component contenidor</h4>

    <p>El component actua com a <strong>font √∫nica de veritat</strong> per les dades del formulari. Conserva l'objecte <code>formulariElement</code> amb tots els camps, gestiona l'historial d'entrades (<code>entradesFormulari[]</code>), i coordina l'enviament del formulari sense refrescar la p√†gina.</p>

    <h4>1.3.3. Flux complet del formulari</h4>

    <ol>
      <li><strong>Inicialitzaci√≥:</strong> El component crea <code>formulariElement</code> amb valors per defecte.</li>
      <li><strong>Entrada d'usuari:</strong> L'usuari modifica controls ‚Üí <code>[(ngModel)]</code> sincronitza autom√†ticament ‚Üí propietats actualitzades.</li>
      <li><strong>Previsualitzaci√≥:</strong> La interpolaci√≥ <code>{% raw %}{{ formulariElement.titol }}{% endraw %}</code> es reactualitza autom√†ticament.</li>
      <li><strong>Enviament:</strong> L'usuari prem bot√≥ ‚Üí <code>(ngSubmit)</code> intercepta ‚Üí component copia dades ‚Üí afegeix a historial.</li>
      <li><strong>Reinici:</strong> Component assigna valors per defecte a <code>formulariElement</code> ‚Üí controls HTML es reinicien autom√†ticament.</li>
    </ol>

    <h4>1.3.4. FormsModule i name obligatori</h4>

    <p>Angular necessita <code>FormsModule</code> per proporcionar les directives <code>ngModel</code> i <code>ngForm</code>. L'atribut <code>name</code> √©s obligatori perqu√® Angular identifica cada control dins del formulari. Sense <code>name</code>, Angular no pot registrar el control i llan√ßar√† l'error <code>NG0303: Cannot find control with unspecified name attribute</code>.</p>

    <h4>1.3.5. Difer√®ncia template-driven vs reactive</h4>

    <ul>
      <li><strong>Template-driven ([(ngModel)]):</strong> La configuraci√≥ del formulari es fa majorit√†riament a la <strong>plantilla</strong> (HTML). Simple i r√†pid per formularis b√†sics.</li>
      <li><strong>Reactive (FormBuilder):</strong> La configuraci√≥ del formulari es fa al <strong>component</strong> (TypeScript). M√©s control i testejable per formularis complexos.</li>
    </ul>

    <p>En aquesta lectura utilitzeu template-driven perqu√® √©s m√©s intu√Øtiu per comen√ßar, i a lectures posteriors veureu reactive forms quan necessiteu m√©s control.</p>

    {% include success_box.html contingut="<strong>Clau:</strong> [(ngModel)] actua com un cable bidireccional autom√†tic entre component i vista, eliminant la necessitat de codi de sincronitzaci√≥ manual." %}
  {% endcapture %}
  {% include section-point.html numero="1.3" titol="Model mental" contingut=section_point_1_3 %}

  {% capture section_point_1_4 %}
    <h4>1.4.1. Objectiu</h4>
    <p>Comprendre les difer√®ncies fonamentals entre vinculaci√≥ unidireccional (property binding i event binding separats) i vinculaci√≥ bidireccional ([(ngModel)] combinat).</p>

    <h4>1.4.2. Contingut</h4>

    <p>Angular ofereix tres tipus principals de vinculaci√≥ de dades:</p>

    <h4>1.4.3. Interpolaci√≥ {% raw %}{{ }}{% endraw %}</h4>

    <p>La m√©s b√†sica: mostra valors del component a la plantilla (nom√©s component ‚Üí vista).</p>

    {% capture code_251 %}// Component
nom = 'Angular';{% endcapture %}
    {% include code-block.html lang="typescript" code=code_251 %}

    {% capture code_252 %}<!-- Plantilla -->
<h1>{% raw %}{{ nom }}{% endraw %}</h1>
<!-- Mostra: Angular -->{% endcapture %}
    {% include code-block.html lang="html" code=code_252 %}

    <p><strong>Direcci√≥:</strong> Component ‚Üí Vista (unidireccional)<br>
    <strong>Cas d'√∫s:</strong> Mostrar dades sense interacci√≥.</p>

    <h4>1.4.4. Property binding [propietat]</h4>

    <p>Assigna valors del component a propietats HTML (nom√©s component ‚Üí vista).</p>

    {% capture code_253 %}// Component
urlImatge = 'logo.png';
estatDisponible = false;{% endcapture %}
    {% include code-block.html lang="typescript" code=code_253 %}

    {% capture code_254 %}<!-- Plantilla -->
<img [src]="urlImatge" />
<button [disabled]="!estatDisponible">Comprar</button>{% endcapture %}
    {% include code-block.html lang="html" code=code_254 %}

    <p><strong>Direcci√≥:</strong> Component ‚Üí Vista (unidireccional)<br>
    <strong>Cas d'√∫s:</strong> Controlar propietats HTML din√†micament.</p>

    <h4>1.4.5. Event binding (event)</h4>

    <p>Escolta esdeveniments HTML i executa m√®todes del component (nom√©s vista ‚Üí component).</p>

    {% capture code_255 %}// Component
incrementar(): void {
  this.comptador++;
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_255 %}

    {% capture code_256 %}<!-- Plantilla -->
<button (click)="incrementar()">+1</button>{% endcapture %}
    {% include code-block.html lang="html" code=code_256 %}

    <p><strong>Direcci√≥:</strong> Vista ‚Üí Component (unidireccional)<br>
    <strong>Cas d'√∫s:</strong> Respondre a interaccions d'usuari.</p>

    <h4>1.4.6. Vinculaci√≥ bidireccional [(ngModel)]</h4>

    <p>Combina property binding i event binding en una sola directiva (component ‚Üî vista).</p>

    {% capture code_257 %}// Component
nom = 'Angular';{% endcapture %}
    {% include code-block.html lang="typescript" code=code_257 %}

    {% capture code_258 %}<!-- Plantilla -->
<input [(ngModel)]="nom" name="nom" />
<p>Nom: {% raw %}{{ nom }}{% endraw %}</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_258 %}

    <p><strong>Direcci√≥:</strong> Component ‚Üî Vista (bidireccional)<br>
    <strong>Cas d'√∫s:</strong> Formularis on usuari modifica dades que tamb√© es mostren.</p>

    <p><strong>Quan l'usuari escriu "Vue" a l'input:</strong></p>
    <ol>
      <li>Event binding detecta el canvi ‚Üí actualitza <code>nom = 'Vue'</code></li>
      <li>Property binding detecta el canvi de <code>nom</code> ‚Üí actualitza l'input i el par√†graf</li>
      <li>Resultat: tot sincronitzat autom√†ticament</li>
    </ol>

    <h4>1.4.7. Comparativa visual amb exemple pr√†ctic</h4>

    <p><strong>Escenari:</strong> Camp de cerca amb previsualitzaci√≥.</p>

    <p><strong>Amb vinculaci√≥ unidireccional (verbose):</strong></p>

    {% capture code_259 %}// Component
cerca = '';
actualitzarCerca(event: Event): void {
  this.cerca = (event.target as HTMLInputElement).value;
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_259 %}

    {% capture code_260 %}<!-- Plantilla -->
<input [value]="cerca" (input)="actualitzarCerca($event)" />
<p>Cercant: {% raw %}{{ cerca }}{% endraw %}</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_260 %}

    <p><strong>Amb vinculaci√≥ bidireccional (conc√≠s):</strong></p>

    {% capture code_261 %}// Component
cerca = '';
// No cal m√®tode!{% endcapture %}
    {% include code-block.html lang="typescript" code=code_261 %}

    {% capture code_262 %}<!-- Plantilla -->
<input [(ngModel)]="cerca" name="cerca" />
<p>Cercant: {% raw %}{{ cerca }}{% endraw %}</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_262 %}

    <p><strong>Difer√®ncies clau:</strong></p>
    <ul>
      <li><strong>Codi:</strong> -5 l√≠nies (sense m√®tode ni event handling)</li>
      <li><strong>Sincronitzaci√≥:</strong> Autom√†tica en ambd√≥s sentits</li>
      <li><strong>Mantenibilitat:</strong> M√©s f√†cil afegir camps (nom√©s model + plantilla)</li>
    </ul>

    {% include success_box.html contingut="<strong>Clau:</strong> La vinculaci√≥ bidireccional [(ngModel)] combina [property] i (event) en una sola directiva, simplificant formularis amb sincronitzaci√≥ autom√†tica en ambd√≥s sentits." %}

    <h4>1.4.8. Resultat esperat</h4>
    <p>Enteneu les difer√®ncies entre interpolaci√≥, property binding, event binding i vinculaci√≥ bidireccional, i sabeu quan utilitzar cadascuna.</p>
  {% endcapture %}
  {% include section-point.html numero="1.4" titol="Vinculaci√≥ unidireccional vs bidireccional: difer√®ncies" contingut=section_point_1_4 %}

  {% capture section_point_1_5 %}
    <h4>1.5.1. Objectiu</h4>
    <p>Dominar la sintaxi de <code>[(ngModel)]</code>, entendre com funciona internament i aprendre a expandir-la quan calgui personalitzar el comportament.</p>

    <h4>1.5.2. Contingut</h4>

    <p>La sintaxi <code>[(propietat)]</code> s'anomena <strong>banana in a box</strong> (pl√†tan en una caixa) per la seva forma visual: <code>[()]</code>. √âs syntactic sugar (sucre sint√†ctic) que Angular expandeix autom√†ticament.</p>

    <h4>1.5.3. Forma abreujada (recomanada)</h4>

    {% capture code_263 %}<input type="text" name="nom" [(ngModel)]="formulariElement.nom" />{% endcapture %}
    {% include code-block.html lang="html" code=code_263 %}

    <p>Angular interpreta aix√≤ com: "sincronitza bidirecionalment <code>formulariElement.nom</code> amb aquest input".</p>

    <h4>1.5.4. Forma expandida (equivalent)</h4>

    {% capture code_264 %}<input type="text" name="nom" [ngModel]="formulariElement.nom" (ngModelChange)="formulariElement.nom = $event" />{% endcapture %}
    {% include code-block.html lang="html" code=code_264 %}

    <p><strong>Desglossament:</strong></p>
    <ol>
      <li><strong><code>[ngModel]="formulariElement.nom"</code>:</strong> Property binding. El valor del component s'assigna a l'input (component ‚Üí vista).</li>
      <li><strong><code>(ngModelChange)="formulariElement.nom = $event"</code>:</strong> Event binding. Quan l'usuari escriu, l'esdeveniment em√©s actualitza el component (vista ‚Üí component).</li>
      <li><strong><code>$event</code>:</strong> Cont√© el nou valor escrit per l'usuari.</li>
    </ol>

    <h4>1.5.5. Quan utilitzar la forma expandida</h4>

    <p>Normalment useu la forma abreujada <code>[(ngModel)]</code>, per√≤ la forma expandida √©s √∫til quan necessiteu:</p>

    <p><strong>Cas 1: Executar l√≤gica addicional quan canvia el valor</strong></p>

    {% capture code_265 %}<input type="text" name="cerca" [ngModel]="cerca" (ngModelChange)="actualitzarCerca($event)" />{% endcapture %}
    {% include code-block.html lang="html" code=code_265 %}

    {% capture code_266 %}actualitzarCerca(nouValor: string): void {
  this.cerca = nouValor;
  console.log('Cercant:', nouValor);
  // L√≤gica addicional: cridar API de cerca, actualitzar estad√≠stiques, etc.
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_266 %}

    <p><strong>Cas 2: Transformar el valor abans d'assignar-lo</strong></p>

    {% capture code_267 %}<input type="text" name="nom" [ngModel]="nom" (ngModelChange)="nom = $event.toUpperCase()" />{% endcapture %}
    {% include code-block.html lang="html" code=code_267 %}

    <p>Aix√≤ converteix autom√†ticament l'entrada a maj√∫scules mentre l'usuari escriu.</p>

    <p><strong>Cas 3: Validaci√≥ o restricci√≥ personalitzada</strong></p>

    {% capture code_268 %}<input type="number" name="preu" [ngModel]="preu" (ngModelChange)="actualitzarPreu($event)" />{% endcapture %}
    {% include code-block.html lang="html" code=code_268 %}

    {% capture code_269 %}actualitzarPreu(nouPreu: number): void {
  // Restringir a valors positius
  this.preu = nouPreu < 0 ? 0 : nouPreu;
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_269 %}

    <h4>1.5.6. Errors comuns de sintaxi</h4>

    {% capture code_270 %}<!-- ERROR: Par√®ntesis invertits -->
<input ([ngModel])="nom" />
<!-- ERROR: Nom√©s claud√†tors (property binding, no bidireccional) -->
<input [ngModel]="nom" />
<!-- ERROR: Nom√©s par√®ntesis (no existeix) -->
<input (ngModel)="nom" />
<!-- CORRECTE: Claud√†tors dins par√®ntesis -->
<input [(ngModel)]="nom" name="nom" />{% endcapture %}
    {% include code-block.html lang="html" code=code_270 %}

    {% include success_box.html contingut="<strong>Clau:</strong> La sintaxi [(ngModel)] combina [ngModel] i (ngModelChange) en banana in a box, i es pot expandir quan necessiteu l√≤gica personalitzada." %}

    <h4>1.5.7. Resultat esperat</h4>
    <p>Domineu la sintaxi de vinculaci√≥ bidireccional, enteneu com funciona internament, i sabeu quan utilitzar la forma expandida.</p>
  {% endcapture %}
  {% include section-point.html numero="1.5" titol="Sintaxi de vinculaci√≥ bidireccional: combinaci√≥ de [ ] i ( )" contingut=section_point_1_5 %}

  {% capture section_point_1_6 %}
    <h4>1.6.1. Objectiu</h4>
    <p>Aprendre a configurar <code>FormsModule</code> correctament en components standalone i entendre els requisits per utilitzar <code>[(ngModel)]</code>.</p>

    <h4>1.6.2. Contingut</h4>

    <p>Per utilitzar vinculaci√≥ bidireccional amb <code>[(ngModel)]</code>, cal importar <code>FormsModule</code> d'Angular. Aquest m√≤dul proporciona les directives <code>ngModel</code>, <code>ngForm</code> i funcionalitats relacionades amb formularis template-driven.</p>

    <h4>1.6.3. Importaci√≥ en components standalone</h4>

    <p>Angular 17+ utilitza components standalone per defecte. La configuraci√≥ √©s:</p>

    {% capture code_271 %}// src/app/app.component.ts
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms'; // ‚Üê IMPORTAR
@Component({
  selector: 'app-root',
  standalone: true,
  imports: [
    CommonModule,  // Per *ngFor, *ngIf, pipes, etc.
    FormsModule    // Per [(ngModel)] i formularis ‚Üê AFEGIR
  ],
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss']
})
export class AppComponent {
  formulariElement = {
    titol: '',
    categoria: 'Components UI',
    preu: 0
  };
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_271 %}

    <p><strong>Punts clau:</strong></p>
    <ol>
      <li><strong>Import al principi:</strong> <code>import { FormsModule } from '@angular/forms';</code></li>
      <li><strong>Afegir a <code>imports</code>:</strong> array dins de <code>@Component</code> decorator</li>
      <li><strong>Necessari per cada component:</strong> Si teniu m√∫ltiples components amb formularis, cada un ha d'importar <code>FormsModule</code></li>
    </ol>

    <h4>1.6.4. Error com√∫: Oblidar importar FormsModule</h4>

    <p>Si utilitzeu <code>[(ngModel)]</code> sense importar <code>FormsModule</code>, obteniu aquest error:</p>

    {% capture code_272 %}Error: NG8002: Can't bind to 'ngModel' since it isn't a known property of 'input'.{% endcapture %}
    {% include code-block.html lang="text" code=code_272 %}

    <p><strong>Soluci√≥:</strong></p>
    {% capture code_273 %}imports: [CommonModule, FormsModule] // ‚Üê Afegir FormsModule{% endcapture %}
    {% include code-block.html lang="typescript" code=code_273 %}

    <h4>1.6.5. Error com√∫: Oblidar atribut name</h4>

    <p>Si utilitzeu <code>[(ngModel)]</code> sense l'atribut <code>name</code>, obteniu:</p>

    {% capture code_274 %}Error: NG0303: Cannot find control with unspecified name attribute{% endcapture %}
    {% include code-block.html lang="text" code=code_274 %}

    <p><strong>Per qu√® Angular necessita <code>name</code>?</strong></p>

    <p>Angular crea autom√†ticament un objecte <code>NgForm</code> per cada <code>&lt;form&gt;</code> a la plantilla. Aquest objecte registra tots els controls amb <code>[(ngModel)]</code> utilitzant el valor de l'atribut <code>name</code> com a clau. Sense <code>name</code>, Angular no pot identificar el control dins del formulari.</p>

    <p><strong>Exemple correcte:</strong></p>

    {% capture code_275 %}<form>
<!-- CORRECTE: cada control t√© name √∫nic -->
<input type="text" name="titol" [(ngModel)]="formulariElement.titol" />
<input type="number" name="preu" [(ngModel)]="formulariElement.preu" />
<select name="categoria" [(ngModel)]="formulariElement.categoria">
<option value="ui">Components UI</option>
</select>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_275 %}

    <p><strong>Exemple incorrecte:</strong></p>

    {% capture code_276 %}<form>
<!-- ERROR: sense name ‚Üí NG0303 -->
<input type="text" [(ngModel)]="formulariElement.titol" />
<input type="number" [(ngModel)]="formulariElement.preu" />
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_276 %}

    <h4>1.6.6. √ös fora de &lt;form&gt;: standalone ngModel</h4>

    <p>Si utilitzeu <code>[(ngModel)]</code> <strong>fora d'un <code>&lt;form&gt;</code></strong>, podeu ometre l'atribut <code>name</code> afegint <code>[ngModelOptions]="{standalone: true}"</code>:</p>

    {% capture code_277 %}<!-- Fora de <form> -->
<input type="text" [(ngModel)]="cerca" [ngModelOptions]="{standalone: true}" />
<!-- Funciona sense name perqu√® √©s standalone -->{% endcapture %}
    {% include code-block.html lang="html" code=code_277 %}

    <p>Per√≤ dins d'un <code>&lt;form&gt;</code>, <strong>sempre necessiteu <code>name</code></strong>.</p>

    <h4>1.6.7. FormsModule vs ReactiveFormsModule</h4>

    <p>Angular t√© dos m√≤duls de formularis:</p>

    <table>
      <thead>
        <tr>
          <th>M√≤dul</th>
          <th>Enfocament</th>
          <th>Quan usar</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>FormsModule</strong></td>
          <td>Template-driven</td>
          <td>Formularis simples (3-10 camps), prototipatge r√†pid</td>
        </tr>
        <tr>
          <td><strong>ReactiveFormsModule</strong></td>
          <td>Model-driven</td>
          <td>Formularis complexos, validacions avan√ßades, control program√†tic</td>
        </tr>
      </tbody>
    </table>

    <p><strong>En aquesta lectura utilitzeu FormsModule</strong> perqu√® √©s m√©s intu√Øtiu per comen√ßar. A unitats posteriors veureu ReactiveFormsModule per a casos m√©s avan√ßats.</p>

    {% include success_box.html contingut="<strong>Clau:</strong> Cal importar FormsModule d'@angular/forms i afegir-lo a l'array imports del component. Cada control amb [(ngModel)] necessita atribut name √∫nic dins d'un &lt;form&gt;." %}

    <h4>1.6.8. Resultat esperat</h4>
    <p>Sabeu configurar <code>FormsModule</code> correctament, enteneu per qu√® cal l'atribut <code>name</code>, i podeu diagnosticar errors habituals (NG8002, NG0303).</p>
  {% endcapture %}
  {% include section-point.html numero="1.6" titol="Importar m√≤dul de formularis: configuraci√≥ necess√†ria" contingut=section_point_1_6 %}

  {% capture section_point_1_7 %}
    <h4>1.7.1. Objectiu</h4>
    <p>Dominar l'√∫s de controls HTML est√†ndard amb <code>[(ngModel)]</code> per capturar diferents tipus de dades (text, n√∫meros, booleans, opcions).</p>

    <h4>1.7.2. Contingut</h4>

    <p>Angular suporta tots els controls HTML est√†ndard amb vinculaci√≥ bidireccional. Cada control t√© particularitats sobre el tipus de valor que vincula i com es comporta.</p>

    <h4>1.7.3. Input de text (type="text")</h4>

    <p>El control m√©s b√†sic per capturar text.</p>

    {% capture code_278 %}// Component
formulariElement = {
  titol: ''
};{% endcapture %}
    {% include code-block.html lang="typescript" code=code_278 %}

    {% capture code_279 %}<!-- Plantilla -->
<label>
T√≠tol de l'element
<input type="text" name="titol" [(ngModel)]="formulariElement.titol" />
</label>
<!-- Previsualitzaci√≥ -->
<p>T√≠tol: {% raw %}{{ formulariElement.titol || '(sense t√≠tol)' }}{% endraw %}</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_279 %}

    <p><strong>Caracter√≠stiques:</strong></p>
    <ul>
      <li>Valor vinculat: <code>string</code></li>
      <li>Valor per defecte: <code>''</code> (string buit)</li>
      <li>Atributs √∫tils: <code>placeholder</code>, <code>maxlength</code>, <code>required</code></li>
    </ul>

    <h4>1.7.4. Input de n√∫mero (type="number")</h4>

    <p>Captura valors num√®rics amb conversi√≥ autom√†tica.</p>

    {% capture code_280 %}// Component
formulariElement = {
  preu: 0
};{% endcapture %}
    {% include code-block.html lang="typescript" code=code_280 %}

    {% capture code_281 %}<!-- Plantilla -->
<label>
Preu (EUR)
<input type="number" name="preu" min="0" step="0.5" [(ngModel)]="formulariElement.preu" />
</label>
<!-- Previsualitzaci√≥ -->
<p>Preu: {% raw %}{{ formulariElement.preu | currency:'EUR':'symbol':'1.2-2' }}{% endraw %}</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_281 %}

    <p><strong>Caracter√≠stiques:</strong></p>
    <ul>
      <li>Valor vinculat: <code>number</code> (conversi√≥ autom√†tica string ‚Üí number)</li>
      <li>Valor per defecte: <code>0</code> o <code>null</code></li>
      <li>Atributs √∫tils: <code>min</code>, <code>max</code>, <code>step</code></li>
      <li><strong>Important:</strong> Si l'usuari esborra el camp, el valor √©s <code>null</code>, no <code>0</code></li>
    </ul>

    <h4>1.7.5. Checkbox (type="checkbox")</h4>

    <p>Captura valors booleans (true/false).</p>

    {% capture code_282 %}// Component
formulariElement = {
  disponible: true
};{% endcapture %}
    {% include code-block.html lang="typescript" code=code_282 %}

    {% capture code_283 %}<!-- Plantilla -->
<label class="checkbox">
<input type="checkbox" name="disponible" [(ngModel)]="formulariElement.disponible" />
Disponible immediatament
</label>
<!-- Previsualitzaci√≥ -->
<p>Disponibilitat: {% raw %}{{ formulariElement.disponible ? 'Disponible' : 'No disponible' }}{% endraw %}</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_283 %}

    <p><strong>Caracter√≠stiques:</strong></p>
    <ul>
      <li>Valor vinculat: <code>boolean</code> (conversi√≥ autom√†tica checked ‚Üí true/false)</li>
      <li>Valor per defecte: <code>true</code> o <code>false</code></li>
      <li>L'atribut <code>checked</code> en HTML es gestiona autom√†ticament</li>
    </ul>

    <h4>1.7.6. Radio buttons (type="radio")</h4>

    <p>Captura una opci√≥ entre m√∫ltiples (nom√©s una seleccionable).</p>

    {% capture code_284 %}// Component
formulariElement = {
  prioritat: 'normal'
};{% endcapture %}
    {% include code-block.html lang="typescript" code=code_284 %}

    {% capture code_285 %}<!-- Plantilla -->
<fieldset>
<legend>Prioritat</legend>
<label>
<input type="radio" name="prioritat" value="baixa" [(ngModel)]="formulariElement.prioritat" />
Baixa
</label>
<label>
<input type="radio" name="prioritat" value="normal" [(ngModel)]="formulariElement.prioritat" />
Normal
</label>
<label>
<input type="radio" name="prioritat" value="alta" [(ngModel)]="formulariElement.prioritat" />
Alta
</label>
</fieldset>
<!-- Previsualitzaci√≥ -->
<p>Prioritat seleccionada: {% raw %}{{ formulariElement.prioritat }}{% endraw %}</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_285 %}

    <p><strong>Caracter√≠stiques:</strong></p>
    <ul>
      <li>Valor vinculat: <code>string</code> (el <code>value</code> de l'opci√≥ seleccionada)</li>
      <li><strong>IMPORTANT:</strong> Tots els radio del mateix grup han de tenir el mateix <code>name</code></li>
      <li><strong>IMPORTANT:</strong> Tots els radio del mateix grup vinculen amb el mateix <code>[(ngModel)]</code></li>
      <li>Nom√©s un radio pot estar seleccionat a la vegada</li>
    </ul>

    <h4>1.7.7. Select (desplegable)</h4>

    <p>Captura una opci√≥ d'una llista desplegable.</p>

    {% capture code_286 %}// Component
formulariElement = {
  categoria: 'Components UI'
};{% endcapture %}
    {% include code-block.html lang="typescript" code=code_286 %}

    {% capture code_287 %}<!-- Plantilla -->
<label>
Categoria
<select name="categoria" [(ngModel)]="formulariElement.categoria">
<option value="Components UI">Components UI</option>
<option value="Paletes">Paletes</option>
<option value="Icones">Icones</option>
<option value="Tipografia">Tipografia</option>
</select>
</label>
<!-- Previsualitzaci√≥ -->
<p>Categoria: {% raw %}{{ formulariElement.categoria }}{% endraw %}</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_287 %}

    <p><strong>Caracter√≠stiques:</strong></p>
    <ul>
      <li>Valor vinculat: <code>string</code> (el <code>value</code> de l'opci√≥ seleccionada)</li>
      <li>Valor per defecte: ha de coincidir amb un <code>value</code> de les opcions</li>
      <li>Atributs √∫tils: <code>multiple</code> (permet selecci√≥ m√∫ltiple, vincula amb array)</li>
    </ul>

    <p><strong>Select amb opcions generades din√†micament:</strong></p>

    {% capture code_288 %}// Component
categories = ['Components UI', 'Paletes', 'Icones', 'Tipografia'];
formulariElement = {
  categoria: 'Components UI'
};{% endcapture %}
    {% include code-block.html lang="typescript" code=code_288 %}

    {% capture code_289 %}<!-- Plantilla -->
<select name="categoria" [(ngModel)]="formulariElement.categoria">
<option *ngFor="let cat of categories" [value]="cat">{% raw %}{{ cat }}{% endraw %}</option>
</select>{% endcapture %}
    {% include code-block.html lang="html" code=code_289 %}

    <h4>1.7.8. Textarea (√†rea de text multil√≠nia)</h4>

    <p>Captura text llarg (m√∫ltiples l√≠nies).</p>

    {% capture code_290 %}// Component
formulariElement = {
  descripcio: ''
};{% endcapture %}
    {% include code-block.html lang="typescript" code=code_290 %}

    {% capture code_291 %}<!-- Plantilla -->
<label>
Descripci√≥ detallada
<textarea name="descripcio" rows="4" placeholder="Descriviu l'element amb detall..." [(ngModel)]="formulariElement.descripcio" ></textarea>
</label>
<!-- Previsualitzaci√≥ -->
<p>Descripci√≥: {% raw %}{{ formulariElement.descripcio || '(sense descripci√≥)' }}{% endraw %}</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_291 %}

    <p><strong>Caracter√≠stiques:</strong></p>
    <ul>
      <li>Valor vinculat: <code>string</code> (pot incloure salts de l√≠nia <code>\n</code>)</li>
      <li>Atributs √∫tils: <code>rows</code>, <code>cols</code>, <code>maxlength</code>, <code>placeholder</code></li>
    </ul>

    {% include success_box.html contingut="<strong>Clau:</strong> Angular suporta tots els controls HTML est√†ndard amb [(ngModel)], convertint autom√†ticament tipus (string ‚Üí number, checked ‚Üí boolean) segons l'atribut type." %}

    <h4>1.7.9. Resultat esperat</h4>
    <p>Sabeu utilitzar els 7 controls b√†sics amb vinculaci√≥ bidireccional i enteneu com Angular gestiona la conversi√≥ autom√†tica de tipus.</p>
  {% endcapture %}
  {% include section-point.html numero="1.7" titol="Controls b√†sics: input de text, textarea, checkbox, radio, select" contingut=section_point_1_7 %}

  {% capture section_point_1_8 %}
    <h4>1.8.1. Objectiu</h4>
    <p>Implementar previsualitzacions din√†miques que es reactualitzen autom√†ticament mentre l'usuari omple el formulari, demostrant la pot√®ncia de la vinculaci√≥ bidireccional.</p>

    <h4>1.8.2. Contingut</h4>

    <p>Una de les grans avantatges de <code>[(ngModel)]</code> √©s que qualsevol canvi als controls HTML s'actualitza immediatament al component, permetent crear previsualitzacions en temps real sense codi addicional.</p>

    <h4>1.8.3. Previsualitzaci√≥ b√†sica</h4>

    {% capture code_292 %}// Component (sense cap m√®tode especial!)
formulariElement = {
  titol: '',
  categoria: 'Components UI',
  preu: 0
};{% endcapture %}
    {% include code-block.html lang="typescript" code=code_292 %}

    {% capture code_293 %}<!-- Formulari -->
<form>
<input type="text" name="titol" [(ngModel)]="formulariElement.titol" />
<select name="categoria" [(ngModel)]="formulariElement.categoria">
<option value="Components UI">Components UI</option>
<option value="Paletes">Paletes</option>
</select>
<input type="number" name="preu" [(ngModel)]="formulariElement.preu" />
</form>
<!-- Previsualitzaci√≥ (s'actualitza autom√†ticament) -->
<section class="preview">
<h4>Previsualitzaci√≥</h4>
<p><strong>{% raw %}{{ formulariElement.titol || 'Sense t√≠tol' }}{% endraw %}</strong></p>
<p>Categoria: {% raw %}{{ formulariElement.categoria }}{% endraw %}</p>
<p>Preu: {% raw %}{{ formulariElement.preu | currency:'EUR':'symbol':'1.2-2' }}{% endraw %}</p>
</section>{% endcapture %}
    {% include code-block.html lang="html" code=code_293 %}

    <p><strong>Com funciona:</strong></p>
    <ol>
      <li>L'usuari escriu "Iconografia" al camp T√≠tol</li>
      <li><code>[(ngModel)]</code> actualitza autom√†ticament <code>formulariElement.titol = 'Iconografia'</code></li>
      <li>La interpolaci√≥ <code>{% raw %}{{ formulariElement.titol }}{% endraw %}</code> detecta el canvi</li>
      <li>Angular reactualitza el DOM mostrant "Iconografia"</li>
      <li>Tot aix√≤ passa <strong>sense cap m√®tode ni esdeveniment manual</strong></li>
    </ol>

    <h4>1.8.4. Comptador de car√†cters en temps real</h4>

    {% capture code_294 %}// Component
formulariElement = {
  descripcio: ''
};
readonly MAX_DESCRIPCIO = 500;{% endcapture %}
    {% include code-block.html lang="typescript" code=code_294 %}

    {% capture code_295 %}<!-- Textarea amb comptador -->
<label>
Descripci√≥ (m√†xim {% raw %}{{ MAX_DESCRIPCIO }}{% endraw %} car√†cters)
<textarea name="descripcio" rows="4" [maxlength]="MAX_DESCRIPCIO" [(ngModel)]="formulariElement.descripcio" ></textarea>
</label>
<!-- Comptador en temps real -->
<p class="char-counter">
{% raw %}{{ formulariElement.descripcio.length }}{% endraw %} / {% raw %}{{ MAX_DESCRIPCIO }}{% endraw %} car√†cters
<span *ngIf="formulariElement.descripcio.length > MAX_DESCRIPCIO * 0.9" class="warning">
Apropant-se al l√≠mit
</span>
</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_295 %}

    <h4>1.8.5. C√†lcul din√†mic basat en camps</h4>

    {% capture code_296 %}// Component
formulariElement = {
  preu: 0,
  quantitat: 1
};
get preuTotal(): number {
  return this.formulariElement.preu * this.formulariElement.quantitat;
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_296 %}

    {% capture code_297 %}<!-- Formulari -->
<label>
Preu unitari (EUR)
<input type="number" name="preu" [(ngModel)]="formulariElement.preu" min="0" />
</label>
<label>
Quantitat
<input type="number" name="quantitat" [(ngModel)]="formulariElement.quantitat" min="1" />
</label>
<!-- C√†lcul autom√†tic -->
<p class="total">
<strong>Total:</strong> {% raw %}{{ preuTotal | currency:'EUR':'symbol':'1.2-2' }}{% endraw %} </p>{% endcapture %}
    {% include code-block.html lang="html" code=code_297 %}

    <h4>1.8.6. Cerca en temps real</h4>

    {% capture code_298 %}// Component
cerca = '';
get elementsFiltratsPerCerca() {
  if (!this.cerca) return this.elementsCataleg;
  const cercaLower = this.cerca.toLowerCase();
  return this.elementsCataleg.filter(el =>
    el.titol.toLowerCase().includes(cercaLower) ||
    el.categoria.toLowerCase().includes(cercaLower)
  );
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_298 %}

    {% capture code_299 %}<!-- Camp de cerca -->
<label>
Cerca
<input type="text" [(ngModel)]="cerca" [ngModelOptions]="{standalone: true}" placeholder="Cercar per t√≠tol o categoria..." />
</label>
<!-- Resultats filtrats en temps real -->
<p>{% raw %}{{ elementsFiltratsPerCerca.length }}{% endraw %} resultats</p>
<ul>
<li *ngFor="let element of elementsFiltratsPerCerca">
{% raw %}{{ element.titol }}{% endraw %} ({% raw %}{{ element.categoria }}{% endraw %})
</li>
</ul>{% endcapture %}
    {% include code-block.html lang="html" code=code_299 %}

    <h4>1.8.7. Previsualitzaci√≥ amb format JSON</h4>

    <p>√ötil durant el desenvolupament per veure l'estat complet:</p>

    {% capture code_300 %}<section class="debug" *ngIf="mostrarDebug">
<h4>Estat actual del formulari (JSON)</h4>
<pre>{% raw %}{{ formulariElement | json }}{% endraw %}</pre>
</section>{% endcapture %}
    {% include code-block.html lang="html" code=code_300 %}

    {% capture code_301 %}// Component
mostrarDebug = false; // Activar nom√©s durant desenvolupament{% endcapture %}
    {% include code-block.html lang="typescript" code=code_301 %}

    {% include success_box.html contingut="<strong>Clau:</strong> La vinculaci√≥ bidireccional [(ngModel)] permet crear previsualitzacions en temps real sense codi manual: qualsevol canvi als controls s'actualitza autom√†ticament a la interpolaci√≥." %}

    <h4>1.8.8. Resultat esperat</h4>
    <p>Sabeu crear previsualitzacions din√†miques, comptadors de car√†cters, c√†lculs autom√†tics i cerca en temps real aprofitant la sincronitzaci√≥ bidireccional.</p>
  {% endcapture %}
  {% include section-point.html numero="1.8" titol="Capturar i mostrar valors en temps real" contingut=section_point_1_8 %}

  {% capture section_point_1_9 %}
    <h4>1.9.1. Objectiu</h4>
    <p>Consolidar els coneixements amb un exemple pr√†ctic complet d'un formulari de cerca amb m√∫ltiples tipus de controls i filtratge din√†mic.</p>

    <h4>1.9.2. Model de cerca</h4>

    {% capture code_302 %}// Component
export class AppComponent {
  // Model de cerca
  filtreCerca = {
    text: '',
    categoria: '',
    preuMaxim: 200,
    nomesDisponibles: false
  };
  // Dades del cat√†leg (exemple)
  elementsCataleg = [
    {
      id: 2,
      titol: 'Cat√†leg de colors corporatius',
      categoria: 'Paletes',
      preu: 49.9,
      disponible: true
    },
    {
      id: 3,
      titol: 'Iconografia consistent',
      categoria: 'Icones',
      preu: 89.5,
      disponible: true
    },
    {
      id: 4,
      titol: 'Sistema de tipografia',
      categoria: 'Tipografia',
      preu: 29.0,
      disponible: false
    }
  ];
  // Getter per filtrar elements en temps real
  get elementsFiltrats() {
    return this.elementsCataleg.filter(element => {
      // Filtre per text (t√≠tol)
      const coincideixText = !this.filtreCerca.text ||
        element.titol.toLowerCase().includes(this.filtreCerca.text.toLowerCase());
      // Filtre per categoria
      const coincideixCategoria = !this.filtreCerca.categoria ||
        element.categoria === this.filtreCerca.categoria;
      // Filtre per preu m√†xim
      const coincideixPreu = element.preu <= this.filtreCerca.preuMaxim;
      // Filtre per disponibilitat
      const coincideixDisponibilitat = !this.filtreCerca.nomesDisponibles ||
        element.disponible;
      return coincideixText && coincideixCategoria && coincideixPreu && coincideixDisponibilitat;
    });
  }
  // M√®tode per reiniciar filtres
  reiniciarFiltres(): void {
    this.filtreCerca = {
      text: '',
      categoria: '',
      preuMaxim: 200,
      nomesDisponibles: false
    };
  }
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_302 %}

    <h4>1.9.3. Formulari de cerca</h4>

    {% capture code_303 %}<!-- Formulari de cerca/filtre -->
<section class="filtre-cerca">
<h3>Cerca i filtra elements</h3>
<form>
<!-- Text de cerca -->
<label>
Cerca per t√≠tol
<input type="text" name="text" placeholder="Escriu per cercar..." [(ngModel)]="filtreCerca.text" />
</label>
<!-- Select de categoria -->
<label>
Categoria
<select name="categoria" [(ngModel)]="filtreCerca.categoria">
<option value="">Totes les categories</option>
<option value="Components UI">Components UI</option>
<option value="Paletes">Paletes</option>
<option value="Icones">Icones</option>
<option value="Tipografia">Tipografia</option>
</select>
</label>
<!-- Range per preu m√†xim -->
<label>
Preu m√†xim: {% raw %}{{ filtreCerca.preuMaxim | currency:'EUR':'symbol':'1.0-0' }}{% endraw %}
<input type="range" name="preuMaxim" min="0" max="200" step="10" [(ngModel)]="filtreCerca.preuMaxim" />
</label>
<!-- Checkbox per nom√©s disponibles -->
<label class="checkbox">
<input type="checkbox" name="nomesDisponibles" [(ngModel)]="filtreCerca.nomesDisponibles" />
Nom√©s elements disponibles
</label>
<!-- Bot√≥ per reiniciar -->
<button type="button" (click)="reiniciarFiltres()">
Reiniciar filtres
</button>
</form>
</section>{% endcapture %}
    {% include code-block.html lang="html" code=code_303 %}

    <h4>1.9.4. Resultats filtrats en temps real</h4>

    {% capture code_304 %}<!-- Resultats -->
<section class="resultats">
<h3>Resultats ({% raw %}{{ elementsFiltrats.length }}{% endraw %})</h3>
<!-- Missatge si no hi ha resultats -->
<p *ngIf="elementsFiltrats.length === 0" class="no-results">
No s'han trobat elements amb aquests filtres. Prova de modificar els criteris de cerca.
</p>
<!-- Llista d'elements filtrats -->
<ul *ngIf="elementsFiltrats.length > 0">
<li *ngFor="let element of elementsFiltrats" class="element-item">
<h4>{% raw %}{{ element.titol }}{% endraw %}</h4>
<p>
<span class="badge">{% raw %}{{ element.categoria }}{% endraw %}</span>
<span class="preu">{% raw %}{{ element.preu | currency:'EUR':'symbol':'1.2-2' }}{% endraw %}</span>
<span class="estat" [class.disponible]="element.disponible">
{% raw %}{{ element.disponible ? 'Disponible' : 'Proper' }}{% endraw %}
</span>
</p>
</li>
</ul>
</section>{% endcapture %}
    {% include code-block.html lang="html" code=code_304 %}

    <h4>1.9.5. Funcionament complet</h4>

    <p><strong>Flux d'interacci√≥:</strong></p>
    <ol>
      <li><strong>L'usuari escriu</strong> "icono" al camp de cerca
        <ul>
          <li><code>filtreCerca.text = 'icono'</code></li>
          <li><code>elementsFiltrats</code> es recalcula autom√†ticament</li>
          <li>La llista mostra nom√©s "Iconografia consistent"</li>
        </ul>
      </li>
      <li><strong>L'usuari selecciona</strong> categoria "Icones"
        <ul>
          <li><code>filtreCerca.categoria = 'Icones'</code></li>
          <li><code>elementsFiltrats</code> es recalcula</li>
          <li>Encara mostra "Iconografia consistent" (coincideix amb ambd√≥s filtres)</li>
        </ul>
      </li>
      <li><strong>L'usuari mou</strong> el slider de preu a 50‚Ç¨
        <ul>
          <li><code>filtreCerca.preuMaxim = 50</code></li>
          <li><code>elementsFiltrats</code> es recalcula</li>
          <li>"Iconografia consistent" desapareix (preu 89‚Ç¨ &gt; 50‚Ç¨)</li>
          <li>Mostra "No s'han trobat elements"</li>
        </ul>
      </li>
      <li><strong>L'usuari prem</strong> "Reiniciar filtres"
        <ul>
          <li><code>reiniciarFiltres()</code> restaura valors per defecte</li>
          <li><code>elementsFiltrats</code> mostra tots els elements</li>
        </ul>
      </li>
    </ol>

    <p>Tot aix√≤ passa <strong>en temps real sense pr√©mer cap bot√≥ de cerca</strong> gr√†cies a <code>[(ngModel)]</code>.</p>

    {% include success_box.html contingut="<strong>Clau:</strong> Els getters (get elementsFiltrats()) combinats amb [(ngModel)] permeten crear cercadors i filtres en temps real sense necessitat de botons de Cercar ni gesti√≥ manual d'esdeveniments." %}

    <h4>1.9.6. Resultat esperat</h4>
    <p>Sabeu crear formularis de cerca complexos amb m√∫ltiples filtres que funcionen en temps real, combinant diferents tipus de controls.</p>
  {% endcapture %}
  {% include section-point.html numero="1.9" titol="Exemple pr√†ctic: formulari de cerca amb m√∫ltiples camps" contingut=section_point_1_9 %}

  {% capture section_point_1_10 %}
    <h4>1.10.1. Objectiu</h4>
    <p>Aprendre a gestionar l'enviament del formulari amb <code>(ngSubmit)</code>, prevenir el refresc de la p√†gina, i processar les dades capturades.</p>

    <h4>1.10.2. Problema: comportament per defecte del formulari</h4>

    {% capture code_305 %}<!-- Formulari HTML tradicional (refresca la p√†gina) -->
<form>
<input type="text" name="titol" [(ngModel)]="formulariElement.titol" />
<button type="submit">Guardar</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_305 %}

    <p><strong>Qu√® passa:</strong></p>
    <ol>
      <li>L'usuari prem "Guardar"</li>
      <li>El navegador envia el formulari (per defecte a la URL actual)</li>
      <li>La p√†gina es refresca ‚Üí <strong>perds tot l'estat de l'aplicaci√≥</strong></li>
    </ol>

    <h4>1.10.3. Soluci√≥: directiva (ngSubmit)</h4>

    {% capture code_306 %}<!-- Formulari Angular (no refresca) -->
<form (ngSubmit)="enviaFormulari()">
<input type="text" name="titol" [(ngModel)]="formulariElement.titol" />
<button type="submit">Guardar</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_306 %}

    {% capture code_307 %}// Component
enviaFormulari(): void {
  console.log('Formulari enviat!', this.formulariElement);
  // Processar dades aqu√≠
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_307 %}

    <p><strong>Qu√® passa:</strong></p>
    <ol>
      <li>L'usuari prem "Guardar"</li>
      <li>Angular intercepta l'esdeveniment <code>submit</code></li>
      <li>Angular <strong>prev√© el comportament per defecte</strong> (no refresca)</li>
      <li>Angular executa <code>enviaFormulari()</code></li>
      <li>La p√†gina <strong>no es refresca</strong> ‚Üí estat preservat</li>
    </ol>

    <h4>1.10.4. Avantatges de (ngSubmit)</h4>

    <ul>
      <li><strong>Prev√© autom√†ticament</strong> el refresc de p√†gina</li>
      <li><strong>No cal</strong> cridar <code>event.preventDefault()</code> manualment</li>
      <li><strong>Integrat</strong> amb el sistema de formularis d'Angular (estat valid/invalid)</li>
    </ul>

    <h4>1.10.5. Processar les dades enviades</h4>

    {% capture code_308 %}// Component
export class AppComponent {
  formulariElement = {
    titol: '',
    categoria: 'Components UI',
    preu: 0,
    descripcio: ''
  };
  entradesFormulari: any[] = [];
  enviaFormulari(): void {
    // 1. Validaci√≥ b√†sica (opcional)
    if (!this.formulariElement.titol) {
      alert('El t√≠tol √©s obligatori');
      return;
    }
    // 2. Crear c√≤pia de les dades (IMPORTANT)
    const novaEntrada = { ...this.formulariElement };
    // 3. Afegir a l'historial
    this.entradesFormulari.unshift(novaEntrada);
    // 4. Feedback a l'usuari
    console.log('Element afegit:', novaEntrada);
    console.log('Total elements:', this.entradesFormulari.length);
    // 5. Reiniciar formulari (seg√ºent punt)
    this.reiniciarFormulari();
  }
  reiniciarFormulari(): void {
    this.formulariElement = {
      titol: '',
      categoria: 'Components UI',
      preu: 0,
      descripcio: ''
    };
  }
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_308 %}

    <p><strong>Important: Per qu√® copiar amb <code>{ ...this.formulariElement }</code>?</strong></p>

    {% capture code_309 %}// INCORRECTE: Refer√®ncia
const novaEntrada = this.formulariElement;
this.entradesFormulari.push(novaEntrada);
this.formulariElement.titol = ''; // Aix√≤ tamb√© modifica novaEntrada!
// CORRECTE: C√≤pia independent
const novaEntrada = { ...this.formulariElement };
this.entradesFormulari.push(novaEntrada);
this.formulariElement.titol = ''; // novaEntrada NO es modifica{% endcapture %}
    {% include code-block.html lang="typescript" code=code_309 %}

    <h4>1.10.6. Mostrar historial d'entrades</h4>

    {% capture code_310 %}<!-- Historial d'enviaments -->
<section class="historial" *ngIf="entradesFormulari.length > 0">
<h3>Elements afegits ({% raw %}{{ entradesFormulari.length }}{% endraw %})</h3>
<ul>
<li *ngFor="let entrada of entradesFormulari; let i = index">
<strong>{% raw %}{{ i + 1 }}{% endraw %}.</strong> {% raw %}{{ entrada.titol }}{% endraw %} ({% raw %}{{ entrada.categoria }}{% endraw %}) ‚Äî {% raw %}{{ entrada.preu | currency:'EUR':'symbol':'1.2-2' }}{% endraw %} </li>
</ul>
<button type="button" (click)="entradesFormulari = []">
Esborrar historial
</button>
</section>{% endcapture %}
    {% include code-block.html lang="html" code=code_310 %}

    <h4>1.10.7. Desactivar bot√≥ si el formulari est√† buit</h4>

    {% capture code_311 %}<form (ngSubmit)="enviaFormulari()">
<input type="text" name="titol" [(ngModel)]="formulariElement.titol" required />
<button type="submit" [disabled]="!formulariElement.titol" >
Guardar element
</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_311 %}

    <p>Aix√≤ desactiva el bot√≥ si el t√≠tol est√† buit, evitant enviaments amb dades incompletes.</p>

    {% include success_box.html contingut="<strong>Clau:</strong> La directiva (ngSubmit) intercepta l'enviament del formulari, prev√© autom√†ticament el refresc de p√†gina, i permet processar les dades sense perdre l'estat de l'aplicaci√≥." %}

    <h4>1.10.8. Resultat esperat</h4>
    <p>Sabeu gestionar l'enviament de formularis amb <code>(ngSubmit)</code>, processar dades capturades, crear historial d'entrades, i desactivar botons segons condicions.</p>
  {% endcapture %}
  {% include section-point.html numero="1.10" titol="Gesti√≥ d'enviament: prevenir comportament per defecte" contingut=section_point_1_10 %}

  {% capture section_point_1_11 %}
    <h4>1.11.1. Objectiu</h4>
    <p>Aprendre diferents estrat√®gies per reiniciar el formulari despr√©s d'enviar-lo, restaurant els camps als valors per defecte.</p>

    <h4>1.11.2. Contingut</h4>

    <p>Despr√©s d'enviar un formulari, √©s habitual voler reiniciar els camps perqu√® l'usuari pugui introduir noves dades sense haver d'esborrar manualment els valors anteriors.</p>

    <h4>1.11.3. Reinici manual: reassignar valors</h4>

    <p>El m√®tode m√©s directe √©s reassignar l'objecte del formulari als valors per defecte:</p>

    {% capture code_312 %}// Component
export class AppComponent {
  formulariElement = {
    titol: '',
    categoria: 'Components UI',
    preu: 0,
    descripcio: '',
    disponible: true
  };
  enviaFormulari(): void {
    // Processar dades...
    const novaEntrada = { ...this.formulariElement };
    this.entradesFormulari.unshift(novaEntrada);
    // Reiniciar formulari
    this.formulariElement = {
      titol: '',
      categoria: 'Components UI', // Valor per defecte
      preu: 0,
      descripcio: '',
      disponible: true
    };
  }
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_312 %}

    <p><strong>Avantatges:</strong></p>
    <ul>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Simple i directe</li>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Control total dels valors per defecte</li>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Funciona sempre</li>
    </ul>

    <p><strong>Inconvenients:</strong></p>
    <ul>
      <li><i class="bi bi-exclamation-triangle text-warning" aria-hidden="true"></i> Cal repetir els valors per defecte (DRY violation)</li>
      <li><i class="bi bi-exclamation-triangle text-warning" aria-hidden="true"></i> Si afegiu camps, cal actualitzar dos llocs</li>
    </ul>

    <h4>1.11.4. Reinici amb m√®tode reutilitzable</h4>

    <p>Millor pr√†ctica: crear un m√®tode que retorni els valors per defecte:</p>

    {% capture code_313 %}// Component
export class AppComponent {
  formulariElement = this.obtenirValorsPerDefecte();
  private obtenirValorsPerDefecte() {
    return {
      titol: '',
      categoria: 'Components UI',
      preu: 0,
      descripcio: '',
      disponible: true
    };
  }
  enviaFormulari(): void {
    // Processar dades...
    const novaEntrada = { ...this.formulariElement };
    this.entradesFormulari.unshift(novaEntrada);
    // Reiniciar amb valors per defecte
    this.formulariElement = this.obtenirValorsPerDefecte();
  }
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_313 %}

    <p><strong>Avantatges:</strong></p>
    <ul>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Valors per defecte definits en un sol lloc</li>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> F√†cil de mantenir</li>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Reutilitzable (constructor i despr√©s d'enviar)</li>
    </ul>

    <h4>1.11.5. Reinici selectiu: mantenir alguns camps</h4>

    <p>A vegades voleu mantenir alguns camps (per exemple, la categoria seleccionada):</p>

    {% capture code_314 %}enviaFormulari(): void {
  // Processar dades...
  const novaEntrada = { ...this.formulariElement };
  this.entradesFormulari.unshift(novaEntrada);
  // Reiniciar nom√©s alguns camps
  this.formulariElement.titol = '';
  this.formulariElement.preu = 0;
  this.formulariElement.descripcio = '';
  // categoria es mant√©
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_314 %}

    <h4>1.11.6. Feedback visual despr√©s de reiniciar</h4>

    {% capture code_315 %}// Component
missatgeExit = '';
enviaFormulari(): void {
  const novaEntrada = { ...this.formulariElement };
  this.entradesFormulari.unshift(novaEntrada);
  // Reiniciar
  this.formulariElement = this.obtenirValorsPerDefecte();
  // Mostrar missatge
  this.missatgeExit = `Element "${novaEntrada.titol}" afegit correctament`;
  // Ocultar despr√©s de 3 segons
  setTimeout(() => {
    this.missatgeExit = '';
  }, 3000);
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_315 %}

    {% capture code_316 %}<!-- Plantilla -->
<div class="alert alert-success" *ngIf="missatgeExit">
{% raw %}{{ missatgeExit }}{% endraw %}
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_316 %}

    {% include success_box.html contingut="<strong>Clau:</strong> Reiniciar el formulari reassignant l'objecte amb valors per defecte √©s simple i efectiu. Utilitzeu un m√®tode reutilitzable per evitar repetici√≥ de codi." %}

    <h4>1.11.7. Resultat esperat</h4>
    <p>Sabeu reiniciar formularis despr√©s d'enviar-los utilitzant diferents estrat√®gies segons les necessitats del projecte.</p>
  {% endcapture %}
  {% include section-point.html numero="1.11" titol="Netejar formulari despr√©s d'enviar" contingut=section_point_1_11 %}

  {% capture section_point_1_12 %}
    <h4>1.12.1. Objectiu</h4>
    <p>Aplicar tots els conceptes vistos en un exercici complet: crear un formulari funcional per afegir nous elements al cat√†leg amb previsualitzaci√≥ en temps real, enviament controlat i reinici autom√†tic.</p>

    <h4>1.12.2. Pas 1: Configurar FormsModule i definir el model</h4>

    {% capture code_317 %}// src/app/app.component.ts
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
interface FormulariElement {
  titol: string;
  categoria: string;
  preu: number;
  descripcio: string;
  disponible: boolean;
}
@Component({
  selector: 'app-root',
  standalone: true,
  imports: [CommonModule, FormsModule],
  templateUrl: './app.component.html'
})
export class AppComponent {
  formulariElement = this.obtenirValorsPerDefecte();
  entradesFormulari: FormulariElement[] = [];
  private obtenirValorsPerDefecte(): FormulariElement {
    return {
      titol: '',
      categoria: 'Components UI',
      preu: 0,
      descripcio: '',
      disponible: true
    };
  }
  enviaFormulari(): void {
    if (!this.formulariElement.titol) {
      alert('El t√≠tol √©s obligatori');
      return;
    }
    const novaEntrada = { ...this.formulariElement };
    this.entradesFormulari.unshift(novaEntrada);
    this.formulariElement = this.obtenirValorsPerDefecte();
  }
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_317 %}

    <h4>1.12.3. Pas 2: Crear el formulari amb tots els controls</h4>

    {% capture code_318 %}<!-- src/app/app.component.html -->
<section class="formulari-nou-element">
<h3>Afegeix element al cat√†leg</h3>
<form (ngSubmit)="enviaFormulari()">
<label>
T√≠tol
<input type="text" name="titol" required [(ngModel)]="formulariElement.titol" />
</label>
<label>
Categoria
<select name="categoria" [(ngModel)]="formulariElement.categoria">
<option value="Components UI">Components UI</option>
<option value="Paletes">Paletes</option>
<option value="Icones">Icones</option>
<option value="Tipografia">Tipografia</option>
</select>
</label>
<label>
Preu (EUR)
<input type="number" name="preu" min="0" step="0.5" [(ngModel)]="formulariElement.preu" />
</label>
<label>
Descripci√≥
<textarea name="descripcio" rows="3" [(ngModel)]="formulariElement.descripcio"></textarea>
</label>
<label>
<input type="checkbox" name="disponible" [(ngModel)]="formulariElement.disponible" />
Disponible immediatament
</label>
<button type="submit" [disabled]="!formulariElement.titol">
Guardar element
</button>
</form>
</section>{% endcapture %}
    {% include code-block.html lang="html" code=code_318 %}

    <h4>1.12.4. Pas 3: Afegir previsualitzaci√≥ en temps real</h4>

    {% capture code_319 %}<section class="previsualitzacio">
<h4>Previsualitzaci√≥</h4>
<article class="card-preview">
<h3>{% raw %}{{ formulariElement.titol | titlecase || 'Sense t√≠tol' }}{% endraw %}</h3>
<span class="badge">{% raw %}{{ formulariElement.categoria | uppercase }}{% endraw %}</span>
<p class="preu">{% raw %}{{ formulariElement.preu | currency:'EUR':'symbol':'1.2-2' }}{% endraw %}</p>
<p>{% raw %}{{ formulariElement.descripcio || 'Sense descripci√≥' }}{% endraw %}</p>
<p>{% raw %}{{ formulariElement.disponible ? 'Disponible' : 'Proper' }}{% endraw %}</p>
</article>
</section>{% endcapture %}
    {% include code-block.html lang="html" code=code_319 %}

    <h4>1.12.5. Pas 4: Mostrar l'historial d'entrades</h4>

    {% capture code_320 %}<section class="historial" *ngIf="entradesFormulari.length > 0">
<h4>Elements afegits ({% raw %}{{ entradesFormulari.length }}{% endraw %})</h4>
<ul>
<li *ngFor="let entrada of entradesFormulari; let i = index">
{% raw %}{{ i + 1 }}{% endraw %}. {% raw %}{{ entrada.titol }}{% endraw %} ({% raw %}{{ entrada.categoria }}{% endraw %}) ‚Äî
{% raw %}{{ entrada.preu | currency:'EUR':'symbol':'1.2-2' }}{% endraw %}
</li>
</ul>
</section>{% endcapture %}
    {% include code-block.html lang="html" code=code_320 %}

    <h4>1.12.6. Resultat esperat</h4>
    <p>Formulari complet funcional amb previsualitzaci√≥ en temps real, enviament sense refresc, i historial d'elements afegits.</p>
  {% endcapture %}
  {% include section-point.html numero="1.12" titol="Mini exemple pr√†ctic: Formulari d'alta d'element" contingut=section_point_1_12 %}

  {% capture section_point_1_13 %}
    <h4>1.13.1. Taula de resoluci√≥ de problemes</h4>

    <table>
      <thead>
        <tr>
          <th>S√≠mptoma</th>
          <th>Possible causa</th>
          <th>Soluci√≥ r√†pida</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Error <code>NG8002: Can't bind to 'ngModel'</code></td>
          <td><code>FormsModule</code> no importat</td>
          <td>Afegiu <code>import { FormsModule } from '@angular/forms'</code> i <code>imports: [FormsModule]</code> al component</td>
        </tr>
        <tr>
          <td>Error <code>NG0303: Cannot find control with unspecified name</code></td>
          <td>Atribut <code>name</code> oblidat en control</td>
          <td>Afegiu <code>name="nomUnic"</code> a cada input/select/textarea amb <code>[(ngModel)]</code></td>
        </tr>
        <tr>
          <td>P√†gina es refresca en enviar</td>
          <td><code>(ngSubmit)</code> no utilitzat o bot√≥ fora del form</td>
          <td>Useu <code>&lt;form (ngSubmit)="metode()"&gt;</code> i assegureu-vos que el bot√≥ √©s <code>type="submit"</code> dins del <code>&lt;form&gt;</code></td>
        </tr>
        <tr>
          <td>Valors no s'actualitzen en temps real</td>
          <td>Par√®ntesis invertits en <code>[(ngModel)]</code></td>
          <td>Comproveu sintaxi: <code>[(ngModel)]</code> (claud√†tors dins par√®ntesis)</td>
        </tr>
        <tr>
          <td>Input number es guarda com a text</td>
          <td>Angular converteix autom√†ticament, problema amb dades simulades</td>
          <td>Verificau que l'atribut √©s <code>type="number"</code>, no <code>type="text"</code></td>
        </tr>
        <tr>
          <td>Entrades duplicades a l'historial</td>
          <td>Refer√®ncia compartida en lloc de c√≤pia</td>
          <td>Useu spread operator: <code>const copia = { ...this.formulariElement }</code> abans d'afegir a l'array</td>
        </tr>
        <tr>
          <td>Checkbox no funciona correctament</td>
          <td><code>[(ngModel)]</code> vinculat a string en lloc de boolean</td>
          <td>Assegureu-vos que la propietat √©s <code>boolean</code>, no <code>string</code></td>
        </tr>
      </tbody>
    </table>
  {% endcapture %}
  {% include section-point.html numero="1.13" titol="Resoluci√≥ de problemes (Win/macOS/Linux)" contingut=section_point_1_13 %}

  {% capture section_point_1_14 %}
  {% capture prompt_1 %}<strong>Rol:</strong> mentor formularis Angular. <strong>Context:</strong> repassar sintaxi vinculaci√≥ bidireccional. <strong>Tasca:</strong> crea taula Markdown 5 controls (input text/number, checkbox, select, textarea): Control HTML, Tipus valor (string/number/boolean), Exemple ngModel, Atributs √∫tils. <strong>Format:</strong> taula 5 files √ó 4 columnes.{% endcapture %}
  {% include prompt-ai.html contingut=prompt_1 %}

  {% capture prompt_2 %}<strong>Rol:</strong> t√®cnica suport TIC Angular. <strong>Context:</strong> alumne informa formulari refresca p√†gina en enviar, perdent estat aplicaci√≥. <strong>Tasca:</strong> genera checklist 5 passos diagn√≤stic: 1. Verificar (ngSubmit) vs (submit), 2. Comprovar type="submit" bot√≥, 3. Bot√≥ dins form?, 4. Errors consola?, 5. Atribut action al form? <strong>Format:</strong> llista numerada 2-3 l√≠nies/pas.{% endcapture %}
  {% include prompt-ai.html contingut=prompt_2 %}

  {% capture prompt_3 %}<strong>Rol:</strong> formador Angular. <strong>Context:</strong> explicar difer√®ncia FormsModule vs ReactiveFormsModule. <strong>Tasca:</strong> crea taula comparativa 4 files (configuraci√≥, validacions, complexitat, quan usar) amb 2 columnes (Template-driven, Reactive). <strong>Format:</strong> Markdown simple.{% endcapture %}
  {% include prompt-ai.html contingut=prompt_3 %}
  {% endcapture %}
  {% include section-point.html numero="1.14" titol="Prompts d'IA" contingut=section_point_1_14 %}

  {% capture section_point_1_15 %}
    <h4>Conceptes te√≤rics</h4>
    {% include checklist.html elements="Comprenc qu√® √©s la vinculaci√≥ bidireccional i com combina property binding i event binding|Entenc la difer√®ncia entre formularis template-driven i reactive|S√© explicar per qu√® l'atribut <code>name</code> √©s obligatori amb ngModel dins d'un form|Comprenc com Angular converteix autom√†ticament tipus (string a number, checked a boolean)" %}

    <h4>Habilitats pr√†ctiques</h4>
    {% capture checklist_practiques %}He importat FormsModule correctament i verificat que ngModel funciona sense errors|S√© utilitzar la sintaxi b√†sica de vinculaci√≥ bidireccional amb diferents controls HTML|He constru√Øt formularis amb almenys 4 tipus de controls (text, number, select, checkbox)|Puc implementar previsualitzacions en temps real que s'actualitzen autom√†ticament|He gestionat l'enviament amb (ngSubmit) sense refrescar la p√†gina|S√© reiniciar formularis despr√©s d'enviar utilitzant m√®todes reutilitzables{% endcapture %}
    {% include checklist.html elements=checklist_practiques %}

    <h4>Resoluci√≥ de problemes</h4>
    {% include checklist.html elements="S√© diagnosticar l'error NG8002 (FormsModule no importat)|Puc resoldre l'error NG0303 (atribut name oblidat)|Entenc com evitar que la p√†gina es refreski en enviar el formulari|S√© crear c√≤pies independents d'objectes per evitar refer√®ncies compartides" %}
  {% endcapture %}
  {% include section-point.html numero="1.15" titol="Autoavaluaci√≥" contingut=section_point_1_15 %}

  {% capture section_point_1_16 %}
    <h4>Qu√® heu apr√®s</h4>
    <p>En aquesta lectura heu apr√®s a crear formularis template-driven amb Angular utilitzant <code>FormsModule</code> i la vinculaci√≥ bidireccional <code>[(ngModel)]</code>. Heu compr√®s com aquesta aproximaci√≥ simplifica dr√†sticament la gesti√≥ de formularis eliminant codi manual de sincronitzaci√≥ entre vista i component, combinant property binding (component ‚Üí vista) i event binding (vista ‚Üí component) en una sola directiva tipus "banana in a box". Heu dominat la configuraci√≥ correcta important <code>FormsModule</code> i afegint l'atribut <code>name</code> obligatori a cada control dins d'un <code>&lt;form&gt;</code>. Heu explorat els set controls HTML est√†ndard (input text/number/email, checkbox, radio, select, textarea) i com Angular gestiona la conversi√≥ autom√†tica de tipus segons l'atribut <code>type</code>. Heu implementat previsualitzacions en temps real que s'actualitzen autom√†ticament mentre l'usuari omple el formulari, comptadors de car√†cters, c√†lculs din√†mics i cercadors amb filtratge instantani. Heu apr√®s a gestionar l'enviament amb <code>(ngSubmit)</code> per interceptar l'acci√≥ sense refrescar la p√†gina, processar dades capturades creant c√≤pies independents amb spread operator, i reiniciar formularis amb m√®todes reutilitzables que retornen valors per defecte. Finalment, heu consolidat bones pr√†ctiques resolent errors habituals (NG8002, NG0303) i sabeu diagnosticar problemes de refresc de p√†gina, refer√®ncies compartides i validacions b√†siques. Amb aquests coneixements, esteu preparats per afegir validacions avan√ßades i missatges d'error contextuals a la seg√ºent lectura.</p>
  {% endcapture %}
  {% include section-point.html numero="1.16" titol="S√≠ntesi" contingut=section_point_1_16 %}

  {% capture section_point_1_17 %}
    {% include definicio.html terme="Vinculaci√≥ bidireccional" definicio="Sintaxi banana in a box que combina property binding (component ‚Üí vista) i event binding (vista ‚Üí component) per sincronitzaci√≥ autom√†tica en ambd√≥s sentits." %}

    {% include definicio.html terme="FormsModule" definicio="M√≤dul d'Angular necessari per utilitzar ngModel i funcionalitats de formularis template-driven." %}

    {% include definicio.html terme="Atribut name obligatori" definicio="Cada control amb ngModel dins d'un form necessita un atribut name √∫nic perqu√® Angular pugui registrar-lo correctament." %}

    {% include definicio.html terme="Controls HTML est√†ndard" definicio="Input (text, number, email), select, textarea, checkbox, radio ‚Äî tots compatibles amb vinculaci√≥ bidireccional amb conversi√≥ autom√†tica de tipus." %}

    {% include definicio.html terme="Previsualitzaci√≥ en temps real" definicio="La interpolaci√≥ es reactualitza autom√†ticament quan ngModel modifica la propietat, sense codi manual." %}

    {% include definicio.html terme="Gesti√≥ d'enviament" definicio="Directiva ngSubmit que intercepta l'esdeveniment submit del formulari, prev√© autom√†ticament el refresc de p√†gina, i executa el m√®tode especificat." %}

    {% include definicio.html terme="Reinici de formularis" definicio="Reassignar l'objecte del model als valors per defecte despr√©s d'enviar, preferiblement amb un m√®tode reutilitzable que retorna els valors inicials." %}

    {% include definicio.html terme="Template-driven vs reactive" definicio="Template-driven configura el formulari majorit√†riament a la plantilla (ideal per formularis simples). Reactive configura tot al component TypeScript (ideal per formularis complexos)." %}
  {% endcapture %}
  {% include section-point.html numero="1.17" titol="Rep√†s de conceptes" contingut=section_point_1_17 %}

</div>

<!-- SECCI√ì 2: Validacions i missatges d'error -->
<div class="section" id="Unitat2_Bloc3_Seccio2">
  <h2 id="Unitat2_Bloc3_Seccio2">2. Validacions i missatges d'error</h2>

  <!-- MULTIM√àDIA -->
  {% include multimedia-youtube.html unitat=2 bloc=3 seccio=2 %}


  {% include objectius.html llista="Aplicar validacions integrades (required, minlength, maxlength, pattern, email) per garantir la integritat de les dades del formulari|Gestionar els estats dels controls (valid, invalid, touched, pristine, dirty) per mostrar missatges d'error nom√©s quan correspon|Desactivar l'enviament del formulari quan hi ha errors i personalitzar els estils visuals per guiar l'usuari" %}

  {% include info_box.html contingut="<strong>RA2 ¬∑ Criteri 3</strong> ‚Äî Construeix formularis amb camps, validacions i missatges d'ajuda." %}

  {% capture section_point_2_1 %}
    <p>Abans de comen√ßar, necessiteu:</p>
    <ul>
      <li><strong>Lectura 2.3.1 completada:</strong> formulari template-driven funcional amb <code>FormsModule</code> importat, model <code>formulariElement</code> definit i array <code>entradesFormulari</code> disponible.</li>
      <li><strong>Projecte funcional:</strong> servidor <code>ng serve --port 4300</code> actiu i formulari d'alta d'elements visualitzant-se correctament al navegador.</li>
      <li><strong>Documentaci√≥ inicial:</strong> fitxer <code>docs/formularis.md</code> amb les decisions de disseny de la lectura anterior.</li>
    </ul>

    <p><strong>Verificaci√≥ r√†pida:</strong></p>

    {% capture code_321 %}# Comproveu que el formulari funciona
ng serve --port 4300
# Al navegador, obriu: http://localhost:4300
# Heu de veure el formulari d'alta amb vinculaci√≥ bidireccional activa{% endcapture %}
    {% include code-block.html lang="bash" code=code_321 %}

    <p><strong>Punt d'autocomprovaci√≥:</strong> confirmeu que el formulari de la lectura anterior es visualitza correctament i podeu afegir elements abans de continuar amb validacions.</p>
  {% endcapture %}
  {% include section-point.html numero="2.1" titol="Prerequisits" contingut=section_point_2_1 %}

  {% capture section_point_2_2 %}
    <h4>2.2.1. Qu√® s√≥n les validacions de formulari</h4>

    <p>Les validacions s√≥n <strong>regles que comprovem abans d'acceptar dades</strong> d'un formulari. Defineixen requisits com ara "el t√≠tol ha de tenir m√≠nim 4 car√†cters" o "l'email ha de seguir el patr√≥ usuari@domini.com". Angular proporciona validacions integrades per atributs HTML que es sincronitzen autom√†ticament amb l'estat del control, i tamb√© permet crear validacions personalitzades quan les integrades no cobreixen el cas.</p>

    <h4>2.2.2. Problema sense validacions</h4>

    <p><strong>Situaci√≥ abans:</strong></p>

    {% capture code_322 %}<!-- Formulari sense validacions -->
<form (ngSubmit)="enviaFormulari()">
<input type="text" name="titol" [(ngModel)]="formulariElement.titol">
<input type="number" name="preu" [(ngModel)]="formulariElement.preu">
<button type="submit">Guardar</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_322 %}

    <p><strong>Problemes que genera:</strong></p>

    <p><strong>1. Dades incoherents al cat√†leg</strong><br>
    L'usuari pot enviar un t√≠tol buit o un preu negatiu (-50 ‚Ç¨). Aquestes dades arriben al servei sense filtrar i generen errors al backend o elements in√∫tils al cat√†leg.</p>

    <p><strong>2. Experi√®ncia d'usuari confusa</strong><br>
    Sense feedback visual, l'usuari no sap si ha com√®s errors fins que el servidor respon (potser 2-3 segons despr√©s). Durant aquest temps, l'aplicaci√≥ sembla "penjada" i l'usuari no ent√©n qu√® ha fallat.</p>

    <p><strong>3. Sobrec√†rrega del servidor</strong><br>
    Cada intent d'enviament genera una petici√≥ HTTP, fins i tot amb dades √≤bviament inv√†lides. Si 20 alumnes proven el formulari sense validacions, es generen centenars de peticions innecess√†ries que el servidor ha de processar i rebutjar.</p>

    <p><strong>4. P√®rdua de confian√ßa de l'usuari</strong><br>
    Si el formulari accepta dades evidentment err√≤nies i despr√©s falla de manera inesperada, l'usuari perd confian√ßa en l'aplicaci√≥. Una validaci√≥ preventiva demostra professionalitat i atenci√≥ al detall.</p>

    <h4>2.2.3. Soluci√≥ amb validacions integrades</h4>

    <p>Angular proporciona <strong>validacions per atributs HTML</strong> que funcionen autom√†ticament amb formularis template-driven:</p>

    {% capture code_323 %}<!-- Formulari amb validacions -->
<form #formulariElementForm="ngForm" (ngSubmit)="enviaFormulari(formulariElementForm)">
<label>
T√≠tol
<input type="text" name="titol" required minlength="4" maxlength="60" [(ngModel)]="formulariElement.titol" #campTitol="ngModel">
</label>
<div *ngIf="campTitol.invalid && (campTitol.dirty || campTitol.touched)" class="error">
<p *ngIf="campTitol.errors?.['required']">Indiqueu el t√≠tol de l'element.</p>
<p *ngIf="campTitol.errors?.['minlength']">El t√≠tol ha de tenir m√≠nim 4 car√†cters.</p>
</div>
<label>
Preu (EUR)
<input type="number" name="preu" required min="5" max="500" [(ngModel)]="formulariElement.preu" #campPreu="ngModel">
</label>
<div *ngIf="campPreu.invalid && (campPreu.dirty || campPreu.touched)" class="error">
<p *ngIf="campPreu.errors?.['required']">Indiqueu el preu.</p>
<p *ngIf="campPreu.errors?.['min']">El preu m√≠nim √©s 5 EUR.</p>
</div>
<button type="submit" [disabled]="formulariElementForm.invalid">Guardar</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_323 %}

    <p><strong>Avantatges concrets:</strong></p>
    <ul>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> <strong>Feedback immediat:</strong> l'usuari veu errors mentre escriu, no despr√©s d'enviar.</li>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> <strong>Reducci√≥ de peticions fallides:</strong> nom√©s s'envia el formulari si totes les validacions passen.</li>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> <strong>Missatges personalitzats:</strong> podeu explicar exactament qu√® cal corregir.</li>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> <strong>Estils visuals:</strong> camps inv√†lids es marquen amb colors, refor√ßant el feedback.</li>
    </ul>

    <h4>2.2.4. Taula comparativa: Sense vs Amb validacions</h4>

    <table>
      <thead>
        <tr>
          <th>Aspecte</th>
          <th>Sense validacions</th>
          <th>Amb validacions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Dades enviades</strong></td>
          <td>Qualsevol valor (buit, negatiu, massa llarg)</td>
          <td>Nom√©s valors v√†lids segons regles</td>
        </tr>
        <tr>
          <td><strong>Feedback a l'usuari</strong></td>
          <td>Despr√©s de l'enviament (2-3s)</td>
          <td>Immediat mentre escriu (0s)</td>
        </tr>
        <tr>
          <td><strong>Bot√≥ d'enviament</strong></td>
          <td>Sempre actiu</td>
          <td>Desactivat si formulari inv√†lid</td>
        </tr>
        <tr>
          <td><strong>Missatges d'error</strong></td>
          <td>Gen√®rics del servidor</td>
          <td>Espec√≠fics i contextuals</td>
        </tr>
        <tr>
          <td><strong>Estils visuals</strong></td>
          <td>Cap indicaci√≥</td>
          <td>Camps vermells/verds segons estat</td>
        </tr>
        <tr>
          <td><strong>Peticions HTTP</strong></td>
          <td>Totes, fins i tot inv√†lides</td>
          <td>Nom√©s les v√†lides</td>
        </tr>
      </tbody>
    </table>

    {% include success_box.html contingut="<strong>Clau:</strong> Les validacions no s√≥n una mol√®stia opcional; s√≥n una inversi√≥ en experi√®ncia d'usuari i qualitat del sistema que estalvia temps i problemes a llarg termini." %}
  {% endcapture %}
  {% include section-point.html numero="2.2" titol="Marc conceptual" contingut=section_point_2_2 %}

  {% capture section_point_2_3 %}
    <h4>2.3.1. Una sola font de veritat per a les regles</h4>

    <p>Definiu els valors de validaci√≥ (m√≠nims, m√†xims, patrons) a la classe del component i referencieu-los a la plantilla. Aix√≠, si heu de canviar el m√≠nim del t√≠tol de 4 a 5 car√†cters, nom√©s toqueu un lloc.</p>

    <h4>2.3.2. Estats del control com a sem√†for</h4>

    <p>Cada control t√© tres "llums": <code>valid</code> (verd, tot correcte), <code>invalid</code> (vermell, hi ha errors), i <code>pending</code> (groc, en validacions as√≠ncrones). Combineu aquests estats amb <code>touched</code> o <code>dirty</code> per decidir quan encendre la llum d'error.</p>

    <h4>2.3.3. Mostrar errors despr√©s de la interacci√≥</h4>

    <p>No mostreu errors immediatament. Espereu que l'usuari surti del camp (<code>touched</code>) o el modifiqui (<code>dirty</code>). Aix√≤ evita saturar-lo amb avisos vermells abans que hagi tingut oportunitat de completar l'entrada.</p>

    <h4>2.3.4. Bot√≥ d'enviament com a guardi√†</h4>

    <p>El bot√≥ nom√©s permet l'acci√≥ quan el formulari complet √©s v√†lid. Actueu de forma defensiva: si <code>formulariElementForm.invalid</code>, desactiveu el bot√≥ i eviteu l'enviament al m√®tode <code>enviaFormulari</code>.</p>

    <h4>2.3.5. Documentaci√≥ de validacions com a contracte</h4>

    <p>Cada validaci√≥ √©s una promesa que feu a l'equip: "aquest camp sempre complir√† aquestes regles". Registreu-les al dossier <code>docs/formularis.md</code> perqu√® tothom conegui els requisits i pugui replicar el comportament a altres formularis.</p>

    {% include success_box.html contingut="<strong>Clau:</strong> Els estats del control (valid, invalid, touched, dirty) actuen com un sem√†for que indica quan mostrar errors i permetre l'enviament." %}
  {% endcapture %}
  {% include section-point.html numero="2.3" titol="Model mental" contingut=section_point_2_3 %}

  {% capture section_point_2_4 %}
    <h4>2.4.1. Objectiu</h4>
    <p>Comprendre la import√†ncia de les validacions des de la perspectiva de l'usuari i del sistema.</p>

    <h4>2.4.2. Contingut</h4>

    <p>Les validacions serveixen dos prop√≤sits fonamentals: <strong>millorar l'experi√®ncia d'usuari</strong> i <strong>garantir la integritat de les dades</strong>. Des de la perspectiva de l'usuari, un formulari sense validacions √©s com conduir sense senyals: no saps si vas b√© fins que tens un accident. Imagineu que ompliu un formulari llarg, premeu "Enviar", i despr√©s de 3 segons rebeu un missatge gen√®ric d'error del servidor sense cap pista de qu√® ha fallat. Frustrant, oi? Les validacions preventives eviten aquest problema: us avisen <strong>abans d'enviar</strong> que el t√≠tol √©s massa curt o el preu est√† fora de rang.</p>

    <p>Des de la perspectiva del sistema, les validacions actuen com a <strong>primera l√≠nia de defensa</strong>. Si permeteu que dades incoherents arribin al servidor (t√≠tols buits, preus negatius, emails mal formats), genereu una cadena de problemes: errors al backend, registres in√∫tils a la base de dades, dificultat per depurar, i sobrec√†rrega de peticions HTTP innecess√†ries. Cada formulari sense validacions √©s una porta oberta a dades brossa.</p>

    <p>A m√©s, les validacions milloren la <strong>percepci√≥ de qualitat</strong> de l'aplicaci√≥. Un formulari que mostra missatges clars i estils visuals (camps vermells/verds) transmet professionalitat i atenci√≥ al detall. En contrast, un formulari que accepta qualsevol cosa i despr√©s falla inesperadament genera desconfian√ßa.</p>

    <p>En el context del cat√†leg d'elements, validar el formulari assegura que tots els elements afegits tenen <strong>dades coherents i √∫tils</strong> per a l'equip. Un t√≠tol buit o un preu de -50 ‚Ç¨ no aporten valor i nom√©s generen confusi√≥. Les validacions s√≥n un contracte de qualitat que beneficia tant l'usuari actual com els futurs col¬∑laboradors del projecte.</p>

    {% include success_box.html contingut="<strong>Clau:</strong> Les validacions no s√≥n una mol√®stia opcional; s√≥n una inversi√≥ en experi√®ncia d'usuari i qualitat del sistema que estalvia temps i problemes a llarg termini." %}

    <h4>2.4.3. Resultat esperat</h4>
    <p>Reconeixeu la import√†ncia de les validacions i ent√©n els beneficis tant per a l'usuari com per al manteniment del projecte.</p>
  {% endcapture %}
  {% include section-point.html numero="2.4" titol="Per qu√® s√≥n necess√†ries les validacions" contingut=section_point_2_4 %}

  {% capture section_point_2_5 %}
    <h4>2.5.1. Objectiu</h4>
    <p>Dominar les validacions integrades m√©s comunes i saber quan aplicar-les.</p>

    <h4>2.5.2. Validacions integrades principals</h4>

    <p>Angular proporciona un conjunt de <strong>validacions per atributs HTML</strong> que funcionen autom√†ticament amb formularis template-driven:</p>

    <p><strong>1. required ‚Äî Camp obligatori</strong><br>
    Marca el camp com a obligatori. Si l'usuari no introdueix cap valor, el control √©s <code>invalid</code>.</p>

    {% capture code_324 %}<input type="text" name="titol" required [(ngModel)]="formulariElement.titol">{% endcapture %}
    {% include code-block.html lang="html" code=code_324 %}

    <p>√ös t√≠pic: tots els camps essencials (t√≠tol, preu, categoria).</p>

    <p><strong>2. minlength i maxlength ‚Äî Longitud de text</strong><br>
    Defineixen la longitud m√≠nima i m√†xima de car√†cters per a camps de text.</p>

    {% capture code_325 %}<input type="text" name="titol" minlength="4" maxlength="60" [(ngModel)]="formulariElement.titol">{% endcapture %}
    {% include code-block.html lang="html" code=code_325 %}

    <p>√ös t√≠pic: t√≠tols (m√≠nim 4, m√†xim 60), descripcions (m√≠nim 10, m√†xim 200).</p>

    <p><strong>Exemple pr√†ctic:</strong> Si l'usuari escriu "App" (3 car√†cters) en un camp amb <code>minlength="4"</code>, el control √©s <code>invalid</code> i l'objecte <code>errors</code> cont√© <code>{ minlength: { requiredLength: 4, actualLength: 3 } }</code>.</p>

    <p><strong>3. min i max ‚Äî Rang num√®ric</strong><br>
    Defineixen el valor m√≠nim i m√†xim per a camps de tipus <code>number</code>.</p>

    {% capture code_326 %}<input type="number" name="preu" min="5" max="500" [(ngModel)]="formulariElement.preu">{% endcapture %}
    {% include code-block.html lang="html" code=code_326 %}

    <p>√ös t√≠pic: preus (m√≠nim 5 ‚Ç¨, m√†xim 500 ‚Ç¨), edats (m√≠nim 18, m√†xim 99), quantitats (m√≠nim 1, m√†xim 100).</p>

    <p><strong>4. pattern ‚Äî Expressi√≥ regular personalitzada</strong><br>
    Valida el valor contra una expressi√≥ regular. √ötil per a formats espec√≠fics com codis postals, tel√®fons o DNI.</p>

    {% capture code_327 %}<input type="text" name="codiPostal" pattern="[0-9]{5}" [(ngModel)]="formulariElement.codiPostal">{% endcapture %}
    {% include code-block.html lang="html" code=code_327 %}

    <p>√ös t√≠pic: codis postals (<code>[0-9]{5}</code>), tel√®fons (<code>[0-9]{9}</code>), DNI (<code>[0-9]{8}[A-Z]</code>).</p>

    <p><strong>5. email ‚Äî Format d'email</strong><br>
    Valida que el valor segueixi el format b√†sic d'un email (usuari@domini.com).</p>

    {% capture code_328 %}<input type="email" name="email" [(ngModel)]="formulariElement.email">{% endcapture %}
    {% include code-block.html lang="html" code=code_328 %}

    <p><strong>Nota important:</strong> <code>type="email"</code> activa la validaci√≥ autom√†tica d'email. No cal afegir <code>pattern</code> manualment.</p>

    <h4>2.5.3. Taula resum de validacions integrades</h4>

    <table>
      <thead>
        <tr>
          <th>Validaci√≥</th>
          <th>Atribut</th>
          <th>Tipus de camp</th>
          <th>Objecte errors</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Obligatori</td>
          <td><code>required</code></td>
          <td>Tots</td>
          <td><code>{ required: true }</code></td>
        </tr>
        <tr>
          <td>Longitud m√≠nima</td>
          <td><code>minlength="N"</code></td>
          <td>text, textarea</td>
          <td><code>{ minlength: { requiredLength: N, actualLength: X } }</code></td>
        </tr>
        <tr>
          <td>Longitud m√†xima</td>
          <td><code>maxlength="N"</code></td>
          <td>text, textarea</td>
          <td><code>{ maxlength: { requiredLength: N, actualLength: X } }</code></td>
        </tr>
        <tr>
          <td>Valor m√≠nim</td>
          <td><code>min="N"</code></td>
          <td>number</td>
          <td><code>{ min: { min: N, actual: X } }</code></td>
        </tr>
        <tr>
          <td>Valor m√†xim</td>
          <td><code>max="N"</code></td>
          <td>number</td>
          <td><code>{ max: { max: N, actual: X } }</code></td>
        </tr>
        <tr>
          <td>Patr√≥</td>
          <td><code>pattern="regex"</code></td>
          <td>text</td>
          <td><code>{ pattern: { requiredPattern: 'regex', actualValue: 'X' } }</code></td>
        </tr>
        <tr>
          <td>Email</td>
          <td><code>type="email"</code></td>
          <td>email</td>
          <td><code>{ email: true }</code></td>
        </tr>
      </tbody>
    </table>

    {% include success_box.html contingut="<strong>Clau:</strong> Les validacions integrades cobreixen el 80% dels casos habituals i s'apliquen simplement afegint atributs HTML als controls." %}

    <h4>2.5.4. Resultat esperat</h4>
    <p>Sabeu utilitzar les 7 validacions integrades principals i ent√©n quina aplicar segons el tipus de camp i requisits.</p>
  {% endcapture %}
  {% include section-point.html numero="2.5" titol="Validacions integrades: required, minlength, maxlength, pattern, email" contingut=section_point_2_5 %}

  {% capture section_point_2_6 %}
    <h4>2.6.1. Objectiu</h4>
    <p>Dominar els estats dels controls per decidir quan mostrar missatges d'error i aplicar estils.</p>

    <h4>2.6.2. Estats de validesa</h4>

    <p><strong>1. valid ‚Äî Totes les validacions passen</strong><br>
    El control compleix totes les regles de validaci√≥.</p>

    {% capture code_329 %}<input #campTitol="ngModel" ...>
<p *ngIf="campTitol.valid">Correcte</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_329 %}

    <p><strong>2. invalid ‚Äî Alguna validaci√≥ falla</strong><br>
    El control no compleix almenys una regla. L'objecte <code>errors</code> cont√© els detalls dels errors actius.</p>

    {% capture code_330 %}<p *ngIf="campTitol.invalid">Hi ha errors</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_330 %}

    <h4>2.6.3. Estats d'interacci√≥</h4>

    <p><strong>3. touched ‚Äî L'usuari ha sortit del camp</strong><br>
    Angular marca el control com <code>touched</code> quan l'usuari entra al camp i despr√©s en surt (per exemple, amb <code>tab</code> o clic fora).</p>

    {% capture code_331 %}<p *ngIf="campTitol.invalid && campTitol.touched">Corregiu els errors</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_331 %}

    <p><strong>4. untouched ‚Äî L'usuari encara no ha tocat el camp</strong><br>
    Estat inicial. El control √©s <code>untouched</code> fins que l'usuari hi entra.</p>

    <p><strong>5. dirty ‚Äî L'usuari ha modificat el valor</strong><br>
    Angular marca el control com <code>dirty</code> quan l'usuari canvia el valor (escriu o esborra text).</p>

    {% capture code_332 %}<p *ngIf="campTitol.invalid && campTitol.dirty">Corregiu els errors</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_332 %}

    <p><strong>6. pristine ‚Äî Valor original, no modificat</strong><br>
    Contrari de <code>dirty</code>. El control √©s <code>pristine</code> si conserva el valor inicial.</p>

    <h4>2.6.4. Seq√º√®ncia d'estats</h4>

    <p>Imagineu un camp amb <code>required minlength="4"</code>:</p>

    <ol>
      <li><strong>Inicial:</strong> <code>untouched</code>, <code>pristine</code>, <code>invalid</code> (perqu√® <code>required</code> i est√† buit).</li>
      <li><strong>Usuari entra al camp:</strong> encara <code>untouched</code>, <code>pristine</code>, <code>invalid</code>.</li>
      <li><strong>Usuari escriu "App" (3 car√†cters):</strong> <code>dirty</code>, <code>invalid</code> (falta 1 car√†cter).</li>
      <li><strong>Usuari surt del camp amb tab:</strong> <code>touched</code>, <code>dirty</code>, <code>invalid</code> ‚Üí <strong>ara mostrem l'error</strong>.</li>
      <li><strong>Usuari torna i escriu "Apps" (4 car√†cters):</strong> <code>touched</code>, <code>dirty</code>, <code>valid</code> ‚Üí <strong>error desapareix</strong>.</li>
    </ol>

    <h4>2.6.5. Taula resum d'estats</h4>

    <table>
      <thead>
        <tr>
          <th>Estat</th>
          <th>Significat</th>
          <th>Quan passa</th>
          <th>√ös t√≠pic</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>valid</code></td>
          <td>Totes les validacions OK</td>
          <td>Valor compleix regles</td>
          <td>Mostrar feedback positiu</td>
        </tr>
        <tr>
          <td><code>invalid</code></td>
          <td>Alguna validaci√≥ falla</td>
          <td>Valor no compleix regles</td>
          <td>Mostrar missatges d'error</td>
        </tr>
        <tr>
          <td><code>touched</code></td>
          <td>Usuari ha sortit del camp</td>
          <td>Despr√©s de blur (perd focus)</td>
          <td>Activar errors despr√©s d'interacci√≥</td>
        </tr>
        <tr>
          <td><code>untouched</code></td>
          <td>Usuari no ha tocat el camp</td>
          <td>Estat inicial</td>
          <td>Amagar errors fins que toqui</td>
        </tr>
        <tr>
          <td><code>dirty</code></td>
          <td>Usuari ha modificat el valor</td>
          <td>Despr√©s de qualsevol canvi</td>
          <td>Alternativa a touched per errors</td>
        </tr>
        <tr>
          <td><code>pristine</code></td>
          <td>Valor original, sense canvis</td>
          <td>Estat inicial o despr√©s de reset</td>
          <td>Comparar amb dirty</td>
        </tr>
      </tbody>
    </table>

    <h4>2.6.6. Per qu√® combinar invalid amb touched o dirty?</h4>

    <p>Si nom√©s useu <code>invalid</code>, els errors es mostren <strong>immediatament</strong> quan el formulari es carrega, encara que l'usuari no hagi tocat res. Aix√≤ satura l'usuari amb avisos vermells abans que tingui oportunitat d'omplir el formulari. La combinaci√≥ <code>invalid && (touched || dirty)</code> garanteix que els errors <strong>nom√©s apareixen despr√©s que l'usuari hagi interactuat</strong> amb el camp.</p>

    {% include success_box.html contingut="<strong>Clau:</strong> Combineu invalid amb touched o dirty per mostrar errors nom√©s despr√©s de la interacci√≥ de l'usuari, evitant saturar-lo amb avisos prematurs." %}

    <h4>2.6.7. Resultat esperat</h4>
    <p>Enteneu els 6 estats principals dels controls i sap combinar-los per controlar quan mostrar errors i aplicar estils.</p>
  {% endcapture %}
  {% include section-point.html numero="2.6" titol="Estats dels controls: valid, invalid, touched, pristine, dirty" contingut=section_point_2_6 %}

  {% capture section_point_2_7 %}
    <h4>2.7.1. Objectiu</h4>
    <p>Implementar missatges d'error espec√≠fics per a cada validaci√≥ utilitzant l'objecte <code>errors</code> del control.</p>

    <h4>2.7.2. Accedir a l'objecte errors</h4>

    <p>Cada control amb validacions fallides exposa un objecte <code>errors</code> que cont√© els detalls dels errors actius. Per exemple, si un camp amb <code>required minlength="4"</code> est√† buit, <code>errors</code> cont√© <code>{ required: true }</code>. Si hi ha 3 car√†cters, cont√© <code>{ minlength: { requiredLength: 4, actualLength: 3 } }</code>.</p>

    <p>Despr√©s d'assignar una refer√®ncia al control (<code>#campTitol="ngModel"</code>), podeu consultar <code>campTitol.errors</code> a la plantilla:</p>

    {% capture code_333 %}<p *ngIf="campTitol.errors?.['required']">Indiqueu el t√≠tol.</p>{% endcapture %}
    {% include code-block.html lang="html" code=code_333 %}

    <h4>2.7.3. Estructura t√≠pica de missatges d'error</h4>

    {% capture code_334 %}<div *ngIf="campTitol.invalid && (campTitol.touched || campTitol.dirty)" class="missatges-error">
<p *ngIf="campTitol.errors?.['required']">{% raw %}{{ missatgesError.titol.required }}{% endraw %}</p>
<p *ngIf="campTitol.errors?.['minlength']">{% raw %}{{ missatgesError.titol.minlength }}{% endraw %}</p>
<p *ngIf="campTitol.errors?.['maxlength']">{% raw %}{{ missatgesError.titol.maxlength }}{% endraw %}</p>
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_334 %}

    <h4>2.7.4. Centralitzar els missatges a la classe</h4>

    <p>Per evitar repetir textos a la plantilla, definiu un diccionari de missatges a la classe:</p>

    {% capture code_335 %}missatgesError: Record<string, Record<string, string>> = { titol: { required: 'Indiqueu el t√≠tol de l\'element del cat√†leg.', minlength: 'El t√≠tol ha de tenir com a m√≠nim 4 car√†cters.', maxlength: 'El t√≠tol no pot superar els 60 car√†cters.' }, preu: { required: 'Indiqueu el preu estimat.', min: 'El cost m√≠nim ha de ser 5 ‚Ç¨ per cobrir l\'edici√≥ b√†sica.', max: 'Reviseu que el preu no superi els 500 ‚Ç¨ per unitat.' } };{% endcapture %}
    {% include code-block.html lang="typescript" code=code_335 %}

    <h4>2.7.5. Exemple complet per a un camp de text</h4>

    {% capture code_336 %}<label>
T√≠tol de l'element
<input type="text" name="titol" required minlength="4" maxlength="60" [(ngModel)]="formulariElement.titol" #campTitol="ngModel">
</label>
<div *ngIf="campTitol.invalid && (campTitol.touched || campTitol.dirty)" class="missatges-error">
<p *ngIf="campTitol.errors?.['required']">{% raw %}{{ missatgesError.titol.required }}{% endraw %}</p>
<p *ngIf="campTitol.errors?.['minlength']">{% raw %}{{ missatgesError.titol.minlength }}{% endraw %}</p>
<p *ngIf="campTitol.errors?.['maxlength']">{% raw %}{{ missatgesError.titol.maxlength }}{% endraw %}</p>
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_336 %}

    <h4>2.7.6. Bones pr√†ctiques per a missatges d'error</h4>

    <ol>
      <li><strong>Clars i espec√≠fics:</strong> expliqueu exactament qu√® ha fallat ("El t√≠tol ha de tenir m√≠nim 4 car√†cters").</li>
      <li><strong>Contextuals:</strong> indiqueu com corregir-ho ("Redu√Øu la descripci√≥ a un m√†xim de 200 car√†cters").</li>
      <li><strong>Emp√†tics:</strong> eviteu to agressiu. Utilitzeu frases amables ("Indiqueu el t√≠tol de l'element").</li>
      <li><strong>Breus:</strong> m√†xim 1-2 l√≠nies per missatge.</li>
      <li><strong>Sense jerga t√®cnica:</strong> eviteu termes com "el camp √©s inv√†lid". Digueu simplement "M√≠nim 4 car√†cters".</li>
    </ol>

    {% include success_box.html contingut="<strong>Clau:</strong> Centralitzeu els missatges a la classe i mostreu-los condicionalment segons l'error concret present a l'objecte errors del control." %}

    <h4>2.7.7. Resultat esperat</h4>
    <p>Sabeu implementar blocs de missatges d'error espec√≠fics per a cada validaci√≥, referenciant un diccionari centralitzat a la classe.</p>
  {% endcapture %}
  {% include section-point.html numero="2.7" titol="Mostrar missatges d'error condicionalment" contingut=section_point_2_7 %}

  {% capture section_point_2_8 %}
    <h4>2.8.1. Objectiu</h4>
    <p>Bloquejar l'enviament del formulari quan hi ha errors i gestionar correctament la submissi√≥.</p>

    <h4>2.8.2. Pas 1: Referenciar el formulari</h4>

    <p>A la plantilla, afegiu la directiva <code>ngForm</code> al <code>&lt;form&gt;</code> i assigneu-li una refer√®ncia:</p>

    {% capture code_337 %}<form #formulariElementForm="ngForm" (ngSubmit)="enviaFormulari(formulariElementForm)">
<!-- controls aqu√≠ -->
<button type="submit" [disabled]="formulariElementForm.invalid">Guardar element</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_337 %}

    <h4>2.8.3. Pas 2: Desactivar el bot√≥ amb [disabled]</h4>

    <p>Vinculeu la propietat <code>disabled</code> del bot√≥ a l'estat <code>invalid</code> del formulari:</p>

    {% capture code_338 %}<button type="submit" [disabled]="formulariElementForm.invalid">Guardar element</button>{% endcapture %}
    {% include code-block.html lang="html" code=code_338 %}

    <p><strong>Resultat:</strong> el bot√≥ queda desactivat (grisat, no clicable) si algun control del formulari √©s <code>invalid</code>. Quan tots els controls s√≥n <code>valid</code>, el bot√≥ s'activa autom√†ticament.</p>

    <h4>2.8.4. Pas 3: Gestionar la submissi√≥ defensivament</h4>

    <p>Tot i que el bot√≥ est√† desactivat, √©s recomanable afegir una comprovaci√≥ defensiva al m√®tode <code>enviaFormulari</code>:</p>

    {% capture code_339 %}import { NgForm } from '@angular/forms';
enviaFormulari(formulari: NgForm): void {
  // Comprovaci√≥ defensiva: si el formulari √©s inv√†lid, atura l'execuci√≥
  if (formulari.invalid) {
    formulari.control.markAllAsTouched(); // Marca tots els controls com touched
    return;
  }
  // Si arribem aqu√≠, el formulari √©s v√†lid
  const novaEntrada = { ...this.formulariElement };
  this.entradesFormulari.unshift(novaEntrada);
  // Reiniciar el formulari amb valors per defecte
  formulari.resetForm({
    titol: '',
    categoria: 'Components UI',
    preu: 0,
    descripcio: '',
    disponible: true
  });
}{% endcapture %}
    {% include code-block.html lang="typescript" code=code_339 %}

    <p><strong>Explicaci√≥ de markAllAsTouched():</strong> Si l'usuari intenta enviar el formulari amb errors (per exemple, prement Enter), aquest m√®tode marca <strong>tots els controls com touched</strong>. Aix√≠, els blocs de missatges d'error condicionals es mostren immediatament, indicant a l'usuari quins camps requereixen atenci√≥.</p>

    {% include success_box.html contingut="<strong>Clau:</strong> Desactiveu el bot√≥ amb [disabled]=formulariElementForm.invalid i afegiu una comprovaci√≥ defensiva al m√®tode enviaFormulari amb markAllAsTouched() per mostrar tots els errors si l'usuari intenta enviar." %}

    <h4>2.8.5. Resultat esperat</h4>
    <p>Sabeu bloquejar l'enviament del formulari quan hi ha errors i gestiona correctament la submissi√≥ amb comprovacions defensives.</p>
  {% endcapture %}
  {% include section-point.html numero="2.8" titol="Desactivar bot√≥ d'enviament si formulari no √©s v√†lid" contingut=section_point_2_8 %}

  {% capture section_point_2_9 %}
    <h4>2.9.1. Objectiu</h4>
    <p>Consolidar tots els conceptes en un exemple complet amb 3-4 camps validats.</p>

    <h4>2.9.2. Component complet</h4>

    {% capture code_340 %}// src/app/app.component.ts
import { Component } from '@angular/core';
import { NgForm } from '@angular/forms';
export class AppComponent {
formulariElement = {
titol: '',
categoria: 'Components UI',
preu: 0,
descripcio: '',
disponible: true
};
validacionsElement = {
titol: { min: 4, max: 60 },
descripcio: { min: 10, max: 200 },
preu: { min: 5, max: 500 }
};
missatgesError: Record<string, Record<string, string>> = { titol: { required: 'Indiqueu el t√≠tol de l\'element del cat√†leg.', minlength: 'El t√≠tol ha de tenir com a m√≠nim 4 car√†cters.', maxlength: 'El t√≠tol no pot superar els 60 car√†cters.' }, descripcio: { required: 'Afegiu una descripci√≥ perqu√® la resta del grup entengui el contingut.', minlength: 'La descripci√≥ necessita com a m√≠nim 10 car√†cters.', maxlength: 'Redu√Øu la descripci√≥ a un m√†xim de 200 car√†cters.' }, preu: { min: 'El cost m√≠nim ha de ser 5 ‚Ç¨ per cobrir l\'edici√≥ b√†sica.', max: 'Reviseu que el preu no superi els 500 ‚Ç¨ per unitat.', required: 'Indiqueu el preu estimat perqu√® el cat√†leg sigui complet.' } }; entradesFormulari: any[] = []; enviaFormulari(formulari: NgForm): void { if (formulari.invalid) { formulari.control.markAllAsTouched(); return; } const novaEntrada = { ...this.formulariElement }; this.entradesFormulari.unshift(novaEntrada); formulari.resetForm({ titol: '', categoria: 'Components UI', preu: 0, descripcio: '', disponible: true }); } }{% endcapture %}
    {% include code-block.html lang="typescript" code=code_340 %}

    <h4>2.9.3. Plantilla amb validacions completes</h4>

    {% capture code_341 %}<form #formulariElementForm="ngForm" (ngSubmit)="enviaFormulari(formulariElementForm)">
<!-- Camp 1: T√≠tol -->
<label>
T√≠tol de l'element
<input type="text" name="titol" required [minlength]="validacionsElement.titol.min" [maxlength]="validacionsElement.titol.max" [(ngModel)]="formulariElement.titol" #campTitol="ngModel">
</label>
<div *ngIf="campTitol.invalid && (campTitol.dirty || campTitol.touched)" class="missatges-error">
<p *ngIf="campTitol.errors?.['required']">{% raw %}{{ missatgesError.titol.required }}{% endraw %}</p>
<p *ngIf="campTitol.errors?.['minlength']">{% raw %}{{ missatgesError.titol.minlength }}{% endraw %}</p>
<p *ngIf="campTitol.errors?.['maxlength']">{% raw %}{{ missatgesError.titol.maxlength }}{% endraw %}</p>
</div>
<!-- Camp 2: Preu -->
<label>
Preu (EUR)
<input type="number" name="preu" required [min]="validacionsElement.preu.min" [max]="validacionsElement.preu.max" [(ngModel)]="formulariElement.preu" #campPreu="ngModel">
</label>
<div *ngIf="campPreu.invalid && (campPreu.dirty || campPreu.touched)" class="missatges-error">
<p *ngIf="campPreu.errors?.['required']">{% raw %}{{ missatgesError.preu.required }}{% endraw %}</p>
<p *ngIf="campPreu.errors?.['min']">{% raw %}{{ missatgesError.preu.min }}{% endraw %}</p>
<p *ngIf="campPreu.errors?.['max']">{% raw %}{{ missatgesError.preu.max }}{% endraw %}</p>
</div>
<!-- Bot√≥ d'enviament -->
<button type="submit" [disabled]="formulariElementForm.invalid">Guardar element</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_341 %}

    {% include success_box.html contingut="<strong>Clau:</strong> Aquest exemple mostra un formulari complet amb validacions, missatges d'error contextuals, bot√≥ desactivat i gesti√≥ defensiva de la submissi√≥." %}

    <h4>2.9.4. Resultat esperat</h4>
    <p>Disposeu d'un exemple pr√†ctic complet que pot reutilitzar i adaptar a altres formularis del projecte.</p>
  {% endcapture %}
  {% include section-point.html numero="2.9" titol="Exemple pr√†ctic: formulari amb m√∫ltiples validacions" contingut=section_point_2_9 %}

  {% capture section_point_2_10 %}
    <h4>2.10.1. Objectiu</h4>
    <p>Aplicar estils visuals (bordes, fons) per refor√ßar el feedback de validaci√≥.</p>

    <h4>2.10.2. Classes d'Angular per a estats</h4>

    <p>Angular afegeix autom√†ticament <strong>classes CSS din√†miques</strong> als controls segons el seu estat:</p>

    <table>
      <thead>
        <tr>
          <th>Classe</th>
          <th>Quan s'aplica</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>.ng-valid</code></td>
          <td>Control v√†lid</td>
        </tr>
        <tr>
          <td><code>.ng-invalid</code></td>
          <td>Control inv√†lid</td>
        </tr>
        <tr>
          <td><code>.ng-touched</code></td>
          <td>Control tocat (despr√©s de blur)</td>
        </tr>
        <tr>
          <td><code>.ng-untouched</code></td>
          <td>Control no tocat</td>
        </tr>
        <tr>
          <td><code>.ng-dirty</code></td>
          <td>Control modificat</td>
        </tr>
        <tr>
          <td><code>.ng-pristine</code></td>
          <td>Control sense modificar</td>
        </tr>
      </tbody>
    </table>

    <h4>2.10.3. Estils per a camps inv√†lids i v√†lids</h4>

    {% capture code_342 %}// Estils per a camps inv√†lids (despr√©s de tocar-los)
input.ng-invalid.ng-touched,
textarea.ng-invalid.ng-touched,
select.ng-invalid.ng-touched {
  border: 2px solid #dc2626; // Vermell
  background-color: #fef2f2; // Fons vermell suau
}
// Estils per a camps v√†lids (despr√©s de tocar-los)
input.ng-valid.ng-touched,
textarea.ng-valid.ng-touched,
select.ng-valid.ng-touched {
  border: 2px solid #16a34a; // Verd
  background-color: #f0fdf4; // Fons verd suau
}
// Estils per als missatges d'error
.missatges-error {
  margin: 0.25rem 0 0.75rem;
  color: #b91c1c; // Vermell fosc
  font-size: 0.875rem;
  line-height: 1.25rem;
}
// Estils per al bot√≥ desactivat
button:disabled {
  background-color: #d1d5db; // Gris
  color: #6b7280;
  cursor: not-allowed;
  opacity: 0.6;
}{% endcapture %}
    {% include code-block.html lang="scss" code=code_342 %}

    <h4>2.10.4. Per qu√® combinar .ng-invalid amb .ng-touched?</h4>

    <p>Si nom√©s useu <code>.ng-invalid</code>, els camps es marquen en vermell <strong>immediatament</strong> quan el formulari es carrega. Aix√≤ genera una mala experi√®ncia d'usuari. La combinaci√≥ <code>.ng-invalid.ng-touched</code> garanteix que els estils d'error nom√©s s'apliquen <strong>despr√©s que l'usuari hagi interactuat</strong> amb el camp.</p>

    <h4>2.10.5. Accessibilitat</h4>

    <p>No depengueu exclusivament del color per indicar errors. Combineu colors amb:</p>
    <ul>
      <li><strong>Missatges de text:</strong> sempre mostreu text explicatiu</li>
      <li><strong>Atributs ARIA:</strong> <code>aria-invalid="true"</code>, <code>aria-describedby="errorTitol"</code> per a lectors de pantalla</li>
    </ul>

    {% include success_box.html contingut="<strong>Clau:</strong> Utilitzeu les classes din√†miques d'Angular (.ng-invalid.ng-touched) per aplicar estils visuals que reforcin el feedback de validaci√≥ sense saturar l'usuari amb avisos prematurs." %}

    <h4>2.10.6. Resultat esperat</h4>
    <p>Sabeu aplicar estils visuals coherents per a camps v√†lids/inv√†lids i ent√©n la import√†ncia de combinar colors amb text per a accessibilitat.</p>
  {% endcapture %}
  {% include section-point.html numero="2.10" titol="Estils visuals: marcar camps inv√†lids amb colors" contingut=section_point_2_10 %}

  {% capture section_point_2_11 %}
    <h4>2.11.1. Objectiu</h4>
    <p>Consolidar la decisi√≥ de quan mostrar errors segons el comportament de l'usuari.</p>

    <h4>2.11.2. touched vs dirty</h4>

    <p><strong>touched ‚Äî Despr√©s de sortir del camp</strong><br>
    Angular marca el control com <code>touched</code> quan l'usuari entra al camp i despr√©s en surt. Aquest estat √©s ideal per mostrar errors perqu√® indica que l'usuari ha <strong>intentat omplir el camp</strong>.</p>

    <p><strong>dirty ‚Äî Despr√©s de modificar el valor</strong><br>
    Angular marca el control com <code>dirty</code> quan l'usuari canvia el valor del camp. Aquest estat √©s √∫til per validaci√≥ en temps real, per√≤ pot ser m√©s intrusiu.</p>

    <h4>2.11.3. Comparativa touched vs dirty</h4>

    <table>
      <thead>
        <tr>
          <th>Aspecte</th>
          <th>touched</th>
          <th>dirty</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Quan s'activa</strong></td>
          <td>Despr√©s de sortir del camp (blur)</td>
          <td>Despr√©s de qualsevol modificaci√≥</td>
        </tr>
        <tr>
          <td><strong>Feedback</strong></td>
          <td>M√©s suau, despr√©s d'intentar omplir</td>
          <td>M√©s immediat, mentre escriu</td>
        </tr>
        <tr>
          <td><strong>Experi√®ncia</strong></td>
          <td>Menys intrusiu</td>
          <td>M√©s intrusiu</td>
        </tr>
        <tr>
          <td><strong>Recomanaci√≥</strong></td>
          <td>Preferible per a la majoria de casos</td>
          <td>√ötil per validacions en temps real</td>
        </tr>
      </tbody>
    </table>

    <h4>2.11.4. Recomanaci√≥ general</h4>

    <p>Utilitzeu <strong>touched</strong> per defecte. √âs menys intrusiu i d√≥na a l'usuari oportunitat de completar l'entrada abans de mostrar errors. Reserveu <code>dirty</code> per a casos espec√≠fics on necessiteu validaci√≥ en temps real.</p>

    <h4>2.11.5. Combinaci√≥ touched || dirty</h4>

    <p>Si voleu cobrir ambd√≥s casos, podeu combinar-los amb l'operador <code>||</code>:</p>

    {% capture code_343 %}<div *ngIf="campTitol.invalid && (campTitol.touched || campTitol.dirty)">
<p>Indiqueu el t√≠tol.</p>
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_343 %}

    <p>Aquesta combinaci√≥ garanteix que els errors es mostren tant si l'usuari surt del camp com si el modifica.</p>

    {% include success_box.html contingut="<strong>Clau:</strong> Preferiu touched per mostrar errors despr√©s que l'usuari surti del camp, evitant feedback intrusiu mentre escriu." %}

    <h4>2.11.6. Resultat esperat</h4>
    <p>Compreneu la difer√®ncia entre touched i dirty i sap decidir quin estat utilitzar segons el tipus de feedback desitjat.</p>
  {% endcapture %}
  {% include section-point.html numero="2.11" titol="Millor moment per mostrar errors: touched vs dirty" contingut=section_point_2_11 %}

  <!-- Punt 2.12: Mini exemple pr√†ctic -->
  {% capture section_point_2_12 %}
    <h4>2.12.1. Passos</h4>
    <ol>
      <li><strong>Definiu les regles de validaci√≥ a la classe:</strong> Creeu un objecte <code>validacionsElement</code> amb m√≠nims i m√†xims per a cada camp. Creeu un diccionari <code>missatgesError</code> amb textos personalitzats per a cada error.</li>
      <li><strong>Apliqueu validacions HTML als controls:</strong> Afegiu atributs <code>required</code>, <code>minlength</code>, <code>maxlength</code>, <code>min</code>, <code>max</code> als camps. Assigneu refer√®ncies ngModel (<code>#campTitol="ngModel"</code>, etc.).</li>
      <li><strong>Configureu missatges d'error condicionals:</strong> Sota cada camp, afegiu un bloc <code>&lt;div *ngIf="campX.invalid && (campX.touched || campX.dirty)"&gt;</code>. Dins del bloc, mostreu <code>&lt;p&gt;</code> per a cada error possible (<code>required</code>, <code>minlength</code>, etc.).</li>
      <li><strong>Desactiveu el bot√≥ d'enviament:</strong> Afegiu <code>[disabled]="formulariElementForm.invalid"</code> al bot√≥ de tipus submit. Al m√®tode <code>enviaFormulari</code>, comproveu <code>if (formulari.invalid)</code> i crideu <code>markAllAsTouched()</code>.</li>
      <li><strong>Apliqueu estils visuals:</strong> Definiu regles CSS per a <code>.ng-invalid.ng-touched</code> (vermell) i <code>.ng-valid.ng-touched</code> (verd). Afegiu estils per a <code>.missatges-error</code> (color vermell, mida petita).</li>
      <li><strong>Proveu el formulari:</strong> Deixeu camps buits i sortiu-ne ‚Üí missatges d'error apareixen. Ompliu correctament ‚Üí errors desapareixen, bot√≥ s'activa, estils canvien a verd. Intenteu enviar amb errors ‚Üí <code>markAllAsTouched()</code> mostra tots els errors.</li>
    </ol>

    <h4>2.12.2. Resultat esperat</h4>
    <p>Un formulari robust que valida dades, mostra missatges clars, aplica estils visuals i impedeix enviaments incomplets, oferint una experi√®ncia d'usuari professional.</p>
  {% endcapture %}
  {% include section-point.html numero="2.12" titol="Mini exemple pr√†ctic ¬∑ Formulari amb validacions completes" contingut=section_point_2_12 %}

  <!-- Punt 2.13: Resoluci√≥ de problemes -->
  {% capture section_point_2_13 %}
    <h4>2.13.1. Objectiu</h4>
    <p>Identificar i resoldre errors comuns relacionats amb validacions de formularis template-driven.</p>

    <h4>2.13.2. Errors comuns i solucions</h4>

    <table>
      <thead>
        <tr>
          <th>S√≠mptoma</th>
          <th>Possible causa</th>
          <th>Soluci√≥ r√†pida</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>NG0303: Cannot find control with unspecified name attribute</strong></td>
          <td>Falta l'atribut <code>name</code> al control amb ngModel</td>
          <td>Afegiu <code>name="titol"</code> (o el nom corresponent) al control i deseu el fitxer</td>
        </tr>
        <tr>
          <td><strong>Els missatges apareixen sempre, fins i tot sense tocar</strong></td>
          <td>La condici√≥ no comprova <code>touched</code> o <code>dirty</code></td>
          <td>Canvieu <code>*ngIf="campTitol.invalid"</code> per <code>*ngIf="campTitol.invalid && (campTitol.touched || campTitol.dirty)"</code></td>
        </tr>
        <tr>
          <td><strong>El bot√≥ s'activa malgrat errors visibles</strong></td>
          <td>El formulari no t√© la refer√®ncia ngForm o est√† mal assignada</td>
          <td>Afegiu <code>#formulariElementForm="ngForm"</code> al <code>&lt;form&gt;</code> i useu <code>formulariElementForm.invalid</code> al bot√≥</td>
        </tr>
        <tr>
          <td><strong>Estils CSS no s'apliquen (ng-invalid no funciona)</strong></td>
          <td>Les classes d'Angular no s'activen perqu√® el camp no ha estat tocat</td>
          <td>Proveu de sortir del camp amb <code>tab</code> o feu clic fora. Comproveu que el selector CSS combina <code>.ng-invalid.ng-touched</code></td>
        </tr>
        <tr>
          <td><strong>property 'markAllAsTouched' does not exist on type 'NgForm'</strong></td>
          <td>Falta la importaci√≥ de NgForm o el tipus del par√†metre</td>
          <td>Importeu NgForm (<code>import &#123; NgForm &#125; from '@angular/forms';</code>) i tipau el par√†metre del m√®tode: <code>enviaFormulari(formulari: NgForm)</code></td>
        </tr>
        <tr>
          <td><strong>errors √©s null i l'aplicaci√≥ peta</strong></td>
          <td>Accediu a <code>errors</code> sense l'operador <code>?.</code></td>
          <td>Canvieu <code>campTitol.errors['required']</code> per <code>campTitol.errors?.['required']</code> (noteu el <code>?.</code>)</td>
        </tr>
        <tr>
          <td><strong>El formulari no es reinicia despr√©s d'enviar</strong></td>
          <td>Falta cridar <code>formulari.resetForm()</code> o s'usa <code>reset()</code> incorrectament</td>
          <td>Useu <code>formulari.resetForm(&#123; titol: '', ... &#125;)</code> passant valors per defecte</td>
        </tr>
        <tr>
          <td><strong>Missatges en angl√®s (minlength must be ...)</strong></td>
          <td>Errors natius del navegador per a camps <code>type="email"</code> sense personalitzar</td>
          <td>Desactiveu validaci√≥ nativa amb <code>novalidate</code> al <code>&lt;form&gt;</code> o mostreu missatges personalitzats amb <code>*ngIf</code></td>
        </tr>
      </tbody>
    </table>

    {% include info_box.html contingut="<strong>Consell:</strong> Quan tingueu un error de validaci√≥, comproveu primer que tots els controls tenen l'atribut <code>name</code>, despr√©s verificant que les refer√®ncies ngModel estan correctament assignades, i finalment que les condicions d'error comproven l'estat <code>touched</code> o <code>dirty</code>." %}

    <h4>2.13.3. Resultat esperat</h4>
    <p>Sabeu diagnosticar i resoldre els errors m√©s freq√ºents en formularis amb validacions, estalviant temps de depuraci√≥.</p>
  {% endcapture %}
  {% include section-point.html numero="2.13" titol="Resoluci√≥ de problemes" contingut=section_point_2_13 %}

  <!-- Punt 2.14: Prompts d'IA -->
  {% capture section_point_2_14 %}
    <h4>2.14.1. Objectiu</h4>
    <p>Proporcionar prompts reutilitzables per obtenir ajuda contextual d'assistents d'IA en tasques relacionades amb validacions de formularis.</p>

    <h4>2.14.2. Prompts recomanats</h4>

    {% capture prompt_1 %}<strong>Rol:</strong> tutor d'Angular especialitzat en formularis template-driven. <strong>Context:</strong> treballar amb formularis template-driven al projecte del cat√†leg d'elements. <strong>Tasca:</strong> genera taula amb 6 estats principals dels controls (valid, invalid, touched, untouched, dirty, pristine), indicant definici√≥, quan passa, i quan mostrar errors. <strong>Format:</strong> taula amb columnes: Estat | Definici√≥ | Quan passa | Quan mostrar errors.{% endcapture %}
    {% include prompt-ai.html contingut=prompt_1 %}

    {% capture prompt_2 %}<strong>Rol:</strong> redactor de missatges d'error UX. <strong>Context:</strong> formulari del cat√†leg d'elements. <strong>Tasca:</strong> proposa 5 missatges d'error clars i emp√†tics per a validacions required, minlength, maxlength, min (num√®ric), i email, contextualitzats al cat√†leg d'elements. <strong>Format:</strong> llista numerada amb nom de validaci√≥ i missatge en catal√†.{% endcapture %}
    {% include prompt-ai.html contingut=prompt_2 %}

    <h4>2.14.3. Resultat esperat</h4>
    <p>Disposeu de prompts espec√≠fics per obtenir ajuda d'IA en tasques de validaci√≥ i millora de missatges d'error.</p>
  {% endcapture %}
  {% include section-point.html numero="2.14" titol="Prompts d'IA" contingut=section_point_2_14 %}

  <!-- Punt 2.15: Autoavaluaci√≥ -->
  {% capture section_point_2_15 %}
    <h4>2.15.1. Objectiu</h4>
    <p>Verificar que heu assolit els coneixements i habilitats relacionats amb validacions i missatges d'error en formularis.</p>

    <h4>2.15.2. Conceptes te√≤rics</h4>
    {% capture checklist_teorics %}Comprenc qu√® s√≥n les validacions integrades d'Angular (required, minlength, maxlength, min, max, pattern, email)|Entenc la difer√®ncia entre els estats touched i dirty dels controls|S√© per qu√® √©s important combinar .ng-invalid amb .ng-touched en els estils CSS|Comprenc qu√® √©s l'objecte errors i com accedir-hi de forma segura amb l'operador ?.|Entenc per qu√® √©s important desactivar el bot√≥ d'enviament quan el formulari √©s inv√†lid{% endcapture %}
    {% include checklist.html elements=checklist_teorics %}

    <h4>2.15.3. Habilitats pr√†ctiques</h4>
    {% capture checklist_practiques %}He configurat validacions integrades (required, minlength, maxlength, min, max) a tots els camps obligatoris i he centralitzat les regles a la classe|He implementat blocs de missatges d'error condicionals segons l'estat del control <code>(invalid &amp;&amp; (touched &#124;&#124; dirty))</code> i he referenciat un diccionari de missatges personalitzats|He desactivat el bot√≥ d'enviament amb [disabled]="formulariElementForm.invalid" i he afegit una comprovaci√≥ defensiva amb markAllAsTouched() al m√®tode enviaFormulari|He aplicat estils visuals coherents per a camps v√†lids (ng-valid.ng-touched, verd) i inv√†lids (ng-invalid.ng-touched, vermell) utilitzant les classes din√†miques d'Angular{% endcapture %}
    {% include checklist.html elements=checklist_practiques %}

    <h4>2.15.4. Resoluci√≥ de problemes</h4>
    {% capture checklist_problemes %}S√© diagnosticar l'error NG0303 (falta atribut name) i afegir-lo correctament|S√© resoldre el problema dels missatges que apareixen immediatament afegint la condici√≥ touched o dirty|S√© com accedir a l'objecte errors de forma segura amb l'operador ?. per evitar errors de null|S√© reiniciar un formulari correctament amb resetForm() passant valors per defecte{% endcapture %}
    {% include checklist.html elements=checklist_problemes %}

    <h4>2.15.5. Resultat esperat</h4>
    <p>Heu consolidat els coneixements sobre validacions i est√† preparat per implementar formularis amb feedback visual i missatges d'error de qualitat professional.</p>
  {% endcapture %}
  {% include section-point.html numero="2.15" titol="Autoavaluaci√≥" contingut=section_point_2_15 %}

  <!-- Punt 2.16: S√≠ntesi -->
  {% capture section_point_2_16 %}
    <h4>2.16.1. Qu√® heu apr√®s</h4>

    <p>Heu aplicat <strong>validacions integrades</strong> per garantir la integritat de les dades i millorar l'experi√®ncia d'usuari, mostrant missatges d'error clars i contextuals nom√©s despr√©s que l'usuari hagi interactuat amb els camps.</p>

    <p>Heu gestionat els <strong>estats dels controls</strong> (<code>valid</code>, <code>invalid</code>, <code>touched</code>, <code>dirty</code>) per controlar quan mostrar errors i aplicar estils visuals coherents que reforcen el feedback sense saturar l'usuari.</p>

    <p>Heu <strong>desactivat l'enviament</strong> del formulari quan hi ha errors i heu implementat una gesti√≥ defensiva amb <code>markAllAsTouched()</code> per garantir que tots els errors es mostren abans de processar les dades.</p>

    <p>Heu compr√®s la import√†ncia de <strong>centralitzar missatges d'error</strong> en un diccionari a la classe del component per facilitar la reutilitzaci√≥ i el manteniment del codi.</p>

    {% include success_box.html contingut="<strong>Clau:</strong> Les validacions integrades combinades amb una gesti√≥ intel¬∑ligent dels estats dels controls permeten crear formularis que guien l'usuari sense resultar intrusius, proporcionant feedback clar nom√©s quan √©s necessari." %}

    <h4>2.16.2. Resultat esperat</h4>
    <p>Heu consolidat tots els conceptes de validacions i missatges d'error, i est√† preparat per aplicar-los a qualsevol formulari del projecte.</p>
  {% endcapture %}
  {% include section-point.html numero="2.16" titol="S√≠ntesi" contingut=section_point_2_16 %}

  <!-- Punt 2.17: Rep√†s de conceptes -->
  {% capture section_point_2_17 %}
    <h4>2.17.1. Objectiu</h4>
    <p>Repassar els conceptes clau de validacions i missatges d'error per refor√ßar l'aprenentatge.</p>

    <h4>2.17.2. Conceptes clau</h4>

    {% include definicio.html terme="Validacions integrades d'Angular" definicio="Atributs HTML (required, minlength, maxlength, min, max, pattern, email) que es sincronitzen autom√†ticament amb l'estat del control de formulari." %}

    {% include definicio.html terme="Estats dels controls" definicio="Propietats que descriuen l'estat actual del control: valid/invalid (validesa), touched/untouched (interacci√≥), dirty/pristine (modificaci√≥). Utilitzats per decidir quan mostrar errors i aplicar estils." %}

    {% include definicio.html terme="Objecte errors" definicio="Cont√© els detalls dels errors actius d'un control (errors?.['required'], errors?.['minlength']). S'accedeix sempre amb l'operador ?. per evitar errors quan √©s null." %}

    {% include definicio.html terme="Combinaci√≥ invalid && (touched || dirty)" definicio="Patr√≥ recomanat per mostrar errors nom√©s despr√©s que l'usuari hagi interactuat amb el camp, evitant feedback intrusiu mentre l'usuari encara est√† omplint el formulari." %}

    {% include definicio.html terme="Desactivaci√≥ del bot√≥" definicio="Property binding [disabled]=\"formulariElementForm.invalid\" que impedeix l'enviament del formulari mentre hi hagi errors de validaci√≥." %}

    {% include definicio.html terme="markAllAsTouched()" definicio="M√®tode que marca tots els controls del formulari com touched per mostrar tots els errors si l'usuari intenta enviar el formulari amb camps inv√†lids sense haver-los tocat." %}

    {% include definicio.html terme="Classes din√†miques d'Angular" definicio="Classes CSS (.ng-invalid, .ng-valid, .ng-touched, .ng-dirty) que Angular aplica autom√†ticament als controls segons el seu estat, permetent aplicar estils condicionals." %}

    {% include definicio.html terme="Missatges d'error efectius" definicio="Textos breus, espec√≠fics, contextuals i emp√†tics que expliquen clarament qu√® ha fallat i com corregir-ho. Centralitzats en un diccionari a la classe per facilitar la reutilitzaci√≥." %}

    <h4>2.17.3. Resultat esperat</h4>
    <p>Disposeu d'un rep√†s complet dels conceptes clau de validacions que pot consultar en qualsevol moment.</p>
  {% endcapture %}
  {% include section-point.html numero="2.17" titol="Rep√†s de conceptes" contingut=section_point_2_17 %}

</div>

<!-- ============================================= -->
<!-- SECCI√ì 3: Accessibilitat dels formularis -->
<!-- ============================================= -->

<div class="section" id="Unitat2_Bloc3_Seccio3">
  <h2 id="Unitat2_Bloc3_Seccio3">3. Accessibilitat dels formularis</h2>

  <!-- MULTIM√àDIA -->
  {% include multimedia-youtube.html unitat=2 bloc=3 seccio=3 %}


  {% include objectius.html llista="Assegureu que tots els controls del formulari disposen d'etiquetes sem√†ntiques (label), ajudes textuals (aria-describedby) i estructura comprensible per a tecnologies assistives|Configureu atributs ARIA (aria-label, aria-required, role=\"alert\", aria-live) i gesti√≥ del focus perqu√® la navegaci√≥ amb teclat i la lectura dels missatges d'error sigui clara i coherent|Verifiqueu l'accessibilitat del formulari amb proves manuals (teclat i lector de pantalla) i registreu els resultats al dossier del projecte" %}

  {% include info_box.html contingut="<strong>RA2 ¬∑ Criteri 5</strong> ‚Äî Comprova el funcionament general i ajusta la presentaci√≥ i el comportament quan cal." %}


  <!-- Punt 3.1: Prerequisits -->
  {% capture section_point_3_1 %}
    <p>Abans de comen√ßar, necessiteu:</p>
    <ul>
      <li><strong>Lectures 2.3.1 i 2.3.2 completades:</strong> formulari templat-driven amb validacions, missatges d'error funcionals i estils visuals per a camps v√†lids/inv√†lids.</li>
      <li><strong>Projecte catalog-elements operatiu:</strong> ubicat a <code>%USERPROFILE%\workspace\catalog-elements</code> (Windows) o <code>~/workspace/catalog-elements</code> (macOS/Linux), amb <code>ng serve --port 4300</code> arrencant sense errors.</li>
      <li><strong>Dossier de documentaci√≥:</strong> fitxer <code>docs/formularis.md</code> existent per afegir-hi la checklist d'accessibilitat i les proves realitzades.</li>
    </ul>

    <p><strong>Verificaci√≥ r√†pida:</strong></p>

    {% capture code_344 %}# macOS/Linux
cd ~/workspace/catalog-elements
ng serve --port 4300{% endcapture %}
    {% include code-block.html lang="bash" code=code_344 %}

    {% capture code_345 %}# Windows
cd $env:USERPROFILE\workspace\catalog-elements
ng serve --port 4300{% endcapture %}
    {% include code-block.html lang="powershell" code=code_345 %}

    <p><strong>Punt d'autocomprovaci√≥:</strong> confirmeu al navegador <code>http://localhost:4300</code> que el formulari mostra validacions i missatges d'error (lectura 2.3.2) abans d'afegir millores d'accessibilitat.</p>
  {% endcapture %}
  {% include section-point.html numero="3.1" titol="Prerequisits" contingut=section_point_3_1 %}

  <!-- Punt 3.2: Marc conceptual -->
  {% capture section_point_3_2 %}
    <h4>3.2.1. Qu√® √©s l'accessibilitat web</h4>

    <p>L'accessibilitat web garanteix que <strong>totes les persones</strong>, independentment de les seves capacitats f√≠siques, sensorials o cognitives, puguin percebre, comprendre, navegar i interactuar amb una aplicaci√≥ web. En el context dels formularis, aix√≤ significa que usuaris amb diversitat funcional (ceguesa, baixa visi√≥, mobilitat redu√Øda, dificultats cognitives) han de poder completar el formulari amb les seves eines habituals: lectors de pantalla (VoiceOver, NVDA, JAWS), navegaci√≥ nom√©s amb teclat, magnificadors de pantalla, o controls per veu.</p>

    <h4>3.2.2. Problema sense accessibilitat</h4>

    <p><strong>Situaci√≥ abans:</strong></p>
    <p>Imagineu un formulari sense etiquetes sem√†ntiques ni atributs ARIA, tal com el ten√≠eu abans de la lectura 2.3.1:</p>

    {% capture code_346 %}<form (ngSubmit)="enviaFormulari()">
<input type="text" placeholder="T√≠tol" [(ngModel)]="formulariElement.titol">
<input type="number" placeholder="Preu" [(ngModel)]="formulariElement.preu">
<div *ngIf="campTitol.invalid" style="color: red;">Error!</div>
<button type="submit">Guardar</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_346 %}

    <p><strong>Problemes que genera:</strong></p>

    <p><strong>1. Usuaris de lector de pantalla completament perduts</strong></p>
    <p>Un usuari amb VoiceOver (macOS) o NVDA (Windows) nom√©s escolta "camp d'edici√≥, buit" quan arriba al primer <code>input</code>. No rep cap pista de qu√® ha d'introduir: t√≠tol? preu? descripci√≥? Ha de confiar exclusivament en el <code>placeholder</code>, que desapareix en escriure i que molts lectors no anuncien correctament. √âs com demanar-li que ompli un formulari amb els ulls tancats sense cap instrucci√≥ verbal.</p>

    <p><strong>2. Errors invisibles per a tecnologies assistives</strong></p>
    <p>El missatge "Error!" nom√©s es mostra amb color vermell (<code>style="color: red;"</code>). Un usuari cec no percep aquest canvi visual i no rep cap notificaci√≥ que hi ha un error. Pot intentar enviar el formulari repetidament sense entendre per qu√® no funciona. Els lectors de pantalla necessiten <code>role="alert"</code> i <code>aria-live</code> per anunciar canvis din√†mics al contingut.</p>

    <p><strong>3. Navegaci√≥ amb teclat ca√≤tica o impossible</strong></p>
    <p>Si el formulari no respecta l'ordre natural del DOM i t√© elements amb <code>tabindex</code> mal configurat (per exemple, <code>tabindex="5"</code> al bot√≥ i <code>tabindex="1"</code> al tercer camp), l'usuari que navega amb <code>Tab</code> salta entre camps de manera totalment impredictible. Aix√≤ genera confusi√≥ i frustraci√≥, especialment per a persones amb mobilitat redu√Øda que depenen exclusivament del teclat.</p>

    <p><strong>4. Focus invisible per a usuaris amb baixa visi√≥</strong></p>
    <p>Molts frameworks CSS anullen l'estil de focus predeterminat (<code>outline: none;</code>) sense proporcionar una alternativa visible. Un usuari amb baixa visi√≥ que magnifica la pantalla al 200% no sap quin camp est√† actiu i ha d'endevinar on escriu. Aix√≤ converteix l'ompliment del formulari en un joc d'atzar.</p>

    <p><strong>5. Ajudes textuals desconnectades</strong></p>
    <p>Si afegiu un text d'ajuda sota un camp (<code>&lt;p&gt;Useu un t√≠tol descriptiu&lt;/p&gt;</code>) per√≤ no el vinculeu amb <code>aria-describedby</code>, el lector de pantalla no l'anuncia quan l'usuari arriba al camp. L'ajuda queda "muda" i invisible per a qui m√©s la necessita.</p>

    <p><strong>6. Dificultats per complir normatives</strong></p>
    <p>Molts organismes p√∫blics i empreses privades estan obligats legalment a complir les WCAG (Web Content Accessibility Guidelines). Un formulari inaccessible pot comportar sancions, demandes judicials i exclusi√≥ de licitacions p√∫bliques. A m√©s, demostra manca de responsabilitat social corporativa.</p>

    <h4>3.2.3. Soluci√≥ amb accessibilitat</h4>

    <p>Aplicar bones pr√†ctiques d'accessibilitat transforma el formulari en una eina <strong>inclusiva i usable</strong> per a tothom. Les millores clau s√≥n: associar cada control amb una etiqueta sem√†ntica (<code>&lt;label for="campTitol"&gt;</code>), utilitzar atributs ARIA per descriure ajudes i errors (<code>aria-describedby</code>, <code>role="alert"</code>, <code>aria-live</code>), respectar l'ordre natural de tabulaci√≥, proporcionar focus visible amb contrast suficient, i provar el formulari amb teclat i lectors de pantalla.</p>

    <p><strong>Avantatges concrets:</strong></p>
    <ul>
      <li><strong>Inclusi√≥ real:</strong> qualsevol persona pot completar el formulari de manera aut√≤noma, sense dependre d'ajuda externa.</li>
      <li><strong>Experi√®ncia d'usuari millorada per a tothom:</strong> les etiquetes clares i els missatges descriptius beneficien tamb√© usuaris sense diversitat funcional, especialment en contextos d'estr√®s o distraccions.</li>
      <li><strong>Compliment normatiu:</strong> conformitat amb WCAG 2.1/2.2 nivell AA, evitant riscos legals i reputacionals.</li>
      <li><strong>SEO i posicionament:</strong> els cercadors valoren positivament l'accessibilitat com a indicador de qualitat del contingut.</li>
      <li><strong>Mantenibilitat:</strong> un codi sem√†ntic ben estructurat facilita futurs canvis i re√∫s de components.</li>
    </ul>

    <h4>3.2.4. Exemple real: Formulari inaccessible vs Formulari accessible</h4>

    <p><strong>ABANS (formulari inaccessible):</strong></p>

    {% capture code_347 %}<form (ngSubmit)="enviaFormulari()">
<input type="text" placeholder="T√≠tol" name="titol" [(ngModel)]="formulariElement.titol" #campTitol="ngModel">
<div *ngIf="campTitol.invalid && campTitol.touched" style="color: red;">Error!</div>
<input type="number" placeholder="Preu" name="preu" [(ngModel)]="formulariElement.preu" #campPreu="ngModel">
<div *ngIf="campPreu.invalid && campPreu.touched" style="color: red;">Error!</div>
<button type="submit">Guardar</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_347 %}

    <p><strong>Problemes visibles:</strong></p>
    <ul>
      <li>Cap <code>&lt;label&gt;</code> associat als inputs ‚Üí lector de pantalla anuncia "camp d'edici√≥, buit"</li>
      <li>Missatges d'error nom√©s amb color ‚Üí invisibles per a usuaris cecs</li>
      <li>No hi ha <code>aria-describedby</code>, <code>role="alert"</code> ni <code>aria-live</code> ‚Üí errors no anunciats</li>
      <li>Focus no personalitzat ‚Üí pot ser invisible amb alguns navegadors</li>
    </ul>

    <p><strong>DESPR√âS (formulari accessible):</strong></p>

    {% capture code_348 %}<form #formulariElementForm="ngForm" (ngSubmit)="enviaFormulari(formulariElementForm)">
<fieldset>
<legend>Dades b√†siques de l'element</legend>
<label for="campTitolInput">T√≠tol de l'element</label>
<input id="campTitolInput" type="text" name="titol" required minlength="4" [(ngModel)]="formulariElement.titol" #campTitol="ngModel" aria-describedby="ajudaTitol errorsTitol" [attr.aria-invalid]="campTitol.invalid && campTitol.touched">
<p id="ajudaTitol" class="ajuda">Useu un t√≠tol descriptiu i √∫nic (4-60 car√†cters).</p>
<div id="errorsTitol" class="missatges-error" *ngIf="campTitol.invalid && campTitol.touched" role="alert" aria-live="assertive">
<p *ngIf="campTitol.errors?.['required']">Indiqueu el t√≠tol de l'element.</p>
<p *ngIf="campTitol.errors?.['minlength']">El t√≠tol ha de tenir m√≠nim 4 car√†cters.</p>
</div>
<label for="campPreuInput">Preu (‚Ç¨)</label>
<input id="campPreuInput" type="number" name="preu" required min="5" [(ngModel)]="formulariElement.preu" #campPreu="ngModel" aria-describedby="ajudaPreu errorsPreu" [attr.aria-invalid]="campPreu.invalid && campPreu.touched">
<p id="ajudaPreu" class="ajuda">Preu entre 5 i 500 ‚Ç¨.</p>
<div id="errorsPreu" class="missatges-error" *ngIf="campPreu.invalid && campPreu.touched" role="alert" aria-live="assertive">
<p *ngIf="campPreu.errors?.['required']">Indiqueu el preu.</p>
<p *ngIf="campPreu.errors?.['min']">El preu m√≠nim √©s 5 ‚Ç¨.</p>
</div>
</fieldset>
<button type="submit" [disabled]="formulariElementForm.invalid">Guardar element</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_348 %}

    <p><strong>Millores visibles:</strong></p>
    <ul>
      <li>Cada input t√© <code>&lt;label for="..."&gt;</code> associat ‚Üí lector anuncia "T√≠tol de l'element, camp d'edici√≥ requerit"</li>
      <li>Ajudes vinculades amb <code>aria-describedby="ajudaTitol"</code> ‚Üí lector les anuncia autom√†ticament</li>
      <li>Errors amb <code>role="alert"</code> i <code>aria-live="assertive"</code> ‚Üí anuncis immediats</li>
      <li><code>aria-invalid="true"</code> quan hi ha errors ‚Üí lector informa de l'estat inv√†lid</li>
      <li><code>&lt;fieldset&gt;</code> i <code>&lt;legend&gt;</code> per agrupar controls relacionats ‚Üí context clar</li>
    </ul>

    <p><strong>Comparativa quantitativa:</strong></p>
    <ul>
      <li><strong>Temps per completar el formulari amb lector de pantalla:</strong> 5 minuts (inaccessible) vs 1 minut (accessible)</li>
      <li><strong>Taxa d'errors per usuaris cecs:</strong> 80% (inaccessible) vs 10% (accessible)</li>
      <li><strong>Satisfacci√≥ d'usuaris amb diversitat funcional:</strong> 2/5 (frustrant) vs 5/5 (aut√≤nom)</li>
      <li><strong>L√≠nies de codi afegides:</strong> +20-30 (atributs ARIA, labels, fieldsets)</li>
    </ul>

    <h4>3.2.5. Taula comparativa: Formulari inaccessible vs Accessible</h4>

    <table>
      <thead>
        <tr>
          <th>Aspecte</th>
          <th>Formulari inaccessible</th>
          <th>Formulari accessible</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Etiquetes</strong></td>
          <td>Nom√©s placeholders</td>
          <td><code>&lt;label for="campTitol"&gt;</code> associat a cada input</td>
        </tr>
        <tr>
          <td><strong>Anunci lector pantalla</strong></td>
          <td>"Camp d'edici√≥, buit"</td>
          <td>"T√≠tol de l'element, camp d'edici√≥ requerit"</td>
        </tr>
        <tr>
          <td><strong>Ajudes textuals</strong></td>
          <td>Presents per√≤ no anunciades</td>
          <td>Vinculades amb <code>aria-describedby</code>, anunciades autom√†ticament</td>
        </tr>
        <tr>
          <td><strong>Errors</strong></td>
          <td>Nom√©s color vermell</td>
          <td>Missatge + <code>role="alert"</code> + <code>aria-live="assertive"</code></td>
        </tr>
        <tr>
          <td><strong>Estat inv√†lid</strong></td>
          <td>No comunicat</td>
          <td><code>aria-invalid="true"</code> quan hi ha errors</td>
        </tr>
        <tr>
          <td><strong>Focus</strong></td>
          <td>Invisible o poc clar</td>
          <td>Borde blau gruixut + box-shadow amb contrast 4.5:1</td>
        </tr>
        <tr>
          <td><strong>Navegaci√≥ teclat</strong></td>
          <td>Ordre impredictible o salts</td>
          <td>Ordre l√≤gic del DOM, focus visible sempre</td>
        </tr>
        <tr>
          <td><strong>Agrupaci√≥ sem√†ntica</strong></td>
          <td>Cap estructura</td>
          <td><code>&lt;fieldset&gt;</code> + <code>&lt;legend&gt;</code> per agrupar controls</td>
        </tr>
      </tbody>
    </table>

    <h4>3.2.6. Taula de conceptes clau</h4>

    <table>
      <thead>
        <tr>
          <th>Concepte</th>
          <th>Definici√≥</th>
          <th>Exemple d'√∫s</th>
          <th>Quan aplicar</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>label for</strong></td>
          <td>Etiqueta que s'associa a un control per <code>id</code></td>
          <td><code>&lt;label for="campTitol"&gt;T√≠tol&lt;/label&gt;</code></td>
          <td>Sempre, cada input/select/textarea</td>
        </tr>
        <tr>
          <td><strong>aria-describedby</strong></td>
          <td>Vincula ajudes o errors a un control</td>
          <td><code>aria-describedby="ajudaTitol errorsTitol"</code></td>
          <td>Quan hi ha textos d'ajuda o missatges d'error</td>
        </tr>
        <tr>
          <td><strong>aria-label</strong></td>
          <td>Etiqueta invisible per a lectors de pantalla</td>
          <td><code>&lt;button aria-label="Tancar di√†leg"&gt;X&lt;/button&gt;</code></td>
          <td>Quan no hi ha label visible (botons nom√©s icona)</td>
        </tr>
        <tr>
          <td><strong>aria-required</strong></td>
          <td>Indica que el camp √©s obligatori</td>
          <td><code>&lt;input aria-required="true"&gt;</code></td>
          <td>Camps obligatoris (redundant amb HTML5 <code>required</code>)</td>
        </tr>
        <tr>
          <td><strong>aria-invalid</strong></td>
          <td>Indica que el valor del camp √©s inv√†lid</td>
          <td><code>[attr.aria-invalid]="campTitol.invalid"</code></td>
          <td>Quan hi ha errors de validaci√≥</td>
        </tr>
        <tr>
          <td><strong>role="alert"</strong></td>
          <td>Marca una regi√≥ com a anunci urgent</td>
          <td><code>&lt;div role="alert"&gt;Error!&lt;/div&gt;</code></td>
          <td>Missatges d'error que apareixen din√†micament</td>
        </tr>
        <tr>
          <td><strong>aria-live</strong></td>
          <td>Informa de canvis din√†mics al contingut</td>
          <td><code>aria-live="assertive"</code> (urgent) o <code>"polite"</code></td>
          <td>Actualitzacions que l'usuari ha de saber immediatament</td>
        </tr>
        <tr>
          <td><strong>tabindex</strong></td>
          <td>Controla l'ordre de focus amb teclat</td>
          <td><code>tabindex="0"</code> (ordre natural), <code>-1</code> (no tabulable)</td>
          <td>Rares vegades; nom√©s per elements no focusables per defecte</td>
        </tr>
        <tr>
          <td><strong>fieldset + legend</strong></td>
          <td>Agrupa controls relacionats amb t√≠tol</td>
          <td><code>&lt;fieldset&gt;&lt;legend&gt;Dades b√†siques&lt;/legend&gt;...&lt;/fieldset&gt;</code></td>
          <td>Formularis amb m√∫ltiples seccions</td>
        </tr>
      </tbody>
    </table>

    <h4>3.2.7. Quan prioritzar accessibilitat</h4>

    <p><strong><i class="bi bi-check-circle" aria-hidden="true"></i> Sempre prioritzar accessibilitat quan:</strong></p>
    <ul>
      <li>El formulari recull dades cr√≠tiques (registre, pagament, dades personals, sol¬∑licituds oficials).</li>
      <li>L'aplicaci√≥ √©s d'√†mbit p√∫blic o de servei obligatori (administraci√≥, educaci√≥, sanitat).</li>
      <li>L'equip vol complir est√†ndards professionals i normatives legals.</li>
      <li>Heu detectat usuaris amb diversitat funcional entre el vostre p√∫blic objectiu (encara que sigui una minoria).</li>
    </ul>

    <p><strong><i class="bi bi-exclamation-triangle" aria-hidden="true"></i> Revisar prioritats quan:</strong></p>
    <ul>
      <li>El formulari √©s un prototip intern temporal (encara aix√≠, establiu bons h√†bits des del principi).</li>
      <li>El temps de desenvolupament √©s extremadament limitat (per√≤ recordeu que afegir accessibilitat des de l'inici costa menys que corregir-ho despr√©s).</li>
    </ul>

    <p><strong><i class="bi bi-x-circle" aria-hidden="true"></i> NO ignorar mai l'accessibilitat si:</strong></p>
    <ul>
      <li>L'aplicaci√≥ pot ser utilitzada per qualsevol p√∫blic (web p√∫blica).</li>
      <li>Hi ha obligacions legals de compliment (WCAG per a organismes p√∫blics, empreses grans).</li>
      <li>Voleu mantenir una reputaci√≥ professional i √®tica.</li>
    </ul>

    <h4>3.2.8. Caracter√≠stiques principals de l'accessibilitat en formularis</h4>

    <p><strong>1. Etiquetes sem√†ntiques obligat√≤ries</strong></p>
    <p>Cada control (input, select, textarea) ha de tenir una etiqueta visible (<code>&lt;label&gt;</code>) associada per l'atribut <code>for</code>. Aix√≤ permet als lectors de pantalla anunciar el prop√≤sit del camp quan l'usuari hi arriba amb el focus. Exemple: <code>&lt;label for="email"&gt;Correu electr√≤nic&lt;/label&gt; &lt;input id="email" type="email"&gt;</code>.</p>

    <p><strong>2. Atributs ARIA per a context addicional</strong></p>
    <p>Quan un camp necessita ajudes, descripcions o missatges d'error, utilitzeu <code>aria-describedby</code> per vincular-los. Aix√≤ garanteix que el lector de pantalla els anuncia autom√†ticament. Exemple: <code>&lt;input aria-describedby="ajudaEmail errorsEmail"&gt;</code>.</p>

    <p><strong>3. Anuncis din√†mics amb role="alert" i aria-live</strong></p>
    <p>Els missatges d'error que apareixen despr√©s de validacions han de ser anunciats immediatament. <code>role="alert"</code> converteix un <code>&lt;div&gt;</code> en una regi√≥ d'alerta que els lectors detecten autom√†ticament. <code>aria-live="assertive"</code> for√ßa l'anunci immediat (per errors urgents), mentre que <code>"polite"</code> espera que l'usuari acabi la tasca actual.</p>

    <p><strong>4. Ordre de tabulaci√≥ l√≤gic i predictible</strong></p>
    <p>Respecteu l'ordre natural del DOM (d'esquerra a dreta, de dalt a baix). Eviteu <code>tabindex</code> positius (<code>tabindex="3"</code>) que trenquen l'ordre natural. Utilitzeu <code>tabindex="0"</code> nom√©s per elements no focusables per defecte (divs personalitzats) i <code>tabindex="-1"</code> per elements que no han de rebre focus amb <code>Tab</code> per√≤ que poden ser enfocats program√†ticament.</p>

    <p><strong>5. Focus visible amb contrast suficient</strong></p>
    <p>Definiu un estil de focus personalitzat que superi el contrast 3:1 contra el fons segons WCAG 2.2. Un borde blau gruixut amb <code>box-shadow</code> √©s una bona opci√≥. Mai utilitzeu <code>outline: none;</code> sense proporcionar una alternativa clarament visible.</p>

    <p><strong>6. Agrupaci√≥ sem√†ntica amb fieldset i legend</strong></p>
    <p>Per a formularis llargs amb m√∫ltiples seccions, utilitzeu <code>&lt;fieldset&gt;</code> per agrupar controls relacionats i <code>&lt;legend&gt;</code> per donar-los un t√≠tol. Aix√≤ proporciona context addicional als lectors de pantalla: "Dades b√†siques, grup, 3 elements".</p>

    <p><strong>7. Validaci√≥ accessible amb aria-invalid</strong></p>
    <p>Quan un camp t√© errors, afegiu <code>aria-invalid="true"</code> perqu√® el lector de pantalla anunci√Ø "inv√†lid" en arribar al camp. Aix√≤ complementa els missatges d'error i ajuda l'usuari a identificar r√†pidament camps problem√†tics.</p>

    <p><strong>8. Proves manuals amb eines reals</strong></p>
    <p>L'√∫nica manera de garantir l'accessibilitat √©s provar el formulari amb teclat (nom√©s <code>Tab</code>, <code>Shift+Tab</code>, <code>Enter</code>, <code>Space</code>) i amb lectors de pantalla (VoiceOver a macOS, NVDA a Windows). Les eines autom√†tiques (Lighthouse, axe DevTools) detecten errors evidents per√≤ no poden validar l'experi√®ncia real.</p>

    {% include success_box.html contingut="<strong>Integraci√≥ amb el flux de treball del cat√†leg d'elements:</strong> En el projecte del cat√†leg d'elements, aplicar accessibilitat garanteix que <strong>qualsevol persona de l'equip</strong> (incloent-hi companys amb diversitat funcional) pugui afegir, editar i consultar elements de manera aut√≤noma. Documentar les decisions d'accessibilitat al dossier <code>docs/formularis.md</code> crea un contracte de qualitat que l'equip pot consultar i replicar a altres formularis del projecte." %}
  {% endcapture %}
  {% include section-point.html numero="3.2" titol="Marc conceptual" contingut=section_point_3_2 %}

  <!-- Punt 3.3: Model mental -->
  {% capture section_point_3_3 %}
    <h4>Sem√†ntica abans d'estils</h4>
    <p>Cada camp ha de tenir <code>&lt;label&gt;</code> i atributs que descriuen la seva funci√≥ i estat abans de pensar en colors o dissenys. Un formulari amb HTML sem√†ntic correcte ja √©s accessible per defecte; els estils nom√©s reforcen aquesta base.</p>

    <h4>Assist√®ncia progressiva</h4>
    <p>Proporcioneu m√∫ltiples capes d'ajuda: etiquetes clares, textos d'ajuda opcionals (<code>aria-describedby</code>), missatges d'error espec√≠fics (<code>role="alert"</code>), i indicadors visuals (focus, colors). Cada capa beneficia diferents usuaris: alguns nom√©s necessiten les etiquetes, altres tamb√© els lectors de pantalla.</p>

    <h4>Teclat com a prova base</h4>
    <p>Si podeu completar el formulari nom√©s amb <code>Tab</code>, <code>Shift+Tab</code>, <code>Enter</code> i <code>Space</code> (sense tocar mai el ratol√≠ ni la pantalla t√†ctil), ja heu cobert el 80% dels problemes d'accessibilitat. Aquesta prova √©s r√†pida, gratu√Øta i molt efectiva.</p>

    <h4>Anuncis nom√©s quan cal</h4>
    <p>No abuseu de <code>role="alert"</code> ni <code>aria-live="assertive"</code>. Reserveu-los per a canvis realment importants (errors, confirmacions d'enviament). Anuncis excessius saturen l'usuari de lector de pantalla i dificulten la concentraci√≥.</p>

    <h4>Documentaci√≥ i tra√ßa</h4>
    <p>Registreu les proves d'accessibilitat (teclat, VoiceOver, NVDA) al dossier del projecte amb format taula: Prova | Eina | Resultat | Accions pendents. Aix√≤ crea un historial auditable i facilita que futurs col¬∑laboradors entenguin les decisions preses.</p>
  {% endcapture %}
  {% include section-point.html numero="3.3" titol="Model mental" contingut=section_point_3_3 %}


  <!-- Punt 3.4: Per qu√® l'accessibilitat √©s important -->
  {% capture section_point_3_4 %}
    <h4>3.4.1. Objectiu</h4>
    <p>Comprendre la import√†ncia de l'accessibilitat des de la perspectiva dels usuaris amb diversitat funcional i del compliment normatiu.</p>

    <h4>3.4.2. Contingut</h4>

    <p>L'accessibilitat no √©s un luxe opcional ni una millora cosm√®tica: √©s un <strong>dret fonamental</strong> que garanteix que totes les persones puguin accedir a la informaci√≥ i serveis digitals de manera equitativa. Quan desenvolupeu un formulari, us esteu adre√ßant potencialment a persones amb ceguesa, baixa visi√≥, daltonisme, sordesa (si el formulari inclou v√≠deos o √†udio), mobilitat redu√Øda (que depenen de teclat, controls per veu o interruptors adaptats), dificultats cognitives (que necessiten instruccions clares i missatges senzills), o combinacions d'aquestes condicions.</p>

    <p><strong>Dades del context real:</strong></p>
    <p>Segons l'Organitzaci√≥ Mundial de la Salut (OMS), aproximadament el <strong>15% de la poblaci√≥ mundial</strong> t√© alguna forma de diversitat funcional. A Catalunya, aix√≤ representa m√©s de <strong>1 mili√≥ de persones</strong>. Si el vostre formulari no √©s accessible, esteu excloent autom√†ticament una part significativa del vostre p√∫blic potencial.</p>

    <p><strong>Escenaris reals on l'accessibilitat √©s cr√≠tica:</strong></p>

    <p><strong>1. Registre a un curs universitari</strong></p>
    <p>Una estudiant amb ceguesa utilitza el lector de pantalla JAWS per registrar-se a un curs. Si el formulari no t√© labels associats, nom√©s escolta "camp d'edici√≥, buit" i ha d'endevinar qu√® ha d'escriure. Pot perdre el termini d'inscripci√≥ per culpa d'un formulari mal dissenyat.</p>

    <p><strong>2. Sol¬∑licitud d'ajudes p√∫bliques</strong></p>
    <p>Un ciutad√† amb mobilitat redu√Øda als bra√ßos nom√©s pot utilitzar el teclat. Si el formulari requereix arrossegar un fitxer amb el ratol√≠ o t√© un ordre de tabulaci√≥ ca√≤tic, no pot completar la sol¬∑licitud i perd l'acc√©s a ajudes econ√≤miques essencials.</p>

    <p><strong>3. Compra en l√≠nia</strong></p>
    <p>Una persona amb baixa visi√≥ magnifica la pantalla al 300%. Si el focus no √©s visible o els missatges d'error s√≥n nom√©s colors sense text, no pot saber on est√† escrivint ni qu√® ha fallat. Acaba abandonant la compra per frustraci√≥.</p>

    <p><strong>Aspecte legal i normatiu:</strong></p>
    <p>Molts pa√Øsos (incloent-hi Espanya amb el <strong>Reial Decret 1112/2018</strong>) obliguen els organismes p√∫blics i empreses grans a complir les <strong>WCAG 2.1 nivell AA</strong> (Web Content Accessibility Guidelines). El no compliment pot comportar sancions econ√≤miques, demandes judicials per discriminaci√≥, i exclusi√≥ de licitacions p√∫bliques. A m√©s, demostra una manca de responsabilitat social corporativa que pot danyar greument la reputaci√≥ de l'empresa.</p>

    <p><strong>Beneficis per a tothom:</strong></p>
    <p>Les millores d'accessibilitat no nom√©s ajuden usuaris amb diversitat funcional. Un formulari amb etiquetes clares, instruccions contextuals i missatges d'error descriptius beneficia tamb√©:</p>
    <ul>
      <li>Persones grans amb habilitats digitals limitades</li>
      <li>Usuaris en entorns amb distraccions (transport p√∫blic, oficines sorolloses)</li>
      <li>Persones que naveguen amb la m√† no dominant (per lesi√≥ temporal)</li>
      <li>Qualsevol que utilitzi el formulari en una pantalla petita (m√≤bil) o amb connexi√≥ lenta</li>
    </ul>

    {% include success_box.html contingut="<strong>Clau:</strong> l'accessibilitat no √©s caritat; √©s una inversi√≥ en qualitat, inclusi√≥ i compliment normatiu que beneficia tots els usuaris i protegeix l'organitzaci√≥ de riscos legals." %}

    <h4>3.4.3. Resultat esperat</h4>
    <p>Reconeixeu la import√†ncia de l'accessibilitat com a dret fonamental, compreneu els escenaris reals on √©s cr√≠tica, i enteneu les implicacions legals del no compliment.</p>
  {% endcapture %}
  {% include section-point.html numero="3.4" titol="Per qu√® l'accessibilitat √©s important: usuaris amb diversitat funcional" contingut=section_point_3_4 %}

  <!-- Punt 3.5: Etiquetes (labels) -->
  {% capture section_point_3_5 %}
    <h4>3.5.1. Objectiu</h4>
    <p>Dominar l'associaci√≥ correcta de labels amb controls utilitzant l'atribut <code>for</code> i comprendre per qu√® √©s fonamental.</p>

    <h4>3.5.2. Contingut</h4>

    <p>La manera m√©s b√†sica i efectiva de fer un formulari accessible √©s <strong>associar cada control amb una etiqueta visible</strong> (<code>&lt;label&gt;</code>). Aquest patr√≥ funciona per a <code>&lt;input&gt;</code>, <code>&lt;select&gt;</code>, <code>&lt;textarea&gt;</code> i garanteix que els lectors de pantalla anuncien correctament el prop√≤sit del camp.</p>

    <p><strong>Sintaxi correcta:</strong></p>

    {% capture code_349 %}<label for="campTitolInput">T√≠tol de l'element</label>
<input id="campTitolInput" type="text" name="titol" [(ngModel)]="formulariElement.titol">{% endcapture %}
    {% include code-block.html lang="html" code=code_349 %}

    <p><strong>Com funciona:</strong></p>
    <ul>
      <li>L'atribut <code>for</code> del <code>&lt;label&gt;</code> cont√© el valor de l'<code>id</code> de l'<code>&lt;input&gt;</code>.</li>
      <li>Quan l'usuari fa clic a la label, el navegador enfoca autom√†ticament l'input associat (millora l'experi√®ncia t√†ctil en m√≤bils).</li>
      <li>Els lectors de pantalla anuncien "T√≠tol de l'element, camp d'edici√≥" quan l'usuari arriba al control amb <code>Tab</code>.</li>
    </ul>

    <p><strong>Error com√∫: label sense atribut for</strong></p>

    {% capture code_350 %}<label>T√≠tol de l'element</label>
<input id="campTitolInput" type="text">{% endcapture %}
    {% include code-block.html lang="html" code=code_350 %}

    <p>Encara que visualment sembla correcte, el lector de pantalla <strong>no associa</strong> la label amb l'input perqu√® no hi ha connexi√≥ expl√≠cita. Anuncia nom√©s "camp d'edici√≥, buit".</p>

    <p><strong>Error com√∫: nom√©s placeholder</strong></p>

    {% capture code_351 %}<input type="text" placeholder="T√≠tol de l'element">{% endcapture %}
    {% include code-block.html lang="html" code=code_351 %}

    <p>Els placeholders <strong>no s√≥n accessibles</strong>:</p>
    <ul>
      <li>Desapareixen quan l'usuari comen√ßa a escriure (p√®rdua del context).</li>
      <li>Molts lectors de pantalla els ignoren o els anuncien de manera inconsistent.</li>
      <li>Usuaris amb problemes de mem√≤ria poden oblidar qu√® havien de posar.</li>
    </ul>

    <p><strong>Patr√≥ correcte amb label sempre visible:</strong></p>

    {% capture code_352 %}<label for="campTitolInput">T√≠tol de l'element</label>
<input id="campTitolInput" type="text" name="titol" required minlength="4" [(ngModel)]="formulariElement.titol" #campTitol="ngModel" placeholder="Ex: Bot√≥ primari amb icona">{% endcapture %}
    {% include code-block.html lang="html" code=code_352 %}

    <p>La label √©s sempre visible, el placeholder nom√©s d√≥na un exemple opcional.</p>

    <p><strong>Casos especials:</strong></p>

    <p><strong>1. Labels per a checkboxes i radio buttons</strong></p>

    {% capture code_353 %}<input type="checkbox" id="disponibleCheck" name="disponible" [(ngModel)]="formulariElement.disponible">
<label for="disponibleCheck">Disponible al cat√†leg</label>{% endcapture %}
    {% include code-block.html lang="html" code=code_353 %}

    <p>Nota: l'ordre pot variar (input abans o despr√©s de la label) segons el disseny, per√≤ l'associaci√≥ <code>for</code>/<code>id</code> √©s obligat√≤ria.</p>

    <p><strong>2. Labels per a selects</strong></p>

    {% capture code_354 %}<label for="categoriaSelect">Categoria</label>
<select id="categoriaSelect" name="categoria" [(ngModel)]="formulariElement.categoria">
<option value="Components UI">Components UI</option>
<option value="Paletes">Paletes</option>
</select>{% endcapture %}
    {% include code-block.html lang="html" code=code_354 %}

    <p><strong>3. Labels per a textarea</strong></p>

    {% capture code_355 %}<label for="descripcioTextarea">Descripci√≥ breu</label>
<textarea id="descripcioTextarea" name="descripcio" rows="3" [(ngModel)]="formulariElement.descripcio"></textarea>{% endcapture %}
    {% include code-block.html lang="html" code=code_355 %}

    <p><strong>Taula resum labels obligat√≤ries:</strong></p>

    <table>
      <thead>
        <tr>
          <th>Tipus de control</th>
          <th>Estructura obligat√≤ria</th>
          <th>Exemple d'anunci (lector)</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>&lt;input type="text"&gt;</code></td>
          <td><code>&lt;label for="id"&gt;...&lt;/label&gt; &lt;input id="id"&gt;</code></td>
          <td>"T√≠tol, camp d'edici√≥"</td>
        </tr>
        <tr>
          <td><code>&lt;input type="email"&gt;</code></td>
          <td><code>&lt;label for="id"&gt;...&lt;/label&gt; &lt;input id="id" type="email"&gt;</code></td>
          <td>"Correu electr√≤nic, camp d'edici√≥"</td>
        </tr>
        <tr>
          <td><code>&lt;input type="number"&gt;</code></td>
          <td><code>&lt;label for="id"&gt;...&lt;/label&gt; &lt;input id="id" type="number"&gt;</code></td>
          <td>"Preu, camp num√®ric"</td>
        </tr>
        <tr>
          <td><code>&lt;textarea&gt;</code></td>
          <td><code>&lt;label for="id"&gt;...&lt;/label&gt; &lt;textarea id="id"&gt;</code></td>
          <td>"Descripci√≥, √†rea de text"</td>
        </tr>
        <tr>
          <td><code>&lt;select&gt;</code></td>
          <td><code>&lt;label for="id"&gt;...&lt;/label&gt; &lt;select id="id"&gt;</code></td>
          <td>"Categoria, bot√≥ desplegable"</td>
        </tr>
        <tr>
          <td><code>&lt;input type="checkbox"&gt;</code></td>
          <td><code>&lt;input id="id" type="checkbox"&gt; &lt;label for="id"&gt;...&lt;/label&gt;</code></td>
          <td>"Disponible, casella de selecci√≥, no marcada"</td>
        </tr>
        <tr>
          <td><code>&lt;input type="radio"&gt;</code></td>
          <td><code>&lt;input id="id" type="radio"&gt; &lt;label for="id"&gt;...&lt;/label&gt;</code></td>
          <td>"Opci√≥ A, bot√≥ d'opci√≥, no seleccionat"</td>
        </tr>
      </tbody>
    </table>

    {% include success_box.html contingut="<strong>Clau:</strong> l'associaci√≥ <code>&lt;label for=\"id\"&gt;</code> amb <code>&lt;input id=\"id\"&gt;</code> √©s la base de l'accessibilitat i ha d'estar present en el 100% dels controls del formulari." %}

    <h4>3.5.3. Resultat esperat</h4>
    <p>Sabeu crear labels correctament associades a tots els tipus de controls i compreneu per qu√® els placeholders no s√≥n substituts v√†lids.</p>
  {% endcapture %}
  {% include section-point.html numero="3.5" titol="Etiquetes (labels): sempre associar amb inputs, atribut for" contingut=section_point_3_5 %}

  <!-- Punt 3.6: Atributs ARIA b√†sics -->
  {% capture section_point_3_6 %}
    <h4>3.6.1. Objectiu</h4>
    <p>Utilitzar atributs ARIA per proporcionar context addicional quan les etiquetes visibles no s√≥n suficients.</p>

    <h4>3.6.2. Contingut</h4>

    <p>ARIA (Accessible Rich Internet Applications) √©s un conjunt d'atributs HTML que milloren l'accessibilitat de components din√†mics i complexos. Els atributs m√©s importants per a formularis s√≥n <code>aria-label</code>, <code>aria-describedby</code>, <code>aria-required</code> i <code>aria-invalid</code>.</p>

    <p><strong>1. aria-describedby ‚Äî Vincular ajudes i errors</strong></p>

    <p>Aquest atribut permet associar un o m√©s elements (textos d'ajuda, missatges d'error) amb un control. El lector de pantalla els anuncia autom√†ticament quan l'usuari arriba al camp.</p>

    <p><strong>Exemple:</strong></p>

    {% capture code_356 %}<label for="campTitolInput">T√≠tol de l'element</label>
<input id="campTitolInput" type="text" name="titol" required [(ngModel)]="formulariElement.titol" aria-describedby="ajudaTitol errorsTitol">
<p id="ajudaTitol" class="ajuda">Useu un t√≠tol descriptiu i √∫nic (4-60 car√†cters).</p>
<div id="errorsTitol" *ngIf="campTitol.invalid && campTitol.touched">
<p>El t√≠tol ha de tenir m√≠nim 4 car√†cters.</p>
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_356 %}

    <p><strong>Anunci del lector de pantalla:</strong></p>
    <p>"T√≠tol de l'element, camp d'edici√≥ requerit, Useu un t√≠tol descriptiu i √∫nic (4-60 car√†cters)."</p>
    <p>Si hi ha errors, tamb√© anuncia: "El t√≠tol ha de tenir m√≠nim 4 car√†cters."</p>

    <p><strong>Notes:</strong></p>
    <ul>
      <li>Podeu vincular m√∫ltiples ids separats per espais: <code>aria-describedby="ajuda1 ajuda2 error1"</code>.</li>
      <li>Els elements vinculats <strong>no cal que siguin visibles sempre</strong> (per exemple, els errors nom√©s apareixen quan <code>campTitol.invalid</code>), per√≤ han de tenir <code>id</code> √∫nic.</li>
    </ul>

    <p><strong>2. aria-label ‚Äî Etiqueta invisible</strong></p>

    <p>Utilitzeu aquest atribut quan no hi ha una label visible (per exemple, botons nom√©s amb icona) per√≤ necessiteu proporcionar context al lector de pantalla.</p>

    <p><strong>Exemple:</strong></p>

    {% capture code_357 %}<button type="button" aria-label="Tancar di√†leg">
<svg><!-- icona X --></svg>
</button>{% endcapture %}
    {% include code-block.html lang="html" code=code_357 %}

    <p><strong>Anunci del lector:</strong> "Tancar di√†leg, bot√≥"</p>

    <p><strong>Important:</strong> NO utilitzeu <code>aria-label</code> en inputs normals que ja tenen <code>&lt;label&gt;</code>. Aix√≤ sobrescriu la label visible i pot crear confusi√≥.</p>

    <p><strong>Error com√∫:</strong></p>

    {% capture code_358 %}<label for="campTitol">T√≠tol</label>
<input id="campTitol" aria-label="T√≠tol de l'element">
<!-- El lector ignora la label visible i anuncia nom√©s "T√≠tol de l'element" -->{% endcapture %}
    {% include code-block.html lang="html" code=code_358 %}

    <p><strong>Correcte:</strong></p>

    {% capture code_359 %}<label for="campTitol">T√≠tol de l'element</label>
<input id="campTitol">
<!-- El lector anuncia la label visible -->{% endcapture %}
    {% include code-block.html lang="html" code=code_359 %}

    <p><strong>3. aria-required ‚Äî Indicar camps obligatoris</strong></p>

    <p>Aquest atribut informa els lectors de pantalla que el camp √©s obligatori. √âs redundant amb l'atribut HTML5 <code>required</code>, per√≤ alguns lectors antics nom√©s reconeixen <code>aria-required</code>.</p>

    <p><strong>Exemple:</strong></p>

    {% capture code_360 %}<input type="text" required aria-required="true">{% endcapture %}
    {% include code-block.html lang="html" code=code_360 %}

    <p><strong>Anunci del lector:</strong> "Camp d'edici√≥ requerit"</p>

    <p><strong>Nota:</strong> Angular permet vincular din√†micament:</p>

    {% capture code_361 %}<input [attr.aria-required]="campTitol.hasError('required')">{% endcapture %}
    {% include code-block.html lang="html" code=code_361 %}

    <p><strong>4. aria-invalid ‚Äî Indicar errors</strong></p>

    <p>Aquest atribut informa que el valor del camp √©s inv√†lid. Afegiu-lo din√†micament quan hi ha errors.</p>

    <p><strong>Exemple:</strong></p>

    {% capture code_362 %}<input type="text" [attr.aria-invalid]="campTitol.invalid && campTitol.touched">{% endcapture %}
    {% include code-block.html lang="html" code=code_362 %}

    <p><strong>Anunci del lector:</strong> "Camp d'edici√≥ inv√†lid" (quan <code>aria-invalid="true"</code>)</p>

    <p><strong>Taula resum atributs ARIA b√†sics:</strong></p>

    <table>
      <thead>
        <tr>
          <th>Atribut</th>
          <th>Funci√≥</th>
          <th>Exemple</th>
          <th>Quan usar</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>aria-describedby</strong></td>
          <td>Vincula ajudes/errors</td>
          <td><code>aria-describedby="ajuda error"</code></td>
          <td>Sempre que hi ha textos d'ajuda o errors</td>
        </tr>
        <tr>
          <td><strong>aria-label</strong></td>
          <td>Etiqueta invisible</td>
          <td><code>aria-label="Tancar"</code></td>
          <td>Botons nom√©s icona, controls sense label visible</td>
        </tr>
        <tr>
          <td><strong>aria-required</strong></td>
          <td>Camp obligatori</td>
          <td><code>aria-required="true"</code></td>
          <td>Camps amb <code>required</code> (redundant per√≤ recomanat)</td>
        </tr>
        <tr>
          <td><strong>aria-invalid</strong></td>
          <td>Valor inv√†lid</td>
          <td><code>[attr.aria-invalid]="campTitol.invalid"</code></td>
          <td>Quan hi ha errors de validaci√≥</td>
        </tr>
      </tbody>
    </table>

    <p><strong>Exemple complet amb tots els atributs:</strong></p>

    {% capture code_363 %}<label for="campEmailInput">Correu electr√≤nic</label>
<input id="campEmailInput" type="email" name="email" required [(ngModel)]="formulariElement.email" #campEmail="ngModel" aria-describedby="ajudaEmail errorsEmail" [attr.aria-required]="true" [attr.aria-invalid]="campEmail.invalid && campEmail.touched">
<p id="ajudaEmail" class="ajuda">Utilitzarem aquest correu per enviar confirmacions.</p>
<div id="errorsEmail" *ngIf="campEmail.invalid && campEmail.touched" role="alert">
<p *ngIf="campEmail.errors?.['required']">Indiqueu el correu electr√≤nic.</p>
<p *ngIf="campEmail.errors?.['email']">El format del correu no √©s v√†lid.</p>
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_363 %}

    {% include success_box.html contingut="<strong>Clau:</strong> utilitzeu <code>aria-describedby</code> per vincular ajudes i errors, <code>aria-label</code> nom√©s per elements sense label visible, i <code>aria-invalid</code> per indicar errors din√†micament." %}

    <h4>3.6.3. Resultat esperat</h4>
    <p>Sabeu utilitzar els 4 atributs ARIA b√†sics per millorar el context dels controls i compreneu quan aplicar cada un.</p>
  {% endcapture %}
  {% include section-point.html numero="3.6" titol="Atributs ARIA b√†sics: aria-label, aria-describedby, aria-required" contingut=section_point_3_6 %}

  <!-- Punt 3.7: Ordre de tabulaci√≥ -->
  {% capture section_point_3_7 %}
    <h4>3.7.1. Objectiu</h4>
    <p>Garantir un ordre de tabulaci√≥ l√≤gic i predictible, utilitzant <code>tabindex</code> nom√©s quan calgui.</p>

    <h4>3.7.2. Contingut</h4>

    <p>La navegaci√≥ amb teclat √©s essencial per a usuaris que no poden utilitzar el ratol√≠: persones amb mobilitat redu√Øda, ceguesa, o simplement usuaris que prefereixen la velocitat del teclat. L'ordre de tabulaci√≥ (seq√º√®ncia en qu√® el focus passa entre elements en pr√©mer <code>Tab</code>) ha de seguir l'<strong>ordre visual</strong> del formulari: d'esquerra a dreta, de dalt a baix, sense salts inesperats.</p>

    <p><strong>Ordre natural del DOM</strong></p>

    <p>Per defecte, els navegadors respecten l'ordre en qu√® els elements apareixen al <strong>codi HTML (DOM)</strong>. Aix√≤ significa que si el vostre HTML est√† ben estructurat, l'ordre de tabulaci√≥ ja ser√† correcte <strong>sense cap configuraci√≥ addicional</strong>.</p>

    <p><strong>Exemple correcte (ordre natural):</strong></p>

    {% capture code_364 %}<form>
<label for="camp1">Camp 1</label>
<input id="camp1">
<label for="camp2">Camp 2</label>
<input id="camp2">
<label for="camp3">Camp 3</label>
<input id="camp3">
<button type="submit">Guardar</button>
</form>{% endcapture %}
    {% include code-block.html lang="html" code=code_364 %}

    <p>Ordre de tabulaci√≥: Camp 1 ‚Üí Camp 2 ‚Üí Camp 3 ‚Üí Bot√≥ Guardar <i class="bi bi-check-circle" aria-hidden="true"></i></p>

    <p><strong>Problema: ordre visual vs ordre del DOM</strong></p>

    <p>Si utilitzeu CSS per canviar l'ordre visual (Flexbox amb <code>order</code>, Grid amb posicionament), podeu crear un desajust entre el que veu l'usuari i l'ordre de tabulaci√≥.</p>

    <p><strong>Exemple problem√†tic:</strong></p>

    {% capture code_365 %}<style>
.formulari { display: flex; flex-direction: column; }
.camp2 { order: 3; }
.camp3 { order: 2; }
</style>
<div class="formulari">
<input class="camp1"> <!-- Visual: 1 -->
<input class="camp2"> <!-- Visual: 3 (per√≤ DOM: 2) -->
<input class="camp3"> <!-- Visual: 2 (per√≤ DOM: 3) -->
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_365 %}

    <p>Ordre visual: Camp 1 ‚Üí Camp 3 ‚Üí Camp 2</p>
    <p>Ordre tabulaci√≥: Camp 1 ‚Üí Camp 2 ‚Üí Camp 3 <i class="bi bi-x-circle" aria-hidden="true"></i> (confusi√≥)</p>

    <p><strong>Soluci√≥:</strong> ajusteu l'ordre del HTML perqu√® coincideixi amb l'ordre visual, o utilitzeu <code>tabindex</code> amb precauci√≥.</p>

    <p><strong>L'atribut tabindex</strong></p>

    <p><code>tabindex</code> controla si un element √©s focusable i el seu ordre de tabulaci√≥:</p>

    <ul>
      <li><strong><code>tabindex="0"</code></strong>: l'element √©s focusable i segueix l'ordre natural del DOM.
        <ul>
          <li>√ös t√≠pic: fer focusables elements que no ho s√≥n per defecte (divs, spans personalitzats).</li>
          <li>Exemple: <code>&lt;div tabindex="0" role="button"&gt;Clic aqu√≠&lt;/div&gt;</code></li>
        </ul>
      </li>
      <li><strong><code>tabindex="-1"</code></strong>: l'element NO √©s tabulable amb <code>Tab</code>, per√≤ pot rebre focus program√†ticament amb JavaScript.
        <ul>
          <li>√ös t√≠pic: di√†legs modals, seccions que l'usuari no ha d'enfocar directament per√≤ que poden rebre focus per codi.</li>
          <li>Exemple: <code>&lt;div tabindex="-1" id="dialeg"&gt;Contingut del di√†leg&lt;/div&gt;</code></li>
        </ul>
      </li>
      <li><strong><code>tabindex="1"</code>, <code>"2"</code>, <code>"3"</code>, etc. (valors positius)</strong>: for√ßa un ordre espec√≠fic.
        <ul>
          <li><i class="bi bi-exclamation-triangle" aria-hidden="true"></i> <strong>EVITEU-HO</strong>: √©s molt dif√≠cil de mantenir i trenca l'ordre natural. Nom√©s per a casos molt espec√≠fics i ben documentats.</li>
        </ul>
      </li>
    </ul>

    <p><strong>Error com√∫: tabindex positius</strong></p>

    {% capture code_366 %}<input tabindex="3">
<input tabindex="1">
<input tabindex="2">
<button tabindex="4">Guardar</button>{% endcapture %}
    {% include code-block.html lang="html" code=code_366 %}

    <p>Ordre de tabulaci√≥: Input 1 (tabindex="1") ‚Üí Input 2 (tabindex="2") ‚Üí Input 0 (tabindex="3") ‚Üí Bot√≥ (tabindex="4")</p>
    <p>Aix√≤ √©s conf√∫s i dif√≠cil de mantenir. Si afegiu un nou camp, heu de renumerar tots els tabindex.</p>

    <p><strong>Soluci√≥ correcta: ordre natural del DOM</strong></p>

    {% capture code_367 %}<input> <!-- tabindex impl√≠cit: 0 -->
<input> <!-- tabindex impl√≠cit: 0 -->
<input> <!-- tabindex impl√≠cit: 0 -->
<button>Guardar</button> <!-- tabindex impl√≠cit: 0 -->{% endcapture %}
    {% include code-block.html lang="html" code=code_367 %}

    <p>Ordre de tabulaci√≥: Input 1 ‚Üí Input 2 ‚Üí Input 3 ‚Üí Bot√≥ <i class="bi bi-check-circle" aria-hidden="true"></i></p>

    <p><strong>Elements focusables per defecte</strong></p>

    <p>Aquests elements s√≥n autom√†ticament focusables sense necessitat de <code>tabindex</code>:</p>
    <ul>
      <li><code>&lt;input&gt;</code>, <code>&lt;textarea&gt;</code>, <code>&lt;select&gt;</code>, <code>&lt;button&gt;</code></li>
      <li><code>&lt;a href="..."&gt;</code> (nom√©s si t√© <code>href</code>)</li>
      <li>Elements amb <code>contenteditable="true"</code></li>
    </ul>

    <p><strong>Elements NO focusables per defecte</strong></p>

    <p>Aquests elements necessiten <code>tabindex="0"</code> per ser focusables:</p>
    <ul>
      <li><code>&lt;div&gt;</code>, <code>&lt;span&gt;</code>, <code>&lt;p&gt;</code>, <code>&lt;section&gt;</code>, etc.</li>
      <li><code>&lt;a&gt;</code> sense <code>href</code></li>
    </ul>

    <p><strong>Exemple: bot√≥ personalitzat amb div</strong></p>

    {% capture code_368 %}<div tabindex="0" role="button" (click)="tancar()" (keydown.enter)="tancar()" (keydown.space)="tancar()">
Tancar
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_368 %}

    <p><strong>Verificaci√≥ de l'ordre de tabulaci√≥</strong></p>

    <p><strong>Prova manual:</strong></p>
    <ol>
      <li>Obriu el formulari al navegador.</li>
      <li>Premeu <code>Tab</code> repetidament sense usar el ratol√≠.</li>
      <li>Anoteu l'ordre en qu√® es van enfocant els elements.</li>
      <li>Comproveu que l'ordre coincideix amb l'ordre visual esperat.</li>
    </ol>

    <p><strong>Script de diagn√≤stic (opcional):</strong></p>

    {% capture code_369 %}// A la consola del navegador
document.querySelectorAll('input, textarea, select, button, a[href]').forEach((el, i) => {
  el.setAttribute('data-tab-order', i + 1);
  console.log(`${i + 1}: ${el.tagName} - ${el.name || el.id || '(sense nom)'}`);
});{% endcapture %}
    {% include code-block.html lang="javascript" code=code_369 %}

    <p><strong>Taula resum tabindex:</strong></p>

    <table>
      <thead>
        <tr>
          <th>Valor</th>
          <th>Comportament</th>
          <th>√ös t√≠pic</th>
          <th>Recomanaci√≥</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>No especificat</strong></td>
          <td>Ordre natural del DOM</td>
          <td>Elements focusables per defecte</td>
          <td><i class="bi bi-check-circle" aria-hidden="true"></i> Preferible sempre</td>
        </tr>
        <tr>
          <td><strong><code>tabindex="0"</code></strong></td>
          <td>Focusable, ordre natural</td>
          <td>Divs/spans personalitzats</td>
          <td><i class="bi bi-check-circle" aria-hidden="true"></i> Quan calgui</td>
        </tr>
        <tr>
          <td><strong><code>tabindex="-1"</code></strong></td>
          <td>No tabulable, focus per codi</td>
          <td>Di√†legs, seccions ocultes</td>
          <td><i class="bi bi-check-circle" aria-hidden="true"></i> Casos espec√≠fics</td>
        </tr>
        <tr>
          <td><strong><code>tabindex="1+"</code></strong></td>
          <td>Ordre for√ßat</td>
          <td>(Mai)</td>
          <td><i class="bi bi-x-circle" aria-hidden="true"></i> Evitar sempre</td>
        </tr>
      </tbody>
    </table>

    {% include success_box.html contingut="<strong>Clau:</strong> manteniu l'ordre natural del DOM i eviteu <code>tabindex</code> positius; utilitzeu <code>tabindex=\"0\"</code> nom√©s per elements personalitzats que han de ser focusables." %}

    <h4>3.7.3. Resultat esperat</h4>
    <p>Compreneu com funciona l'ordre de tabulaci√≥, sabeu verificar-lo manualment, i enteneu quan utilitzar <code>tabindex</code> correctament.</p>
  {% endcapture %}
  {% include section-point.html numero="3.7" titol="Ordre de tabulaci√≥: tabindex i navegaci√≥ amb teclat" contingut=section_point_3_7 %}


  <!-- Punt 3.8: Focus visible -->
  {% capture section_point_3_8 %}
    <h4>3.8.1. Objectiu</h4>
    <p>Proporcionar un indicador visual clar i amb contrast suficient per mostrar quin element t√© el focus.</p>

    <h4>3.8.2. Contingut</h4>

    <p>El focus visible √©s essencial per a usuaris que naveguen amb teclat o que tenen baixa visi√≥. Sense un indicador clar, √©s impossible saber quin element est√† actiu i on s'escriur√† el text. Molts frameworks CSS moderns eliminen l'<code>outline</code> predeterminat del navegador (<code>outline: none;</code>) per raons est√®tiques, per√≤ aix√≤ crea un problema greu d'accessibilitat si no es proporciona una alternativa.</p>

    <p><strong>Comportament predeterminat del navegador</strong></p>

    <p>Per defecte, els navegadors mostren un contorn (<code>outline</code>) al voltant dels elements enfocats:</p>
    <ul>
      <li><strong>Chrome/Edge:</strong> borde blau prim (2px)</li>
      <li><strong>Firefox:</strong> borde puntejat negre</li>
      <li><strong>Safari:</strong> borde blau gruixut amb ombra</li>
    </ul>

    <p>Aquest comportament ja √©s accessible, per√≤ sovint es considera poc atractiu visualment. Si decidiu personalitzar-lo, <strong>heu de proporcionar una alternativa igualment visible</strong>.</p>

    <p><strong>Error greu: eliminar l'outline sense alternativa</strong></p>

    {% capture code_370 %}input:focus,
button:focus {
  outline: none; /* PERILL√ìS: elimina el focus visible */
}{% endcapture %}
    {% include code-block.html lang="css" code=code_370 %}

    <p>Resultat: usuaris amb teclat no poden veure on estan <i class="bi bi-x-circle" aria-hidden="true"></i></p>

    <p><strong>Soluci√≥ correcta: outline personalitzat o box-shadow</strong></p>

    <p><strong>Opci√≥ 1: Mantenir outline amb color personalitzat</strong></p>

    {% capture code_371 %}input:focus,
textarea:focus,
select:focus,
button:focus {
  outline: 3px solid #2563eb; // Blau, gruix 3px
  outline-offset: 2px; // Separaci√≥ del control
}{% endcapture %}
    {% include code-block.html lang="scss" code=code_371 %}

    <p><strong>Opci√≥ 2: Substituir outline per box-shadow (m√©s flexible)</strong></p>

    {% capture code_372 %}input,
textarea,
select,
button {
  outline: none; // Eliminem l'outline predeterminat
  transition: box-shadow 0.2s ease-in-out, border-color 0.2s ease-in-out;
}
input:focus,
textarea:focus,
select:focus,
button:focus {
  border-color: #2563eb; // Borde blau
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.35); // Ombra blava difuminada
}{% endcapture %}
    {% include code-block.html lang="scss" code=code_372 %}

    <p><strong>Avantatges de box-shadow:</strong></p>
    <ul>
      <li>M√©s control sobre l'aparen√ßa (color, mida, difuminat)</li>
      <li>No afecta el layout (no suma al width/height)</li>
      <li>Es pot combinar amb transicions suaus</li>
    </ul>

    <p><strong>Contrast i visibilitat segons WCAG</strong></p>

    <p>Les <strong>WCAG 2.2</strong> requereixen un contrast m√≠nim de <strong>3:1</strong> entre el color del focus i el color de fons. Per exemple:</p>
    <ul>
      <li>Focus blau <code>#2563eb</code> sobre fons blanc <code>#ffffff</code>: contrast ~8:1 <i class="bi bi-check-circle" aria-hidden="true"></i></li>
      <li>Focus groc clar <code>#ffeb3b</code> sobre fons blanc: contrast ~1.5:1 <i class="bi bi-x-circle" aria-hidden="true"></i></li>
    </ul>

    <p><strong>Eina de verificaci√≥:</strong> utilitzeu el contrast checker de les DevTools del navegador (Elements ‚Üí Styles ‚Üí Color picker ‚Üí Contrast ratio).</p>

    <p><strong>Estats addicionals: focus + invalid</strong></p>

    <p>Combineu l'estil de focus amb els estats de validaci√≥ per donar m√©s context visual:</p>

    {% capture code_373 %}// Focus normal (camp v√†lid o neutre)
input:focus {
  border-color: #2563eb;
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.35);
}
// Focus + inv√†lid
input.ng-invalid.ng-touched:focus {
  border-color: #dc2626; // Vermell
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.35); // Ombra vermella
}
// Focus + v√†lid
input.ng-valid.ng-touched:focus {
  border-color: #16a34a; // Verd
  box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.35); // Ombra verda
}{% endcapture %}
    {% include code-block.html lang="scss" code=code_373 %}

    <p><strong>Verificaci√≥ del focus visible:</strong></p>
    <ol>
      <li>Obriu el formulari al navegador.</li>
      <li>Premeu <code>Tab</code> per moure-us entre controls.</li>
      <li>Confirmeu que <strong>sempre</strong> veieu un indicador clar (borde blau gruixut + ombra).</li>
      <li>Proveu amb diferents combinacions: camp neutre, camp inv√†lid, camp v√†lid.</li>
    </ol>

    {% include success_box.html contingut="<strong>Clau:</strong> mai elimineu l'<code>outline</code> sense proporcionar una alternativa amb contrast ‚â• 3:1; combineu estils de focus amb estats de validaci√≥ per m√†xim feedback visual." %}

    <h4>3.8.3. Resultat esperat</h4>
    <p>Sabeu crear indicadors de focus visibles i accessibles, compreneu els requisits de contrast, i enteneu com combinar focus amb estats de validaci√≥.</p>
  {% endcapture %}
  {% include section-point.html numero="3.8" titol="Focus visible: indicadors clars quan element est√† seleccionat" contingut=section_point_3_8 %}

  {% capture section_point_3_9 %}
    <h4>3.9.1. Objectiu</h4>
    <p>Configurar missatges d'error que s'anunci√Øn autom√†ticament als lectors de pantalla utilitzant <code>role="alert"</code> i <code>aria-live</code>.</p>

    <h4>3.9.2. Contingut</h4>

    <p>Els missatges d'error visuals (text vermell, icones) no s√≥n suficients per a usuaris amb ceguesa. Els lectors de pantalla necessiten <strong>anuncis expl√≠cits</strong> quan apareixen errors, utilitzant els atributs <code>role="alert"</code> i <code>aria-live</code>.</p>

    <p><strong>Per qu√® els lectors no detecten errors autom√†ticament?</strong></p>

    <p>Els lectors de pantalla no vigilen constantment tots els canvis del DOM. Nom√©s anuncien canvis en regions espec√≠fiques marcades com a "actives" (live regions). Sense aquesta marca, un error que apareix din√†micament passa desapercebut fins que l'usuari torna a visitar el camp amb <code>Tab</code>.</p>

    <p><strong>Problema sense role="alert":</strong></p>

    {% capture code_374 %}<div *ngIf="campTitol.invalid && campTitol.touched" style="color: red;">
Indiqueu el t√≠tol de l'element.
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_374 %}

    <p>L'usuari omple el camp incorrectament i prem <code>Tab</code>. El missatge d'error apareix visualment per√≤ el lector de pantalla <strong>no anuncia res</strong>. L'usuari continua al seg√ºent camp sense saber que hi ha un error.</p>

    <p><strong>Soluci√≥ amb role="alert" i aria-live:</strong></p>

    {% capture code_375 %}<div *ngIf="campTitol.invalid && campTitol.touched" role="alert" aria-live="assertive" class="missatges-error">
<p>Indiqueu el t√≠tol de l'element.</p>
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_375 %}

    <p>Quan el missatge apareix, el lector de pantalla l'anuncia <strong>immediatament</strong>: "Indiqueu el t√≠tol de l'element."</p>

    <p><strong>Atributs clau:</strong></p>

    <p><strong>1. role="alert"</strong></p>
    <ul>
      <li>Marca l'element com a regi√≥ d'alerta urgent.</li>
      <li>Els lectors de pantalla l'anuncien autom√†ticament quan apareix.</li>
      <li>Equivalent a <code>aria-live="assertive"</code> + <code>aria-atomic="true"</code>.</li>
    </ul>

    <p><strong>2. aria-live</strong></p>
    <ul>
      <li>Controla com els lectors de pantalla anuncien canvis din√†mics.</li>
      <li>Valors:
        <ul>
          <li><code>"off"</code>: no anuncia canvis (per defecte).</li>
          <li><code>"polite"</code>: anuncia canvis quan l'usuari acaba la tasca actual (per exemple, despr√©s d'acabar de llegir una frase).</li>
          <li><code>"assertive"</code>: anuncia canvis <strong>immediatament</strong>, interrompent la tasca actual.</li>
        </ul>
      </li>
    </ul>

    <p><strong>Quan utilitzar cada valor:</strong></p>
    <ul>
      <li><strong><code>"assertive"</code></strong> (urgent): errors de validaci√≥, confirmacions d'enviament, alertes de seguretat.</li>
      <li><strong><code>"polite"</code></strong> (no urgent): actualitzacions de llistes, notificacions informatives, comptadors.</li>
    </ul>

    <p><strong>Exemple complet amb m√∫ltiples errors:</strong></p>

    {% capture code_376 %}<label for="campTitolInput">T√≠tol de l'element</label>
<input id="campTitolInput" type="text" name="titol" required minlength="4" maxlength="60" [(ngModel)]="formulariElement.titol" #campTitol="ngModel" aria-describedby="ajudaTitol errorsTitol" [attr.aria-invalid]="campTitol.invalid && campTitol.touched">
<p id="ajudaTitol" class="ajuda">Useu un t√≠tol descriptiu i √∫nic (4-60 car√†cters).</p>
<div id="errorsTitol" class="missatges-error" *ngIf="campTitol.invalid && (campTitol.dirty || campTitol.touched)" role="alert" aria-live="assertive">
<p *ngIf="campTitol.errors?.['required']">{% raw %}{{ missatgesError.titol.required }}{% endraw %}</p>
<p *ngIf="campTitol.errors?.['minlength']">{% raw %}{{ missatgesError.titol.minlength }}{% endraw %}</p>
<p *ngIf="campTitol.errors?.['maxlength']">{% raw %}{{ missatgesError.titol.maxlength }}{% endraw %}</p>
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_376 %}

    <p><strong>Anunci del lector quan l'usuari surt del camp amb error:</strong></p>
    <p>"T√≠tol de l'element, camp d'edici√≥ inv√†lid. Indiqueu el t√≠tol de l'element. El t√≠tol ha de tenir m√≠nim 4 car√†cters."</p>

    <p><strong>Bones pr√†ctiques per a missatges accessibles:</strong></p>

    <p><strong>1. Missatges clars i espec√≠fics</strong></p>
    <p><i class="bi bi-x-circle" aria-hidden="true"></i> Incorrecte: "Error!"<br>
    <i class="bi bi-check-circle" aria-hidden="true"></i> Correcte: "Indiqueu el t√≠tol de l'element."</p>

    <p><strong>2. Instruccions de correcci√≥</strong></p>
    <p><i class="bi bi-x-circle" aria-hidden="true"></i> Incorrecte: "Camp inv√†lid."<br>
    <i class="bi bi-check-circle" aria-hidden="true"></i> Correcte: "El t√≠tol ha de tenir m√≠nim 4 car√†cters."</p>

    <p><strong>3. Missatges breus (1-2 l√≠nies)</strong></p>
    <p>Els lectors de pantalla llegeixen tot el contingut del <code>role="alert"</code>. Missatges massa llargs saturen l'usuari.</p>

    <p><i class="bi bi-x-circle" aria-hidden="true"></i> Incorrecte: "El camp t√≠tol √©s obligatori i ha de contenir entre 4 i 60 car√†cters. Els car√†cters especials estan permesos per√≤ eviteu-ne l'√∫s excessiu. Recordeu que aquest t√≠tol ser√† visible p√∫blicament al cat√†leg i ha de ser descriptiu perqu√® altres usuaris puguin entendre de qu√® es tracta. Consulteu la guia d'estil per a m√©s informaci√≥."</p>

    <p><i class="bi bi-check-circle" aria-hidden="true"></i> Correcte: "Indiqueu el t√≠tol de l'element (4-60 car√†cters)."</p>

    <p><strong>4. Un sol contenidor d'errors per camp</strong></p>
    <p>No creeu m√∫ltiples <code>role="alert"</code> per al mateix camp. Aix√≤ genera anuncis duplicats.</p>

    <p><i class="bi bi-x-circle" aria-hidden="true"></i> Incorrecte:</p>

    {% capture code_377 %}<div role="alert" *ngIf="campTitol.errors?.['required']">Error 1</div>
<div role="alert" *ngIf="campTitol.errors?.['minlength']">Error 2</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_377 %}

    <p><i class="bi bi-check-circle" aria-hidden="true"></i> Correcte:</p>

    {% capture code_378 %}<div role="alert" *ngIf="campTitol.invalid && campTitol.touched">
<p *ngIf="campTitol.errors?.['required']">Error 1</p>
<p *ngIf="campTitol.errors?.['minlength']">Error 2</p>
</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_378 %}

    <p><strong>5. Vinculeu errors amb aria-describedby</strong></p>
    <p>A m√©s del <code>role="alert"</code>, afegiu l'<code>id</code> del contenidor d'errors a l'<code>aria-describedby</code> del control. Aix√≤ garanteix que els errors tamb√© s'anuncien quan l'usuari torna al camp.</p>

    {% capture code_379 %}<input aria-describedby="ajudaTitol errorsTitol">
<div id="errorsTitol" role="alert">...</div>{% endcapture %}
    {% include code-block.html lang="html" code=code_379 %}

    <p><strong>Verificaci√≥ amb lector de pantalla:</strong></p>

    <p><strong>macOS (VoiceOver):</strong></p>
    <ol>
      <li>Activeu VoiceOver: <code>Cmd + F5</code></li>
      <li>Navegueu pel formulari amb <code>Tab</code></li>
      <li>Ompliu un camp incorrectament i sortiu amb <code>Tab</code></li>
      <li>Escolteu l'anunci: "Indiqueu el t√≠tol de l'element"</li>
    </ol>

    <p><strong>Windows (NVDA):</strong></p>
    <ol>
      <li>Instal¬∑leu NVDA (gratu√Øt): <a href="https://www.nvaccess.org/download/" target="_blank" rel="noopener noreferrer">https://www.nvaccess.org/download/</a></li>
      <li>Activeu-lo: <code>Ctrl + Alt + N</code></li>
      <li>Navegueu amb <code>Tab</code> i escolteu els anuncis</li>
    </ol>

    <p><strong>Taula resum atributs per a errors accessibles:</strong></p>

    <table>
      <thead>
        <tr>
          <th>Atribut</th>
          <th>Funci√≥</th>
          <th>Valor recomanat</th>
          <th>Obligatori</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>role</strong></td>
          <td>Marca regi√≥ d'alerta</td>
          <td><code>"alert"</code></td>
          <td><i class="bi bi-check-circle" aria-hidden="true"></i> S√≠</td>
        </tr>
        <tr>
          <td><strong>aria-live</strong></td>
          <td>Control d'anuncis</td>
          <td><code>"assertive"</code> (errors)</td>
          <td>Redundant amb <code>role="alert"</code></td>
        </tr>
        <tr>
          <td><strong>id</strong></td>
          <td>Identificador √∫nic</td>
          <td><code>"errorsCampX"</code></td>
          <td><i class="bi bi-check-circle" aria-hidden="true"></i> S√≠ (per <code>aria-describedby</code>)</td>
        </tr>
        <tr>
          <td><strong>aria-describedby</strong> (al control)</td>
          <td>Vincula errors al camp</td>
          <td><code>aria-describedby="... errorsX"</code></td>
          <td><i class="bi bi-check-circle" aria-hidden="true"></i> S√≠</td>
        </tr>
      </tbody>
    </table>

    {% include success_box.html contingut="<strong>Clau:</strong> utilitzeu <code>role=\"alert\"</code> i <code>aria-live=\"assertive\"</code> per anunciar errors autom√†ticament, manteniu missatges breus i espec√≠fics, i vinculeu-los al control amb <code>aria-describedby</code>." %}

    <h4>3.9.3. Resultat esperat</h4>
    <p>Compreneu com configurar missatges d'error accessibles amb <code>role="alert"</code>, sabeu quan utilitzar <code>aria-live="assertive"</code> vs <code>"polite"</code>, i enteneu les bones pr√†ctiques per a missatges breus i espec√≠fics.</p>
  {% endcapture %}
  {% include section-point.html numero="3.9" titol="Missatges d'error accessibles: anuncis per a lectors de pantalla" contingut=section_point_3_9 %}

  {% capture section_point_3_10 %}
    <h4>3.10.1. Objectiu</h4>
    <p>Realitzar proves manuals d'accessibilitat navegant nom√©s amb teclat i utilitzant un lector de pantalla b√†sic.</p>

    <h4>3.10.2. Contingut</h4>

    <p>La manera m√©s efectiva de verificar l'accessibilitat d'un formulari √©s <strong>provar-lo amb les mateixes eines que utilitzen usuaris amb diversitat funcional</strong>: teclat i lectors de pantalla. Les eines autom√†tiques (Lighthouse, axe DevTools) detecten errors evidents (labels sense <code>for</code>, contrast baix), per√≤ no poden validar l'experi√®ncia real.</p>

    <p><strong>Prova 1: Navegaci√≥ nom√©s amb teclat</strong></p>

    <p><strong>Objectiu:</strong> completar el formulari des de zero fins a l'enviament <strong>sense tocar mai el ratol√≠ ni la pantalla t√†ctil</strong>.</p>

    <p><strong>Passos:</strong></p>
    <ol>
      <li>Obriu el formulari al navegador (<code>http://localhost:4300</code>).</li>
      <li>Feu clic fora del navegador per desactivar qualsevol focus inicial.</li>
      <li>Premeu <code>Tab</code> per entrar al formulari.</li>
      <li>Ompliu cada camp utilitzant nom√©s:
        <ul>
          <li><code>Tab</code>: moure al seg√ºent element</li>
          <li><code>Shift + Tab</code>: tornar a l'element anterior</li>
          <li>Lletres/n√∫meros: escriure als camps de text</li>
          <li><code>Space</code>: marcar/desmarcar checkboxes</li>
          <li>Fletxes amunt/avall: seleccionar opcions a <code>&lt;select&gt;</code></li>
          <li><code>Enter</code>: activar botons, enviar formulari</li>
        </ul>
      </li>
      <li>Intenteu enviar el formulari amb errors (alguns camps buits).</li>
      <li>Verifiqueu que el focus torna autom√†ticament al primer camp amb error o que es mostra un missatge clar.</li>
      <li>Corregiu els errors i torneu a enviar amb <code>Enter</code>.</li>
    </ol>

    <p><strong>Qu√® buscar:</strong></p>
    <ul>
      <li><i class="bi bi-check-circle" aria-hidden="true"></i> L'ordre de tabulaci√≥ √©s l√≤gic (visual).</li>
      <li><i class="bi bi-check-circle" aria-hidden="true"></i> El focus √©s sempre visible (borde blau gruixut).</li>
      <li><i class="bi bi-check-circle" aria-hidden="true"></i> Tots els controls s√≥n accessibles amb teclat.</li>
      <li><i class="bi bi-check-circle" aria-hidden="true"></i> Els missatges d'error apareixen quan sortiu d'un camp inv√†lid.</li>
      <li><i class="bi bi-check-circle" aria-hidden="true"></i> El bot√≥ d'enviament es pot activar amb <code>Enter</code> o <code>Space</code>.</li>
      <li><i class="bi bi-x-circle" aria-hidden="true"></i> Salts inesperats entre camps.</li>
      <li><i class="bi bi-x-circle" aria-hidden="true"></i> Elements clicables que no responen a <code>Enter</code> o <code>Space</code>.</li>
      <li><i class="bi bi-x-circle" aria-hidden="true"></i> Focus invisible o poc clar.</li>
    </ul>

    <p><strong>Prova 2: Lector de pantalla b√†sic</strong></p>

    <p><strong>macOS (VoiceOver):</strong></p>
    <ol>
      <li>Activeu VoiceOver: <code>Cmd + F5</code></li>
      <li>Navegueu amb <code>Tab</code> pel formulari.</li>
      <li>Escolteu els anuncis: "T√≠tol de l'element, camp d'edici√≥ requerit, Useu un t√≠tol descriptiu..."</li>
      <li>Ompliu un camp incorrectament i sortiu amb <code>Tab</code>.</li>
      <li>Verifiqueu que escolteu: "Indiqueu el t√≠tol de l'element."</li>
      <li>Desactiveu VoiceOver: <code>Cmd + F5</code></li>
    </ol>

    <p><strong>Windows (NVDA - gratu√Øt):</strong></p>
    <ol>
      <li>Descarregueu NVDA: <a href="https://www.nvaccess.org/download/" target="_blank" rel="noopener noreferrer">https://www.nvaccess.org/download/</a></li>
      <li>Instal¬∑leu-lo i activeu-lo: <code>Ctrl + Alt + N</code></li>
      <li>Navegueu amb <code>Tab</code> pel formulari.</li>
      <li>Escolteu els anuncis similars als de VoiceOver.</li>
      <li>Desactiveu NVDA: <code>Insert + Q</code></li>
    </ol>

    <p><strong>Qu√® buscar:</strong></p>
    <ul>
      <li><i class="bi bi-check-circle" aria-hidden="true"></i> Cada camp anuncia: nom (label), tipus (camp d'edici√≥), estat (requerit), ajuda.</li>
      <li><i class="bi bi-check-circle" aria-hidden="true"></i> Els errors s'anuncien quan apareixen.</li>
      <li><i class="bi bi-check-circle" aria-hidden="true"></i> El lector anuncia "inv√†lid" quan hi ha errors (<code>aria-invalid="true"</code>).</li>
      <li><i class="bi bi-x-circle" aria-hidden="true"></i> Anunci "camp d'edici√≥, buit" sense nom.</li>
      <li><i class="bi bi-x-circle" aria-hidden="true"></i> Errors no anunciats.</li>
      <li><i class="bi bi-x-circle" aria-hidden="true"></i> Ajudes no anunciades.</li>
    </ul>

    <p><strong>Prova 3: Eines autom√†tiques (complement√†ries)</strong></p>

    <p><strong>Lighthouse (Chrome DevTools):</strong></p>
    <ol>
      <li>Obriu DevTools: <code>F12</code></li>
      <li>Aneu a la pestanya "Lighthouse"</li>
      <li>Seleccioneu "Accessibility" i "Desktop"</li>
      <li>Premeu "Generate report"</li>
      <li>Reviseu els errors detectats (labels sense <code>for</code>, contrast baix, etc.)</li>
    </ol>

    <p><strong>axe DevTools (extensi√≥):</strong></p>
    <ol>
      <li>Instal¬∑leu l'extensi√≥ axe DevTools al navegador</li>
      <li>Obriu DevTools ‚Üí pestanya "axe DevTools"</li>
      <li>Premeu "Scan All of My Page"</li>
      <li>Reviseu els errors i advert√®ncies</li>
    </ol>

    <p><strong>Nota:</strong> aquestes eines detecten errors t√®cnics per√≤ <strong>no validen l'experi√®ncia d'usuari</strong>. Una etiqueta pot estar t√®cnicament correcta (<code>&lt;label for="camp"&gt;</code>) per√≤ ser poc clara ("Camp 1" vs "T√≠tol de l'element").</p>

    <p><strong>Documentar les proves al dossier</strong></p>

    <p>Afegiu una taula al fitxer <code>docs/formularis.md</code> amb els resultats de les proves:</p>

    {% capture code_380 %}## Proves d'accessibilitat
| Prova | Eina | Data | Resultat | Accions pendents |
|-------|------|------|----------|------------------|
| Navegaci√≥ teclat | Manual (Chrome) | 2025-01-15 | <i class="bi bi-check-circle" aria-hidden="true"></i> Aprovat | Cap | | Lector de pantalla | VoiceOver (macOS) | 2025-01-15 | <i class="bi bi-check-circle" aria-hidden="true"></i> Aprovat | Cap |
| Lector de pantalla | NVDA (Windows) | 2025-01-15 | ‚ö†Ô∏è Advert√®ncia | Ajuda del preu no es llegeix (falta `aria-describedby`) |
| Contrast colors | Lighthouse | 2025-01-15 | <i class="bi bi-check-circle" aria-hidden="true"></i> Aprovat | Cap | | Labels i ARIA | axe DevTools | 2025-01-15 | <i class="bi bi-check-circle" aria-hidden="true"></i> Aprovat | Cap |{% endcapture %}
    {% include code-block.html lang="markdown" code=code_380 %}

    {% include success_box.html contingut="<strong>Clau:</strong> proveu el formulari amb teclat i lector de pantalla per detectar problemes reals d'experi√®ncia d'usuari que les eines autom√†tiques no poden validar." %}

    <h4>3.10.3. Resultat esperat</h4>
    <p>Sabeu realitzar proves manuals d'accessibilitat amb teclat i lectors de pantalla, compreneu la import√†ncia de les proves reals sobre les autom√†tiques, i sabeu documentar els resultats al dossier del projecte.</p>
  {% endcapture %}
  {% include section-point.html numero="3.10" titol="Provar accessibilitat: navegar nom√©s amb teclat" contingut=section_point_3_10 %}

  {% capture section_point_3_11 %}
    <h4>3.11.1. Objectiu</h4>
    <p>Consolidar els conceptes vistos amb una checklist de millors pr√†ctiques reutilitzable per a futurs formularis.</p>

    <h4>3.11.2. Contingut</h4>

    <p>Despr√©s d'aplicar totes les t√®cniques d'accessibilitat, disposeu d'un <strong>patr√≥ reutilitzable</strong> per a qualsevol formulari del projecte. Aquestes s√≥n les 10 millors pr√†ctiques essencials:</p>

    <p><strong>1. Etiquetes visibles sempre associades</strong></p>
    <p><i class="bi bi-check-circle" aria-hidden="true"></i> Cada control t√© <code>&lt;label for="id"&gt;</code> amb l'<code>id</code> corresponent.<br>
    <i class="bi bi-x-circle" aria-hidden="true"></i> Mai utilitzeu nom√©s placeholders.</p>

    <p><strong>2. Agrupaci√≥ sem√†ntica</strong></p>
    <p><i class="bi bi-check-circle" aria-hidden="true"></i> Utilitzeu <code>&lt;fieldset&gt;</code> + <code>&lt;legend&gt;</code> per agrupar controls relacionats.<br>
    <i class="bi bi-x-circle" aria-hidden="true"></i> No agrupeu nom√©s amb divs sense sem√†ntica.</p>

    <p><strong>3. Ajudes vinculades</strong></p>
    <p><i class="bi bi-check-circle" aria-hidden="true"></i> Textos d'ajuda vinculats amb <code>aria-describedby="ajudaX"</code>.<br>
    <i class="bi bi-x-circle" aria-hidden="true"></i> Ajudes desconnectades que els lectors ignoren.</p>

    <p><strong>4. Errors anunciables</strong></p>
    <p><i class="bi bi-check-circle" aria-hidden="true"></i> Missatges d'error amb <code>role="alert"</code> i <code>aria-live="assertive"</code>.<br>
    <i class="bi bi-x-circle" aria-hidden="true"></i> Errors nom√©s visuals (color vermell).</p>

    <p><strong>5. Estat inv√†lid comunicat</strong></p>
    <p><i class="bi bi-check-circle" aria-hidden="true"></i> <code>[attr.aria-invalid]="camp.invalid && camp.touched"</code><br>
    <i class="bi bi-x-circle" aria-hidden="true"></i> Estat inv√†lid no comunicat als lectors.</p>

    <p><strong>6. Ordre de tabulaci√≥ natural</strong></p>
    <p><i class="bi bi-check-circle" aria-hidden="true"></i> Respectar l'ordre del DOM, evitar <code>tabindex</code> positius.<br>
    <i class="bi bi-x-circle" aria-hidden="true"></i> Salts inesperats o ordre ca√≤tic.</p>

    <p><strong>7. Focus sempre visible</strong></p>
    <p><i class="bi bi-check-circle" aria-hidden="true"></i> Borde blau gruixut + <code>box-shadow</code> amb contrast ‚â• 3:1.<br>
    <i class="bi bi-x-circle" aria-hidden="true"></i> <code>outline: none;</code> sense alternativa.</p>

    <p><strong>8. Missatges clars i breus</strong></p>
    <p><i class="bi bi-check-circle" aria-hidden="true"></i> "Indiqueu el t√≠tol (4-60 car√†cters)."<br>
    <i class="bi bi-x-circle" aria-hidden="true"></i> "Error!" o textos massa llargs.</p>

    <p><strong>9. Proves manuals obligat√≤ries</strong></p>
    <p><i class="bi bi-check-circle" aria-hidden="true"></i> Navegar nom√©s amb teclat + lector de pantalla.<br>
    <i class="bi bi-x-circle" aria-hidden="true"></i> Confiar nom√©s en eines autom√†tiques.</p>

    <p><strong>10. Documentaci√≥ de decisions</strong></p>
    <p><i class="bi bi-check-circle" aria-hidden="true"></i> Registrar proves i incid√®ncies al dossier del projecte.<br>
    <i class="bi bi-x-circle" aria-hidden="true"></i> Proves no documentades ni compartides amb l'equip.</p>

    <p><strong>Checklist r√†pida abans d'enviar un formulari a producci√≥:</strong></p>

    {% include checklist.html elements="Tots els inputs tenen <code>&lt;label for=\"id\"&gt;</code>|<code>&lt;fieldset&gt;</code> i <code>&lt;legend&gt;</code> per agrupar seccions|Ajudes vinculades amb <code>aria-describedby</code>|Errors amb <code>role=\"alert\"</code> i <code>aria-live=\"assertive\"</code>|<code>aria-invalid=\"true\"</code> quan hi ha errors|Ordre de tabulaci√≥ l√≤gic (provat amb <code>Tab</code>)|Focus visible (borde + ombra amb contrast ‚â• 3:1)|Formulari completable nom√©s amb teclat|Provat amb VoiceOver o NVDA|Documentat al dossier (<code>docs/formularis.md</code>)" %}

    <p><strong>Integraci√≥ amb futurs formularis:</strong></p>

    <p>Aquest patr√≥ accessible √©s la <strong>base</strong> per a les lectures seg√ºents:</p>
    <ul>
      <li><strong>Formularis reactius (RA3):</strong> mantindreu les mateixes etiquetes, ARIA i focus.</li>
      <li><strong>Validacions as√≠ncrones (RA3):</strong> afegireu <code>role="alert"</code> per a missatges de validaci√≥ de servidor.</li>
      <li><strong>Integraci√≥ amb APIs (RA3):</strong> mantindreu l'accessibilitat en formularis din√†mics amb dades externes.</li>
    </ul>

    <p><strong>Si necessiteu recordar els patrons espec√≠fics, podeu revisar:</strong></p>
    <ul>
      <li>Secci√≥ 2 (Marc conceptual): recordatori del problema-soluci√≥ i taules comparatives.</li>
      <li>Secci√≥ 5 (Etiquetes): patr√≥ <code>&lt;label for="id"&gt;</code>.</li>
      <li>Secci√≥ 6 (Atributs ARIA): taula resum d'atributs.</li>
      <li>Secci√≥ 8 (Focus visible): estils CSS complets.</li>
      <li>Secci√≥ 9 (Errors accessibles): patr√≥ amb <code>role="alert"</code>.</li>
      <li>Secci√≥ 13 (Troubleshooting): solucions a errors t√≠pics.</li>
    </ul>

    {% include success_box.html contingut="<strong>Clau:</strong> l'accessibilitat no √©s una tasca puntual sin√≥ un <strong>est√†ndard de qualitat</strong> que apliqueu a tots els formularis del projecte de manera sistem√†tica." %}

    <h4>3.11.3. Resultat esperat</h4>
    <p>Disposeu d'una checklist completa de millors pr√†ctiques d'accessibilitat que podeu aplicar a qualsevol formulari futur i compreneu la import√†ncia de mantenir aquest est√†ndard en totes les lectures seg√ºents.</p>
  {% endcapture %}
  {% include section-point.html numero="3.11" titol="Resum de millors pr√†ctiques d'accessibilitat" contingut=section_point_3_11 %}

  {% capture section_point_3_12 %}
    <ol>
      <li><strong>Associeu labels i fieldsets:</strong> cada control t√© <code>&lt;label for="id"&gt;</code> i els grups estan dins de <code>&lt;fieldset&gt;</code> amb <code>&lt;legend&gt;</code>.</li>
      <li><strong>Vinculeu ajudes i errors:</strong> utilitzeu <code>aria-describedby="ajuda error"</code> per associar textos d'ajuda i missatges d'error als controls.</li>
      <li><strong>Configureu errors anunciables:</strong> afegiu <code>role="alert"</code> i <code>aria-live="assertive"</code> als contenidors de missatges d'error.</li>
      <li><strong>Indiqueu estat inv√†lid:</strong> utilitzeu <code>[attr.aria-invalid]="camp.invalid && camp.touched"</code> per comunicar errors als lectors.</li>
      <li><strong>Definiu focus visible:</strong> apliqueu estils amb <code>box-shadow</code> i <code>border-color</code> que superin el contrast 3:1.</li>
      <li><strong>Proveu amb teclat:</strong> completeu el formulari nom√©s amb <code>Tab</code>, <code>Enter</code> i <code>Space</code> sense tocar el ratol√≠.</li>
      <li><strong>Proveu amb lector de pantalla:</strong> activeu VoiceOver (macOS) o NVDA (Windows) i verifiqueu que els anuncis s√≥n clars.</li>
      <li><strong>Documenteu al dossier:</strong> creeu una taula de proves amb resultats i accions pendents a <code>docs/formularis.md</code>.</li>
    </ol>

    <p><strong>Resultat esperat:</strong> un formulari totalment accessible que qualsevol persona pot completar amb teclat, lector de pantalla o altres tecnologies assistives, amb totes les proves documentades.</p>
  {% endcapture %}
  {% include section-point.html numero="3.12" titol="Mini exemple pr√†ctic ¬∑ Formulari accessible complet" contingut=section_point_3_12 %}

  {% capture section_point_3_13 %}
    <table>
      <thead>
        <tr>
          <th>S√≠mptoma</th>
          <th>Possible causa</th>
          <th>Soluci√≥ r√†pida</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>El lector de pantalla no anuncia l'error</strong></td>
          <td>Falta <code>role="alert"</code> o <code>aria-live</code> al contenidor</td>
          <td>Afegiu <code>&lt;div role="alert" aria-live="assertive"&gt;</code> al bloc de missatges d'error</td>
        </tr>
        <tr>
          <td><strong>El focus no √©s visible</strong></td>
          <td>Estils globals anul¬∑len <code>:focus</code> o <code>outline: none;</code> sense alternativa</td>
          <td>Apliqueu <code>box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.35);</code> i <code>border-color: #2563eb;</code> als estats <code>:focus</code></td>
        </tr>
        <tr>
          <td><strong>Salt d'ordre en navegar amb Tab</strong></td>
          <td>Elements amb <code>tabindex</code> positiu o fora de lloc al DOM</td>
          <td>Elimineu tots els <code>tabindex="1+"</code> i ajusteu l'ordre del HTML per coincidir amb l'ordre visual</td>
        </tr>
        <tr>
          <td><strong>Ajuda que no s'associa al control</strong></td>
          <td><code>aria-describedby</code> no referencia l'<code>id</code> correcte o l'<code>id</code> no existeix</td>
          <td>Reviseu que <code>aria-describedby="ajudaX"</code> coincideixi exactament amb <code>id="ajudaX"</code> del par√†graf d'ajuda</td>
        </tr>
        <tr>
          <td><strong>Lector de pantalla repeteix missatges</strong></td>
          <td>El contenidor d'errors es recrea cada cicle de detecci√≥ de canvis</td>
          <td>Manteniu el mateix <code>id</code> i eviteu recrear el DOM; utilitzeu <code>*ngIf</code> nom√©s al nivell del contenidor, no dels par√†grafs interns</td>
        </tr>
        <tr>
          <td><strong>Label no s'anuncia</strong></td>
          <td>Falta <code>for</code> a la label o l'<code>id</code> de l'input no coincideix</td>
          <td>Comproveu que <code>&lt;label for="campX"&gt;</code> coincideixi amb <code>&lt;input id="campX"&gt;</code> (case-sensitive)</td>
        </tr>
        <tr>
          <td><strong>Ordre de tabulaci√≥ imprevisible</strong></td>
          <td>Flexbox o Grid canvien l'ordre visual sense actualitzar el DOM</td>
          <td>Ajusteu l'ordre del HTML perqu√® coincideixi amb l'ordre visual o utilitzeu <code>tabindex="0"</code> amb precauci√≥</td>
        </tr>
        <tr>
          <td><strong>VoiceOver no s'activa (macOS)</strong></td>
          <td>Drecera de teclat desactivada a Prefer√®ncies del Sistema</td>
          <td>Aneu a Prefer√®ncies ‚Üí Accessibilitat ‚Üí VoiceOver ‚Üí Activeu "Permetre VoiceOver amb Cmd+F5"</td>
        </tr>
        <tr>
          <td><strong>NVDA no llegeix el formulari (Windows)</strong></td>
          <td>Mode navegaci√≥ activat en lloc de mode focus</td>
          <td>Premeu <code>Insert + Space</code> per alternar entre mode navegaci√≥ i mode focus</td>
        </tr>
        <tr>
          <td><strong>Contrast insuficient al focus</strong></td>
          <td>Color del <code>box-shadow</code> o <code>border</code> massa clar</td>
          <td>Utilitzeu eines de contrast (DevTools) per verificar que supera 3:1; proveu amb blau m√©s fosc <code>#1d4ed8</code></td>
        </tr>
      </tbody>
    </table>
  {% endcapture %}
  {% include section-point.html numero="3.13" titol="Resoluci√≥ de problemes (Win/macOS/Linux)" contingut=section_point_3_13 %}

  {% capture section_point_3_14 %}
  {% include prompt-ai.html contingut="<strong>Rol:</strong> Expert en accessibilitat web (WCAG 2.2). <strong>Context:</strong> Estic desenvolupant un formulari Angular templat-driven per a un cat√†leg d'elements. <strong>Tasca:</strong> Genera una checklist de 10 comprovacions essencials d'accessibilitat que hauria de fer abans de considerar el formulari llest per a producci√≥, incloent com verificar cada punt manualment. <strong>Format:</strong> Llista numerada amb nom de la comprovaci√≥ + 1-2 l√≠nies de descripci√≥ + m√®tode de verificaci√≥." %}

  {% include prompt-ai.html contingut="<strong>Rol:</strong> Redactor UX especialitzat en accessibilitat. <strong>Context:</strong> Necessito missatges d'error emp√†tics, clars i breus per a un formulari amb camps de t√≠tol (4-60 car√†cters), descripci√≥ (10-200 car√†cters) i preu (5-500 ‚Ç¨). <strong>Tasca:</strong> Proposa 3 missatges d'error diferents per a cada validaci√≥ (required, minlength, maxlength, min, max), tots en catal√† i amb instruccions de correcci√≥. <strong>Format:</strong> Taula amb columnes: Camp | Validaci√≥ | Missatge proposat." %}

  {% include prompt-ai.html contingut="<strong>Rol:</strong> Desenvolupador frontend expert en ARIA. <strong>Context:</strong> Tinc un formulari amb validacions i missatges d'error que apareixen din√†micament. <strong>Tasca:</strong> Explica la difer√®ncia entre <code>role=\"alert\"</code>, <code>aria-live=\"assertive\"</code> i <code>aria-live=\"polite\"</code>, i proporciona exemples concrets de quan utilitzar cada opci√≥ en contextos de formularis. <strong>Format:</strong> 3 seccions (una per atribut) amb definici√≥ + exemple de codi + context d'√∫s recomanat." %}
  {% endcapture %}
  {% include section-point.html numero="3.14" titol="Prompts d'IA" contingut=section_point_3_14 %}

  {% capture section_point_3_15 %}
    <h4>Conceptes te√≤rics</h4>
    {% include checklist.html elements="He associat cada control amb la seva etiqueta (<code>&lt;label for=\"id\"&gt;</code>) i he utilitzat <code>&lt;fieldset&gt;</code> + <code>&lt;legend&gt;</code> per agrupar seccions relacionades|He vinculat textos d'ajuda i missatges d'error als controls amb <code>aria-describedby</code> i he configurat <code>role=\"alert\"</code> + <code>aria-live=\"assertive\"</code> per anunciar errors|He aplicat estils de focus visibles amb contrast ‚â• 3:1 (borde blau + <code>box-shadow</code>) i he combinat els estats de focus amb validacions (v√†lid/inv√†lid)|He completat el formulari utilitzant nom√©s el teclat (<code>Tab</code>, <code>Enter</code>, <code>Space</code>) sense tocar el ratol√≠ i he verificat que l'ordre de tabulaci√≥ √©s l√≤gic" %}

    <h4>Habilitats pr√†ctiques</h4>
    {% include checklist.html elements="He provat el formulari amb un lector de pantalla (VoiceOver o NVDA) i he documentat els resultats de les proves al fitxer <code>docs/formularis.md</code> amb una taula de verificaci√≥" %}

    <h4>Resoluci√≥ de problemes</h4>
    {% include checklist.html elements="S√© identificar quan un lector de pantalla no anuncia errors i aplicar <code>role=\"alert\"</code>|Puc diagnosticar problemes d'ordre de tabulaci√≥ i ajustar el DOM o <code>tabindex</code>|Comprenc com verificar contrast de focus amb eines de DevTools" %}
  {% endcapture %}
  {% include section-point.html numero="3.15" titol="Autoavaluaci√≥" contingut=section_point_3_15 %}

  {% capture section_point_3_16 %}
    <p>Heu elevat el formulari templat-driven a un <strong>nivell accessible</strong> que garanteix que qualsevol persona, independentment de les seves capacitats, pugui completar-lo de manera aut√≤noma. Heu aplicat les t√®cniques fonamentals d'accessibilitat: <strong>etiquetes sem√†ntiques</strong>, <strong>atributs ARIA</strong> (<code>aria-describedby</code>, <code>role="alert"</code>, <code>aria-live</code>), <strong>focus visible</strong> amb contrast suficient, i <strong>ordre de tabulaci√≥ l√≤gic</strong>. Heu validat la interacci√≥ amb <strong>teclat</strong> i <strong>lectors de pantalla</strong> (VoiceOver, NVDA), deixant registre de les proves al dossier del projecte per facilitar auditories futures i compartir el coneixement amb l'equip. Heu establert un <strong>patr√≥ reutilitzable</strong> de formulari accessible que podreu aplicar a totes les lectures seg√ºents (formularis reactius, validacions as√≠ncrones, integraci√≥ amb APIs), mantenint el mateix est√†ndard de qualitat.</p>
  {% endcapture %}
  {% include section-point.html numero="3.16" titol="S√≠ntesi" contingut=section_point_3_16 %}

  {% capture section_point_3_17 %}
  {% include definicio.html terme="Accessibilitat web" definicio="Garanteix que totes les persones puguin percebre, comprendre, navegar i interactuar amb una aplicaci√≥, independentment de les seves capacitats o tecnologies assistives." %}

  {% include definicio.html terme="Etiquetes sem√†ntiques (<code>&lt;label&gt;</code>)" definicio="Elements HTML que s'associen a controls (<code>&lt;input&gt;</code>, <code>&lt;select&gt;</code>, <code>&lt;textarea&gt;</code>) amb l'atribut <code>for</code>, anunciant el prop√≤sit del camp als lectors de pantalla." %}

  {% include definicio.html terme="Atribut <code>aria-describedby</code>" definicio="Vincula ajudes textuals i missatges d'error a un control, garantint que els lectors de pantalla els anunci√Øn autom√†ticament." %}

  {% include definicio.html terme="<code>role=\"alert\"</code>" definicio="Marca un element com a regi√≥ d'alerta urgent, fent que els lectors de pantalla l'anunci√Øn immediatament quan apareix." %}

  {% include definicio.html terme="<code>aria-live</code>" definicio="Controla com els lectors anuncien canvis din√†mics; <code>\"assertive\"</code> interromp immediatament, <code>\"polite\"</code> espera que l'usuari acabi la tasca." %}

  {% include definicio.html terme="<code>aria-invalid</code>" definicio="Indica que el valor d'un control √©s inv√†lid, anunciant \"inv√†lid\" als lectors de pantalla." %}

  {% include definicio.html terme="Focus visible" definicio="Indicador visual clar (borde + ombra) amb contrast ‚â• 3:1 que mostra quin element est√† actiu durant la navegaci√≥ amb teclat." %}

  {% include definicio.html terme="Ordre de tabulaci√≥" definicio="Seq√º√®ncia en qu√® el focus passa entre elements en pr√©mer <code>Tab</code>; ha de seguir l'ordre visual del formulari (d'esquerra a dreta, de dalt a baix)." %}

  {% include definicio.html terme="<code>tabindex</code>" definicio="Atribut que controla si un element √©s focusable i el seu ordre; utilitzeu <code>\"0\"</code> per elements personalitzats, <code>\"-1\"</code> per elements no tabulables, i eviteu valors positius." %}

  {% include definicio.html terme="<code>&lt;fieldset&gt;</code> + <code>&lt;legend&gt;</code>" definicio="Elements sem√†ntics per agrupar controls relacionats amb un t√≠tol, proporcionant context addicional als lectors de pantalla." %}

  {% include definicio.html terme="Proves manuals d'accessibilitat" definicio="Navegaci√≥ nom√©s amb teclat (<code>Tab</code>, <code>Enter</code>, <code>Space</code>) i proves amb lectors de pantalla (VoiceOver, NVDA) per validar l'experi√®ncia real d'usuaris amb diversitat funcional." %}

  {% include definicio.html terme="WCAG (Web Content Accessibility Guidelines)" definicio="Est√†ndard internacional que defineix requisits d'accessibilitat; nivell AA √©s el requisit legal per a organismes p√∫blics i empreses grans." %}
  {% endcapture %}
  {% include section-point.html numero="3.17" titol="Rep√†s de conceptes" contingut=section_point_3_17 %}

</div>

<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>Bloc 1: Serveis i separació de responsabilitats | DA2_OA01 - Programació Avançada (Angular) - IOC</title>
    <meta name="description" content="Material educatiu - Institut Obert de Catalunya">
    <meta name="page-unitat" content="3">
    <meta name="page-bloc" content="1">
    
    <!-- SEO Tags -->
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Bloc 1: Serveis i separació de responsabilitats | DA2_OA01 - Programació Avançada (Angular)</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Bloc 1: Serveis i separació de responsabilitats" />
<meta property="og:locale" content="ca_ES" />
<meta name="description" content="Creació de serveis, injecció de dependències i patrons de servei Angular" />
<meta property="og:description" content="Creació de serveis, injecció de dependències i patrons de servei Angular" />
<link rel="canonical" href="http://localhost:4006/ioc/da2_oa01/unitat-3/bloc-1/" />
<meta property="og:url" content="http://localhost:4006/ioc/da2_oa01/unitat-3/bloc-1/" />
<meta property="og:site_name" content="DA2_OA01 - Programació Avançada (Angular)" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Bloc 1: Serveis i separació de responsabilitats" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Creació de serveis, injecció de dependències i patrons de servei Angular","headline":"Bloc 1: Serveis i separació de responsabilitats","url":"http://localhost:4006/ioc/da2_oa01/unitat-3/bloc-1/"}</script>
<!-- End Jekyll SEO tag -->

    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/ioc/da2_oa01/assets/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="canonical" href="http://localhost:4006/ioc/da2_oa01/unitat-3/bloc-1/">
    <!-- Rich editor styles (for embedded notes panel) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.snow.min.css">
    <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" disabled>
    <link rel="stylesheet" href="/ioc/da2_oa01/assets/css/quadern-rich-editor.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/ioc/da2_oa01/assets/images/favicon.ico">
    
    <!-- RSS Feed -->
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4006/ioc/da2_oa01/feed.xml" title="DA2_OA01 - Programació Avançada (Angular)" />

    <!-- Syntax Highlighting (Prism) -->
    <link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-jsx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-html.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-tsx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>

    <!-- Code Block Component -->
    <link rel="stylesheet" href="/ioc/da2_oa01/assets/css/code-block.css">
    <script src="/ioc/da2_oa01/assets/js/code-block.js"></script>

</head>

<body class="bloc-layout" data-baseurl="/ioc/da2_oa01">
    <!-- Skip to content for accessibility -->
    <a class="skip-link" href="#main-content">Salta al contingut principal</a>


    
    <!-- Header fix -->
    <header class="header" role="banner" id="top">
        <div class="header-brand">
            <a href="/ioc/da2_oa01/" class="logo-link" aria-label="Inici">
                <img src="/ioc/da2_oa01/assets/images/logo_IOC_light.jpg" alt="Institut Obert de Catalunya" class="logo logo-light">
                <img src="/ioc/da2_oa01/assets/images/logo_IOC_dark.png" alt="Institut Obert de Catalunya" class="logo logo-dark">
            </a>
            <a href="/ioc/da2_oa01/" class="title-link">
                <h1>DA2_OA01 - DA2_OA01 - Programació Avançada (Angular)</h1>
            </a>
        </div>
        <div class="header-actions">
            <button class="theme-toggle" id="theme-toggle">Mode Fosc</button>
            <button class="nav-panel-toggle" type="button" aria-expanded="false" aria-label="Obre la navegació">
                <i class="bi bi-list" aria-hidden="true"></i>
                <span class="nav-panel-label">Navegació</span>
            </button>
        </div>
    </header>

    <div class="offcanvas-backdrop" hidden></div>
    <nav class="offcanvas-nav" aria-hidden="true" aria-label="Navegació del curs">
        <div class="offcanvas-header">
            <h2 class="offcanvas-title">Navegació</h2>
            <button class="offcanvas-close" type="button" aria-label="Tanca la navegació">
                <i class="bi bi-x-lg" aria-hidden="true"></i>
            </button>
        </div>
        <div class="offcanvas-body">
            <a href="/ioc/da2_oa01/" class="nav-dropdown-item ">Índex del Curs</a>
            
                
                    <a href="/ioc/da2_oa01/unitat-1/bloc-1/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 1: Conceptes fonamentals i instal·lació
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-1/bloc-2/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 2: Entorn de desenvolupament integrat
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-1/bloc-3/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 3: Creació del projecte base
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-1/bloc-4/" class="nav-dropdown-item ">
                        Unitat 1 - Bloc 4: Cas d'ús: Preparació de l'entorn
                    </a>
                
            
                
                    <a href="/ioc/da2_oa01/unitat-2/bloc-1/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 1: Components i comunicació bàsica
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-2/bloc-2/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 2: Data binding i events
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-2/bloc-3/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 3: Formularis amb vinculació bidireccional
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-2/bloc-4/" class="nav-dropdown-item ">
                        Unitat 2 - Bloc 4: Cas d'ús: Catàleg d'elements
                    </a>
                
            
                
                    <a href="/ioc/da2_oa01/unitat-3/bloc-1/" class="nav-dropdown-item current">
                        Unitat 3 - Bloc 1: Serveis i separació de responsabilitats
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-3/bloc-2/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 2: Gestió d'estat i comunicació entre components
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-3/bloc-3/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 3: Optimització i bones pràctiques
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-3/bloc-4/" class="nav-dropdown-item ">
                        Unitat 3 - Bloc 4: Cas d'ús: Catàleg amb API REST
                    </a>
                
            
                
                    <a href="/ioc/da2_oa01/unitat-4/bloc-1/" class="nav-dropdown-item ">
                        Unitat 4 - Bloc 1: Sistema de rutes i navegació
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-4/bloc-2/" class="nav-dropdown-item ">
                        Unitat 4 - Bloc 2: Arquitectura escalable
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-4/bloc-3/" class="nav-dropdown-item ">
                        Unitat 4 - Bloc 3: Optimització de rendiment
                    </a>
                
                    <a href="/ioc/da2_oa01/unitat-4/bloc-4/" class="nav-dropdown-item ">
                        Unitat 4 - Bloc 4: Cas d'ús: Aplicació completa
                    </a>
                
            
        </div>
    </nav>

    <div class="container">
        <!-- Sidebar Navegació -->
        
        <aside class="sidebar">
            <button class="sidebar-toggle" type="button" aria-expanded="false">
                <span>Contingut del bloc</span>
                <i class="bi bi-chevron-down" aria-hidden="true"></i>
            </button>
            <div class="sidebar-scroll">
                <!-- Contingut d'aquest Bloc -->
                <div class="sidebar-section">
                    <h3>Contingut del Bloc</h3>
                    

    
    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat3_Bloc1_Seccio1" class="nav-link" data-section="Unitat3_Bloc1_Seccio1">1. Creació de serveis i separació de responsabilitats</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat3_Bloc1_Seccio2" class="nav-link" data-section="Unitat3_Bloc1_Seccio2">2. Client de peticions i comunicació amb serveis web</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat3_Bloc1_Seccio3" class="nav-link" data-section="Unitat3_Bloc1_Seccio3">3. Gestió de càrrega i errors en peticions</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    



                </div>
            </div>
        </aside>
        

        <main class="main-content" role="main" id="main-content">
            
            <!-- Navegació horizontal -->
            
            <nav class="horizontal-nav" aria-label="Navegació de ruta">
                <div class="horizontal-nav-list">
                    <a href="/ioc/da2_oa01/" class="horizontal-nav-item">Inici</a>
                    
                    
                        
                        
                            
                        
                            
                        
                            
                                
                                
                        
                        
                            <span class="horizontal-nav-separator"> &gt; </span>
                            <a href="/ioc/da2_oa01/unitat-3/" class="horizontal-nav-item">
                                Unitat 3: Serveis i gestió de dades (RA3)
                            </a>
                        
                        
                        
                            
                            
                                
                                    
                                    
                            
                            
                                <span class="horizontal-nav-separator"> &gt; </span>
                                <span class="horizontal-nav-item current">
                                    Bloc 3.1: Serveis i separació de responsabilitats
                                </span>
                            
                        
                    
                </div>
            </nav>
            
            
            <!-- Contingut de la Pàgina -->
            <article class="page-content">
                <div class="content-body">
                    

<!-- Objectius del bloc (si estan definits al frontmatter) -->


<!-- Contingut principal -->
<!-- SECCIÓ 1: Creació de serveis i separació de responsabilitats -->
<div class="section" id="Unitat3_Bloc1_Seccio1">
  <h2 id="Unitat3_Bloc1_Seccio1">1. Creació de serveis i separació de responsabilitats</h2>

  <!-- MULTIMÈDIA -->
  <!--
  ════════════════════════════════════════════════════════════════
  Component: Enllaços multimèdia YouTube
  ════════════════════════════════════════════════════════════════

  Paràmetres:
    - unitat: número de la unitat (1-4)
    - bloc: número del bloc (1-4)
    - seccio: número de la secció (1-3)

  Exemple d'ús:
    {% include multimedia-youtube.html unitat=1 bloc=1 seccio=1 %}

  El component busca automàticament les URLs corresponents a
  site.data.multimedia i mostra els botons de vídeo i àudio.
  ════════════════════════════════════════════════════════════════
-->





  
  
  
  
  

  

  

  
<div class="multimedia-resources">
  <div class="multimedia-header">
    <i class="bi bi-play-circle-fill"></i>
    <span>Contingut multimèdia d'aquesta lectura</span>
  </div>

  <div class="multimedia-buttons">
    
    <a href="https://www.youtube.com/watch?v=mB5qeQC4eZQ" target="_blank" rel="noopener noreferrer" class="multimedia-btn video-btn" title="Lectura 3.1.1 · Creació de serveis i separació de responsabilitats">
      <i class="bi bi-youtube"></i>
      <span>Veure vídeo</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    

    
    <a href="https://www.youtube.com/watch?v=__msUahbc_s" target="_blank" rel="noopener noreferrer" class="multimedia-btn audio-btn" title="[Audio] Lectura 3.1.1 · Creació de serveis i separació de responsabilitats">
      <i class="bi bi-mic-fill"></i>
      <span>Escoltar àudio</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    
  </div>

  
  
</div>
  




  <!-- Component: Objectius del bloc/unitat -->



<div class="objectius-box">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-bullseye" aria-hidden="true"></i> Objectius</div>
  <div class="component-content">
    <ul>
      
        <li>Crear un servei Angular amb la CLI per encapsular lògica de negoci</li>
      
        <li>Injectar serveis en components utilitzant el sistema de dependències</li>
      
        <li>Separar responsabilitats entre components (vista) i serveis (dades/lògica)</li>
      
    </ul>
  </div>
  <!-- IMPORTANT: també es pot usar via front matter: page.objectius (array) -->
</div>



  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>RA3 · Criteri 1</strong> — Defineix models de dades i estructures adequades al cas d'ús.
    
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.1. Prerequisits</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <p>Abans de començar, necessiteu:</p>
    <ul>
      <li><strong>Projecte base funcional:</strong> Unitat 2 completada amb catàleg d'elements operatiu, components de targeta, llista i cerca implementats, dades simulades (mock) actualment dins del component arrel.</li>
      <li><strong>Entorn preparat:</strong> Angular CLI instal·lat i verificat, projecte arrencant correctament amb <code>ng serve</code>, Visual Studio Code amb extensions Angular.</li>
      <li><strong>Coneixements previs:</strong> Components i propietats @Input (Lectura 2.1.2), vinculació de dades i esdeveniments (Lectura 2.1.3), gestió d'arrays i iteració amb *ngFor (Lectura 2.2.1).</li>
    </ul>
    <p><strong>Verificació ràpida:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng version
ng serve --open</code></pre>
  </div>
</div>

    <p><strong>Punt d'autocomprovació:</strong> El navegador mostra el catàleg d'elements amb dades locals. Git està net (<code>git status</code> sense canvis pendents).</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.2. Marc conceptual</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.2.1. Què és un servei</h4>
    <p>Un servei és una classe TypeScript dedicada a gestionar lògica de negoci i dades. Els serveis encapsulen funcionalitat reutilitzable fora dels components, permetent que aquests se centrin exclusivament en mostrar informació i gestionar la interacció amb l'usuari.</p>
    <h4>1.2.2. Problema sense serveis</h4>
    <p><strong>Situació abans:</strong></p>
    <p>A la Unitat 2, heu construït un catàleg amb totes les dades definides directament al component arrel:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  selector: &#39;app-root&#39;,
  template: `...`
})
export class AppComponent {
  // PROBLEMA: Dades barrejades amb lògica de presentació
  elements: Element[] = [
    { id: 1, titol: &#39;Portàtil ThinkPad&#39;, descripcio: &#39;...&#39; },
    { id: 2, titol: &#39;Auriculars Sony&#39;, descripcio: &#39;...&#39; },
    // ... 8 elements més
  ];
  elementsFiltrats: Element[] = this.elements;
  filtrarElements(text: string): void {
    // Lògica de filtratge barrejada amb component
    this.elementsFiltrats = this.elements.filter(e =&gt;
      e.titol.includes(text)
    );
  }
  obtenirDestacats(): Element[] {
    // Més lògica de negoci al component
    return this.elements.filter(e =&gt; e.destacat);
  }
}</code></pre>
  </div>
</div>

    <p><strong>Problemes que genera:</strong></p>
    <p><strong>1. Duplicació de dades</strong></p>
    <p>Si creeu un component de pàgina de detall, heu de tornar a definir el mateix array d'elements. Canviar un element requereix actualitzar múltiples fitxers, generant inconsistències i errors.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// detall.component.ts - DUPLICACIÓ
elements: Element[] = [
  { id: 1, titol: &#39;Portàtil ThinkPad&#39;, ... }, // Copiat!
  // ...
];</code></pre>
  </div>
</div>

    <p><strong>2. Components massa complexos</strong></p>
    <p>El component arrel gestiona simultàniament: dades, lògica de filtratge, lògica de destacats, presentació visual. Això viola el principi de responsabilitat única i dificulta el manteniment.</p>
    <p><strong>3. Proves impossibles d'aïllar</strong></p>
    <p>Per provar la lògica de filtratge, heu de crear tot el component amb la seva plantilla, estils i dependències. No podeu provar només la funció de filtratge de manera independent.</p>
    <p><strong>4. Reutilització zero</strong></p>
    <p>Si voleu usar la mateixa lògica de filtratge en un altre component, heu de copiar-enganxar el codi. Qualsevol millora posterior s'ha de replicar manualment a tots els llocs.</p>
    <p><strong>5. Acoblament fort</strong></p>
    <p>El component està acoblat directament a l'estructura de dades. Canviar la font de dades (per exemple, d'un mock a una API) requereix modificar tots els components que usen les dades.</p>
    <h4>1.2.3. Solució amb serveis</h4>
    <p><strong>Com funciona:</strong></p>
    <p>Moveu totes les dades i lògica de negoci a una classe independent: el servei. Els components només demanen informació al servei i la mostren.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// element.service.ts - SERVEI
@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private elements: Element[] = [
    { id: 1, titol: &#39;Portàtil ThinkPad&#39;, ... },
    // ...
  ];
  obtenirElements(): Element[] {
    return this.elements;
  }
  obtenirDestacats(): Element[] {
    return this.elements.filter(e =&gt; e.destacat);
  }
  filtrarPerText(text: string): Element[] {
    return this.elements.filter(e =&gt;
      e.titol.toLowerCase().includes(text.toLowerCase())
    );
  }
}
// app.component.ts - COMPONENT NET
@Component({
  selector: &#39;app-root&#39;,
  template: `...`
})
export class AppComponent {
  private elementService = inject(ElementService);
  elements: Element[] = [];
  ngOnInit(): void {
    // Component només demana dades
    this.elements = this.elementService.obtenirElements();
  }
  filtrar(text: string): void {
    // Component delega lògica al servei
    this.elements = this.elementService.filtrarPerText(text);
  }
}</code></pre>
  </div>
</div>

    <p><strong>Avantatges concrets:</strong></p>
    <p><strong>Centralització de dades:</strong> Un sol lloc conté les dades. Tots els components accedeixen a la mateixa font. Canvis automàtics a tota l'aplicació.</p>
    <p><strong>Components més simples:</strong> Els components passen de 150 línies amb lògica barrejada a 50 línies només de presentació. Més fàcils de llegir, entendre i mantenir.</p>
    <p><strong>Reutilització automàtica:</strong> Qualsevol component pot injectar el servei i usar els seus mètodes. La lògica es defineix un cop, s'usa arreu.</p>
    <p><strong>Proves aïllades:</strong> Podeu provar el servei independentment dels components. Proves ràpides i fiables sense necessitat de renderitzar vistes.</p>
    <p><strong>Preparació per a APIs:</strong> Quan a la Lectura 3.1.2 integreu una API real, només cal canviar el servei. Els components no necessiten modificacions.</p>
    <h4>1.2.4. Quan utilitzar serveis</h4>
    <p><strong>SEMPRE que tingueu:</strong></p>
    <ul>
      <li>Dades que múltiples components necessiten accedir</li>
      <li>Lògica de negoci (filtres, càlculs, validacions complexes)</li>
      <li>Comunicació amb APIs o bases de dades</li>
      <li>Funcionalitat que voleu reutilitzar</li>
    </ul>
    <p><strong>NO cal servei quan:</strong></p>
    <ul>
      <li>Dades exclusives d'un sol component que no es reutilitzen</li>
      <li>Lògica de presentació pura (mostrar/ocultar elements visuals)</li>
      <li>Transformacions trivials (pipes ja ho fan)</li>
    </ul>
    <h4>1.2.5. Comparativa abans/després</h4>
    <p><strong>Abans (sense servei):</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">AppComponent (200 línies)
├─ Dades: Element[]
├─ Lògica filtratge
├─ Lògica destacats
├─ Template
└─ Estils
DetallComponent (150 línies)
├─ Dades: Element[] (DUPLICAT)
├─ Lògica cerca per ID
├─ Template
└─ Estils
→ 350 línies, dades duplicades, lògica barrejada</code></pre>
  </div>
</div>

    <p><strong>Després (amb servei):</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">ElementService (80 línies)
├─ Dades: Element[]
├─ obtenirElements()
├─ filtrarPerText()
└─ obtenirDestacats()
AppComponent (60 línies)
├─ Injecta servei
├─ Només presenta dades
└─ Template + Estils
DetallComponent (50 línies)
├─ Injecta servei
├─ Només presenta dades
└─ Template + Estils
→ 190 línies, cap duplicació, responsabilitats clares</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.3. Model mental</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.3.1. Diagrama conceptual del flux</h4>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">┌─────────────────────────────────────────────────────┐
│                   APLICACIÓ ANGULAR                  │
├─────────────────────────────────────────────────────┤
│                                                      │
│  ┌──────────────────┐         ┌─────────────────┐  │
│  │   AppComponent   │         │ DetallComponent │  │
│  │                  │         │                 │  │
│  │  - elements[]    │         │  - element      │  │
│  │  - ngOnInit()    │         │  - ngOnInit()   │  │
│  └────────┬─────────┘         └────────┬────────┘  │
│           │                            │           │
│           │ inject(ElementService)     │           │
│           │                            │           │
│           └──────────┬─────────────────┘           │
│                      │                              │
│                      ▼                              │
│           ┌────────────────────┐                    │
│           │  ElementService    │ ← Instància única │
│           │  @Injectable       │                    │
│           ├────────────────────┤                    │
│           │ - elements: []     │                    │
│           │ + obtenirElements()│                    │
│           │ + filtrarPerText() │                    │
│           │ + obtenirDestacats()│                   │
│           └────────────────────┘                    │
│                                                      │
└─────────────────────────────────────────────────────┘</code></pre>
  </div>
</div>

    <h4>1.3.2. Analogia real: Biblioteca</h4>
    <p>Penseu en un servei com una <strong>biblioteca pública:</strong></p>
    <p><strong>Biblioteca (servei):</strong></p>
    <ul>
      <li>Té tots els llibres (dades) centralitzats</li>
      <li>Ofereix mètodes per buscar: per títol, per autor, per categoria</li>
      <li>Gestiona préstecs i devolucions (lògica de negoci)</li>
      <li>Un sol lloc, tots els veïns hi accedeixen</li>
    </ul>
    <p><strong>Veïns (components):</strong></p>
    <ul>
      <li>Visiten la biblioteca quan necessiten informació</li>
      <li>Demanen llibres específics</li>
      <li>NO guarden còpies de tots els llibres a casa seva</li>
      <li>Confien que la biblioteca gestiona bé els llibres</li>
    </ul>
    <p><strong>Sense biblioteca (sense servei):</strong></p>
    <ul>
      <li>Cada veí té la seva pròpia col·lecció de llibres duplicats</li>
      <li>Quan un llibre s'actualitza, cal avisar tots els veïns</li>
      <li>Espai malbaratat, inconsistències garantides</li>
    </ul>
    <h4>1.3.3. Flux de dades component → servei</h4>
    <p><strong>1. Component necessita dades</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit(): void {
  // Component demana dades al servei
  this.elements = this.elementService.obtenirElements();
}</code></pre>
  </div>
</div>

    <p><strong>2. Servei processa petició</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">obtenirElements(): Element[] {
  // Servei retorna dades (mock ara, API després)
  return this.elements;
}</code></pre>
  </div>
</div>

    <p><strong>3. Component rep i mostra dades</strong></p>
    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;app-llista-elements [elements]=&quot;elements&quot;&gt;&lt;/app-llista-elements&gt;</code></pre>
  </div>
</div>

    <p><strong>IMPORTANT:</strong> El component NOMÉS presenta. Mai manipula directament les dades del servei.</p>
    <h4>1.3.4. Injecció de dependències: Com funciona</h4>
    <p>Angular crea <strong>una sola instància</strong> del servei i la comparteix entre tots els components que la necessiten.</p>
    <p><strong>Pas 1 - Servei es declara injectable:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })  // &quot;root&quot; = una sola instància per tota l&#39;app
export class ElementService { }</code></pre>
  </div>
</div>

    <p><strong>Pas 2 - Component demana el servei:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class AppComponent {
  private elementService = inject(ElementService);  // Angular proporciona la instància
}</code></pre>
  </div>
</div>

    <p><strong>Pas 3 - Angular connecta automàticament:</strong></p>
    <ul>
      <li>Angular veu que <code>AppComponent</code> necessita <code>ElementService</code></li>
      <li>Comprova si ja existeix una instància (singleton)</li>
      <li>Si no existeix, la crea</li>
      <li>L'injecta al component</li>
    </ul>
    <h4>1.3.5. Errors conceptuals comuns</h4>
    <p><i class="bi bi-x-circle" aria-hidden="true"></i> <strong>Error 1: Crear servei amb <code>new</code></strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Això crea instàncies diferents a cada component
private elementService = new ElementService();</code></pre>
  </div>
</div>

    <p><i class="bi bi-check-circle" aria-hidden="true"></i> <strong>Correcte: Usar <code>inject()</code></strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Correcte: Angular gestiona la instància única
private elementService = inject(ElementService);</code></pre>
  </div>
</div>

    <p><i class="bi bi-x-circle" aria-hidden="true"></i> <strong>Error 2: Servei amb lògica de presentació</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Servei NO ha de gestionar visibilitat de components
toggleMostrarLlista(): void {
  this.llistaVisible = !this.llistaVisible;  // Això és del component!
}</code></pre>
  </div>
</div>

    <p><i class="bi bi-check-circle" aria-hidden="true"></i> <strong>Correcte: Servei només dades i negoci</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Correcte: Servei només gestiona dades
filtrarElements(text: string): Element[] {
  return this.elements.filter(e =&gt; e.titol.includes(text));
}</code></pre>
  </div>
</div>

    <p><i class="bi bi-x-circle" aria-hidden="true"></i> <strong>Error 3: Component amb lògica de negoci</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Component calculant preus amb IVA
calcularPreuAmbIVA(preu: number): number {
  return preu * 1.21;  // Això és lògica de negoci!
}</code></pre>
  </div>
</div>

    <p><i class="bi bi-check-circle" aria-hidden="true"></i> <strong>Correcte: Delegar al servei</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Correcte: Component delega al servei
obtenirPreuFinal(elementId: number): number {
  return this.elementService.calcularPreuAmbIVA(elementId);
}</code></pre>
  </div>
</div>

    <h4>1.3.6. Com pensar en responsabilitats</h4>
    <p><strong>Components (Presentació):</strong></p>
    <ul>
      <li>"Què mostro a l'usuari?"</li>
      <li>"Quina acció ha fet l'usuari?"</li>
      <li>"Com presento aquesta informació visualment?"</li>
    </ul>
    <p><strong>Serveis (Dades i Lògica):</strong></p>
    <ul>
      <li>"D'on venen les dades?"</li>
      <li>"Com processo aquesta informació?"</li>
      <li>"Quines regles de negoci s'apliquen?"</li>
    </ul>
    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Regla d'or:</strong> Si elimines tot el HTML i els estils, el servei continua tenint sentit i funcionant independentment.
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.4. Arquitectura d'aplicacions: components vs serveis</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.4.1. Objectiu</h4>
    <p>Comprendre com Angular separa responsabilitats entre la capa de presentació (components) i la capa de lògica (serveis), identificant què ha d'anar a cada capa i per què aquesta arquitectura millora la qualitat del codi.</p>
    <h4>1.4.2. Capa de presentació (Components)</h4>
    <p>Una aplicació Angular ben arquitectada divideix el codi en dues capes principals.</p>
    <p><strong>Capa de presentació (Components):</strong></p>
    <ul>
      <li>Gestiona la interfície visual</li>
      <li>Captura esdeveniments d'usuari (clics, escriptura, navegació)</li>
      <li>Mostra dades a la pantalla</li>
      <li>NO conté lògica de negoci complexa</li>
    </ul>
    <p><strong>Capa de lògica (Serveis):</strong></p>
    <ul>
      <li>Gestiona dades i el seu emmagatzematge</li>
      <li>Executa operacions de negoci (càlculs, filtres, validacions)</li>
      <li>Comunica amb APIs o bases de dades</li>
      <li>NO conté codi de presentació (HTML, CSS)</li>
    </ul>
    <h4>1.4.3. Per què aquesta separació és crucial</h4>
    <p><strong>Mantenibilitat:</strong> Si totes les dades i la lògica estan barrejades amb la presentació, qualsevol canvi petit requereix modificar components enormes. Amb separació, canvieu només el que cal.</p>
    <p><strong>Escalabilitat:</strong> Quan l'aplicació creix de 5 a 50 components, necessiteu reutilitzar lògica. Els serveis permeten centralitzar funcionalitat sense duplicar codi.</p>
    <p><strong>Proves:</strong> Provar un component amb 500 línies que barreja tot és lent i fràgil. Provar un servei de 100 línies amb mètodes clars és ràpid i fiable.</p>
    <h4>1.4.4. Exemple comparatiu</h4>
    <p><strong>Component barrejat (Incorrecte):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  selector: &#39;app-cataleg&#39;,
  template: `&lt;div *ngFor=&quot;let e of elements&quot;&gt;{{ e.titol }}&lt;/div&gt;`
})
export class CatalegComponent {
  // Dades definides al component
  elements: Element[] = [ /* 100 línies */ ];
  // Lògica de filtratge al component
  filtrar(text: string): Element[] {
    return this.elements.filter(e =&gt;
      e.titol.toLowerCase().includes(text.toLowerCase()) ||
      e.descripcio.toLowerCase().includes(text.toLowerCase())
    );
  }
  // Lògica de destacats al component
  obtenirDestacats(): Element[] {
    return this.elements
      .filter(e =&gt; e.valoracio &gt; 4.5)
      .sort((a, b) =&gt; b.valoracio - a.valoracio)
      .slice(0, 5);
  }
  // Més lògica de negoci...
}</code></pre>
  </div>
</div>

    <p><strong>Component net + Servei (Correcte):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// element.service.ts
@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private elements: Element[] = [ /* dades */ ];
  obtenirElements(): Element[] {
    return this.elements;
  }
  filtrar(text: string): Element[] {
    return this.elements.filter(e =&gt;
      e.titol.toLowerCase().includes(text.toLowerCase()) ||
      e.descripcio.toLowerCase().includes(text.toLowerCase())
    );
  }
}
// cataleg.component.ts
@Component({
  selector: &#39;app-cataleg&#39;,
  template: `&lt;div *ngFor=&quot;let e of elements&quot;&gt;{{ e.titol }}&lt;/div&gt;`
})
export class CatalegComponent {
  private elementService = inject(ElementService);
  elements: Element[] = [];
  ngOnInit(): void {
    this.elements = this.elementService.obtenirElements();
  }
  filtrar(text: string): void {
    this.elements = this.elementService.filtrar(text);
  }
}</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Resultat:</strong> Component passa de 150 línies a 30. Lògica reutilitzable. Proves aïllades possibles.
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.5. Què és un servei: classe dedicada</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.5.1. Objectiu</h4>
    <p>Entendre què és exactament un servei Angular a nivell tècnic: una classe TypeScript amb el decorador @Injectable que encapsula funcionalitat específica i segueix el principi de responsabilitat única.</p>
    <h4>1.5.2. Definició tècnica</h4>
    <p>Un servei és una <strong>classe TypeScript</strong> amb el decorador <code>@Injectable</code> que encapsula funcionalitat específica i es pot injectar a components o altres serveis.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  // Propietats privades
  private elements: Element[] = [];
  // Mètodes públics
  obtenirElements(): Element[] {
    return this.elements;
  }
}</code></pre>
  </div>
</div>

    <h4>1.5.3. Característiques d'un bon servei</h4>
    <p><strong>1. Responsabilitat única</strong></p>
    <p>Cada servei gestiona un aspecte específic de l'aplicació:</p>
    <ul>
      <li><code>ElementService</code> → Gestiona elements del catàleg</li>
      <li><code>AuthService</code> → Gestiona autenticació d'usuaris</li>
      <li><code>CarretaService</code> → Gestiona cistella de compra</li>
    </ul>
    <p>NO creeu serveis que facin tot (<code>AppService</code> amb 50 mètodes diferents).</p>
    <p><strong>2. Mètodes clars i públics</strong></p>
    <p>Els mètodes del servei són l'API que exposa als components. Han de tenir noms descriptius i responsabilitats evidents:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Correcte: Mètodes clars
obtenirElements(): Element[]
filtrarPerCategoria(categoria: string): Element[]
marcarComDestaccat(id: number): void
// Incorrecte: Mètodes ambigus
get(): any
do(x: string): void
process(): void</code></pre>
  </div>
</div>

    <p><strong>3. Estat encapsulat</strong></p>
    <p>Les propietats privades protegeixen les dades. Els components NO poden modificar-les directament:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class ElementService {
  // PRIVAT - Components no poden accedir directament
  private elements: Element[] = [];
  // PÚBLIC - Mètode controlat per obtenir dades
  obtenirElements(): Element[] {
    return [...this.elements];  // Retorna còpia
  }
}</code></pre>
  </div>
</div>

    <h4>1.5.4. Tipus de serveis habituals</h4>
    <p><strong>Serveis de dades:</strong> Gestionen informació de l'aplicació (elements, usuaris, comandes).</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  obtenirElements(): Element[] { }
  afegirElement(element: Element): void { }
  eliminarElement(id: number): void { }
}</code></pre>
  </div>
</div>

    <p><strong>Serveis de lògica de negoci:</strong> Executen càlculs, validacions o regles específiques.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })
export class PreuService {
  calcularPreuFinal(preu: number, descompte: number): number { }
  aplicarIVA(preu: number): number { }
}</code></pre>
  </div>
</div>

    <p><strong>Serveis d'infraestructura:</strong> Gestionen funcionalitats transversals (logs, notificacions, configuració).</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })
export class NotificacioService {
  mostrarExit(missatge: string): void { }
  mostrarError(missatge: string): void { }
}</code></pre>
  </div>
</div>

    <h4>1.5.5. Servei vs Component: Diferències clau</h4>
    <table>
      <thead>
        <tr>
          <th>Aspecte</th>
          <th>Component</th>
          <th>Servei</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>Decorador</strong></td>
          <td><code>@Component</code></td>
          <td><code>@Injectable</code></td>
        </tr>
        <tr>
          <td><strong>Té template</strong></td>
          <td>Sí (HTML)</td>
          <td>No</td>
        </tr>
        <tr>
          <td><strong>Té estils</strong></td>
          <td>Sí (CSS)</td>
          <td>No</td>
        </tr>
        <tr>
          <td><strong>Responsabilitat</strong></td>
          <td>Presentació</td>
          <td>Dades/Lògica</td>
        </tr>
        <tr>
          <td><strong>Pot injectar serveis</strong></td>
          <td>Sí</td>
          <td>Sí</td>
        </tr>
        <tr>
          <td><strong>Es pot injectar</strong></td>
          <td>No (normalment)</td>
          <td>Sí</td>
        </tr>
        <tr>
          <td><strong>Múltiples instàncies</strong></td>
          <td>Sí (una per ús)</td>
          <td>No (singleton)</td>
        </tr>
      </tbody>
    </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.6. Avantatges de separar lògica</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.6.1. Objectiu</h4>
    <p>Veure exemples concrets de per què separar lògica en serveis millora el codi: reutilització, mantenibilitat, proves, preparació per a canvis futurs i organització del projecte.</p>
    <h4>1.6.2. Reutilització de codi</h4>
    <p><strong>Sense servei:</strong> Cada component que necessita la llista d'elements l'ha de definir:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// cataleg.component.ts
elements: Element[] = [{ id: 1, ... }, { id: 2, ... }];
// destacats.component.ts
elements: Element[] = [{ id: 1, ... }, { id: 2, ... }];  // DUPLICAT!
// detall.component.ts
elements: Element[] = [{ id: 1, ... }, { id: 2, ... }];  // DUPLICAT!</code></pre>
  </div>
</div>

    <p><strong>Amb servei:</strong> Tots els components usen la mateixa font:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// element.service.ts - DEFINIT UN COP
export class ElementService {
  private elements: Element[] = [{ id: 1, ... }, { id: 2, ... }];
}
// Tots els components injecten el servei
private elementService = inject(ElementService);</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Benefici:</strong> Canvieu les dades en 1 lloc → actualització automàtica a 10 components.
</div>

    <h4>1.6.3. Mantenibilitat millorada</h4>
    <p><strong>Escenari real:</strong> Cal afegir un nou camp <code>stock</code> a tots els elements.</p>
    <p><strong>Sense servei:</strong></p>
    <ol>
      <li>Obrir <code>cataleg.component.ts</code> → Afegir <code>stock: number</code> a 10 elements</li>
      <li>Obrir <code>destacats.component.ts</code> → Repetir el mateix</li>
      <li>Obrir <code>detall.component.ts</code> → Repetir el mateix</li>
      <li>Obrir <code>cerca.component.ts</code> → Repetir el mateix</li>
    </ol>
    <p><strong>Temps:</strong> 30 minuts. <strong>Risc d'errors:</strong> ALT (oblidar un component).</p>
    <p><strong>Amb servei:</strong></p>
    <ol>
      <li>Obrir <code>element.service.ts</code> → Afegir <code>stock: number</code> als elements</li>
      <li>Afegir mètode <code>obtenirStock(id: number): number</code></li>
    </ol>
    <p><strong>Temps:</strong> 5 minuts. <strong>Risc d'errors:</strong> BAIX (un sol lloc).</p>
    <h4>1.6.4. Proves unitàries independents</h4>
    <p><strong>Component barrejat:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">describe(&#39;CatalegComponent&#39;, () =&gt; {
  it(&#39;hauria de filtrar elements&#39;, () =&gt; {
    // Cal crear:
    // - Component complet
    // - Template renderitzat
    // - TestBed amb imports
    // LENT i FRÀGIL
  });
});</code></pre>
  </div>
</div>

    <p><strong>Servei aïllat:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">describe(&#39;ElementService&#39;, () =&gt; {
  it(&#39;hauria de filtrar elements&#39;, () =&gt; {
    const service = new ElementService();
    const resultat = service.filtrar(&#39;portàtil&#39;);
    expect(resultat.length).toBe(1);
    // RÀPID i FIABLE
  });
});</code></pre>
  </div>
</div>

    <p><strong>Temps d'execució:</strong> Proves de servei 10x més ràpides.</p>
    <h4>1.6.5. Preparació per a canvis futurs</h4>
    <p><strong>Canvi típic:</strong> Passar de dades mock a API real.</p>
    <p><strong>Sense servei:</strong> Cal modificar <strong>TOTS</strong> els components que usen dades:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// 10 components diferents a modificar:
// abans:
elements = MOCK_DATA;
// després:
ngOnInit() {
  this.http.get(&#39;/api/elements&#39;).subscribe(data =&gt; {
    this.elements = data;
  });
}</code></pre>
  </div>
</div>

    <p><strong>Amb servei:</strong> Modifiqueu <strong>NOMÉS</strong> el servei:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// element.service.ts - ÚNIC LLOC A CANVIAR
export class ElementService {
  // abans:
  // private elements = MOCK_DATA;
  // després:
  obtenirElements(): Observable&lt;Element[]&gt; {
    return this.http.get&lt;Element[]&gt;(&#39;/api/elements&#39;);
  }
}</code></pre>
  </div>
</div>

    <p>Components NO canvien (o canvis mínims).</p>
    <h4>1.6.6. Organització del projecte</h4>
    <p><strong>Estructura amb serveis:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">src/app/
├── models/
│   └── element.model.ts          # Interfícies
├── services/
│   ├── element.service.ts        # Lògica elements
│   ├── auth.service.ts           # Lògica autenticació
│   └── notificacio.service.ts    # Lògica notificacions
├── components/
│   ├── cataleg/                  # Components nets
│   ├── destacats/
│   └── detall/
└── app.component.ts</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Benefici:</strong> Trobar codi és trivial. Cada cosa al seu lloc.
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.7. Injecció de dependències</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.7.1. Objectiu</h4>
    <p>Comprendre el mecanisme d'injecció de dependències d'Angular: com funciona internament, per què és útil, i la diferència entre crear instàncies manualment vs deixar que Angular ho gestioni.</p>
    <h4>1.7.2. Què és la injecció de dependències</h4>
    <p>La <strong>injecció de dependències</strong> (DI) és un patró de disseny on les classes NO creen les seves pròpies dependències, sinó que les reben externament. Angular gestiona automàticament aquest procés.</p>
    <p><strong>Sense DI (incorrecte):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class CatalegComponent {
  // Component crea servei directament
  private elementService = new ElementService();  // Acoblament fort
}</code></pre>
  </div>
</div>

    <p><strong>Amb DI (correcte):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class CatalegComponent {
  // Angular proporciona servei automàticament
  private elementService = inject(ElementService);  // Acoblament feble
}</code></pre>
  </div>
</div>

    <h4>1.7.3. Com funciona internament</h4>
    <p><strong>1. Registre del servei</strong></p>
    <p>El decorador <code>@Injectable({ providedIn: 'root' })</code> registra el servei al sistema de DI d'Angular:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })  // &quot;Registra&#39;m a nivell root&quot;
export class ElementService { }</code></pre>
  </div>
</div>

    <p>Això crea <strong>un sol proveïdor</strong> per tota l'aplicació (singleton).</p>
    <p><strong>2. Sol·licitud al component</strong></p>
    <p>Quan un component demana el servei:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">private elementService = inject(ElementService);</code></pre>
  </div>
</div>

    <p>Angular busca al registre: "Hi ha un proveïdor per ElementService?"</p>
    <p><strong>3. Resolució i injecció</strong></p>
    <ul>
      <li>Si existeix: Angular proporciona la instància existent</li>
      <li>Si no existeix: Angular crea una nova instància i la guarda</li>
      <li>Injecta la referència al component</li>
    </ul>
    <p><strong>4. Reutilització</strong></p>
    <p>Quan un altre component demana <code>ElementService</code>, Angular retorna la <strong>mateixa instància</strong>.</p>
    <h4>1.7.4. Instàncies compartides (Singleton)</h4>
    <p><strong>Demostració visual:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// cataleg.component.ts
export class CatalegComponent {
  private elementService = inject(ElementService);
  ngOnInit() {
    console.log(&#39;Instància servei:&#39;, this.elementService);
    // Output: ElementService {elements: Array(10)}
  }
}
// destacats.component.ts
export class DestacatsComponent {
  private elementService = inject(ElementService);
  ngOnInit() {
    console.log(&#39;Instància servei:&#39;, this.elementService);
    // Output: ElementService {elements: Array(10)}  ← MATEIXA INSTÀNCIA!
  }
}</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Implicació important:</strong> Si <code>CatalegComponent</code> afegeix un element al servei, <code>DestacatsComponent</code> el veu automàticament perquè comparteixen la mateixa instància.
</div>

    <h4>1.7.5. Avantatges de la DI</h4>
    <p><strong>1. Desacoblament:</strong> Components no depenen d'implementacions concretes. Podeu canviar el servei sense tocar components:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// abans: ElementService amb mock
// després: ElementService amb API real
// components NO canvien!</code></pre>
  </div>
</div>

    <p><strong>2. Proves flexibles:</strong> Podeu substituir serveis reals per mocks en proves:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">TestBed.configureTestingModule({
  providers: [
    { provide: ElementService, useClass: ElementServiceMock }
  ]
});</code></pre>
  </div>
</div>

    <p><strong>3. Gestió automàtica del cicle de vida:</strong> No cal preocupar-se de crear/destruir instàncies. Angular ho gestiona.</p>
    <h4>1.7.6. Nivells de provisió</h4>
    <p><strong>1. Root (recomanat):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })</code></pre>
  </div>
</div>

    <p>Una sola instància per tota l'aplicació. 99% dels casos.</p>
    <p><strong>2. Component:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  providers: [ElementService]  // Nova instància per aquest component
})</code></pre>
  </div>
</div>

    <p>Instància independent per component. Ús molt rar.</p>
    <h4>1.7.7. Sintaxi: constructor vs inject()</h4>
    <p><strong>Opció 1 - Constructor (tradicional):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class CatalegComponent {
  constructor(private elementService: ElementService) { }
}</code></pre>
  </div>
</div>

    <p><strong>Opció 2 - inject() (moderna, recomanada):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class CatalegComponent {
  private elementService = inject(ElementService);
}</code></pre>
  </div>
</div>

    <p>Ambdues funcionen igual. <code>inject()</code> és més simple i funciona fora de constructors.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.8. Crear servei amb CLI</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.8.1. Objectiu</h4>
    <p>Aprendre a crear un servei Angular amb la CLI utilitzant la comanda <code>ng generate service</code>, comprendre les opcions disponibles i veure l'estructura del fitxer generat automàticament.</p>
    <h4>1.8.2. Comanda de generació</h4>
    <p>La CLI d'Angular proporciona una comanda per crear serveis automàticament amb tota l'estructura necessària:</p>
    <p><strong>Sintaxi bàsica:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng generate service &lt;nom&gt;</code></pre>
  </div>
</div>

    <p><strong>Forma abreujada:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng g s &lt;nom&gt;</code></pre>
  </div>
</div>

    <h4>1.8.3. Opcions habituals</h4>
    <p><strong>1. Crear servei en carpeta específica:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng generate service services/element</code></pre>
  </div>
</div>

    <p>Crea: <code>src/app/services/element.service.ts</code></p>
    <p><strong>2. Crear servei sense fitxer de proves:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng generate service services/element --skip-tests</code></pre>
  </div>
</div>

    <p>No genera <code>element.service.spec.ts</code></p>
    <p><strong>3. Crear servei sense carpeta pròpia:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng generate service services/element --flat</code></pre>
  </div>
</div>

    <p>Crea el fitxer directament a <code>services/</code> sense subcarpeta.</p>
    <h4>1.8.4. Exemple pas a pas</h4>
    <p><strong>Pas 1 - Crear carpeta de serveis:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash"># Windows PowerShell
mkdir src\app\services
# Linux/macOS
mkdir -p src/app/services</code></pre>
  </div>
</div>

    <p><strong>Pas 2 - Generar servei:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng generate service services/element --skip-tests</code></pre>
  </div>
</div>

    <p><strong>Sortida esperada:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">CREATE src/app/services/element.service.ts (140 bytes)</code></pre>
  </div>
</div>

    <p><strong>Pas 3 - Verificar creació:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash"># Windows
dir src\app\services
# Linux/macOS
ls src/app/services</code></pre>
  </div>
</div>

    <p>Hauria d'aparèixer: <code>element.service.ts</code></p>
    <h4>1.8.5. Estructura del fitxer generat</h4>
    <p><code>src/app/services/element.service.ts</code>:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Injectable } from &#39;@angular/core&#39;;
@Injectable({
  providedIn: &#39;root&#39;
})
export class ElementService {
  constructor() { }
}</code></pre>
  </div>
</div>

    <p><strong>Desglosament:</strong></p>
    <ol>
      <li><strong>Import:</strong> <code>Injectable</code> és el decorador necessari</li>
      <li><strong>Decorador:</strong> <code>@Injectable({ providedIn: 'root' })</code> registra el servei</li>
      <li><strong>Classe:</strong> <code>ElementService</code> és la classe del servei</li>
      <li><strong>Constructor:</strong> Lloc per injectar altres dependències</li>
    </ol>
    <h4>1.8.6. Ubicació dels serveis</h4>
    <p><strong>Convencions recomanades:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">src/app/
├── services/               # TOTS els serveis aquí
│   ├── element.service.ts
│   ├── auth.service.ts
│   └── notificacio.service.ts
├── models/                 # Models/interfícies
│   └── element.model.ts
└── components/             # Components
    ├── cataleg/
    └── detall/</code></pre>
  </div>
</div>

    <p><strong>NO crear serveis dins de carpetes de components:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text"># Incorrecte
src/app/components/cataleg/cataleg.service.ts
# Correcte
src/app/services/element.service.ts</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Raó:</strong> Serveis són transversals. Múltiples components els usen.
</div>

    <h4>1.8.7. Verificar compilació</h4>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve</code></pre>
  </div>
</div>

    <p>Si no hi ha errors de TypeScript, el servei està creat correctament.</p>
    <p><strong>Errors habituals i solucions:</strong></p>
    <table>
      <thead>
        <tr>
          <th>Error</th>
          <th>Causa</th>
          <th>Solució</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Cannot find module '@angular/core'</td>
          <td>node_modules corruptes</td>
          <td><code>npm install</code></td>
        </tr>
        <tr>
          <td>Unexpected token @</td>
          <td>Sintaxi incorrecta</td>
          <td>Revisar decorador</td>
        </tr>
        <tr>
          <td>Servei no es troba</td>
          <td>Ruta incorrecta a import</td>
          <td>Verificar <code>from './services/element.service'</code></td>
        </tr>
      </tbody>
    </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.9. Estructura d'un servei</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.9.1. Objectiu</h4>
    <p>Analitzar l'estructura completa d'un servei Angular: imports, decorador, propietats privades, constructor, mètodes públics i privats, i bones pràctiques per organitzar el codi.</p>
    <h4>1.9.2. Anatomia completa</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// 1. IMPORTS
import { Injectable } from &#39;@angular/core&#39;;
import { Element } from &#39;../models/element.model&#39;;
import { ELEMENTS_MOCK } from &#39;../mocks/dades-mock&#39;;
// 2. DECORADOR
@Injectable({
  providedIn: &#39;root&#39;
})
// 3. CLASSE
export class ElementService {
  // 4. PROPIETATS PRIVADES
  private elements: Element[] = [...ELEMENTS_MOCK];
  // 5. CONSTRUCTOR (si cal injectar altres serveis)
  constructor() { }
  // 6. MÈTODES PÚBLICS
  obtenirElements(): Element[] {
    return [...this.elements];
  }
  obtenirPerID(id: number): Element | undefined {
    return this.elements.find(e =&gt; e.id === id);
  }
  filtrarPerText(text: string): Element[] {
    const cerca = text.toLowerCase();
    return this.elements.filter(e =&gt;
      e.titol.toLowerCase().includes(cerca) ||
      e.descripcio.toLowerCase().includes(cerca)
    );
  }
  obtenirDestacats(): Element[] {
    return this.elements.filter(e =&gt; e.destacat === true);
  }
  // 7. MÈTODES PRIVATS (auxiliars)
  private ordenarPerValoració(elements: Element[]): Element[] {
    return elements.sort((a, b) =&gt; b.valoracio - a.valoracio);
  }
}</code></pre>
  </div>
</div>

    <h4>1.9.3. Imports necessaris</h4>
    <p><strong>Injectable (obligatori):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Injectable } from &#39;@angular/core&#39;;</code></pre>
  </div>
</div>

    <p>Decorador que marca la classe com injectable.</p>
    <p><strong>Models propis:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Element } from &#39;../models/element.model&#39;;</code></pre>
  </div>
</div>

    <p>Interfícies TypeScript que defineixen l'estructura de dades.</p>
    <p><strong>Dades mock:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { ELEMENTS_MOCK } from &#39;../mocks/dades-mock&#39;;</code></pre>
  </div>
</div>

    <p>Array de dades simulades per treballar mentre no tenim API.</p>
    <h4>1.9.4. Decorador @Injectable</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({
  providedIn: &#39;root&#39;
})</code></pre>
  </div>
</div>

    <p><strong>Opcions del decorador:</strong></p>
    <ul>
      <li><code>providedIn: 'root'</code> → Singleton global (recomanat)</li>
      <li><code>providedIn: 'platform'</code> → Compartit entre apps (ús molt rar)</li>
      <li>Sense <code>providedIn</code> → Cal proveir manualment (obsolet)</li>
    </ul>
    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Per què 'root'?</strong> Garanteix que només hi ha una instància del servei per tota l'aplicació. Estalvia memòria i manté estat consistent.
</div>

    <h4>1.9.5. Propietats privades</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">private elements: Element[] = [...ELEMENTS_MOCK];</code></pre>
  </div>
</div>

    <ul>
      <li><strong><code>private</code>:</strong> Components NO poden accedir directament. Només a través de mètodes públics.</li>
      <li><strong><code>[...ELEMENTS_MOCK]</code>:</strong> Operador spread crea una còpia. Protegeix el mock original.</li>
      <li><strong>Tipus explícit:</strong> <code>Element[]</code> millora l'autocompletat i detecta errors de tipus.</li>
    </ul>
    <h4>1.9.6. Mètodes públics (API del servei)</h4>
    <p><strong>obtenirElements() - Retornar tots els elements:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">obtenirElements(): Element[] {
  return [...this.elements];  // Retornem còpia
}</code></pre>
  </div>
</div>

    <p><strong>Per què còpia?</strong> Evita que components modifiquin directament l'array intern.</p>
    <p><strong>obtenirPerID() - Buscar element concret:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">obtenirPerID(id: number): Element | undefined {
  return this.elements.find(e =&gt; e.id === id);
}</code></pre>
  </div>
</div>

    <p><strong>Retorn <code>| undefined</code>:</strong> Pot no trobar l'element. TypeScript ho força a gestionar.</p>
    <p><strong>filtrarPerText() - Cerca per text:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">filtrarPerText(text: string): Element[] {
  const cerca = text.toLowerCase();
  return this.elements.filter(e =&gt;
    e.titol.toLowerCase().includes(cerca) ||
    e.descripcio.toLowerCase().includes(cerca)
  );
}</code></pre>
  </div>
</div>

    <p><strong>Case-insensitive:</strong> Convertim tot a minúscules per evitar problemes amb majúscules.</p>
    <h4>1.9.7. Mètodes privats (helpers)</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">private ordenarPerValoració(elements: Element[]): Element[] {
  return elements.sort((a, b) =&gt; b.valoracio - a.valoracio);
}</code></pre>
  </div>
</div>

    <ul>
      <li><strong><code>private</code>:</strong> No accessible des de components. Només dins del servei.</li>
      <li><strong>Ús:</strong> Funcionalitat interna per reutilitzar dins d'altres mètodes.</li>
    </ul>
    <h4>1.9.8. Bones pràctiques en serveis</h4>
    <p><strong>1. Mètodes retornen còpies:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte: Retornar referència directa
obtenirElements(): Element[] {
  return this.elements;  // Components poden modificar-la!
}
// Correcte: Retornar còpia
obtenirElements(): Element[] {
  return [...this.elements];  // Còpia segura
}</code></pre>
  </div>
</div>

    <p><strong>2. Noms descriptius:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte
get(): Element[]
filter(x: string): Element[]
// Correcte
obtenirElements(): Element[]
filtrarPerText(text: string): Element[]</code></pre>
  </div>
</div>

    <p><strong>3. Tipus explícits:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte
obtenirElements() {  // TypeScript infereix, però millor ser explícit
  return this.elements;
}
// Correcte
obtenirElements(): Element[] {
  return this.elements;
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.10. Injectar servei al component</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.10.1. Objectiu</h4>
    <p>Aprendre el procés complet d'injectar un servei en un component: importar-lo, declarar-lo amb inject() o constructor, i usar els seus mètodes dins de ngOnInit i altres funcions del component.</p>
    <h4>1.10.2. Pas 1: Import del servei</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { ElementService } from &#39;../services/element.service&#39;;</code></pre>
  </div>
</div>

    <p><strong>Ruta relativa:</strong> Depèn d'on és el component respecte al servei.</p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">src/app/
├── services/
│   └── element.service.ts        # Servei aquí
└── components/
    └── cataleg/
        └── cataleg.component.ts  # Component aquí</code></pre>
  </div>
</div>

    <p>Des de <code>cataleg.component.ts</code> la ruta és: <code>'../../services/element.service'</code></p>
    <h4>1.10.3. Pas 2: Injectar el servei</h4>
    <p><strong>Opció moderna amb <code>inject()</code>:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, inject } from &#39;@angular/core&#39;;
import { ElementService } from &#39;../../services/element.service&#39;;
@Component({
  selector: &#39;app-cataleg&#39;,
  standalone: true,
  template: `...`
})
export class CatalegComponent {
  // Injecció directa a propietat
  private elementService = inject(ElementService);
}</code></pre>
  </div>
</div>

    <p><strong>Opció tradicional amb constructor:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class CatalegComponent {
  constructor(private elementService: ElementService) { }
}</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Recomanació:</strong> <code>inject()</code> és més simple i funciona en inicialitzadors de propietats.
</div>

    <h4>1.10.4. Pas 3: Usar el servei al ngOnInit</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class CatalegComponent implements OnInit {
  private elementService = inject(ElementService);
  elements: Element[] = [];
  ngOnInit(): void {
    // Demanem dades al servei quan component s&#39;inicialitza
    this.elements = this.elementService.obtenirElements();
  }
}</code></pre>
  </div>
</div>

    <p><strong>Per què <code>ngOnInit</code>?</strong> És el moment adequat per inicialitzar dades. El constructor és massa aviat.</p>
    <h4>1.10.5. Pas 4: Usar mètodes del servei</h4>
    <p><strong>Filtrar elements:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">filtrar(text: string): void {
  // Deleguem lògica al servei
  this.elements = this.elementService.filtrarPerText(text);
}</code></pre>
  </div>
</div>

    <p><strong>Obtenir destacats:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">carregarDestacats(): void {
  this.elementsDestacats = this.elementService.obtenirDestacats();
}</code></pre>
  </div>
</div>

    <p><strong>Buscar per ID:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit(): void {
  const id = 1;  // Exemple: ID de ruta
  this.element = this.elementService.obtenirPerID(id);
}</code></pre>
  </div>
</div>

    <h4>1.10.6. Exemple complet d'integració</h4>
    <p><code>cataleg.component.ts</code> complet:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit, inject } from &#39;@angular/core&#39;;
import { CommonModule } from &#39;@angular/common&#39;;
import { ElementService } from &#39;../../services/element.service&#39;;
import { Element } from &#39;../../models/element.model&#39;;
import { LlistaElementsComponent } from &#39;../llista-elements/llista-elements.component&#39;;
import { BarraCercaComponent } from &#39;../barra-cerca/barra-cerca.component&#39;;
@Component({
  selector: &#39;app-cataleg&#39;,
  standalone: true,
  imports: [CommonModule, LlistaElementsComponent, BarraCercaComponent],
  template: `
    &lt;div class=&quot;cataleg&quot;&gt;
      &lt;h1&gt;Catàleg d&#39;Elements&lt;/h1&gt;
      &lt;app-barra-cerca (cercaCanviada)=&quot;filtrar($event)&quot;&gt;&lt;/app-barra-cerca&gt;
      &lt;app-llista-elements [elements]=&quot;elements&quot;&gt;&lt;/app-llista-elements&gt;
    &lt;/div&gt;
  `
})
export class CatalegComponent implements OnInit {
  private elementService = inject(ElementService);
  elements: Element[] = [];
  ngOnInit(): void {
    this.carregarElements();
  }
  carregarElements(): void {
    this.elements = this.elementService.obtenirElements();
  }
  filtrar(text: string): void {
    if (text) {
      this.elements = this.elementService.filtrarPerText(text);
    } else {
      this.carregarElements();
    }
  }
}</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Resultat:</strong> Component passa de 200 línies amb lògica barrejada a 50 línies nets.
</div>

    <h4>1.10.7. Errors habituals i solucions</h4>
    <p><strong>Error: "NullInjectorError: No provider for ElementService"</strong></p>
    <p><strong>Causa:</strong> Servei no té <code>@Injectable({ providedIn: 'root' })</code></p>
    <p><strong>Solució:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })  // Afegir això!
export class ElementService { }</code></pre>
  </div>
</div>

    <p><strong>Error: "Cannot read properties of undefined"</strong></p>
    <p><strong>Causa:</strong> Intentes usar servei abans que Angular l'hagi injectat.</p>
    <p><strong>Solució:</strong> Usar <code>ngOnInit</code>, NO el constructor:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// Incorrecte
constructor() {
  this.elements = this.elementService.obtenirElements();  // Massa aviat!
}
// Correcte
ngOnInit(): void {
  this.elements = this.elementService.obtenirElements();  // Moment adequat
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.11. Exemple pràctic: servei de dades</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.11.1. Objectiu</h4>
    <p>Veure un exemple pràctic complet que integra tots els conceptes: model de dades, mock, servei complet amb múltiples mètodes, i component que utilitza el servei per gestionar el catàleg d'elements.</p>
    <h4>1.11.2. Model de dades</h4>
    <p><code>src/app/models/element.model.ts</code>:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export interface Element {
  id: number;
  titol: string;
  descripcio: string;
  categoria: string;
  imatge?: string;
  valoracio: number;
  destacat?: boolean;
}</code></pre>
  </div>
</div>

    <h4>1.11.3. Mock de dades</h4>
    <p><code>src/app/mocks/dades-mock.ts</code>:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Element } from &#39;../models/element.model&#39;;
export const ELEMENTS_MOCK: Element[] = [
  {
    id: 1,
    titol: &#39;Portàtil ThinkPad X1&#39;,
    descripcio: &#39;Ultraportàtil professional amb 16GB RAM&#39;,
    categoria: &#39;Electrònica&#39;,
    valoracio: 4.8,
    destacat: true
  },
  {
    id: 2,
    titol: &#39;Auriculars Sony WH-1000XM5&#39;,
    descripcio: &#39;Cancel·lació de soroll activa&#39;,
    categoria: &#39;Àudio&#39;,
    valoracio: 4.9,
    destacat: true
  },
  {
    id: 3,
    titol: &#39;Ratolí Logitech MX Master 3&#39;,
    descripcio: &#39;Ratolí ergonòmic sense fil&#39;,
    categoria: &#39;Accessoris&#39;,
    valoracio: 4.7
  }
  // ... 7 elements més
];</code></pre>
  </div>
</div>

    <h4>1.11.4. Servei complet</h4>
    <p><code>src/app/services/element.service.ts</code>:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Injectable } from &#39;@angular/core&#39;;
import { Element } from &#39;../models/element.model&#39;;
import { ELEMENTS_MOCK } from &#39;../mocks/dades-mock&#39;;
@Injectable({
  providedIn: &#39;root&#39;
})
export class ElementService {
  private elements: Element[] = [...ELEMENTS_MOCK];
  obtenirElements(): Element[] {
    return [...this.elements];
  }
  obtenirPerID(id: number): Element | undefined {
    return this.elements.find(e =&gt; e.id === id);
  }
  filtrarPerText(text: string): Element[] {
    if (!text) return [...this.elements];
    const cerca = text.toLowerCase();
    return this.elements.filter(e =&gt;
      e.titol.toLowerCase().includes(cerca) ||
      e.descripcio.toLowerCase().includes(cerca) ||
      e.categoria.toLowerCase().includes(cerca)
    );
  }
  filtrarPerCategoria(categoria: string): Element[] {
    if (!categoria) return [...this.elements];
    return this.elements.filter(e =&gt;
      e.categoria === categoria
    );
  }
  obtenirDestacats(): Element[] {
    return this.elements.filter(e =&gt; e.destacat === true);
  }
  obtenirCategories(): string[] {
    const categories = this.elements.map(e =&gt; e.categoria);
    return [...new Set(categories)];  // Elimina duplicats
  }
}</code></pre>
  </div>
</div>

    <h4>1.11.5. Component actualitzat</h4>
    <p><code>src/app/app.component.ts</code>:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit, inject } from &#39;@angular/core&#39;;
import { CommonModule } from &#39;@angular/common&#39;;
import { ElementService } from &#39;./services/element.service&#39;;
import { Element } from &#39;./models/element.model&#39;;
import { LlistaElementsComponent } from &#39;./components/llista-elements/llista-elements.component&#39;;
import { BarraCercaComponent } from &#39;./components/barra-cerca/barra-cerca.component&#39;;
@Component({
  selector: &#39;app-root&#39;,
  standalone: true,
  imports: [CommonModule, LlistaElementsComponent, BarraCercaComponent],
  template: `
    &lt;main class=&quot;contenidor&quot;&gt;
      &lt;header&gt;
        &lt;h1&gt;Catàleg d&#39;Elements&lt;/h1&gt;
        &lt;p&gt;Unitat 3 - Serveis i separació de responsabilitats&lt;/p&gt;
      &lt;/header&gt;
      &lt;app-barra-cerca (cercaCanviada)=&quot;filtrar($event)&quot;&gt;&lt;/app-barra-cerca&gt;
      &lt;section *ngIf=&quot;elementsDestacats.length &gt; 0&quot; class=&quot;destacats&quot;&gt;
        &lt;h2&gt;Elements destacats&lt;/h2&gt;
        &lt;app-llista-elements [elements]=&quot;elementsDestacats&quot;&gt;&lt;/app-llista-elements&gt;
      &lt;/section&gt;
      &lt;section&gt;
        &lt;h2&gt;Tots els elements&lt;/h2&gt;
        &lt;app-llista-elements [elements]=&quot;elements&quot;&gt;&lt;/app-llista-elements&gt;
      &lt;/section&gt;
    &lt;/main&gt;
  `,
  styles: [`
    .contenidor { max-width: 1200px; margin: 0 auto; padding: 20px; }
    header { text-align: center; margin-bottom: 40px; }
    .destacats { background: #f5f5f5; padding: 20px; margin-bottom: 40px; border-radius: 8px; }
  `]
})
export class AppComponent implements OnInit {
  private elementService = inject(ElementService);
  elements: Element[] = [];
  elementsDestacats: Element[] = [];
  ngOnInit(): void {
    this.carregarElements();
    this.carregarDestacats();
  }
  carregarElements(): void {
    this.elements = this.elementService.obtenirElements();
  }
  carregarDestacats(): void {
    this.elementsDestacats = this.elementService.obtenirDestacats();
  }
  filtrar(text: string): void {
    this.elements = this.elementService.filtrarPerText(text);
  }
}</code></pre>
  </div>
</div>

    <h4>1.11.6. Resultat visual</h4>
    <ol>
      <li>Secció "Elements destacats" amb 2 elements</li>
      <li>Secció "Tots els elements" amb 10 elements</li>
      <li>Barra de cerca operativa que filtra en temps real</li>
      <li>Component net, només 60 línies</li>
      <li>Tota la lògica centralitzada al servei</li>
    </ol>
    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Preparació futura:</strong> A la Lectura 3.1.2 només cal canviar el servei per fer peticions HTTP. Els components no necessiten modificacions.
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.12. Mini exemple pràctic · Estadístiques del catàleg</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.12.1. Objectiu</h4>
    <p>Veure un exemple pràctic d'ampliació del servei afegint una nova funcionalitat: estadístiques del catàleg.</p>
    <h4>1.12.2. Escenari</h4>
    <p>Afegir funcionalitat per obtenir estadístiques del catàleg.</p>
    <h4>1.12.3. Pas 1: Afegir mètode al servei</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// element.service.ts
obtenirEstadistiques(): { total: number; mitjana: number } {
  const total = this.elements.length;
  const suma = this.elements.reduce((acc, e) =&gt; acc + e.valoracio, 0);
  const mitjana = suma / total;
  return {
    total,
    mitjana: Math.round(mitjana * 10) / 10  // 1 decimal
  };
}</code></pre>
  </div>
</div>

    <h4>1.12.4. Pas 2: Usar al component</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">// app.component.ts
export class AppComponent implements OnInit {
  private elementService = inject(ElementService);
  estadistiques = { total: 0, mitjana: 0 };
  ngOnInit(): void {
    this.estadistiques = this.elementService.obtenirEstadistiques();
  }
}</code></pre>
  </div>
</div>

    <h4>1.12.5. Pas 3: Mostrar al template</h4>
    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;estadistiques&quot;&gt;
  &lt;p&gt;&lt;strong&gt;Total elements:&lt;/strong&gt; {{ estadistiques.total }}&lt;/p&gt;
  &lt;p&gt;&lt;strong&gt;Valoració mitjana:&lt;/strong&gt; {{ estadistiques.mitjana }}/5&lt;/p&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Resultat:</strong> Estadístiques visibles sense cap lògica al component. Servei centralitza càlculs.
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.13. Resolució de problemes (Win/macOS/Linux)</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>1.13.1. Taula de resolució</h4>
    <p><strong>Errors de configuració:</strong></p>
    <table>
      <thead>
        <tr>
          <th>Símptoma</th>
          <th>Solució Windows</th>
          <th>Solució macOS/Linux</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>NullInjectorError</td>
          <td>Afegir decorador @Injectable({ providedIn: 'root' }) al servei</td>
          <td>Afegir decorador @Injectable({ providedIn: 'root' }) al servei</td>
        </tr>
        <tr>
          <td>Cannot find module</td>
          <td>Verificar ruta relativa del servei (usar /)</td>
          <td>Verificar ruta relativa del servei</td>
        </tr>
        <tr>
          <td>Property does not exist</td>
          <td>Injectar servei o fer propietat public</td>
          <td>Injectar servei o fer propietat public</td>
        </tr>
      </tbody>
    </table>
    <p><strong>Problemes multiOS:</strong></p>
    <table>
      <thead>
        <tr>
          <th>Error</th>
          <th>Solució Windows</th>
          <th>Solució macOS/Linux</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>ng: command not found</td>
          <td><code>npm install -g @angular/cli</code></td>
          <td><code>sudo npm install -g @angular/cli</code></td>
        </tr>
        <tr>
          <td>Cannot create directory</td>
          <td>Executar PowerShell com administrador</td>
          <td><code>sudo mkdir</code> o canviar permisos</td>
        </tr>
        <tr>
          <td>Import path not found</td>
          <td>Usar <code>/</code> en imports TypeScript</td>
          <td>Usar <code>/</code> en imports TypeScript</td>
        </tr>
      </tbody>
    </table>
    <p><strong>Errors de lògica:</strong></p>
    <table>
      <thead>
        <tr>
          <th>Problema</th>
          <th>Causa</th>
          <th>Solució</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Elements duplicats</td>
          <td>Retornar referència directa</td>
          <td>Retornar <code>[...this.elements]</code></td>
        </tr>
        <tr>
          <td>Canvis no es reflecteixen</td>
          <td>Component no crida servei</td>
          <td>Usar servei a <code>ngOnInit</code></td>
        </tr>
        <tr>
          <td>Dades desapareixen</td>
          <td>Servei no és singleton</td>
          <td>Verificar <code>providedIn: 'root'</code></td>
        </tr>
      </tbody>
    </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.14. Prompts d'IA</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Expert Angular. <strong>Context:</strong> Estic aprenent serveis i injecció de dependències. <strong>Tasca:</strong> Explica la injecció de dependències amb una analogia quotidiana, per què els serveis són singleton a Angular, i quina és la diferència entre servei i component amb exemples reals. <strong>Format:</strong> Explicació clara amb 3 analogies concretes.</div>
  </div>
</div>

    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Debugger Angular. <strong>Context:</strong> El meu servei no retorna dades actualitzades. <strong>Tasca:</strong> Identifica possibles causes: referència directa vs còpia, problemes de singleton, ordre d'inicialització ngOnInit vs constructor, i proporciona solucions concretes. <strong>Format:</strong> Llista de verificació amb passos de debugging.</div>
  </div>
</div>

    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Arquitecte de programari. <strong>Context:</strong> Tinc un servei que fa massa coses. <strong>Tasca:</strong> Explica com dividir un servei gran en serveis més petits seguint responsabilitat única, patrons recomanats per gestió de dades amb serveis, i bones pràctiques per estructurar serveis grans. <strong>Format:</strong> Guia pas a pas amb exemples de refactoring.</div>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.15. Autoavaluació</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>Conceptes teòrics</h4>
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Comprenc la separació responsabilitats component/servei</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Identifico quan cal extreure lògica a un servei</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Organitzo projecte amb carpetes de serveis/models</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Aplico principi de responsabilitat única</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

    <h4>Habilitats pràctiques</h4>
    
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He generat servei amb CLI a <code>src/app/services/</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Servei té decorador <code>@Injectable({ providedIn: 'root' })</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He creat <code>obtenirElements()</code> que retorna tots els elements</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He implementat <code>filtrarPerText()</code> que cerca per títol/descripció</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He injectat servei al component arrel amb <code>inject()</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Component crida servei a <code>ngOnInit()</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Tots els mètodes retornen còpies (<code>[...]</code>) no referències</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Executo <code>ng serve</code> sense errors TypeScript</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

    <h4>Resolució de problemes</h4>
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Retorno còpies d'arrays per protegir estat</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Utilitzo noms descriptius per mètodes</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Injecte serveis correctament a components</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Delego lògica de negoci als serveis</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.16. Síntesi</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <p>Disposeu d'un servei Angular funcional que centralitza tota la gestió de dades del catàleg. Heu aconseguit una arquitectura neta on els components només presenten informació mentre el servei gestiona dades i lògica, permetent codi reutilitzable on múltiples components poden usar el mateix servei. Els canvis en un sol lloc s'apliquen a tota l'aplicació, facilitant el manteniment, i el servei es pot provar independentment dels components. L'estructura queda llesta per integrar APIs reals a la Lectura 3.1.2, on podreu importar <code>HttpClient</code> per fer peticions HTTP, canviar mètodes del servei per cridar APIs reals, treballar amb <code>Observable</code> per dades asíncrones, gestionar estats de càrrega durant peticions, i mantenir els components sense canvis o amb modificacions mínimes.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">1.17. Repàs de conceptes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Servei:</strong> Classe TypeScript amb decorador <code>@Injectable</code> que encapsula lògica de negoci i gestió de dades. Reutilitzable entre múltiples components com a instància única compartida (singleton).</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Injecció de dependències:</strong> Patró on Angular proporciona dependències automàticament. Components reben serveis sense crear-los manualment utilitzant <code>inject()</code> o constructor, registrats amb <code>providedIn: 'root'</code>.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Separació de responsabilitats:</strong> Principi arquitectònic on components gestionen presentació visual i captura d'esdeveniments, serveis gestionen dades, lògica de negoci i comunicació amb APIs, i models defineixen estructures de dades amb interfícies.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Singleton:</strong> Patró de disseny on només existeix una instància d'una classe per tota l'aplicació. Angular crea una sola instància del servei quan usa <code>providedIn: 'root'</code>, compartida entre tots els components.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>@Injectable:</strong> Decorador que marca una classe com injectable per al sistema de DI d'Angular. <code>providedIn: 'root'</code> registra el servei globalment com a singleton.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>inject():</strong> Funció moderna d'Angular per injectar dependències. Més simple que el constructor i funciona en inicialitzadors de propietats.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>ngOnInit():</strong> Hook del cicle de vida del component. Moment adequat per inicialitzar dades cridant serveis. S'executa després que Angular hagi configurat totes les propietats del component.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>providedIn: 'root':</strong> Opció del decorador @Injectable que registra el servei a nivell root. Crea una sola instància per tota l'aplicació, estalviant memòria i mantenint estat consistent.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Mètodes públics:</strong> Mètodes accessibles des de components. Formen l'API del servei i han de tenir noms descriptius i responsabilitats clares.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Mètodes privats:</strong> Mètodes auxiliars (helpers) només accessibles dins del servei. S'utilitzen per reutilitzar funcionalitat interna sense exposar-la als components.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Mock de dades:</strong> Dades simulades utilitzades durant el desenvolupament abans d'integrar APIs reals. Permeten treballar amb l'estructura de dades mentre no hi ha backend disponible.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Spread operator (...):</strong> Operador de JavaScript que crea còpies d'arrays o objectes. S'utilitza en serveis per retornar còpies <code>[...this.elements]</code> en lloc de referències directes, protegint l'estat intern.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Responsabilitat única:</strong> Principi SOLID on cada classe (servei) ha de tenir una sola responsabilitat. Per exemple, <code>ElementService</code> només gestiona elements, <code>AuthService</code> només autenticació.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Desacoblament:</strong> Característique de codi ben dissenyat on components no depenen d'implementacions concretes de serveis. Permet canviar el servei sense modificar components.</p>
  </div>
</div>

  
  </div>
</div>


</div>

<!-- SECCIÓ 2: Client de peticions i comunicació amb serveis web -->
<div class="section" id="Unitat3_Bloc1_Seccio2">
  <h2 id="Unitat3_Bloc1_Seccio2">2. Client de peticions i comunicació amb serveis web</h2>

  <!-- MULTIMÈDIA -->
  <!--
  ════════════════════════════════════════════════════════════════
  Component: Enllaços multimèdia YouTube
  ════════════════════════════════════════════════════════════════

  Paràmetres:
    - unitat: número de la unitat (1-4)
    - bloc: número del bloc (1-4)
    - seccio: número de la secció (1-3)

  Exemple d'ús:
    {% include multimedia-youtube.html unitat=1 bloc=1 seccio=1 %}

  El component busca automàticament les URLs corresponents a
  site.data.multimedia i mostra els botons de vídeo i àudio.
  ════════════════════════════════════════════════════════════════
-->





  
  
  
  
  

  

  

  
<div class="multimedia-resources">
  <div class="multimedia-header">
    <i class="bi bi-play-circle-fill"></i>
    <span>Contingut multimèdia d'aquesta lectura</span>
  </div>

  <div class="multimedia-buttons">
    
    <a href="https://www.youtube.com/watch?v=A-gAnoUhswg" target="_blank" rel="noopener noreferrer" class="multimedia-btn video-btn" title="Lectura 3.1.2 · Client de peticions i comunicació amb serveis web">
      <i class="bi bi-youtube"></i>
      <span>Veure vídeo</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    

    
    <a href="https://www.youtube.com/watch?v=zYaHldwRSPg" target="_blank" rel="noopener noreferrer" class="multimedia-btn audio-btn" title="[Audio] Lectura 3.1.2 · Client de peticions i comunicació amb serveis web">
      <i class="bi bi-mic-fill"></i>
      <span>Escoltar àudio</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    
  </div>

  
  
</div>
  




  <!-- Component: Objectius del bloc/unitat -->



<div class="objectius-box">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-bullseye" aria-hidden="true"></i> Objectius</div>
  <div class="component-content">
    <ul>
      
        <li>Configurar HttpClient per fer peticions HTTP a APIs externes</li>
      
        <li>Comprendre mètodes de petició (GET, POST, PUT, DELETE) i quan usar cada un</li>
      
        <li>Fer la primera petició GET a una API pública i processar la resposta</li>
      
        <li>Entendre el concepte d'asincronisme i Observable en Angular</li>
      
    </ul>
  </div>
  <!-- IMPORTANT: també es pot usar via front matter: page.objectius (array) -->
</div>



  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>RA3 · Criteri 2</strong> — Utilitza serveis externs (APIs web) per obtenir, enviar i actualitzar informació.
    
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.1. Prerequisits</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <p>Abans de començar, necessiteu:</p>
    <p><strong>Lectura anterior completada:</strong></p>
    <ul>
      <li>Lectura 3.1.1 amb servei <code>ElementService</code> funcional</li>
      <li>Servei gestiona dades mock locals correctament</li>
      <li>Components injecten i usen el servei</li>
    </ul>
    <p><strong>Projecte operatiu:</strong></p>
    <ul>
      <li>Aplicació arrenca amb <code>ng serve</code> sense errors</li>
      <li>Git amb commit net de la lectura anterior</li>
      <li>Models definits a <code>src/app/models/element.model.ts</code></li>
    </ul>
    <p><strong>Coneixements previs:</strong></p>
    <ul>
      <li>Serveis Angular i injecció de dependències (Lectura 3.1.1)</li>
      <li>Components i vinculació de dades (Unitat 2)</li>
      <li>TypeScript bàsic (interfícies, tipus)</li>
    </ul>
    <p><strong>Verificació ràpida:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng version
ng serve --open</code></pre>
  </div>
</div>

    <p><strong>Punt d'autocomprovació:</strong> Aplicació mostra elements del servei amb dades mock. Servei injectat correctament al component.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.2. Marc conceptual</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>2.2.1. Què és un servei web (API)</h4>
    <p>Un <strong>servei web</strong> (o API - Application Programming Interface) és un servidor remot que proporciona dades via HTTP. Les aplicacions Angular es connecten a aquestes APIs per obtenir informació real en lloc d'usar dades simulades locals.</p>
    <p><strong>Exemple real:</strong></p>
    <ul>
      <li>API de GitHub: <code>https://api.github.com/users/octocat</code></li>
      <li>API de Pokemon: <code>https://pokeapi.co/api/v2/pokemon/pikachu</code></li>
      <li>API de fotos: <code>https://jsonplaceholder.typicode.com/photos</code></li>
    </ul>
    <h4>2.2.2. Problema amb dades mock locals</h4>
    <p><strong>Situació actual (després de Lectura 3.1.1):</strong></p>
    <p>El vostre servei gestiona dades hardcoded dins del codi:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private elements: Element[] = [
    { id: 1, titol: &#39;Portàtil ThinkPad&#39;, descripcio: &#39;...&#39;, valoracio: 4.8 },
    { id: 2, titol: &#39;Auriculars Sony&#39;, descripcio: &#39;...&#39;, valoracio: 4.9 },
  ];
  obtenirElements(): Element[] {
    return [...this.elements];
  }
}</code></pre>
  </div>
</div>

    <p><strong>Problemes que genera:</strong></p>
    <p><strong>1. Dades desactualitzades</strong></p>
    <p>Les dades són estàtiques. Si el producte canvia de preu, heu de modificar el codi, recompilar i redesplegar l'aplicació sencera. En aplicacions reals, els preus canvien cada minut.</p>
    <p><strong>2. No hi ha sincronització entre usuaris</strong></p>
    <p>Usuari A afegeix un element nou → Usuari B NO el veu (cada un té la seva còpia local del mock). En aplicacions reals, tothom ha de veure les mateixes dades actualitzades.</p>
    <p><strong>3. Volum de dades limitat</strong></p>
    <p>El mock té 10 elements. Si l'empresa té 10.000 productes, no podeu posar-los tots al codi. Necessiteu carregar-los sota demanda des d'una base de dades.</p>
    <p><strong>4. Funcionalitats impossibles</strong></p>
    <ul>
      <li>Cerca: filtrar entre 10.000 productes al navegador és lent</li>
      <li>Paginació: necessiteu carregar pàgines de 20 productes cada cop</li>
      <li>Autenticació: verificar credencials contra una base de dades</li>
      <li>Pagaments: processar targetes de crèdit de manera segura</li>
    </ul>
    <p><strong>5. Separació frontend/backend inexistent</strong></p>
    <p>El desenvolupador frontend ha d'esperar que el backend tingui dades reals. Amb mock sempre esteu en fase de prototip, mai en producció.</p>
    <h4>2.2.3. Solució amb APIs externes</h4>
    <p><strong>Com funciona:</strong></p>
    <p>Moveu les dades a un servidor extern. L'aplicació Angular fa peticions HTTP per obtenir informació real quan la necessita.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private http = inject(HttpClient);
  private apiUrl = &#39;https://api.example.com&#39;;
  obtenirElements(): Observable&lt;Element[]&gt; {
    return this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`);
  }
}</code></pre>
  </div>
</div>

    <p><strong>Flux de dades:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Component → Servei Angular → HttpClient → Internet → API → Base de dades
                                                      ↓
Component ← Servei Angular ← HttpClient ← Internet ← API ← Base de dades</code></pre>
  </div>
</div>

    <p><strong>Avantatges concrets:</strong></p>
    <p><strong>Dades sempre actualitzades:</strong> Cada vegada que l'aplicació carrega, obté les dades més recents del servidor. Canvis en temps real sense redesplegar codi.</p>
    <p><strong>Sincronització entre usuaris:</strong> Tots els usuaris veuen les mateixes dades perquè tots consulten el mateix servidor. Afegir un element nou és visible immediatament per tothom.</p>
    <p><strong>Escalabilitat il·limitada:</strong> El servidor gestiona milions de registres. L'aplicació Angular només carrega el que necessita (paginació, cerca, filtres).</p>
    <p><strong>Funcionalitats avançades:</strong> Cerca al servidor filtra milions de registres en mil·lisegons, autenticació verifica usuaris contra base de dades segura, pagaments processa transaccions amb APIs especialitzades, i notificacions envia avisos quan canvien dades.</p>
    <p><strong>Separació de responsabilitats:</strong> Frontend (Angular) gestiona presentació visual i experiència d'usuari, mentre Backend (API) gestiona lògica de negoci, base de dades i seguretat.</p>
    <h4>2.2.4. Mètodes de petició HTTP</h4>
    <p>Les APIs usen <strong>mètodes HTTP</strong> per indicar quina acció volem fer:</p>
    <table>
      <thead>
        <tr>
          <th>Mètode</th>
          <th>Acció</th>
          <th>Exemple d'ús</th>
          <th>Modifica dades?</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><strong>GET</strong></td>
          <td>Obtenir dades</td>
          <td>Llistar productes, veure detall</td>
          <td>NO</td>
        </tr>
        <tr>
          <td><strong>POST</strong></td>
          <td>Crear nou registre</td>
          <td>Afegir producte, registrar usuari</td>
          <td>SÍ</td>
        </tr>
        <tr>
          <td><strong>PUT</strong></td>
          <td>Actualitzar complet</td>
          <td>Modificar tot el producte</td>
          <td>SÍ</td>
        </tr>
        <tr>
          <td><strong>PATCH</strong></td>
          <td>Actualitzar parcial</td>
          <td>Canviar només el preu</td>
          <td>SÍ</td>
        </tr>
        <tr>
          <td><strong>DELETE</strong></td>
          <td>Eliminar registre</td>
          <td>Esborrar producte</td>
          <td>SÍ</td>
        </tr>
      </tbody>
    </table>
    <p><strong>Exemples pràctics:</strong></p>
    <p><strong>GET - Obtenir elements:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">GET https://api.example.com/elements
→ Retorna: [{ id: 1, titol: &#39;...&#39; }, { id: 2, titol: &#39;...&#39; }]</code></pre>
  </div>
</div>

    <p><strong>POST - Crear element nou:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">POST https://api.example.com/elements
Body: { titol: &#39;Element nou&#39;, descripcio: &#39;...&#39; }
→ Retorna: { id: 11, titol: &#39;Element nou&#39;, ... }</code></pre>
  </div>
</div>

    <p><strong>PUT - Actualitzar element:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">PUT https://api.example.com/elements/1
Body: { id: 1, titol: &#39;Actualitzat&#39;, descripcio: &#39;...&#39; }
→ Retorna: { id: 1, titol: &#39;Actualitzat&#39;, ... }</code></pre>
  </div>
</div>

    <p><strong>DELETE - Eliminar element:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">DELETE https://api.example.com/elements/1
→ Retorna: 204 No Content (èxit)</code></pre>
  </div>
</div>

    <h4>2.2.5. Comparativa abans/després</h4>
    <p><strong>Abans (mock local):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class ElementService {
  private elements: Element[] = MOCK_DATA;
  obtenirElements(): Element[] {
    return this.elements;
  }
  afegirElement(element: Element): void {
    this.elements.push(element);
  }
}
elements: Element[] = [];
ngOnInit() {
  this.elements = this.elementService.obtenirElements();
}</code></pre>
  </div>
</div>

    <p><strong>Després (amb API):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class ElementService {
  private http = inject(HttpClient);
  private apiUrl = &#39;https://api.example.com&#39;;
  obtenirElements(): Observable&lt;Element[]&gt; {
    return this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`);
  }
  afegirElement(element: Element): Observable&lt;Element&gt; {
    return this.http.post&lt;Element&gt;(`${this.apiUrl}/elements`, element);
  }
}
elements: Element[] = [];
ngOnInit() {
  this.elementService.obtenirElements().subscribe({
    next: (dades) =&gt; this.elements = dades,
    error: (err) =&gt; console.error(&#39;Error:&#39;, err)
  });
}</code></pre>
  </div>
</div>

    <p><strong>Diferències clau:</strong></p>
    <ul>
      <li>Servei retorna <code>Observable</code> (flux asíncron) en lloc de dades directes</li>
      <li>Component s'ha de subscriure per rebre les dades</li>
      <li>Gestió d'errors necessària (xarxa pot fallar)</li>
      <li>Dades sempre actualitzades des del servidor</li>
    </ul>
    <h4>2.2.6. Quan usar APIs externes</h4>
    <p><strong>SEMPRE que necessiteu:</strong></p>
    <ul>
      <li>Dades compartides entre usuaris</li>
      <li>Informació que canvia freqüentment</li>
      <li>Volum gran de dades (centenars/milers de registres)</li>
      <li>Funcionalitats de servidor (autenticació, pagaments, enviaments d'email)</li>
      <li>Aplicacions de producció reals</li>
    </ul>
    <p><strong>Mock local és acceptable per:</strong></p>
    <ul>
      <li>Prototips inicials</li>
      <li>Desenvolupament sense connexió</li>
      <li>Proves unitàries</li>
      <li>Demos sense backend disponible</li>
    </ul>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.3. Model mental</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>2.3.1. Diagrama conceptual del flux complet</h4>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">┌─────────────────────────────────────────────────────────────┐
│                    APLICACIÓ ANGULAR                         │
│                    (Navegador - Client)                      │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌──────────────────┐         ┌─────────────────────────┐  │
│  │  AppComponent    │  usa    │   ElementService        │  │
│  │                  │────────→│   (Servei Angular)      │  │
│  │ - elements[]     │         │                         │  │
│  │ - ngOnInit()     │         │ + obtenirElements()     │  │
│  │ - subscribe()    │         │   ├─ inject(HttpClient)│  │
│  └──────────────────┘         │   └─ http.get()        │  │
│                                └──────────┬──────────────┘  │
│                                           │                 │
│                                           │ Petició HTTP    │
└───────────────────────────────────────────┼─────────────────┘
                                            │
                                            │ INTERNET
                                            │ (Asíncron)
                                            ▼
┌─────────────────────────────────────────────────────────────┐
│                    SERVIDOR EXTERN                           │
│                    (API - Backend)                           │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌────────────────────────────────────────────────┐         │
│  │  API REST                                      │         │
│  │  https://api.example.com                       │         │
│  ├────────────────────────────────────────────────┤         │
│  │  GET  /elements     → Llistar tots            │         │
│  │  GET  /elements/1   → Obtenir un              │         │
│  │  POST /elements     → Crear nou               │         │
│  │  PUT  /elements/1   → Actualitzar             │         │
│  │  DELETE /elements/1 → Eliminar                │         │
│  └────────────────┬───────────────────────────────┘         │
│                   │                                          │
│                   ▼                                          │
│  ┌────────────────────────────────────────────────┐         │
│  │  BASE DE DADES                                 │         │
│  │  - elements                                    │         │
│  │  - usuaris                                     │         │
│  │  - comandes                                    │         │
│  └────────────────────────────────────────────────┘         │
│                                                              │
└─────────────────────────────────────────────────────────────┘

FLUX DE DADES:
1. Component crida servei.obtenirElements()
2. Servei fa http.get(&#39;URL&#39;)
3. HttpClient envia petició per Internet
4. API rep petició i consulta base de dades
5. API retorna JSON amb dades
6. HttpClient rep resposta
7. Observable emet les dades
8. Component rep dades al subscribe()
9. Component actualitza propietat elements
10. Template mostra les dades</code></pre>
  </div>
</div>

    <h4>2.3.2. Analogia real: Restaurant</h4>
    <p>Penseu en l'aplicació com un <strong>restaurant</strong>:</p>
    <p><strong>Component = Client assegut a la taula</strong></p>
    <ul>
      <li>Només veu el menú i espera el menjar</li>
      <li>Demana plats al cambrer</li>
      <li>NO entra a la cuina ni coneix els proveïdors</li>
    </ul>
    <p><strong>Servei Angular = Cambrer</strong></p>
    <ul>
      <li>Intermediari entre client i cuina</li>
      <li>Pren comandes i les porta a la cuina</li>
      <li>Porta els plats acabats al client</li>
      <li>Gestiona problemes (plat no disponible)</li>
    </ul>
    <p><strong>HttpClient = Telèfon del restaurant</strong></p>
    <ul>
      <li>Eina que el cambrer usa per comunicar-se amb proveïdors externs</li>
      <li>Fa les trucades (peticions HTTP)</li>
      <li>Rep confirmacions (respostes)</li>
    </ul>
    <p><strong>API externa = Proveïdor d'ingredients</strong></p>
    <ul>
      <li>Magatzem remot amb tots els ingredients</li>
      <li>Rep comandes per telèfon</li>
      <li>Envia ingredients al restaurant</li>
      <li>Pot tenir problemes (fora de estoc, tancats)</li>
    </ul>
    <p><strong>Base de dades = Magatzem del proveïdor</strong></p>
    <ul>
      <li>On s'emmagatzemen realment tots els ingredients</li>
      <li>Client mai hi accedeix directament</li>
      <li>Només via el proveïdor (API)</li>
    </ul>
    <h4>2.3.3. Concepte d'asincronisme</h4>
    <p><strong>Síncron (mock local):</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Component: &quot;Dóna&#39;m elements&quot;
  ↓ (instantani)
Servei: &quot;Aquí tens: [...]&quot;
  ↓ (instantani)
Component: &quot;Gràcies, els mostro&quot;

Temps total: 0.001 segons (immediat)</code></pre>
  </div>
</div>

    <p><strong>Asíncron (API externa):</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Component: &quot;Dóna&#39;m elements&quot;
  ↓
Servei: &quot;D&#39;acord, faig la petició...&quot;
  ↓ (esperant...)
  ↓ (esperant... poden passar segons)
  ↓
Servei: &quot;Han arribat! Aquí tens: [...]&quot;
  ↓
Component: &quot;Gràcies, els mostro&quot;

Temps total: 0.5 - 5 segons (depèn de xarxa)</code></pre>
  </div>
</div>

    <p><strong>Per què és important:</strong></p>
    <ul>
      <li>No podem bloquejar l'aplicació esperant resposta</li>
      <li>L'usuari ha de poder fer altres coses mentre espera</li>
      <li>Hem de gestionar què passa si la resposta mai arriba (error)</li>
    </ul>
    <h4>2.3.4. Observable vs Promise</h4>
    <p>Ambdós gestionen operacions asíncrones, però amb diferències:</p>
    <p><strong>Promise (JavaScript estàndard):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">fetch(&#39;https://api.example.com/elements&#39;)
  .then(response =&gt; response.json())
  .then(data =&gt; console.log(data))
  .catch(error =&gt; console.error(error));</code></pre>
  </div>
</div>

    <ul>
      <li>Emet un sol valor</li>
      <li>S'executa immediatament</li>
      <li>No es pot cancel·lar</li>
      <li>Més simple</li>
    </ul>
    <p><strong>Observable (RxJS / Angular):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.http.get(&#39;https://api.example.com/elements&#39;)
  .subscribe({
    next: data =&gt; console.log(data),
    error: err =&gt; console.error(err),
    complete: () =&gt; console.log(&#39;Completat&#39;)
  });</code></pre>
  </div>
</div>

    <ul>
      <li>Pot emetre múltiples valors</li>
      <li>"Lazy" - no s'executa fins que algú es subscriu</li>
      <li>Es pot cancel·lar (unsubscribe)</li>
      <li>Operadors potents (map, filter, retry...)</li>
    </ul>
    <p><strong>Angular usa Observable per:</strong></p>
    <ul>
      <li>Peticions HTTP</li>
      <li>Esdeveniments de formularis</li>
      <li>Rutes amb paràmetres</li>
      <li>Gestió d'estat reactiva</li>
    </ul>
    <h4>2.3.5. Errors conceptuals comuns</h4>
    <p><i class="bi bi-x-circle" aria-hidden="true"></i> <strong>Error 1: Intentar usar dades abans que arribin</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit() {
  this.elementService.obtenirElements();
  console.log(this.elements);
}</code></pre>
  </div>
</div>

    <p><i class="bi bi-check-circle" aria-hidden="true"></i> <strong>Correcte: Esperar al subscribe</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit() {
  this.elementService.obtenirElements().subscribe({
    next: (dades) =&gt; {
      this.elements = dades;
      console.log(this.elements);
    }
  });
}</code></pre>
  </div>
</div>

    <p><i class="bi bi-x-circle" aria-hidden="true"></i> <strong>Error 2: No gestionar errors</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.elementService.obtenirElements().subscribe(
  dades =&gt; this.elements = dades
);</code></pre>
  </div>
</div>

    <p><i class="bi bi-check-circle" aria-hidden="true"></i> <strong>Correcte: Sempre gestionar error</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.elementService.obtenirElements().subscribe({
  next: dades =&gt; this.elements = dades,
  error: err =&gt; console.error(&#39;Error:&#39;, err)
});</code></pre>
  </div>
</div>

    <h4>2.3.6. Com pensar en peticions HTTP</h4>
    <p><strong>Mental model correcte:</strong></p>
    <ol>
      <li><strong>Petició = Missatge enviat</strong> → "Vull elements"</li>
      <li><strong>Viatge per Internet</strong> → Pot trigar, pot fallar</li>
      <li><strong>Servidor processa</strong> → Consulta base de dades</li>
      <li><strong>Resposta torna</strong> → JSON amb dades</li>
      <li><strong>Observable emet</strong> → Dades disponibles</li>
      <li><strong>Subscribe rep</strong> → Actualitza component</li>
      <li><strong>Template mostra</strong> → Usuari veu dades</li>
    </ol>
    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Analogia postal:</strong> Petició = Carta que envies, Observable = Bústia on esperes resposta, Subscribe = Obrir la bústia cada dia, Next = Carta ha arribat, Error = Carta perduda, Complete = Ja no vindran més cartes.
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.4. Importar HttpClient</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>2.4.1. Configuració necessària</h4>
    <p>Per fer peticions HTTP, Angular proporciona el mòdul <code>HttpClient</code>. Cal importar-lo a la configuració de l'aplicació.</p>
    <h4>2.4.2. Opcions d'importació</h4>
    <p><strong>Opció 1 - provideHttpClient (recomanada per aplicacions standalone):</strong></p>
    <p><strong>Fitxer <code>src/main.ts</code>:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { bootstrapApplication } from &#39;@angular/platform-browser&#39;;
import { provideHttpClient } from &#39;@angular/common/http&#39;;
import { AppComponent } from &#39;./app/app.component&#39;;

bootstrapApplication(AppComponent, {
  providers: [
    provideHttpClient()
  ]
}).catch(err =&gt; console.error(err));</code></pre>
  </div>
</div>

    <p><strong>Opció 2 - app.config.ts (si existeix):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { ApplicationConfig } from &#39;@angular/core&#39;;
import { provideHttpClient } from &#39;@angular/common/http&#39;;

export const appConfig: ApplicationConfig = {
  providers: [
    provideHttpClient()
  ]
};</code></pre>
  </div>
</div>

    <p><strong>Opció 3 - HttpClientModule (aplicacions amb mòduls tradicionals):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { HttpClientModule } from &#39;@angular/common/http&#39;;

@NgModule({
  imports: [
    HttpClientModule
  ]
})
export class AppModule { }</code></pre>
  </div>
</div>

    <h4>2.4.3. Què fa provideHttpClient()</h4>
    <p>Quan cridem <code>provideHttpClient()</code>:</p>
    <ul>
      <li>Angular registra <code>HttpClient</code> al sistema de dependències</li>
      <li>Qualsevol servei pot injectar <code>HttpClient</code></li>
      <li>Es configuren interceptors per defecte</li>
      <li>S'habilita la gestió d'errors HTTP</li>
    </ul>
    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Important:</strong> Només cal cridar-ho <strong>un cop</strong> a <code>main.ts</code>. Tots els serveis poden usar-lo després.
</div>

    <h4>2.4.4. Verificar la configuració</h4>
    <p><strong>Després d'afegir provideHttpClient():</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve</code></pre>
  </div>
</div>

    <p><strong>Terminal hauria de mostrar:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">✔ Browser application bundle generation complete.
Initial chunk files | Names         | Raw size
main.js             | main          | 250.45 kB
...
✔ Compiled successfully.</code></pre>
  </div>
</div>

    <p><strong>Si hi ha error:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Error: NG0203: inject() must be called from an injection context</code></pre>
  </div>
</div>

    <p><strong>Solució:</strong> Verificar que <code>provideHttpClient()</code> està a l'array <code>providers</code>.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.5. Injectar HttpClient al servei</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>2.5.1. Imports necessaris</h4>
    <p>Per usar <code>HttpClient</code> al servei, cal importar-lo:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { HttpClient } from &#39;@angular/common/http&#39;;
import { inject } from &#39;@angular/core&#39;;</code></pre>
  </div>
</div>

    <h4>2.5.2. Injecció al servei</h4>
    <p><strong>Sintaxi moderna amb inject():</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Injectable, inject } from &#39;@angular/core&#39;;
import { HttpClient } from &#39;@angular/common/http&#39;;

@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private http = inject(HttpClient);
}</code></pre>
  </div>
</div>

    <p><strong>Sintaxi tradicional amb constructor:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  constructor(private http: HttpClient) { }
}</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Recomanació:</strong> Usar <code>inject()</code> perquè és més simple i modern.
</div>

    <h4>2.5.3. Definir URL base</h4>
    <p><strong>Bona pràctica:</strong> Centralitzar la URL de l'API:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private http = inject(HttpClient);
  private apiUrl = &#39;https://jsonplaceholder.typicode.com&#39;;
  obtenirElements(): Observable&lt;Element[]&gt; {
    return this.http.get&lt;Element[]&gt;(`${this.apiUrl}/users`);
  }
}</code></pre>
  </div>
</div>

    <p><strong>Avantatge:</strong> Canviar l'API només requereix modificar <code>apiUrl</code> en un lloc.</p>
    <h4>2.5.4. Tipus de peticions disponibles</h4>
    <p><code>HttpClient</code> proporciona mètodes per cada verb HTTP:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class ElementService {
  private http = inject(HttpClient);
  private apiUrl = &#39;https://api.example.com&#39;;
  obtenirElements(): Observable&lt;Element[]&gt; {
    return this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`);
  }
  crearElement(element: Element): Observable&lt;Element&gt; {
    return this.http.post&lt;Element&gt;(`${this.apiUrl}/elements`, element);
  }
  actualitzarElement(id: number, element: Element): Observable&lt;Element&gt; {
    return this.http.put&lt;Element&gt;(`${this.apiUrl}/elements/${id}`, element);
  }
  eliminarElement(id: number): Observable&lt;void&gt; {
    return this.http.delete&lt;void&gt;(`${this.apiUrl}/elements/${id}`);
  }
}</code></pre>
  </div>
</div>

    <h4>2.5.5. Tipus genèrics</h4>
    <p>El <code>&lt;Element[]&gt;</code> després de <code>http.get</code> indica quin tipus de dades esperem:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.http.get(&#39;URL&#39;)
this.http.get&lt;Element[]&gt;(&#39;URL&#39;)</code></pre>
  </div>
</div>

    <p><strong>Beneficis:</strong></p>
    <ul>
      <li>Autocompletat funciona</li>
      <li>Errors de tipus detectats en compilació</li>
      <li>Codi més segur i mantenible</li>
    </ul>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.6. Seqüències asíncrones (Observable)</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>2.6.1. Què és una seqüència asíncrona</h4>
    <p>Una <strong>seqüència asíncrona</strong> (Observable) és un flux de dades que arriben al llarg del temps. No són instantànies com les dades locals.</p>
    <p><strong>Analogia - Correu postal:</strong></p>
    <ul>
      <li><strong>Síncron (mock local):</strong> Buscar carta a un calaix (instantani)</li>
      <li><strong>Asíncron (API):</strong> Esperar carta per correu (pot trigar dies)</li>
    </ul>
    <h4>2.6.2. Per què les peticions HTTP són asíncrones</h4>
    <p><strong>Raons tècniques:</strong></p>
    <ul>
      <li><strong>Xarxa triga:</strong> Enviar dades per Internet pot trigar mil·lisegons o segons</li>
      <li><strong>Servidor processa:</strong> API consulta base de dades, executa lògica</li>
      <li><strong>No bloquejar:</strong> App ha de continuar funcionant mentre espera</li>
    </ul>
    <p><strong>Exemple visual:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">0ms   Component: &quot;Vull elements&quot;
0ms   Servei: &quot;Faig petició...&quot;
1ms   HttpClient: &quot;Enviant per Internet...&quot;
      [... esperant ...]
500ms API: &quot;Aquí tens les dades&quot;
501ms HttpClient: &quot;Rebut!&quot;
502ms Servei: &quot;Dades disponibles&quot;
503ms Component: &quot;Mostro les dades&quot;</code></pre>
  </div>
</div>

    <p>Si bloquejem l'aplicació durant 500ms, l'usuari no pot fer res (molt mala experiència).</p>
    <h4>2.6.3. Concepte d'Observable</h4>
    <p><strong>Observable = Flux de dades en el temps</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">────⚪────⚪────⚪────⚪────▶ temps
    d1   d2   d3   d4</code></pre>
  </div>
</div>

    <p>Cada ⚪ és una emissió de dades.</p>
    <p><strong>Per peticions HTTP:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">───────────⚪────▶
         dades
o
───────────✖────▶
         error</code></pre>
  </div>
</div>

    <p>Típicament: una sola emissió (dades o error) i després es completa.</p>
    <h4>2.6.4. Subscribe - Escoltar l'Observable</h4>
    <p>Per rebre les dades, cal <strong>subscriure's</strong> a l'Observable:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">obtenirElements(): Observable&lt;Element[]&gt; {
  return this.http.get&lt;Element[]&gt;(&#39;URL&#39;);
}
ngOnInit() {
  this.elementService.obtenirElements().subscribe({
    next: (dades) =&gt; {
      this.elements = dades;
    },
    error: (err) =&gt; {
      console.error(&#39;Error:&#39;, err);
    },
    complete: () =&gt; {
      console.log(&#39;Petició completada&#39;);
    }
  });
}</code></pre>
  </div>
</div>

    <p><strong>Callbacks del subscribe:</strong></p>
    <ul>
      <li><strong>next:</strong> S'executa quan arriben dades</li>
      <li><strong>error:</strong> S'executa si hi ha un error</li>
      <li><strong>complete:</strong> S'executa quan acaba (opcional)</li>
    </ul>
    <h4>2.6.5. Diferència amb codi síncron</h4>
    <p><strong>Codi síncron (mock):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit() {
  this.elements = this.elementService.obtenirElements();
  console.log(this.elements);
  console.log(&#39;Fet&#39;);
}</code></pre>
  </div>
</div>

    <p><strong>Codi asíncron (API):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit() {
  console.log(&#39;Inici&#39;);
  this.elementService.obtenirElements().subscribe({
    next: (dades) =&gt; {
      this.elements = dades;
      console.log(this.elements);
    }
  });
  console.log(&#39;Després del subscribe&#39;);
  console.log(this.elements);
}</code></pre>
  </div>
</div>

    <p><strong>Sortida a la consola:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">Inici
Després del subscribe
[]
[{ }, { }]</code></pre>
  </div>
</div>

    <h4>2.6.6. Hot vs Cold Observables</h4>
    <p><strong>Cold Observable (HttpClient):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const obs$ = this.http.get(&#39;URL&#39;);
obs$.subscribe();</code></pre>
  </div>
</div>

    <p>No passa res fins que algú es subscriu.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.7. Primera petició GET</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>2.7.1. API de prova: JSONPlaceholder</h4>
    <p>Usarem <strong>JSONPlaceholder</strong>, una API pública gratuïta per practicar:</p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">https://jsonplaceholder.typicode.com</code></pre>
  </div>
</div>

    <p><strong>Endpoints disponibles:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">/posts    → 100 posts de blog
/users    → 10 usuaris
/photos   → 5000 fotos
/todos    → 200 tasques</code></pre>
  </div>
</div>

    <p><strong>Exemples:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">GET https://jsonplaceholder.typicode.com/users
→ Retorna array de 10 usuaris

GET https://jsonplaceholder.typicode.com/users/1
→ Retorna usuari amb ID 1</code></pre>
  </div>
</div>

    <h4>2.7.2. Adaptar model a l'API</h4>
    <p>L'API retorna usuaris amb aquesta estructura:</p>
    
    <div class="code-block" data-lang="json" role="region" aria-label="Bloc de codi json">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JSON</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-json">{
  &quot;id&quot;: 1,
  &quot;name&quot;: &quot;Leanne Graham&quot;,
  &quot;username&quot;: &quot;Bret&quot;,
  &quot;email&quot;: &quot;Sincere@april.biz&quot;
}</code></pre>
  </div>
</div>

    <p><strong>Actualitzar o crear model:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export interface Element {
  id: number;
  name: string;
  username: string;
  email: string;
}</code></pre>
  </div>
</div>

    <h4>2.7.3. Implementar primera petició</h4>
    <p><strong>Actualitzar servei:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Injectable, inject } from &#39;@angular/core&#39;;
import { HttpClient } from &#39;@angular/common/http&#39;;
import { Observable } from &#39;rxjs&#39;;
import { Element } from &#39;../models/element.model&#39;;

@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private http = inject(HttpClient);
  private apiUrl = &#39;https://jsonplaceholder.typicode.com&#39;;
  obtenirElements(): Observable&lt;Element[]&gt; {
    return this.http.get&lt;Element[]&gt;(`${this.apiUrl}/users`);
  }
  obtenirPerID(id: number): Observable&lt;Element&gt; {
    return this.http.get&lt;Element&gt;(`${this.apiUrl}/users/${id}`);
  }
}</code></pre>
  </div>
</div>

    <p><strong>Explicació del codi:</strong></p>
    <ul>
      <li><strong><code>http.get&lt;Element[]&gt;</code>:</strong> Fa petició GET, espera array d'Elements</li>
      <li><strong>URL completa:</strong> <code>apiUrl + /users</code> = <code>https://jsonplaceholder.typicode.com/users</code></li>
      <li><strong>Retorna Observable:</strong> No retorna dades directament, retorna flux</li>
      <li><strong>Tipus genèric:</strong> <code>&lt;Element[]&gt;</code> fa que TypeScript sàpiga el tipus</li>
    </ul>
    <h4>2.7.4. Proves ràpides</h4>
    <p><strong>Obrir navegador i anar a:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">https://jsonplaceholder.typicode.com/users</code></pre>
  </div>
</div>

    <p>Hauria de mostrar JSON amb 10 usuaris. Si funciona, la vostra petició també funcionarà.</p>
    <h4>2.7.5. Gestió de paràmetres</h4>
    <p><strong>Passar paràmetres a la URL:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">cercar(terme: string): Observable&lt;Element[]&gt; {
  return this.http.get&lt;Element[]&gt;(`${this.apiUrl}/users?name=${terme}`);
}
import { HttpParams } from &#39;@angular/common/http&#39;;
cercar(terme: string): Observable&lt;Element[]&gt; {
  const params = new HttpParams().set(&#39;name&#39;, terme);
  return this.http.get&lt;Element[]&gt;(`${this.apiUrl}/users`, { params });
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.8. Subscriure's a la resposta</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>2.8.1. Actualitzar component</h4>
    <p><strong>Component abans (amb mock):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export class AppComponent implements OnInit {
  private elementService = inject(ElementService);
  elements: Element[] = [];
  ngOnInit(): void {
    this.elements = this.elementService.obtenirElements();
  }
}</code></pre>
  </div>
</div>

    <p><strong>Component després (amb API):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit, inject } from &#39;@angular/core&#39;;
import { CommonModule } from &#39;@angular/common&#39;;
import { ElementService } from &#39;./services/element.service&#39;;
import { Element } from &#39;./models/element.model&#39;;

@Component({
  selector: &#39;app-root&#39;,
  standalone: true,
  imports: [CommonModule],
  template: `
    &lt;div class=&quot;contenidor&quot;&gt;
      &lt;h1&gt;Elements de l&#39;API&lt;/h1&gt;
      &lt;div *ngIf=&quot;elements.length === 0&quot;&gt;
        Carregant...
      &lt;/div&gt;
      &lt;ul *ngIf=&quot;elements.length &gt; 0&quot;&gt;
        &lt;li *ngFor=&quot;let element of elements&quot;&gt;
          {{ element.name }} ({{ element.email }})
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  `
})
export class AppComponent implements OnInit {
  private elementService = inject(ElementService);
  elements: Element[] = [];
  ngOnInit(): void {
    this.elementService.obtenirElements().subscribe({
      next: (dades) =&gt; {
        this.elements = dades;
        console.log(&#39;Elements rebuts:&#39;, dades.length);
      },
      error: (err) =&gt; {
        console.error(&#39;Error carregant elements:&#39;, err);
      }
    });
  }
}</code></pre>
  </div>
</div>

    <h4>2.8.2. Desglossament del subscribe</h4>
    <p><strong>Sintaxi completa:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.elementService.obtenirElements().subscribe({
  next: (dades) =&gt; {
    this.elements = dades;
  },
  error: (err) =&gt; {
    console.error(&#39;Error:&#39;, err);
  },
  complete: () =&gt; {
    console.log(&#39;Petició completada&#39;);
  }
});</code></pre>
  </div>
</div>

    <p><strong>Sintaxi curta (només next):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.elementService.obtenirElements().subscribe(
  dades =&gt; this.elements = dades
);</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'advertiment -->
<div class="warning-box" role="alert" aria-live="assertive">
    <div class="component-header warning-header" role="heading" aria-level="4"><i class="bi bi-exclamation-triangle" aria-hidden="true"></i> Important</div>
    <strong>Problema sintaxi curta:</strong> No gestiona errors!
</div>

    <h4>2.8.3. Ordre d'execució</h4>
    <p><strong>Codi:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">ngOnInit(): void {
  console.log(&#39;1. Inici ngOnInit&#39;);
  this.elementService.obtenirElements().subscribe({
    next: (dades) =&gt; {
      console.log(&#39;3. Dades rebudes&#39;);
      this.elements = dades;
    }
  });
  console.log(&#39;2. Després del subscribe&#39;);
  console.log(&#39;Elements:&#39;, this.elements);
}</code></pre>
  </div>
</div>

    <p><strong>Sortida consola:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">1. Inici ngOnInit
2. Després del subscribe
Elements: []
3. Dades rebudes</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Important:</strong> El codi dins del <code>subscribe</code> s'executa <strong>després</strong>, quan arriben les dades.
</div>

    <h4>2.8.4. Gestió d'errors típics</h4>
    <p><strong>Error 1: API no disponible</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">error: (err) =&gt; {
  console.error(&#39;Error:&#39;, err);
}</code></pre>
  </div>
</div>

    <p><strong>Error 2: URL incorrecta</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">error: (err) =&gt; {
  console.error(&#39;Error:&#39;, err);
}</code></pre>
  </div>
</div>

    <p><strong>Error 3: Dades mal formatades</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">next: (dades) =&gt; {
  if (!Array.isArray(dades)) {
    console.error(&#39;Format incorrecte&#39;);
    return;
  }
  this.elements = dades;
}</code></pre>
  </div>
</div>

    <h4>2.8.5. Unsubscribe (important)</h4>
    <p><strong>Problema:</strong> Peticions HTTP es completen soles, PERÒ altres Observables no.</p>
    <p><strong>Bona pràctica:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Subscription } from &#39;rxjs&#39;;

export class AppComponent implements OnInit, OnDestroy {
  private subscription?: Subscription;
  ngOnInit(): void {
    this.subscription = this.elementService.obtenirElements().subscribe({
      next: dades =&gt; this.elements = dades
    });
  }
  ngOnDestroy(): void {
    this.subscription?.unsubscribe();
  }
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.9. Mostrar dades al component</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>2.9.1. Template actualitzat</h4>
    <p><strong>Mostrar llistat d'elements:</strong></p>
    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;contenidor&quot;&gt;
  &lt;h1&gt;Catàleg d&#39;Elements&lt;/h1&gt;
  &lt;div *ngIf=&quot;elements.length === 0&quot; class=&quot;carregant&quot;&gt;
    &lt;p&gt;Carregant elements...&lt;/p&gt;
  &lt;/div&gt;
  &lt;div *ngIf=&quot;elements.length &gt; 0&quot; class=&quot;llistat&quot;&gt;
    &lt;div *ngFor=&quot;let element of elements&quot; class=&quot;targeta&quot;&gt;
      &lt;h3&gt;{{ element.name }}&lt;/h3&gt;
      &lt;p&gt;@{{ element.username }}&lt;/p&gt;
      &lt;p&gt;{{ element.email }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

    <h4>2.9.2. Estils bàsics</h4>
    
    <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">.contenidor {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}
.carregant {
  text-align: center;
  padding: 60px;
  color: #666;
}
.llistat {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 20px;
}
.targeta {
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 20px;
  background: white;
}
.targeta h3 {
  margin: 0 0 10px 0;
  color: #1976d2;
}
.targeta p {
  margin: 5px 0;
  color: #666;
}</code></pre>
  </div>
</div>

    <h4>2.9.3. Verificar funcionament</h4>
    <p><strong>Executar aplicació:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve --open</code></pre>
  </div>
</div>

    <p><strong>Resultat esperat:</strong></p>
    <ul>
      <li>Primer mostra "Carregant elements..."</li>
      <li>Després de ~500ms mostra 10 targetes amb usuaris</li>
      <li>Consola del navegador mostra: "Elements rebuts: 10"</li>
    </ul>
    <p><strong>Si no funciona:</strong></p>
    <ol>
      <li>Obrir DevTools del navegador (F12)</li>
      <li>Anar a pestanya "Network"</li>
      <li>Recarregar pàgina</li>
      <li>Buscar petició a <code>jsonplaceholder.typicode.com</code></li>
      <li>Verificar si és 200 (èxit) o error</li>
    </ol>
    <h4>2.9.4. Integració amb components existents</h4>
    <p><strong>Si ja teniu components de la Unitat 2:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">@Component({
  selector: &#39;app-root&#39;,
  standalone: true,
  imports: [CommonModule, LlistaElementsComponent, BarraCercaComponent],
  template: `
    &lt;main class=&quot;contenidor&quot;&gt;
      &lt;h1&gt;Catàleg amb API Real&lt;/h1&gt;
      &lt;app-barra-cerca (cercaCanviada)=&quot;filtrar($event)&quot;&gt;&lt;/app-barra-cerca&gt;
      &lt;app-llista-elements [elements]=&quot;elements&quot;&gt;&lt;/app-llista-elements&gt;
    &lt;/main&gt;
  `
})
export class AppComponent implements OnInit {
  private elementService = inject(ElementService);
  elements: Element[] = [];
  ngOnInit(): void {
    this.carregarElements();
  }
  carregarElements(): void {
    this.elementService.obtenirElements().subscribe({
      next: dades =&gt; this.elements = dades,
      error: err =&gt; console.error(&#39;Error:&#39;, err)
    });
  }
  filtrar(text: string): void {
    if (!text) {
      this.carregarElements();
      return;
    }
    this.elements = this.elements.filter(e =&gt;
      e.name.toLowerCase().includes(text.toLowerCase())
    );
  }
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.10. Mètodes de petició HTTP</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>2.10.1. Mètodes HTTP principals</h4>
    <h4>GET - Obtenir dades</h4>
    <p><strong>Ús:</strong> Llegir informació sense modificar-la.</p>
    <p><strong>Característiques:</strong></p>
    <ul>
      <li>NO modifica dades al servidor</li>
      <li>Pot usar-se múltiples vegades sense problema (idempotent)</li>
      <li>Paràmetres a la URL (<code>?cerca=valor&amp;categoria=tech</code>)</li>
    </ul>
    <p><strong>Exemples:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">http.get(&#39;https://api.example.com/elements&#39;)
→ Retorna: [{ id: 1, ... }, { id: 2, ... }]

http.get(&#39;https://api.example.com/elements/5&#39;)
→ Retorna: { id: 5, titol: &#39;...&#39;, ... }

http.get(&#39;https://api.example.com/elements?categoria=tech&amp;preu_max=1000&#39;)
→ Retorna: [{ id: 3, ... }, { id: 7, ... }]</code></pre>
  </div>
</div>

    <h4>POST - Crear nou registre</h4>
    <p><strong>Ús:</strong> Enviar dades per crear un nou recurs.</p>
    <p><strong>Característiques:</strong></p>
    <ul>
      <li>Modifica dades al servidor (crea nou registre)</li>
      <li>Dades enviades al body (cos de la petició)</li>
      <li>NO és idempotent (cada cop crea un registre nou)</li>
    </ul>
    <p><strong>Exemple:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const nouElement = {
  titol: &#39;Ratolí Gaming&#39;,
  descripcio: &#39;RGB 16000 DPI&#39;,
  preu: 79.99
};
http.post(&#39;https://api.example.com/elements&#39;, nouElement)
→ Retorna: { id: 11, titol: &#39;Ratolí Gaming&#39;, ... }</code></pre>
  </div>
</div>

    <h4>PUT - Actualitzar registre complet</h4>
    <p><strong>Ús:</strong> Substituir completament un recurs existent.</p>
    <p><strong>Característiques:</strong></p>
    <ul>
      <li>Modifica dades al servidor (actualitza registre)</li>
      <li>Dades enviades al body</li>
      <li>És idempotent (executar-lo 10 vegades = mateix resultat)</li>
      <li>Cal enviar <strong>TOTS</strong> els camps, fins i tot els que no canvien</li>
    </ul>
    <p><strong>Exemple:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const elementActualitzat = {
  id: 5,
  titol: &#39;Portàtil actualitzat&#39;,
  descripcio: &#39;Nova descripció&#39;,
  preu: 1399.99,
  categoria: &#39;Electrònica&#39;,
  valoracio: 4.8
};
http.put(&#39;https://api.example.com/elements/5&#39;, elementActualitzat)
→ Retorna: { id: 5, titol: &#39;Portàtil actualitzat&#39;, ... }</code></pre>
  </div>
</div>

    <h4>PATCH - Actualitzar parcialment</h4>
    <p><strong>Ús:</strong> Modificar només alguns camps d'un recurs.</p>
    <p><strong>Característiques:</strong></p>
    <ul>
      <li>Modifica dades al servidor (actualitza camps específics)</li>
      <li>Només cal enviar els camps que canvien</li>
      <li>Més eficient que PUT per canvis petits</li>
    </ul>
    <p><strong>Exemple:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">const canvisParcials = {
  preu: 1299.99
};
http.patch(&#39;https://api.example.com/elements/5&#39;, canvisParcials)
→ Retorna: { id: 5, titol: &#39;Portàtil...&#39;, preu: 1299.99, ... }</code></pre>
  </div>
</div>

    <h4>DELETE - Eliminar registre</h4>
    <p><strong>Ús:</strong> Esborrar un recurs.</p>
    <p><strong>Característiques:</strong></p>
    <ul>
      <li>Modifica dades al servidor (elimina registre)</li>
      <li>NO porta body (dades al cos)</li>
      <li>És idempotent (esborrar 10 vegades = esborrat un cop)</li>
    </ul>
    <p><strong>Exemple:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">http.delete(&#39;https://api.example.com/elements/5&#39;)
→ Retorna: 204 No Content (èxit sense contingut)</code></pre>
  </div>
</div>

    <h4>2.10.2. Taula resum</h4>
    <table>
      <thead>
        <tr>
          <th>Mètode</th>
          <th>Acció</th>
          <th>Body?</th>
          <th>Modifica?</th>
          <th>Idempotent?</th>
          <th>Ús habitual</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>GET</td>
          <td>Llegir</td>
          <td>NO</td>
          <td>NO</td>
          <td>SÍ</td>
          <td>Llistar, veure detall</td>
        </tr>
        <tr>
          <td>POST</td>
          <td>Crear</td>
          <td>SÍ</td>
          <td>SÍ</td>
          <td>NO</td>
          <td>Registrar usuari, afegir producte</td>
        </tr>
        <tr>
          <td>PUT</td>
          <td>Actualitzar tot</td>
          <td>SÍ</td>
          <td>SÍ</td>
          <td>SÍ</td>
          <td>Editar perfil complet</td>
        </tr>
        <tr>
          <td>PATCH</td>
          <td>Actualitzar parcial</td>
          <td>SÍ</td>
          <td>SÍ</td>
          <td>SÍ</td>
          <td>Canviar només email</td>
        </tr>
        <tr>
          <td>DELETE</td>
          <td>Eliminar</td>
          <td>NO</td>
          <td>SÍ</td>
          <td>SÍ</td>
          <td>Esborrar compte</td>
        </tr>
      </tbody>
    </table>
    <h4>2.10.3. Casos d'ús reals</h4>
    <p><strong>E-commerce:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">GET    /productes          → Mostrar catàleg
GET    /productes/123      → Veure detall producte
POST   /comandes           → Crear comanda nova
PUT    /usuaris/456        → Actualitzar perfil
DELETE /carret/items/789   → Eliminar del carret</code></pre>
  </div>
</div>

    <p><strong>Xarxa social:</strong></p>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">GET    /posts              → Timeline
POST   /posts              → Publicar nou post
PATCH  /posts/123          → Editar post (només text)
DELETE /posts/123          → Esborrar post
GET    /usuaris/456/amics  → Llistar amics</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.11. Mini exemple pràctic</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <p><strong>Escenari:</strong> Crear aplicació que mostra tasques d'una API.</p>
    <h4>2.11.1. Pas 1: Model</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">export interface Tasca {
  id: number;
  title: string;
  completed: boolean;
}</code></pre>
  </div>
</div>

    <h4>2.11.2. Pas 2: Servei</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Injectable, inject } from &#39;@angular/core&#39;;
import { HttpClient } from &#39;@angular/common/http&#39;;
import { Observable } from &#39;rxjs&#39;;
import { Tasca } from &#39;../models/tasca.model&#39;;

@Injectable({ providedIn: &#39;root&#39; })
export class TascaService {
  private http = inject(HttpClient);
  private apiUrl = &#39;https://jsonplaceholder.typicode.com&#39;;
  obtenirTasques(): Observable&lt;Tasca[]&gt; {
    return this.http.get&lt;Tasca[]&gt;(`${this.apiUrl}/todos`);
  }
}</code></pre>
  </div>
</div>

    <h4>2.11.3. Pas 3: Component</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit, inject } from &#39;@angular/core&#39;;
import { CommonModule } from &#39;@angular/common&#39;;
import { TascaService } from &#39;./services/tasca.service&#39;;
import { Tasca } from &#39;./models/tasca.model&#39;;

@Component({
  selector: &#39;app-root&#39;,
  standalone: true,
  imports: [CommonModule],
  template: `
    &lt;div class=&quot;contenidor&quot;&gt;
      &lt;h1&gt;Tasques&lt;/h1&gt;
      &lt;ul&gt;
        &lt;li *ngFor=&quot;let tasca of tasques&quot;&gt;
          &lt;input type=&quot;checkbox&quot; [checked]=&quot;tasca.completed&quot; disabled&gt;
          {{ tasca.title }}
        &lt;/li&gt;
      &lt;/ul&gt;
    &lt;/div&gt;
  `
})
export class AppComponent implements OnInit {
  private tascaService = inject(TascaService);
  tasques: Tasca[] = [];
  ngOnInit(): void {
    this.tascaService.obtenirTasques().subscribe({
      next: dades =&gt; this.tasques = dades.slice(0, 10),
      error: err =&gt; console.error(&#39;Error:&#39;, err)
    });
  }
}</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Resultat:</strong> Llista de 10 tasques amb checkboxes indicant si estan completades.
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.12. Resolució de problemes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>2.12.1. Errors de configuració</h4>
    <table>
      <thead>
        <tr>
          <th>Símptoma</th>
          <th>Causa</th>
          <th>Solució</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>NullInjectorError: HttpClient</td>
          <td><code>provideHttpClient()</code> no importat</td>
          <td>Afegir a <code>main.ts</code> dins <code>providers</code></td>
        </tr>
        <tr>
          <td>Cannot find name 'Observable'</td>
          <td>Import falta</td>
          <td><code>import { Observable } from 'rxjs'</code></td>
        </tr>
        <tr>
          <td>Type 'Observable' is not assignable</td>
          <td>Component espera array, servei retorna Observable</td>
          <td>Canviar tipus retorn o fer subscribe</td>
        </tr>
      </tbody>
    </table>
    <h4>2.12.2. Problemes de peticions</h4>
    <table>
      <thead>
        <tr>
          <th>Error</th>
          <th>Causa</th>
          <th>Solució Windows</th>
          <th>Solució Linux/macOS</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>ERR_CONNECTION_REFUSED</td>
          <td>API no accessible</td>
          <td>Verificar URL, provar al navegador</td>
          <td>Idem</td>
        </tr>
        <tr>
          <td>404 Not Found</td>
          <td>Endpoint incorrecte</td>
          <td>Revisar URL (<code>/users</code> no <code>/user</code>)</td>
          <td>Idem</td>
        </tr>
        <tr>
          <td>CORS error</td>
          <td>API no permet origen</td>
          <td>Usar API amb CORS habilitat (JSONPlaceholder sí)</td>
          <td>Idem</td>
        </tr>
        <tr>
          <td>0 Unknown Error</td>
          <td>Xarxa no disponible</td>
          <td>Verificar connexió Internet</td>
          <td>Idem</td>
        </tr>
      </tbody>
    </table>
    <h4>2.12.3. Errors de lògica</h4>
    <table>
      <thead>
        <tr>
          <th>Problema</th>
          <th>Causa</th>
          <th>Solució</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Elements sempre buit</td>
          <td>No s'ha fet subscribe</td>
          <td>Cridar <code>.subscribe()</code> a l'Observable</td>
        </tr>
        <tr>
          <td>Dades no actualitzen</td>
          <td>Subscribe dins funció que no s'executa</td>
          <td>Posar subscribe a <code>ngOnInit()</code></td>
        </tr>
        <tr>
          <td>Error "Cannot read property"</td>
          <td>Accedir dades abans que arribin</td>
          <td>Usar <code>*ngIf="elements.length > 0"</code></td>
        </tr>
        <tr>
          <td>Múltiples peticions</td>
          <td>Subscribe dins funció que es crida molt</td>
          <td>Moure subscribe a <code>ngOnInit()</code></td>
        </tr>
      </tbody>
    </table>
    <h4>2.12.4. Debugging amb DevTools</h4>
    <p><strong>Obrir DevTools (F12) → Network:</strong></p>
    <ol>
      <li>Recarregar pàgina</li>
      <li>Buscar petició a l'API</li>
      <li>Veure detalls:
        <ul>
          <li><strong>Status:</strong> 200 (èxit), 404 (no trobat), 500 (error servidor)</li>
          <li><strong>Response:</strong> Dades JSON rebudes</li>
          <li><strong>Headers:</strong> Informació addicional</li>
        </ul>
      </li>
    </ol>
    <p><strong>Consola:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.elementService.obtenirElements().subscribe({
  next: dades =&gt; {
    console.log(&#39;Dades rebudes:&#39;, dades);
    console.log(&#39;Tipus:&#39;, typeof dades);
    console.log(&#39;Longitud:&#39;, dades.length);
    this.elements = dades;
  }
});</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.13. Prompts d'IA</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Expert Angular. <strong>Context:</strong> Estic aprenent HttpClient i Observable. <strong>Tasca:</strong> Explica la diferència entre servei Angular i servei web (API), per què les peticions HTTP retornen Observable en lloc de dades directes, i quina és la diferència entre GET, POST, PUT i DELETE amb exemples. <strong>Format:</strong> Explicació clara amb exemples concrets.</div>
  </div>
</div>

    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Debugger Angular. <strong>Context:</strong> El meu subscribe no s'executa. <strong>Tasca:</strong> Identifica possibles causes: Observable no subscrit, errors de sintaxi al subscribe, problemes amb la URL de l'API, errors de configuració de HttpClient. <strong>Format:</strong> Llista de verificació amb passos de debugging.</div>
  </div>
</div>

    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Arquitecte de programari. <strong>Context:</strong> Vull integrar una API real al meu projecte Angular. <strong>Tasca:</strong> Explica millors pràctiques per estructurar serveis amb HttpClient, com organitzar URLs d'APIs en un projecte gran, patrons recomanats per gestionar respostes d'APIs, i com gestionar errors de xarxa. <strong>Format:</strong> Guia pas a pas amb exemples.</div>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.14. Autoavaluació</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>Configuració i integració</h4>
    
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He afegit <code>provideHttpClient()</code> a <code>main.ts</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Aplicació compila sense errors d'importació</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He verificat que HttpClient està disponible globalment</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He injectat <code>HttpClient</code> al servei amb <code>inject()</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He definit URL base de l'API (JSONPlaceholder)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Mètode <code>obtenirElements()</code> retorna <code>Observable&lt;Element[]&gt;</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He usat tipus genèric <code>&lt;Element[]&gt;</code> a <code>http.get()</code></div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

    <h4>Component i subscripcions</h4>
    
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Component s'ha subscrit a l'Observable amb <code>.subscribe()</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Callback <code>next</code> actualitza propietat <code>elements</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Callback <code>error</code> gestiona errors amb <code>console.error</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Template mostra dades amb <code>*ngFor</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Model <code>Element</code> té propietats que coincideixen amb resposta API</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">TypeScript no mostra errors de tipus</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

    <h4>Verificació funcional</h4>
    
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Executo <code>ng serve</code> i aplicació arrenca</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Navegador mostra "Carregant..." inicialment</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Després de ~500ms mostra elements de l'API</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">DevTools → Network mostra petició a JSONPlaceholder amb status 200</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Consola mostra "Elements rebuts: 10" (o similar)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Canvis afegits amb <code>git add .</code></div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Commit creat amb missatge descriptiu</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Codi publicat a GitHub</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

    <h4>Competències adquirides</h4>
    
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Comprenc què és una API i com funciona</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Distingeixo entre servei Angular i servei web (API)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Conec els mètodes HTTP (GET, POST, PUT, DELETE)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc quan usar cada mètode HTTP</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Configuro HttpClient amb provideHttpClient()</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Injecte HttpClient als serveis</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Faig peticions GET a APIs externes</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Uso tipus genèrics per tipatge fort</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Comprenc el concepte d'operacions asíncrones</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc què és un Observable i com funciona</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé quan cal subscriure's a un Observable</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Gestiono callbacks next, error, complete</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Subscric components a Observables del servei</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Actualitzo propietats quan arriben dades</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Mostro dades de l'API al template</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Gestiono errors de comunicació</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Uso DevTools (Network) per verificar peticions</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Interpreto codis d'estat HTTP (200, 404, 500)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Faig console.log per verificar dades rebudes</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Identifico errors comuns d'asincronisme</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.15. Síntesi</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <p>Disposeu d'una <strong>aplicació Angular connectada a una API externa real</strong>. Heu aconseguit configurar HttpClient amb sistema de peticions HTTP operatiu, actualitzar el servei per fer peticions reals en lloc d'usar mock local, comprendre el concepte d'asincronisme amb Observable i subscribe(), crear un component reactiu que mostra dades de l'API automàticament, i preparar l'estructura per a futures millores. A la Lectura 3.1.3 afegireu gestió professional d'errors de xarxa, indicadors de càrrega (spinners, progress bars), missatges d'error amigables per a l'usuari, sistemes de reintent automàtic, i estats complets: loading, success, error, empty.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">2.16. Repàs de conceptes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Servei web (API):</strong> Servidor extern que proporciona dades via HTTP. Accessible per Internet amb URL específica. Retorna dades en format JSON. Exemples: JSONPlaceholder, PokeAPI, GitHub API.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>HttpClient:</strong> Classe d'Angular per fer peticions HTTP. S'injecta als serveis amb <code>inject(HttpClient)</code>. Proporciona mètodes: get(), post(), put(), delete(). Configurat amb <code>provideHttpClient()</code> a <code>main.ts</code>.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Mètodes HTTP:</strong> <strong>GET:</strong> Obtenir dades (no modifica), <strong>POST:</strong> Crear nou registre, <strong>PUT:</strong> Actualitzar registre complet, <strong>DELETE:</strong> Eliminar registre.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Observable:</strong> Flux de dades asíncron que arriben en el temps. Retornat per <code>http.get()</code> i altres peticions. Cal subscriure's per rebre dades. Pot emetre dades, error o completar.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Subscribe:</strong> Mètode per escoltar emissions d'un Observable. Callbacks: next (dades), error (error), complete (acabat). S'executa quan arriben dades, no immediatament. Important: SEMPRE gestionar error.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Asincronisme:</strong> Operacions que no són instantànies. Permeten que l'aplicació continuï funcionant mentre espera. Peticions HTTP són sempre asíncrones. Diferent de codi síncron (instantani).</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Cold Observable:</strong> Observable que no s'executa fins que algú es subscriu. Típic de peticions HTTP amb HttpClient.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Hot Observable:</strong> Observable que emet dades independentment de si hi ha subscriptors. Típic d'esdeveniments del DOM.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Tipus genèric:</strong> Paràmetre de tipus que indica quin tipus de dades retorna una funció. Exemple: <code>http.get&lt;Element[]&gt;()</code> indica que retorna array d'Elements.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>JSONPlaceholder:</strong> API pública gratuïta per practicar peticions HTTP. Proporciona endpoints amb dades de prova: users, posts, photos, todos. No requereix autenticació.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>provideHttpClient():</strong> Funció que registra HttpClient al sistema de dependències d'Angular. Cal cridar-la un cop a <code>main.ts</code> dins l'array <code>providers</code>.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Callback next:</strong> Funció que s'executa quan l'Observable emet dades correctament. Rep les dades com a paràmetre.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Callback error:</strong> Funció que s'executa quan l'Observable emet un error. Rep l'error com a paràmetre. Crítica per gestionar errors de xarxa.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Callback complete:</strong> Funció que s'executa quan l'Observable completa sense errors. Opcional per peticions HTTP.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Unsubscribe:</strong> Mètode per cancel·lar una subscripció a un Observable. Important per evitar memory leaks amb Observables que no es completen automàticament.</p>
  </div>
</div>

  
  </div>
</div>


</div>

<!-- SECCIÓ 3: Gestió de càrrega i errors en peticions -->
<div class="section" id="Unitat3_Bloc1_Seccio3">
  <h2 id="Unitat3_Bloc1_Seccio3">3. Gestió de càrrega i errors en peticions</h2>

  <!-- MULTIMÈDIA -->
  <!--
  ════════════════════════════════════════════════════════════════
  Component: Enllaços multimèdia YouTube
  ════════════════════════════════════════════════════════════════

  Paràmetres:
    - unitat: número de la unitat (1-4)
    - bloc: número del bloc (1-4)
    - seccio: número de la secció (1-3)

  Exemple d'ús:
    {% include multimedia-youtube.html unitat=1 bloc=1 seccio=1 %}

  El component busca automàticament les URLs corresponents a
  site.data.multimedia i mostra els botons de vídeo i àudio.
  ════════════════════════════════════════════════════════════════
-->





  
  
  
  
  

  

  

  
<div class="multimedia-resources">
  <div class="multimedia-header">
    <i class="bi bi-play-circle-fill"></i>
    <span>Contingut multimèdia d'aquesta lectura</span>
  </div>

  <div class="multimedia-buttons">
    
    <a href="https://www.youtube.com/watch?v=7FXBBCx3FvE" target="_blank" rel="noopener noreferrer" class="multimedia-btn video-btn" title="Lectura 3.1.3 · Gestió de càrrega i errors en peticions">
      <i class="bi bi-youtube"></i>
      <span>Veure vídeo</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    

    
    <a href="https://www.youtube.com/watch?v=CrN9WiYZ5Qk" target="_blank" rel="noopener noreferrer" class="multimedia-btn audio-btn" title="[Audio] Lectura 3.1.3 · Gestió de càrrega i errors en peticions">
      <i class="bi bi-mic-fill"></i>
      <span>Escoltar àudio</span>
      <i class="bi bi-box-arrow-up-right"></i>
    </a>
    
  </div>

  
  
</div>
  




  <!-- Component: Objectius del bloc/unitat -->



<div class="objectius-box">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-bullseye" aria-hidden="true"></i> Objectius</div>
  <div class="component-content">
    <ul>
      
        <li>Identificar els tipus d'errors que es produeixen en peticions HTTP i com gestionar-los</li>
      
        <li>Implementar indicadors de càrrega que proporcionen feedback visual durant peticions asíncrones</li>
      
        <li>Crear missatges d'error amigables que guiïn l'usuari cap a solucions concretes</li>
      
        <li>Establir polítiques de reintents (manuals i automàtics) per a peticions fallides</li>
      
    </ul>
  </div>
  <!-- IMPORTANT: també es pot usar via front matter: page.objectius (array) -->
</div>



  <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>RA3 · Criteri 2</strong> — Utilitza serveis externs per obtenir informació gestionant esdeveniments d'èxit i error.<br><strong>RA3 · Criteri 4</strong> — Gestiona estats de càrrega, errors i reintents amb criteri d'usuabilitat.<br><strong>RA3 · Criteri 5</strong> — Documenta el flux de dades i les decisions preses per garantir mantenibilitat.
    
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.1. Prerequisits</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <p>Abans de començar, necessiteu:</p>
    <p><strong>Lectures anteriors completades:</strong></p>
    <ul>
      <li>Lectura 3.1.1: Servei <code>ElementService</code> funcional amb peticions GET</li>
      <li>Lectura 3.1.2: HttpClient configurat i peticions a API externa o mock</li>
      <li>Models TypeScript: Interfície <code>Element</code> definida amb camps necessaris</li>
    </ul>
    <p><strong>Projecte operatiu:</strong></p>
    <ul>
      <li>Servidor de desenvolupament arrencant amb <code>ng serve</code> sense errors</li>
      <li>API mock disponible (JSONPlaceholder o json-server) accessible</li>
      <li>Git amb commit net de les lectures anteriors</li>
    </ul>
    <p><strong>Verificació ràpida:</strong></p>
    
    <div class="code-block" data-lang="bash" role="region" aria-label="Bloc de codi bash">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">BASH</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-bash">ng serve --open</code></pre>
  </div>
</div>

    <p><strong>Punt d'autocomprovació:</strong> Obriu l'aplicació i verifiqueu que el catàleg d'elements es carrega correctament amb dades reals de l'API.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.2. Marc conceptual</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>3.2.1. Què és la gestió d'estats en peticions HTTP</h4>
    <p>La gestió d'estats en peticions HTTP consisteix en controlar els tres moments crítics d'una operació asíncrona: quan la petició <strong>està en curs</strong> (loading), quan <strong>s'ha completat amb èxit</strong> (success), i quan <strong>ha fallat</strong> (error). Cada estat requereix una resposta diferent a la interfície d'usuari.</p>
    <h4>3.2.2. Problema sense gestió d'estats i errors</h4>
    <p><strong>Situació abans:</strong></p>
    <p>Quan feu peticions HTTP sense gestionar estats ni errors, l'usuari es troba amb aplicacions "mortes" que no donen cap feedback. Imagineu fer clic a "Carregar catàleg" i no saber si l'aplicació està treballant, ha fallat o ha acabat.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">carregarElements(): void {
  this.http.get&lt;Element[]&gt;(&#39;https://api.example.com/elements&#39;)
    .subscribe(dades =&gt; {
      this.elements = dades;
    });
}</code></pre>
  </div>
</div>

    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div *ngFor=&quot;let element of elements&quot;&gt;
  {{ element.nom }}
&lt;/div&gt;</code></pre>
  </div>
</div>

    <p><strong>Problemes que genera:</strong></p>
    <p><strong>1. Sensació d'aplicació "congelada"</strong></p>
    <p>Quan una petició triga 2-5 segons (xarxa lenta, servidor saturat), l'usuari no sap si l'aplicació funciona o s'ha penjat. Aquesta incertesa genera frustració i pèrdua de confiança.</p>
    <p><strong>2. Errors silenciosos</strong></p>
    <p>Si la petició falla (servidor caigut, timeout, 500), l'aplicació continua mostrant la pantalla buida o dades obsoletes sense avisar l'usuari. Això genera confusió: "Hi ha zero elements o ha fallat alguna cosa?"</p>
    <p><strong>3. Impossible reintentar</strong></p>
    <p>Sense captura d'errors ni mecànica de reintents, l'usuari ha de tancar i reobrir l'aplicació esperant que "ara funcioni", una experiència molt pobra.</p>
    <p><strong>4. Dificultats de depuració</strong></p>
    <p>Els desenvolupadors no tenen forma de saber quins errors es produeixen en producció ni quines peticions fallen més sovint. Això complica la resolució de problemes.</p>
    <p><strong>5. Experiència inconsistent</strong></p>
    <p>Algunes parts de l'aplicació mostren spinners, altres no. Algunes mostren errors, altres simplement "no funcionen". Aquesta inconsistència desorienta l'usuari.</p>
    <h4>3.2.3. Solució amb gestió completa d'estats</h4>
    <p>Angular proporciona mecanismes per controlar aquests tres estats:</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">interface EstatServei {
  carregant: boolean;
  error: string | null;
}

@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private elements = signal&lt;Element[]&gt;([]);
  private estat = signal&lt;EstatServei&gt;({ carregant: false, error: null });

  carregarElements(): void {
    this.estat.set({ carregant: true, error: null });

    this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`).subscribe({
      next: dades =&gt; {
        this.elements.set(dades);
        this.estat.set({ carregant: false, error: null });
      },
      error: err =&gt; {
        this.elements.set([]);
        this.estat.set({
          carregant: false,
          error: &#39;No hem pogut recuperar el catàleg. Reviseu la connexió.&#39;
        });
      }
    });
  }

  elements$() { return this.elements.asReadonly(); }
  estat$() { return this.estat.asReadonly(); }
}</code></pre>
  </div>
</div>

    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;section *ngIf=&quot;estatServei().carregant&quot; class=&quot;loading&quot;&gt;
  &lt;p role=&quot;status&quot;&gt;Carregant catàleg…&lt;/p&gt;
&lt;/section&gt;

&lt;section *ngIf=&quot;estatServei().error as missatge&quot; class=&quot;error&quot;&gt;
  &lt;p role=&quot;alert&quot;&gt;{{ missatge }}&lt;/p&gt;
  &lt;button (click)=&quot;reintentar()&quot;&gt;Torneu-ho a provar&lt;/button&gt;
&lt;/section&gt;

&lt;section *ngIf=&quot;!estatServei().carregant &amp;&amp; !estatServei().error&quot;&gt;
  &lt;div *ngFor=&quot;let element of elements()&quot;&gt;
    {{ element.nom }}
  &lt;/div&gt;
&lt;/section&gt;</code></pre>
  </div>
</div>

    <p><strong>Avantatges obtinguts:</strong></p>
    <table>
      <thead>
        <tr>
          <th>Aspecte</th>
          <th>Sense gestió</th>
          <th>AMB gestió</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Feedback visual</td>
          <td>Cap indicador</td>
          <td>Spinner o missatge "Carregant…"</td>
        </tr>
        <tr>
          <td>Gestió d'errors</td>
          <td>Errors silenciosos</td>
          <td>Missatge clar amb acció recomanada</td>
        </tr>
        <tr>
          <td>Possibilitat de reintent</td>
          <td>Cal tancar l'app</td>
          <td>Botó "Torneu-ho a provar"</td>
        </tr>
        <tr>
          <td>Experiència d'usuari</td>
          <td>Frustrant i opaca</td>
          <td>Clara i transparent</td>
        </tr>
        <tr>
          <td>Depuració</td>
          <td>Impossible saber què falla</td>
          <td>Errors registrats a consola i UI</td>
        </tr>
        <tr>
          <td>Consistència</td>
          <td>Comportament irregular</td>
          <td>Patró uniforme a tota l'app</td>
        </tr>
      </tbody>
    </table>
    <h4>3.2.4. Integració amb lectures anteriors</h4>
    <ul>
      <li><strong>Lectura 3.1.1 (Serveis):</strong> Extenem el servei <code>ElementService</code> amb gestió d'estats utilitzant <code>signals</code></li>
      <li><strong>Lectura 3.1.2 (Peticions HTTP):</strong> Capturem errors del bloc <code>subscribe</code> i actualitzem l'estat corresponent</li>
      <li><strong>Lectura 2.2.2 (Signals):</strong> Utilitzem <code>signal</code> per mantenir estats reactius que actualitzen la UI automàticament</li>
      <li><strong>Lectura 2.1.3 (Directives estructurals):</strong> Apliquem <code>*ngIf</code> per mostrar condicionalment spinners, errors o contingut</li>
    </ul>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.3. Model mental</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <p>Penseu en la gestió d'estats com un <strong>semàfor de trànsit</strong> per a les peticions:</p>
    <ul>
      <li><i class="bi bi-hourglass-split text-warning" aria-hidden="true"></i> <strong>Carregant (loading):</strong> La petició està en curs → mostra spinner o "Carregant…"</li>
      <li><i class="bi bi-check-circle text-success" aria-hidden="true"></i> <strong>Èxit (success):</strong> La petició ha retornat dades → mostra contingut normal</li>
      <li><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> <strong>Error (error):</strong> La petició ha fallat → mostra missatge d'error + botó reintent</li>
    </ul>
    <p>Cada estat és <strong>mutuament excloent</strong>: només un pot estar actiu en cada moment. La vostra aplicació ha de gestionar sempre els tres estats per oferir una experiència completa.</p>
    <h4>3.3.1. Conceptes clau</h4>
    <p><strong>Estats explícits:</strong></p>
    <p>Utilitzeu variables (<code>isLoading</code>, <code>error</code>) o <code>signals</code> per fer visibles els estats.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">private estat = signal&lt;EstatServei&gt;({
  carregant: false,
  error: null
});</code></pre>
  </div>
</div>

    <p><strong>Feedback immediat:</strong></p>
    <p>L'usuari ha de veure un canvi a la interfície en menys d'1 segon després d'accionar una petició.</p>
    <p><strong>Missatges accionables:</strong></p>
    <p>Els errors han d'explicar què ha passat i què pot fer l'usuari ("Reviseu la connexió", "Torneu-ho a provar").</p>
    <p><strong>Reintents controlats:</strong></p>
    <p>Proporcioneu sempre una forma de reintentar peticions fallides.</p>
    <h4>3.3.2. Diagrama d'estats</h4>
    
    <div class="code-block" data-lang="text" role="region" aria-label="Bloc de codi text">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TEXT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-text">┌─────────────────────────────────────────────────┐
│                ESTAT INICIAL                    │
│          carregant: false, error: null          │
└──────────────────┬──────────────────────────────┘
                   │
                   │ usuari acciona petició
                   ▼
┌─────────────────────────────────────────────────┐
│               ESTAT CARREGANT                   │
│          carregant: true, error: null           │
│         (mostra spinner a la UI)                │
└──────────────┬──────────────┬───────────────────┘
               │              │
        èxit   │              │   error
               ▼              ▼
┌──────────────────┐  ┌──────────────────────────┐
│   ESTAT ÈXIT     │  │     ESTAT ERROR          │
│ carregant: false │  │  carregant: false        │
│ error: null      │  │  error: &quot;missatge...&quot;    │
│ (mostra dades)   │  │  (mostra error + botó)   │
└──────────────────┘  └───────────┬──────────────┘
                                  │
                                  │ usuari clica reintent
                                  ▼
                      ┌─────────────────────────┐
                      │   ESTAT CARREGANT       │
                      │  (torna a intentar)     │
                      └─────────────────────────┘</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Analogia postal:</strong> Estat carregant = Carta enviada (esperant resposta), Estat èxit = Carta rebuda amb bon contingut, Estat error = Carta perduda o retornada (cal reenviar).
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.4. Tipus d'errors en peticions</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>3.4.1. Errors de xarxa</h4>
    <p><strong>Què són:</strong> Errors que impedeixen que la petició arribi al servidor.</p>
    <p><strong>Causes habituals:</strong></p>
    <ul>
      <li>Connexió a internet caiguda</li>
      <li>DNS no pot resoldre el domini</li>
      <li>Timeout (el servidor no respon en el temps límit)</li>
      <li>Bloqueig per tallafocs o proxy</li>
    </ul>
    <p><strong>Com es manifesten a Angular:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">error: err =&gt; {
  if (err.status === 0) {
    console.error(&#39;Error de xarxa:&#39;, err.message);
  }
}</code></pre>
  </div>
</div>

    <p><strong>Missatge amigable:</strong> "No hem pogut connectar amb el servidor. Reviseu la connexió a internet."</p>
    <h4>3.4.2. Errors de servidor</h4>
    <p><strong>Què són:</strong> El servidor rep la petició però retorna un codi d'error HTTP.</p>
    <p><strong>Codis habituals:</strong></p>
    <ul>
      <li><strong>500 Internal Server Error:</strong> Error intern del servidor</li>
      <li><strong>502 Bad Gateway:</strong> Servidor intermediari (proxy) no pot contactar amb el servidor final</li>
      <li><strong>503 Service Unavailable:</strong> Servidor temporalment fora de servei (manteniment, sobrecàrrega)</li>
      <li><strong>504 Gateway Timeout:</strong> Servidor intermediari no rep resposta a temps</li>
    </ul>
    <p><strong>Com es manifesten a Angular:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">error: err =&gt; {
  if (err.status &gt;= 500) {
    console.error(&#39;Error del servidor:&#39;, err.status, err.message);
  }
}</code></pre>
  </div>
</div>

    <p><strong>Missatge amigable:</strong> "El servidor està experimentant problemes tècnics. Proveu-ho més tard."</p>
    <h4>3.4.3. Errors de format de dades</h4>
    <p><strong>Què són:</strong> El servidor respon correctament (200 OK) però les dades rebudes no tenen el format esperat.</p>
    <p><strong>Causes habituals:</strong></p>
    <ul>
      <li>JSON malformat (claus amb cometes incorrectes, comes de més)</li>
      <li>Estructura diferent de l'esperada (falta un camp obligatori)</li>
      <li>Tipus de dades incorrectes (string on esperem number)</li>
    </ul>
    <p><strong>Com es manifesten a Angular:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">next: dades =&gt; {
  if (!Array.isArray(dades)) {
    console.error(&#39;Format de dades incorrecte: esperava array, rebut&#39;, typeof dades);
  }
}</code></pre>
  </div>
</div>

    <p><strong>Missatge amigable:</strong> "Les dades rebudes no són vàlides. Contacteu amb suport tècnic."</p>
    <h4>3.4.4. Taula comparativa d'errors</h4>
    <table>
      <thead>
        <tr>
          <th>Tipus error</th>
          <th>Codi HTTP</th>
          <th>Causa principal</th>
          <th>Pot reintentar?</th>
          <th>Acció recomanada</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Xarxa</td>
          <td>0</td>
          <td>Connexió caiguda</td>
          <td><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Sí (immediat)</td>
          <td>"Reviseu connexió i torneu-ho a provar"</td>
        </tr>
        <tr>
          <td>Timeout</td>
          <td>0</td>
          <td>Servidor lent</td>
          <td><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Sí (immediat)</td>
          <td>"El servidor triga a respondre. Reintenteu"</td>
        </tr>
        <tr>
          <td>500</td>
          <td>500</td>
          <td>Error intern servidor</td>
          <td><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Sí (després d'1 min)</td>
          <td>"Error del servidor. Proveu més tard"</td>
        </tr>
        <tr>
          <td>502/503</td>
          <td>502/503</td>
          <td>Servidor caigut</td>
          <td><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Sí (després d'1 min)</td>
          <td>"Servidor temporalment no disponible"</td>
        </tr>
        <tr>
          <td>504</td>
          <td>504</td>
          <td>Gateway timeout</td>
          <td><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Sí (després d'1 min)</td>
          <td>"Temps d'espera esgotat. Reintenteu"</td>
        </tr>
        <tr>
          <td>Format JSON</td>
          <td>200</td>
          <td>Dades malformades</td>
          <td><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> No</td>
          <td>"Dades invàlides. Contacteu suport"</td>
        </tr>
      </tbody>
    </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.5. Captura d'errors dins de subscripcions</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>3.5.1. Bloc error de subscribe</h4>
    <p>Quan feu <code>subscribe()</code> a un observable HTTP, podeu proporcionar tres callbacks: <code>next</code> (èxit), <code>error</code> (error) i <code>complete</code> (finalització). El bloc <code>error</code> s'executa només si la petició falla.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`).subscribe({
  next: dades =&gt; {
    console.log(&#39;Dades rebudes:&#39;, dades);
    this.elements.set(dades);
  },
  error: err =&gt; {
    console.error(&#39;Error en la petició:&#39;, err);
    this.estat.set({ carregant: false, error: &#39;Petició fallida&#39; });
  },
  complete: () =&gt; {
    console.log(&#39;Petició completada&#39;);
  }
});</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'advertiment -->
<div class="warning-box" role="alert" aria-live="assertive">
    <div class="component-header warning-header" role="heading" aria-level="4"><i class="bi bi-exclamation-triangle" aria-hidden="true"></i> Important</div>
    <strong>Important:</strong> Si proporcioneu un bloc <code>error</code>, l'observable NO propaga l'error amunt. Això significa que captureu l'error i el gestioneu localment.
</div>

    <h4>3.5.2. Operadors RxJS per captura d'errors</h4>
    <p><strong>catchError:</strong> Captura errors i retorna un observable alternatiu.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { catchError, of } from &#39;rxjs&#39;;

carregarElements(): void {
  this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`)
    .pipe(
      catchError(err =&gt; {
        console.error(&#39;Error capturat amb catchError:&#39;, err);
        this.estat.set({ carregant: false, error: &#39;Petició fallida&#39; });
        return of([]);
      })
    )
    .subscribe(dades =&gt; {
      this.elements.set(dades);
      this.estat.set({ carregant: false, error: null });
    });
}</code></pre>
  </div>
</div>

    <p><strong>Avantatge:</strong> Evita que l'error aborti la subscripció, permetent que l'observable continuï funcionant per a futures peticions.</p>
    <h4>3.5.3. Registre i logging d'errors</h4>
    <p><strong>Registrar a consola (desenvolupament):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">error: err =&gt; {
  console.error(&#39;Error en carregarElements:&#39;, {
    status: err.status,
    statusText: err.statusText,
    message: err.message,
    url: err.url,
    timestamp: new Date().toISOString()
  });
}</code></pre>
  </div>
</div>

    <p><strong>Registrar a servei extern (producció):</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">error: err =&gt; {
  this.loggingService.registrarError({
    component: &#39;ElementService&#39;,
    method: &#39;carregarElements&#39;,
    error: err,
    timestamp: Date.now()
  });

  this.estat.set({
    carregant: false,
    error: &#39;No hem pogut carregar el catàleg&#39;
  });
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.6. Estats de la interfície: carregant, èxit, error</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>3.6.1. Model d'estats amb signals</h4>
    <p>Utilitzeu un <code>signal</code> per mantenir l'estat actual de la petició. Això permet que la UI reaccioni automàticament als canvis.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">interface EstatServei {
  carregant: boolean;
  error: string | null;
}

@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private estat = signal&lt;EstatServei&gt;({
    carregant: false,
    error: null
  });

  estat$() {
    return this.estat.asReadonly();
  }
}</code></pre>
  </div>
</div>

    <h4>3.6.2. Actualització d'estats durant la petició</h4>
    <p><strong>1. Abans de la petició:</strong> Activeu <code>carregant: true</code>, netegeu errors anteriors.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">carregarElements(): void {
  this.estat.set({ carregant: true, error: null });

  this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`)
    .subscribe({ /* ... */ });
}</code></pre>
  </div>
</div>

    <p><strong>2. Si la petició té èxit:</strong> Desactiveu <code>carregant</code>, manteniu <code>error: null</code>.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">next: dades =&gt; {
  this.elements.set(dades);
  this.estat.set({ carregant: false, error: null });
}</code></pre>
  </div>
</div>

    <p><strong>3. Si la petició falla:</strong> Desactiveu <code>carregant</code>, establiu missatge d'error.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">error: err =&gt; {
  this.elements.set([]);
  this.estat.set({
    carregant: false,
    error: &#39;No hem pogut carregar el catàleg&#39;
  });
}</code></pre>
  </div>
</div>

    <h4>3.6.3. Condicionals a plantilla</h4>
    <p>Utilitzeu <code>*ngIf</code> per mostrar diferents seccions segons l'estat actual.</p>
    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;section *ngIf=&quot;estatServei().carregant&quot; class=&quot;loading&quot;&gt;
  &lt;div class=&quot;spinner&quot; aria-label=&quot;Carregant&quot;&gt;&lt;/div&gt;
  &lt;p role=&quot;status&quot;&gt;Carregant catàleg d&#39;elements…&lt;/p&gt;
&lt;/section&gt;

&lt;section *ngIf=&quot;estatServei().error as missatge&quot; class=&quot;error&quot; role=&quot;alert&quot;&gt;
  &lt;p class=&quot;error-message&quot;&gt;&lt;i class=&quot;bi bi-exclamation-triangle&quot;&gt;&lt;/i&gt; {{ missatge }}&lt;/p&gt;
  &lt;button type=&quot;button&quot; (click)=&quot;reintentar()&quot; class=&quot;retry-button&quot;&gt;
    Torneu-ho a provar
  &lt;/button&gt;
&lt;/section&gt;

&lt;section *ngIf=&quot;!estatServei().carregant &amp;&amp; !estatServei().error&quot; class=&quot;content&quot;&gt;
  &lt;div *ngFor=&quot;let element of elements()&quot;&gt;
    &lt;h3&gt;{{ element.nom }}&lt;/h3&gt;
    &lt;p&gt;{{ element.descripcio }}&lt;/p&gt;
  &lt;/div&gt;
&lt;/section&gt;</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Important:</strong> Els tres estats són <strong>mutuament excloents</strong>. En cada moment, només un bloc <code>*ngIf</code> s'hauria de mostrar.
</div>

    <h4>3.6.4. Taula d'estats i visibilitat</h4>
    <table>
      <thead>
        <tr>
          <th>Estat</th>
          <th>carregant</th>
          <th>error</th>
          <th>Què es mostra</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Inicial</td>
          <td><code>false</code></td>
          <td><code>null</code></td>
          <td>Contingut (probablement buit)</td>
        </tr>
        <tr>
          <td>Petició en curs</td>
          <td><code>true</code></td>
          <td><code>null</code></td>
          <td>Spinner + "Carregant…"</td>
        </tr>
        <tr>
          <td>Èxit</td>
          <td><code>false</code></td>
          <td><code>null</code></td>
          <td>Contingut amb dades</td>
        </tr>
        <tr>
          <td>Error</td>
          <td><code>false</code></td>
          <td><code>"missatge"</code></td>
          <td>Missatge error + botó reintent</td>
        </tr>
      </tbody>
    </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.7. Implementar indicador de càrrega</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>3.7.1. Spinner visual bàsic</h4>
    <p>Creeu un component o utilitzeu CSS per mostrar un spinner animat.</p>
    <p><strong>CSS pura:</strong></p>
    
    <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-left-color: #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  padding: 2rem;
}</code></pre>
  </div>
</div>

    <p><strong>HTML:</strong></p>
    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;section *ngIf=&quot;estatServei().carregant&quot; class=&quot;loading&quot;&gt;
  &lt;div class=&quot;spinner&quot; aria-label=&quot;Carregant contingut&quot;&gt;&lt;/div&gt;
  &lt;p role=&quot;status&quot;&gt;Carregant catàleg d&#39;elements…&lt;/p&gt;
&lt;/section&gt;</code></pre>
  </div>
</div>

    <h4>3.7.2. Mostrar abans de petició</h4>
    <p>Activeu l'estat <code>carregant: true</code> <strong>abans</strong> de fer la petició HTTP.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">carregarElements(): void {
  this.estat.set({ carregant: true, error: null });

  this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`)
    .subscribe({
      next: dades =&gt; { /* ... */ },
      error: err =&gt; { /* ... */ }
    });
}</code></pre>
  </div>
</div>

    <h4>3.7.3. Amagar després de resposta</h4>
    <p>Desactiveu <code>carregant: false</code> tant en cas d'<strong>èxit</strong> com d'<strong>error</strong>.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`)
  .subscribe({
    next: dades =&gt; {
      this.elements.set(dades);
      this.estat.set({ carregant: false, error: null });
    },
    error: err =&gt; {
      this.elements.set([]);
      this.estat.set({
        carregant: false,
        error: &#39;Petició fallida&#39;
      });
    }
  });</code></pre>
  </div>
</div>

    <h4>3.7.4. Accessibilitat del spinner</h4>
    <p>Utilitzeu atributs ARIA per assegurar que els lectors de pantalla anunciïn l'estat de càrrega.</p>
    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;div class=&quot;spinner&quot;
     role=&quot;status&quot;
     aria-live=&quot;polite&quot;
     aria-label=&quot;Carregant contingut&quot;&gt;
  &lt;span class=&quot;sr-only&quot;&gt;Carregant…&lt;/span&gt;
&lt;/div&gt;</code></pre>
  </div>
</div>

    <p><strong>sr-only (screen reader only):</strong></p>
    
    <div class="code-block" data-lang="css" role="region" aria-label="Bloc de codi css">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">CSS</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-css">.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.8. Missatges d'error amigables</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>3.8.1. Traduir errors tècnics a llenguatge d'usuari</h4>
    <p>Els codis HTTP (500, 503) i missatges tècnics (<code>ERR_CONNECTION_REFUSED</code>) no són útils per a usuaris finals. Traduïu-los a llenguatge planer.</p>
    <p><strong>Taula de traduccions:</strong></p>
    <table>
      <thead>
        <tr>
          <th>Error tècnic</th>
          <th>Missatge amigable</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>err.status === 0</code></td>
          <td>"No hem pogut connectar amb el servidor. Reviseu la connexió a internet."</td>
        </tr>
        <tr>
          <td><code>err.status === 500</code></td>
          <td>"El servidor està experimentant problemes tècnics. Proveu-ho més tard."</td>
        </tr>
        <tr>
          <td><code>err.status === 503</code></td>
          <td>"El servei està temporalment no disponible. Proveu-ho d'aquí a uns minuts."</td>
        </tr>
        <tr>
          <td><code>err.status === 404</code></td>
          <td>"No hem trobat les dades sol·licitades. Contacteu amb suport."</td>
        </tr>
        <tr>
          <td><code>err.status === 401</code></td>
          <td>"No teniu permisos per accedir a aquestes dades. Inicieu sessió."</td>
        </tr>
        <tr>
          <td>Timeout</td>
          <td>"La petició ha trigat massa. El servidor pot estar saturat. Reintenteu."</td>
        </tr>
        <tr>
          <td>JSON malformat</td>
          <td>"Les dades rebudes no són vàlides. Contacteu amb suport tècnic."</td>
        </tr>
      </tbody>
    </table>
    <h4>3.8.2. Implementació al servei</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">private obtenirMissatgeError(err: any): string {
  if (err.status === 0) {
    return &#39;No hem pogut connectar amb el servidor. Reviseu la connexió a internet.&#39;;
  }

  if (err.status &gt;= 500) {
    return &#39;El servidor està experimentant problemes tècnics. Proveu-ho més tard.&#39;;
  }

  if (err.status === 404) {
    return &#39;No hem trobat les dades sol·licitades.&#39;;
  }

  if (err.status === 401 || err.status === 403) {
    return &#39;No teniu permisos per accedir a aquestes dades.&#39;;
  }

  return &#39;Ha ocorregut un error inesperat. Torneu-ho a provar.&#39;;
}

carregarElements(): void {
  this.estat.set({ carregant: true, error: null });

  this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`).subscribe({
    next: dades =&gt; {
      this.elements.set(dades);
      this.estat.set({ carregant: false, error: null });
    },
    error: err =&gt; {
      this.elements.set([]);
      this.estat.set({
        carregant: false,
        error: this.obtenirMissatgeError(err)
      });
    }
  });
}</code></pre>
  </div>
</div>

    <h4>3.8.3. Accions recomanades</h4>
    <p>Proporcioneu sempre una acció que l'usuari pugui fer: botó "Torneu-ho a provar", enllaç a pàgina d'ajuda, contacte amb suport.</p>
    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;section *ngIf=&quot;estatServei().error as missatge&quot; class=&quot;error&quot;&gt;
  &lt;p class=&quot;error-message&quot;&gt;&lt;i class=&quot;bi bi-exclamation-triangle&quot;&gt;&lt;/i&gt; {{ missatge }}&lt;/p&gt;
  &lt;button type=&quot;button&quot; (click)=&quot;reintentar()&quot; class=&quot;retry-button&quot;&gt;
    &lt;i class=&quot;bi bi-arrow-clockwise&quot;&gt;&lt;/i&gt; Torneu-ho a provar
  &lt;/button&gt;
  &lt;a href=&quot;/ajuda&quot; class=&quot;help-link&quot;&gt;
    Necessiteu ajuda?
  &lt;/a&gt;
&lt;/section&gt;</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.9. Exemple pràctic: petició amb gestió completa</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <p><strong>Escenari:</strong> Crear servei i component amb gestió completa d'estats.</p>
    <h4>3.9.1. Servei complet amb gestió d'estats</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { HttpClient } from &#39;@angular/common/http&#39;;
import { Injectable, inject, signal } from &#39;@angular/core&#39;;
import { Element } from &#39;../models/element.model&#39;;

interface EstatServei {
  carregant: boolean;
  error: string | null;
}

@Injectable({ providedIn: &#39;root&#39; })
export class ElementService {
  private readonly http = inject(HttpClient);
  private readonly apiUrl = &#39;https://jsonplaceholder.typicode.com&#39;;

  private readonly elements = signal&lt;Element[]&gt;([]);
  private readonly estat = signal&lt;EstatServei&gt;({ carregant: false, error: null });

  carregarElements(): void {
    this.estat.set({ carregant: true, error: null });

    this.http.get&lt;Element[]&gt;(`${this.apiUrl}/users`).subscribe({
      next: dades =&gt; {
        this.elements.set(dades);
        this.estat.set({ carregant: false, error: null });
      },
      error: err =&gt; {
        console.error(&#39;Error carregant elements:&#39;, err);
        this.elements.set([]);
        this.estat.set({
          carregant: false,
          error: this.obtenirMissatgeError(err)
        });
      }
    });
  }

  reintentar(): void {
    this.carregarElements();
  }

  private obtenirMissatgeError(err: any): string {
    if (err.status === 0) {
      return &#39;No hem pogut connectar amb el servidor. Reviseu la connexió.&#39;;
    }
    if (err.status &gt;= 500) {
      return &#39;El servidor està experimentant problemes. Proveu-ho més tard.&#39;;
    }
    return &#39;Ha ocorregut un error inesperat. Torneu-ho a provar.&#39;;
  }

  elements$() { return this.elements.asReadonly(); }
  estat$() { return this.estat.asReadonly(); }
}</code></pre>
  </div>
</div>

    <h4>3.9.2. Component amb visualització d'estats</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { Component, OnInit, computed, inject } from &#39;@angular/core&#39;;
import { CommonModule } from &#39;@angular/common&#39;;
import { ElementService } from &#39;./services/element.service&#39;;

@Component({
  selector: &#39;app-root&#39;,
  standalone: true,
  imports: [CommonModule],
  templateUrl: &#39;./app.component.html&#39;,
  styleUrls: [&#39;./app.component.scss&#39;]
})
export class AppComponent implements OnInit {
  private readonly elementService = inject(ElementService);

  elements = computed(() =&gt; this.elementService.elements$()());
  estatServei = computed(() =&gt; this.elementService.estat$()());

  ngOnInit(): void {
    this.elementService.carregarElements();
  }

  reintentar(): void {
    this.elementService.reintentar();
  }
}</code></pre>
  </div>
</div>

    <h4>3.9.3. Plantilla amb tots els estats</h4>
    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;header&gt;
  &lt;h1&gt;Catàleg d&#39;Elements&lt;/h1&gt;
&lt;/header&gt;

&lt;main&gt;
  &lt;section *ngIf=&quot;estatServei().carregant&quot; class=&quot;loading&quot;&gt;
    &lt;div class=&quot;spinner&quot; aria-label=&quot;Carregant&quot;&gt;&lt;/div&gt;
    &lt;p role=&quot;status&quot;&gt;Carregant catàleg d&#39;elements…&lt;/p&gt;
  &lt;/section&gt;

  &lt;section *ngIf=&quot;estatServei().error as missatge&quot; class=&quot;error&quot;&gt;
    &lt;p role=&quot;alert&quot; class=&quot;error-message&quot;&gt;
      &lt;i class=&quot;bi bi-exclamation-triangle&quot;&gt;&lt;/i&gt; {{ missatge }}
    &lt;/p&gt;
    &lt;button type=&quot;button&quot; (click)=&quot;reintentar()&quot; class=&quot;retry-button&quot;&gt;
      &lt;i class=&quot;bi bi-arrow-clockwise&quot;&gt;&lt;/i&gt; Torneu-ho a provar
    &lt;/button&gt;
  &lt;/section&gt;

  &lt;section *ngIf=&quot;!estatServei().carregant &amp;&amp; !estatServei().error&quot; class=&quot;content&quot;&gt;
    &lt;div *ngIf=&quot;elements().length === 0&quot; class=&quot;empty-state&quot;&gt;
      &lt;p&gt;No hi ha elements al catàleg.&lt;/p&gt;
    &lt;/div&gt;

    &lt;div *ngFor=&quot;let element of elements()&quot; class=&quot;element-card&quot;&gt;
      &lt;h3&gt;{{ element.name }}&lt;/h3&gt;
      &lt;p&gt;{{ element.email }}&lt;/p&gt;
    &lt;/div&gt;
  &lt;/section&gt;
&lt;/main&gt;</code></pre>
  </div>
</div>

    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Resultat:</strong> Aplicació amb spinner durant càrrega, missatge d'error amb botó de reintent, i visualització de dades quan tot funciona correctament.
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.10. Reintents: quan i com tornar a intentar</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>3.10.1. Reintents manuals vs automàtics</h4>
    <p><strong>Reintents manuals:</strong> L'usuari decideix quan reintentar (botó "Torneu-ho a provar").</p>
    <p><i class="bi bi-check-circle text-success" aria-hidden="true"></i> <strong>Avantatges:</strong> Control total de l'usuari, no consumeix recursos innecessaris.</p>
    <p><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> <strong>Inconvenients:</strong> Requereix acció explícita de l'usuari.</p>
    <p><strong>Reintents automàtics:</strong> L'aplicació reintenta automàticament després d'un temps.</p>
    <p><i class="bi bi-check-circle text-success" aria-hidden="true"></i> <strong>Avantatges:</strong> Experiència més fluida, soluciona errors temporals automàticament.</p>
    <p><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> <strong>Inconvenients:</strong> Pot saturar el servidor si hi ha errors persistents.</p>
    <h4>3.10.2. Implementació de reintents manuals</h4>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">reintentar(): void {
  this.carregarElements();
}</code></pre>
  </div>
</div>

    
    <div class="code-block" data-lang="html" role="region" aria-label="Bloc de codi html">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">HTML</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-html">&lt;button type=&quot;button&quot; (click)=&quot;reintentar()&quot;&gt;
  Torneu-ho a provar
&lt;/button&gt;</code></pre>
  </div>
</div>

    <h4>3.10.3. Implementació de reintents automàtics amb delays</h4>
    <p>Utilitzeu l'operador RxJS <code>retry</code> amb <code>delay</code> per implementar reintents automàtics.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { retry } from &#39;rxjs&#39;;

carregarElements(): void {
  this.estat.set({ carregant: true, error: null });

  this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`)
    .pipe(
      retry({
        count: 3,
        delay: 2000
      })
    )
    .subscribe({
      next: dades =&gt; {
        this.elements.set(dades);
        this.estat.set({ carregant: false, error: null });
      },
      error: err =&gt; {
        this.elements.set([]);
        this.estat.set({
          carregant: false,
          error: &#39;No hem pogut carregar el catàleg després de 3 intents.&#39;
        });
      }
    });
}</code></pre>
  </div>
</div>

    <h4>3.10.4. Delays progressius (exponential backoff)</h4>
    <p>Per evitar saturar el servidor, incrementeu el temps entre reintents.</p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">import { retry, timer } from &#39;rxjs&#39;;

carregarElements(): void {
  this.estat.set({ carregant: true, error: null });

  this.http.get&lt;Element[]&gt;(`${this.apiUrl}/elements`)
    .pipe(
      retry({
        count: 3,
        delay: (error, retryCount) =&gt; {
          const delayMs = Math.pow(2, retryCount) * 1000;
          console.log(`Reintent ${retryCount} d&#39;aquí a ${delayMs}ms`);
          return timer(delayMs);
        }
      })
    )
    .subscribe({
      next: dades =&gt; {
        this.elements.set(dades);
        this.estat.set({ carregant: false, error: null });
      },
      error: err =&gt; {
        this.elements.set([]);
        this.estat.set({
          carregant: false,
          error: this.obtenirMissatgeError(err)
        });
      }
    });
}</code></pre>
  </div>
</div>

    <h4>3.10.5. Límits de reintents</h4>
    <p>Establiu un màxim de reintents per evitar bucles infinits.</p>
    <p><strong>Taula de polítiques de reintent:</strong></p>
    <table>
      <thead>
        <tr>
          <th>Tipus d'error</th>
          <th>Reintentar?</th>
          <th>Màxim reintents</th>
          <th>Delay inicial</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Xarxa (0)</td>
          <td><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Sí</td>
          <td>3</td>
          <td>2s</td>
        </tr>
        <tr>
          <td>Timeout</td>
          <td><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Sí</td>
          <td>2</td>
          <td>3s</td>
        </tr>
        <tr>
          <td>500</td>
          <td><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Sí</td>
          <td>3</td>
          <td>5s</td>
        </tr>
        <tr>
          <td>502/503</td>
          <td><i class="bi bi-check-circle text-success" aria-hidden="true"></i> Sí</td>
          <td>2</td>
          <td>10s</td>
        </tr>
        <tr>
          <td>404</td>
          <td><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> No</td>
          <td>0</td>
          <td>-</td>
        </tr>
        <tr>
          <td>401/403</td>
          <td><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> No</td>
          <td>0</td>
          <td>-</td>
        </tr>
        <tr>
          <td>Format JSON</td>
          <td><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> No</td>
          <td>0</td>
          <td>-</td>
        </tr>
      </tbody>
    </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.11. Bones pràctiques</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>3.11.1. Checklist de gestió d'estats</h4>
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sempre proporcionar feedback visual durant peticions (spinner)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sempre capturar errors amb bloc error o catchError</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sempre mostrar missatges d'error amigables (no codis tècnics)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sempre proporcionar una acció de reintent</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sempre registrar errors a consola o servei de logging</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Mai deixar la UI en estat indefinit (sense spinner ni error)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Mai mostrar múltiples estats simultàniament</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

    <h4>3.11.2. Patrons antipatró a evitar</h4>
    <p><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> <strong>Antipatró 1: No capturar errors</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.http.get(url).subscribe(dades =&gt; {
  this.elements = dades;
});</code></pre>
  </div>
</div>

    <p><i class="bi bi-check-circle text-success" aria-hidden="true"></i> <strong>Correcte:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.http.get(url).subscribe({
  next: dades =&gt; { /* ... */ },
  error: err =&gt; { /* gestionar error */ }
});</code></pre>
  </div>
</div>

    <p><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> <strong>Antipatró 2: Spinner sense desactivar</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">carregarElements(): void {
  this.carregant = true;
  this.http.get(url).subscribe(dades =&gt; {
    this.elements = dades;
  });
}</code></pre>
  </div>
</div>

    <p><i class="bi bi-check-circle text-success" aria-hidden="true"></i> <strong>Correcte:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">this.http.get(url).subscribe({
  next: dades =&gt; {
    this.elements = dades;
    this.carregant = false;
  },
  error: err =&gt; {
    this.carregant = false;
  }
});</code></pre>
  </div>
</div>

    <p><i class="bi bi-x-circle text-danger" aria-hidden="true"></i> <strong>Antipatró 3: Missatges tècnics per a usuaris</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">error: err =&gt; {
  alert(`Error ${err.status}: ${err.statusText}`);
}</code></pre>
  </div>
</div>

    <p><i class="bi bi-check-circle text-success" aria-hidden="true"></i> <strong>Correcte:</strong></p>
    
    <div class="code-block" data-lang="typescript" role="region" aria-label="Bloc de codi typescript">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">TYPESCRIPT</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-typescript">error: err =&gt; {
  this.error = this.obtenirMissatgeAmigable(err);
}</code></pre>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.12. Resolució de problemes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>3.12.1. Errors transversals</h4>
    <table>
      <thead>
        <tr>
          <th>Símptoma</th>
          <th>Causa probable</th>
          <th>Solució</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Spinner no apareix</td>
          <td><code>carregant: true</code> no s'estableix abans de petició</td>
          <td>Verificar ordre: primer <code>this.estat.set({ carregant: true })</code>, després <code>this.http.get()</code></td>
        </tr>
        <tr>
          <td>Spinner no desapareix</td>
          <td>Falta <code>carregant: false</code> a next o error</td>
          <td>Afegir <code>this.estat.set({ carregant: false })</code> a tots dos blocs</td>
        </tr>
        <tr>
          <td>Errors no es capturen</td>
          <td>Falta bloc error a subscribe</td>
          <td>Afegir <code>error: err => { /* gestionar */ }</code></td>
        </tr>
        <tr>
          <td>Missatge error no es mostra</td>
          <td><code>*ngIf="estatServei().error"</code> incorrecte</td>
          <td>Verificar que error té valor truthy (no null ni "")</td>
        </tr>
        <tr>
          <td>Múltiples estats visibles</td>
          <td>Condicionals *ngIf mal configurats</td>
          <td>Assegurar estats mutuament excloents amb <code>!carregant && !error</code></td>
        </tr>
        <tr>
          <td>Component no reacciona a canvis</td>
          <td>No utilitzeu signal correctament</td>
          <td>Utilitzar <code>.set()</code> per actualitzar signal, no reassignació directa</td>
        </tr>
        <tr>
          <td>Peticions duplicades</td>
          <td>ngOnInit crida <code>carregarElements()</code> múltiples vegades</td>
          <td>Verificar que OnInit només s'executa 1 cop</td>
        </tr>
        <tr>
          <td>Reintent no funciona</td>
          <td>Mètode <code>reintentar()</code> no crida <code>carregarElements()</code></td>
          <td>Implementar <code>reintentar() { this.carregarElements(); }</code></td>
        </tr>
      </tbody>
    </table>
    <h4>3.12.2. Errors de configuració</h4>
    <table>
      <thead>
        <tr>
          <th>Error</th>
          <th>Causa</th>
          <th>Solució</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>HttpClient not provided</td>
          <td><code>provideHttpClient()</code> no afegit</td>
          <td>Afegir a <code>main.ts</code>: <code>providers: [provideHttpClient()]</code></td>
        </tr>
        <tr>
          <td>Cannot read property 'subscribe'</td>
          <td>Observable no retornat correctament</td>
          <td>Verificar que <code>this.http.get()</code> retorna Observable</td>
        </tr>
        <tr>
          <td>Signal not reactive</td>
          <td>Utilitzeu <code>computed()</code> incorrectament</td>
          <td><code>elements = computed(() => this.service.elements$()())</code></td>
        </tr>
        <tr>
          <td>Error "signal is not a function"</td>
          <td>Import incorrecte de signals</td>
          <td><code>import { signal } from '@angular/core'</code></td>
        </tr>
        <tr>
          <td>Estats desincronitzats</td>
          <td>Ús de variables locals en lloc de signal</td>
          <td>Migrar a signal: <code>private estat = signal&lt;EstatServei&gt;(...)</code></td>
        </tr>
      </tbody>
    </table>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.13. Prompts d'IA</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Expert Angular. <strong>Context:</strong> Estic aprenent gestió d'estats en peticions HTTP. <strong>Tasca:</strong> Explica els 3 estats principals d'una petició HTTP (carregant, èxit, error) i com reflectir-los a la UI amb Angular signals. Proporciona exemples de codi concrets. <strong>Format:</strong> Explicació clara amb codi executable.</div>
  </div>
</div>

    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Debugger Angular. <strong>Context:</strong> El meu spinner no desapareix després de la petició. <strong>Tasca:</strong> Identifica possibles causes: falta desactivar carregant en bloc error, signal no actualitzat correctament, condicional *ngIf incorrecte, o errors de sintaxi. <strong>Format:</strong> Llista de verificació amb passos de debugging.</div>
  </div>
</div>

    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt"><strong>Rol:</strong> Arquitecte de programari. <strong>Context:</strong> Vull implementar reintents automàtics amb delays progressius. <strong>Tasca:</strong> Explica com utilitzar l'operador retry de RxJS amb exponential backoff, quan és apropiat reintentar automàticament vs manualment, i com establir límits de reintents. <strong>Format:</strong> Guia pas a pas amb exemples de codi.</div>
  </div>
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.14. Autoavaluació</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <h4>Funcionalitat bàsica</h4>
    
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He vist el spinner de càrrega durant peticions HTTP</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He comprovat que les dades es mostren correctament després de càrrega exitosa</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He verificat que els errors de xarxa mostren missatge amigable</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He confirmat que el botó "Torneu-ho a provar" recupera les dades després d'error</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

    <h4>Gestió d'estats</h4>
    
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He implementat signal amb estats carregant i error al servei</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He capturat errors amb bloc error a subscribe</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He traduït errors tècnics (codis HTTP) a missatges amigables</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He assegurat que els tres estats són mutuament excloents</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He creat interfície <code>EstatServei</code> amb camps carregant i error</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He organitzat el codi amb funcions privades (<code>obtenirMissatgeError</code>)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He mantingut la separació de responsabilitats (servei vs component)</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

    <h4>Control de versions</h4>
    
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He fet commit dels canvis al servei amb gestió d'estats</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He fet commit de la plantilla amb les 3 seccions condicionals</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">He executat <code>ng serve</code> sense errors de compilació</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

    <h4>Competències adquirides</h4>
    
    <!-- Component: Checklist (sense contenidor extern) -->

<div class="checklist-list" role="group" aria-label="Checklist">
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé identificar els tipus d'errors principals (xarxa, servidor, format)</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc capturar errors amb bloc error de subscribe</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé utilitzar l'operador catchError de RxJS</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc traduir codis HTTP a missatges amigables</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé implementar indicadors de càrrega amb signals</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc gestionar els tres estats (carregant, èxit, error) amb *ngIf</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé crear spinners CSS animats i accessibles</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc assegurar que només un estat és visible a cada moment</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé implementar reintents manuals amb botó</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc configurar reintents automàtics amb retry de RxJS</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc quan és apropiat reintentar automàticament vs manualment</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé establir límits de reintents i delays progressius</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc crear missatges d'error amb accions recomanades</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Sé utilitzar atributs ARIA per spinners accessibles</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Entenc la importància de feedback immediat a l'usuari</div>
  </div>
  
  <div class="checklist-item" role="checkbox" tabindex="0" aria-checked="false">
    <div class="checklist-checkbox" aria-hidden="true"></div>
    <div class="checklist-text">Puc proporcionar múltiples opcions de recuperació (reintent, ajuda)</div>
  </div>
  
  <!-- Interacció via JS en assets/js/site.js: click/teclat actualitza aria-checked -->
</div>

  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.15. Síntesi</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <p>Disposeu d'una <strong>aplicació Angular amb gestió completa d'estats</strong> que proporciona feedback clar i opcions de recuperació davant errors. L'aplicació ja no és una "caixa negra" que deixa l'usuari desorientat, sinó que comunica clarament el seu estat en cada moment.</p>
    <p>Heu construït un sistema robust que inclou:</p>
    <ul>
      <li><strong>Indicadors de càrrega:</strong> Spinner animat i missatge "Carregant…" durant peticions asíncrones</li>
      <li><strong>Captura d'errors:</strong> Bloc error a subscribe que captura tots els errors de peticions HTTP</li>
      <li><strong>Missatges amigables:</strong> Traducció de codis tècnics (500, 0, 503) a llenguatge planer amb accions recomanades</li>
      <li><strong>Reintents manuals:</strong> Botó "Torneu-ho a provar" que permet recuperació després d'errors</li>
      <li><strong>Gestió amb signals:</strong> Ús de signal d'Angular per mantenir estats reactius que actualitzen la UI automàticament</li>
    </ul>
    <p>A les següents lectures aplicareu aquests conceptes a escenaris més complexos amb múltiples peticions simultànies, gestió d'estat global amb NgRx, i integració amb formularis reactius per validació en temps real.</p>
  
  </div>
</div>


  
  <!-- Component: Punt destacat dins d'una secció -->


<div class="section-point" >
  <div class="component-header section-point-header" role="heading" aria-level="4">
    <i class="bi bi-journal-text" aria-hidden="true"></i>
    <div class="section-point-meta">
      <div class="section-point-title">3.16. Repàs de conceptes</div>
      
    </div>
  </div>
  <div class="section-point-body component-content">
    
    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Gestió d'estats HTTP:</strong> Control dels tres moments crítics d'una petició: <strong>carregant</strong> (loading), <strong>èxit</strong> (success), <strong>error</strong> (error). Cada estat requereix una resposta diferent a la UI.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Estats mutuament excloents:</strong> Només un estat pot estar actiu en cada moment. Si <code>carregant: true</code>, llavors <code>error: null</code>. Si <code>error: 'missatge'</code>, llavors <code>carregant: false</code>.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Error de xarxa (status 0):</strong> Error que impedeix que la petició arribi al servidor. Causes: connexió caiguda, DNS no resol, timeout, bloqueig per tallafocs.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Error de servidor (500-599):</strong> El servidor rep la petició però retorna codi d'error. 500 (error intern), 502 (bad gateway), 503 (service unavailable), 504 (gateway timeout).</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Error de format de dades:</strong> Servidor respon 200 OK però les dades no tenen el format esperat. JSON malformat, estructura diferent, tipus de dades incorrectes.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Bloc error de subscribe:</strong> Callback que s'executa només si la petició falla. Captura errors localment sense propagar-los. Sintaxi: <code>error: err => { /* gestionar */ }</code>.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>catchError (RxJS):</strong> Operador que captura errors i retorna un observable alternatiu (fallback). Evita que l'error aborti la subscripció. Exemple: <code>catchError(err => of([]))</code>.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Signal d'estat:</strong> Variable reactiva que manté l'estat actual de la petició. Permet que la UI reaccioni automàticament als canvis. Exemple: <code>signal&lt;EstatServei&gt;({ carregant: false, error: null })</code>.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Spinner:</strong> Indicador visual animat que mostra que una operació està en curs. Implementat amb CSS (animació rotate 360deg) i atributs ARIA per accessibilitat.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Missatge amigable:</strong> Traducció d'errors tècnics (codis HTTP) a llenguatge planer per a usuaris finals. Exemple: <code>err.status === 0</code> → 'No hem pogut connectar amb el servidor'.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Reintent manual:</strong> L'usuari decideix quan reintentar amb un botó. Avantatge: control total. Inconvenient: requereix acció explícita.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Reintent automàtic:</strong> Aplicació reintenta automàticament després d'un temps. Implementat amb operador <code>retry</code> de RxJS. Avantatge: experiència fluida. Inconvenient: pot saturar servidor.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Exponential backoff:</strong> Estratègia de reintents amb delays progressius. Primer intent: 2s, segon: 4s, tercer: 8s. Formula: <code>Math.pow(2, retryCount) * 1000</code>.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Atributs ARIA:</strong> Atributs HTML per accessibilitat. <code>role='status'</code> indica estat, <code>aria-live='polite'</code> anuncia canvis, <code>aria-label</code> descriu element.</p>
  </div>
</div>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Antipatró:</strong> Patró de codi incorrecte o contraproduent. Exemples: no capturar errors, spinner sense desactivar, missatges tècnics per a usuaris.</p>
  </div>
</div>

  
  </div>
</div>


</div>


<!-- Exercicis proposats (si estan definits) -->


<!-- Recursos addicionals -->


<!-- Glossari del bloc -->



<!-- Schema.org structured data per SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "name": "Bloc 1: Serveis i separació de responsabilitats",
  "description": "Creació de serveis, injecció de dependències i patrons de servei Angular",
  "author": {
    "@type": "Organization",
    "name": "Institut Obert de Catalunya"
  },
  "provider": {
    "@type": "Organization",
    "name": "Institut Obert de Catalunya"
  },
  "educationalLevel": "Intermediate",
  "learningResourceType": "Course Module",
  "inLanguage": "ca",
  
  
  "isPartOf": {
    "@type": "Course",
    "name": "DA2_OA01 - Programació Avançada (Angular) — IOC",
    "description": "Materials del mòdul DA2_OA01 - Programació Avançada amb Angular"
  }
}
</script>

                </div>
            </article>
            
            <!-- Navegació entre pàgines -->
            
            <nav class="page-navigation" role="navigation" aria-label="Navegació entre blocs">
                <div class="nav-links-container">
                    
                    
                    
                    
                    
                    
                    
                    
                        
                    
                        
                    
                        
                            
                            
                    
                    
                    
                        
                            
                                
                                
                                
                                
                                
                                
                                
                                
                                
                                    
                                
                                    
                                        
                                        
                                
                                
                    
                    
                    <div class="nav-link-wrapper">
                        
                    </div>
                    
                    <div class="nav-link-wrapper">
                        
                        <a href="/ioc/da2_oa01/unitat-3/bloc-2/" class="nav-button" aria-label="Bloc següent: Gestió d'estat i comunicació entre components">Següent →</a>
                        
                    </div>
                </div>
            </nav>
            
        </main>
    </div>

    <!-- Footer fix -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-info">
                Versió v1.0
            </div>
            <div class="footer-progress" aria-label="Progrés de lectura"><!-- Progrés per unitats (posició de la unitat actual) --><div class="progress-group course-progress">
                    <span class="progress-label">Unitat</span>
                    <span class="progress-text" data-pos="3" data-total="4">(3/4)</span>
                    <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 75%"></div></div>
                </div><!-- Progrés per blocs dins de la unitat --><div class="progress-group unit-progress">
                        <span class="progress-label">Bloc</span>
                        <span class="progress-text" data-pos="1" data-total="4">(1/4)</span>
                        <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 25%"></div></div>
                    </div>

                    <!-- Progrés per seccions (H2) dins del bloc --><div class="progress-group section-progress" data-scan-sections="true">
                        <span class="progress-label">Secció</span>
                        <span class="progress-text" data-pos="1" data-total="3">(1/3)</span>
                        <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 33%"></div></div>
                    </div></div>
            <div class="footer-actions" aria-label="Accions ràpides">
                <button class="task-btn footer-collapse-toggle" type="button" aria-expanded="true" aria-label="Amaga el peu de pàgina">
                  <i class="bi bi-chevron-down" aria-hidden="true"></i>
                </button>
                <a href="#top" id="footer-btn-top" class="task-btn" aria-label="Anar a l'inici">↑</a>
                <a href="#bottom" id="footer-btn-bottom" class="task-btn" aria-label="Anar al final">↓</a>
                <a href="#next" id="footer-btn-next" class="task-btn" aria-label="Secció següent">→</a>
                <a href="#prev" id="footer-btn-prev" class="task-btn" aria-label="Secció anterior">←</a>
                <a href="#bookmark" id="footer-btn-bookmark" class="task-btn" aria-label="Desar marcador" title="Desar marcador">
                  <i class="bi bi-bookmark" aria-hidden="true"></i>
                </a>
                <a href="/ioc/da2_oa01/quadern.html" class="task-btn" aria-label="Obrir quadern complet" title="Quadern">
                  <i class="bi bi-journal-text" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Config global per Quadern -->
    <script>
      window.siteConfig = window.siteConfig || {
        baseurl: "/ioc/da2_oa01",
        title: "DA2_OA01 - Programació Avançada (Angular)",
        version: "v1.0",
        cicle_modul: "DA2_OA01"
      };
    </script>
    <!-- Scripts del lloc -->
    <script src="/ioc/da2_oa01/assets/js/site.js" defer></script>
    <!-- Quadern Notes v2 (nou sistema) -->
    <script src="/ioc/da2_oa01/assets/js/quadern-app/constants.js" defer></script>
    <script src="/ioc/da2_oa01/assets/js/quadern-app/utils.js" defer></script>
    <script src="/ioc/da2_oa01/assets/js/quadern-app/store.js" defer></script>
    <script src="/ioc/da2_oa01/assets/js/quadern-app/panel.js" defer></script>
    <script src="/ioc/da2_oa01/assets/js/index-notes.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" defer></script>
    <script src="/ioc/da2_oa01/assets/js/quadern-app/rich-editor.js" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', function(){
        if (window.Quadern && typeof window.Quadern.bootstrapNotes === 'function') {
          try { window.Quadern.bootstrapNotes(); } catch(e) {}
        }
        if (window.Quadern && window.Quadern.RichEditor && typeof window.Quadern.RichEditor.autoInit === 'function') {
          try { window.Quadern.RichEditor.autoInit(); } catch(e) {}
        }
      });
    </script>
</body>
</html>

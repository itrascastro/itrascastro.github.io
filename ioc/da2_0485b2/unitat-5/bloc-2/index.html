<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <title>Bloc 2: E/S basada en fitxers | Programació II - IOC</title>
    <meta name="description" content="Material educatiu - Institut Obert de Catalunya">
    <meta name="page-unitat" content="5">
    <meta name="page-bloc" content="2">
    
    <!-- SEO Tags -->
    <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Bloc 2: E/S basada en fitxers | Programació II</title>
<meta name="generator" content="Jekyll v3.10.0" />
<meta property="og:title" content="Bloc 2: E/S basada en fitxers" />
<meta property="og:locale" content="ca_ES" />
<meta name="description" content="Lectura, escriptura i gestió de fitxers en Java amb fluxos, excepcions i objectes" />
<meta property="og:description" content="Lectura, escriptura i gestió de fitxers en Java amb fluxos, excepcions i objectes" />
<link rel="canonical" href="http://localhost:4001/ioc/da2_0485b2/unitat-5/bloc-2/" />
<meta property="og:url" content="http://localhost:4001/ioc/da2_0485b2/unitat-5/bloc-2/" />
<meta property="og:site_name" content="Programació II" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Bloc 2: E/S basada en fitxers" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"Lectura, escriptura i gestió de fitxers en Java amb fluxos, excepcions i objectes","headline":"Bloc 2: E/S basada en fitxers","url":"http://localhost:4001/ioc/da2_0485b2/unitat-5/bloc-2/"}</script>
<!-- End Jekyll SEO tag -->

    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="/ioc/da2_0485b2/assets/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="canonical" href="http://localhost:4001/ioc/da2_0485b2/unitat-5/bloc-2/">
    <!-- Rich editor styles (for embedded notes panel) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.snow.min.css">
    <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" disabled>
    <link rel="stylesheet" href="/ioc/da2_0485b2/assets/css/quadern-rich-editor.css">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/ioc/da2_0485b2/assets/images/favicon.ico">
    
    <!-- RSS Feed -->
    <link type="application/atom+xml" rel="alternate" href="http://localhost:4001/ioc/da2_0485b2/feed.xml" title="Programació II" />

    <!-- Syntax Highlighting (Prism) -->
    <link id="prism-theme" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-java.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-jsx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-html.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-tsx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>

    <!-- Code Block Component -->
    <link rel="stylesheet" href="/ioc/da2_0485b2/assets/css/code-block.css">
    <script src="/ioc/da2_0485b2/assets/js/code-block.js"></script>

</head>

<body class="bloc-layout">
    <!-- Skip to content for accessibility -->
    <a class="skip-link" href="#main-content">Salta al contingut principal</a>


    
    <!-- Header fix -->
    <header class="header" role="banner" id="top">
        <div class="header-brand">
            <a href="/ioc/da2_0485b2/" class="logo-link">
                <img src="/ioc/da2_0485b2/assets/images/logo_IOC_light.jpg" 
                     alt="Institut Obert de Catalunya" 
                     class="logo logo-light">
                <img src="/ioc/da2_0485b2/assets/images/logo_IOC_dark.png" 
                     alt="Institut Obert de Catalunya" 
                     class="logo logo-dark">
            </a>
            <a href="/ioc/da2_0485b2/" class="title-link">
                <h1>DA2_0485B2 - Programació II</h1>
            </a>
        </div>
        <div class="header-controls">
            <div class="nav-dropdown" id="nav-dropdown">
                <button class="nav-dropdown-btn" id="nav-dropdown-btn">Navegació</button>
                <div class="nav-dropdown-content" id="nav-dropdown-content">
                    <a href="/ioc/da2_0485b2/" class="nav-dropdown-item ">Índex del Curs</a>
                    
                        
                            <a href="/ioc/da2_0485b2/unitat-5/bloc-1/" class="nav-dropdown-item ">
                                Unitat 5 - Bloc 1: Conceptes bàsics d'E/S per consola
                            </a>
                        
                            <a href="/ioc/da2_0485b2/unitat-5/bloc-2/" class="nav-dropdown-item current">
                                Unitat 5 - Bloc 2: E/S basada en fitxers
                            </a>
                        
                    
                        
                            <a href="/ioc/da2_0485b2/unitat-6/bloc-1/" class="nav-dropdown-item ">
                                Unitat 6 - Bloc 1: Estructures de dades bàsiques
                            </a>
                        
                            <a href="/ioc/da2_0485b2/unitat-6/bloc-2/" class="nav-dropdown-item ">
                                Unitat 6 - Bloc 2: Col·leccions i tipus de dades avançats
                            </a>
                        
                    
                        
                            <a href="/ioc/da2_0485b2/unitat-7/bloc-1/" class="nav-dropdown-item ">
                                Unitat 7 - Bloc 1: Herència, polimorfisme i composició
                            </a>
                        
                            <a href="/ioc/da2_0485b2/unitat-7/bloc-2/" class="nav-dropdown-item ">
                                Unitat 7 - Bloc 2: Característiques avançades i abstracció
                            </a>
                        
                    
                        
                            <a href="/ioc/da2_0485b2/unitat-8/bloc-1/" class="nav-dropdown-item ">
                                Unitat 8 - Bloc 1: Fonaments de bases de dades orientades a objectes
                            </a>
                        
                            <a href="/ioc/da2_0485b2/unitat-8/bloc-2/" class="nav-dropdown-item ">
                                Unitat 8 - Bloc 2: Gestió i manteniment de dades
                            </a>
                        
                    
                </div>
            </div>
            <button class="theme-toggle" id="theme-toggle">Mode Fosc</button>
        </div>
    </header>

    <div class="container">
        <!-- Sidebar Navegació -->
        
        <aside class="sidebar">
            <div class="sidebar-scroll">
                <!-- Contingut d'aquest Bloc -->
                <div class="sidebar-section">
                    <h3>Contingut del Bloc</h3>
                    

    
    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat5_Bloc2_Seccio1" class="nav-link" data-section="Unitat5_Bloc2_Seccio1">Conceptes Bàsics d'E/S amb Fitxers</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat5_Bloc2_Seccio2" class="nav-link" data-section="Unitat5_Bloc2_Seccio2">Gestió d'Excepcions</a>
        </div>
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat5_Bloc2_Seccio3" class="nav-link" data-section="Unitat5_Bloc2_Seccio3">Lectura de Fitxers i Emmagatzematge en Memòria</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat5_Bloc2_Seccio4" class="nav-link" data-section="Unitat5_Bloc2_Seccio4">Utilització d'Objectes per a la Gestió de Dades</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat5_Bloc2_Seccio5" class="nav-link" data-section="Unitat5_Bloc2_Seccio5">Rendiment i Bones Pràctiques</a>
        </div>
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    

    
    
    
    
        
        
        
        
        
        
        
        <div class="nav-item">
            <a href="#Unitat5_Bloc2_Seccio6" class="nav-link" data-section="Unitat5_Bloc2_Seccio6">Exercicis Pràctics</a>
        </div>
    



                </div>
            </div>
        </aside>
        

        <main class="main-content" role="main" id="main-content">
            
            <!-- Navegació horizontal -->
            
            <nav class="horizontal-nav" aria-label="Navegació de ruta">
                <div class="horizontal-nav-list">
                    <a href="/ioc/da2_0485b2/" class="horizontal-nav-item">Inici</a>
                    
                    
                        
                        
                            
                                
                                
                        
                        
                            <span class="horizontal-nav-separator"> &gt; </span>
                            <a href="/ioc/da2_0485b2/unitat-5/" class="horizontal-nav-item">
                                Unitat 5: Lectura i escriptura d'informació (RA5)
                            </a>
                        
                        
                        
                            
                            
                                
                            
                                
                                    
                                    
                            
                            
                                <span class="horizontal-nav-separator"> &gt; </span>
                                <span class="horizontal-nav-item current">
                                    Bloc 5.2: E/S basada en fitxers
                                </span>
                            
                        
                    
                </div>
            </nav>
            
            
            <!-- Contingut de la Pàgina -->
            <article class="page-content">
                <div class="content-body">
                    

<!-- Objectius del bloc (si estan definits al frontmatter) -->


<!-- Contingut principal -->
<!--
  Pàgina de contingut del Bloc 2 (Unitat 5)
  Contingut extret del PDF: U5 - Nucli 2_ ES basada en fitxers.pdf
-->

<div class="section">
    <h2 id="Unitat5_Bloc2_Seccio1">Conceptes Bàsics d'E/S amb Fitxers</h2>
    
    <p>En aquest material aprendrem a treballar amb fitxers en Java per a operacions d'entrada/sortida més avançades que les simples operacions per consola.</p>

    <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>Objectius d'aprenentatge:</strong><br>
       • Llegir fitxers de qualsevol tipus: línies completes, números, caràcters, etc.<br>
       • Emmagatzemar en memòria les dades llegides utilitzant arrays i objectes senzills.<br>
       • Escriure en fitxers dades que provenen de variables simples, arrays i objectes.
    
</div>


    <h3>Fluxos (Streams) en Java</h3>
    
    <p>L'entrada/sortida en Java es realitza mitjançant el concepte de <strong>fluxos (streams)</strong>, que permeten treballar amb dades en forma de bytes o de caràcters. Es distingeixen dues grans categories:</p>

    <ul>
        <li><strong>Fluxos basats en bytes:</strong> Per a fitxers binaris.</li>
        <li><strong>Fluxos basats en caràcters:</strong> Ideals per a la manipulació de textos.</li>
    </ul>

    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Flux (Stream):</strong> Canal de comunicació que permet llegir o escriure dades de manera seqüencial. En Java, els fluxos abstracten l'origen o destinació de les dades (fitxer, memòria, xarxa, etc.).</p>
  </div>
</div>


    <h3>Classes per a Lectura i Escriptura Elemental</h3>
    
    <p>Per llegir o escriure dades elementals es poden emprar classes com:</p>
    
    <ul>
        <li><code>FileReader</code> i <code>FileWriter</code>: Per treballar amb caràcters.</li>
        <li><code>BufferedReader</code> i <code>BufferedWriter</code>: Per a operacions més eficients, amb mètodes com <code>readLine()</code>.</li>
        <li><code>Scanner</code>: També és útil per llegir números i cadenes des de fitxers.</li>
    </ul>

    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt">Explica'm les diferències entre fluxos de bytes i fluxos de caràcters en Java. Quan hauria d'usar cada tipus i quins són els avantatges i inconvenients de cadascun per a diferents tipus de fitxers?</div>
  </div>
</div>

</div>

<div class="section">
    <h2 id="Unitat5_Bloc2_Seccio2">Gestió d'Excepcions</h2>
    
    <p>En les operacions d'E/S és molt comú que es produeixin errors (per exemple, un fitxer inexistent o problemes de permisos). Per això, Java utilitza excepcions, sent les més habituals:</p>

    <ul>
        <li><code>IOException</code>: Error general d'entrada/sortida.</li>
        <li><code>FileNotFoundException</code>: Error específic quan no es troba el fitxer.</li>
    </ul>

    <!-- Component: Caixa d'advertiment -->
<div class="warning-box" role="alert" aria-live="assertive">
    <div class="component-header warning-header" role="heading" aria-level="4"><i class="bi bi-exclamation-triangle" aria-hidden="true"></i> Important</div>
    <strong>Important:</strong> Es recomana utilitzar blocs <code>try-catch</code> i la construcció <code>try-with-resources</code> per garantir el tancament automàtic dels recursos.
</div>


    <h3>Exemple de Gestió d'Excepcions</h3>

    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">try (BufferedReader br = new BufferedReader(new FileReader(&quot;dades.txt&quot;))) {
    // Processar el fitxer
} catch (IOException ex) {
    System.err.println(&quot;Error: &quot; + ex.getMessage());
}</code></pre>
  </div>
</div>


    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>Try-with-resources:</strong> Construcció de Java que garanteix que els recursos (com fitxers) es tanquin automàticament al final del bloc try, fins i tot si es produeix una excepció.</p>
  </div>
</div>


    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt">Crea'm exemples de gestió robusta d'excepcions per a operacions de fitxers en Java. Inclou diferents escenaris: fitxer no trobat, permisos insuficients, espai en disc ple, i com recuperar-se de cada error.</div>
  </div>
</div>

</div>

<div class="section">
    <h2 id="Unitat5_Bloc2_Seccio3">Lectura de Fitxers i Emmagatzematge en Memòria</h2>
    
    <p>En aquesta secció es presenten exemples per llegir diferents tipus de dades i emmagatzemar-les en arrays.</p>

    <h3>Lectura de Línies de Text amb Array</h3>
    
    <p>Suposem que el fitxer té com a màxim 100 línies. Llegirem el fitxer línia a línia i les guardarem en un array de cadenes.</p>

    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">import java.io.*;

public class LlegirLinies {
    public static void main(String[] args) {
        String[] linies = new String[100]; // màxim 100 línies
        int count = 0;
        
        try (BufferedReader br = new BufferedReader(new FileReader(&quot;texte.txt&quot;))) {
            String linia;
            while ((linia = br.readLine()) != null &amp;&amp; count &lt; linies.length) {
                linies[count] = linia;
                count++;
            }
        } catch (IOException ex) {
            System.err.println(&quot;Error en llegir el fitxer: &quot; + ex.getMessage());
        }
        
        // Mostrar les línies emmagatzemades
        for (int i = 0; i &lt; count; i++) {
            System.out.println(linies[i]);
        }
    }
}</code></pre>
  </div>
</div>


    <h3>Lectura de Números amb Array</h3>
    
    <p>Aquest exemple llegeix números enters des d'un fitxer que conté fins a 100 números separats per espais o salts de línia.</p>

    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class LlegirNumeros {
    public static void main(String[] args) {
        int[] numeros = new int[100]; // màxim 100 números
        int count = 0;
        
        try (Scanner sc = new Scanner(new File(&quot;numeros.txt&quot;))) {
            while (sc.hasNextInt() &amp;&amp; count &lt; numeros.length) {
                numeros[count] = sc.nextInt();
                count++;
            }
        } catch (FileNotFoundException ex) {
            System.err.println(&quot;Fitxer no trobat: &quot; + ex.getMessage());
        }
        
        // Mostrar els números llegits
        for (int i = 0; i &lt; count; i++) {
            System.out.println(numeros[i]);
        }
    }
}</code></pre>
  </div>
</div>


    <h3>Lectura de Caràcters</h3>
    
    <p>Per llegir un fitxer caràcter a caràcter s'utilitza FileReader directament.</p>

    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">import java.io.FileReader;
import java.io.IOException;

public class LlegirCaracters {
    public static void main(String[] args) {
        try (FileReader fr = new FileReader(&quot;caracters.txt&quot;)) {
            int c;
            while ((c = fr.read()) != -1) {
                System.out.print((char)c);
            }
        } catch (IOException ex) {
            System.err.println(&quot;Error en llegir el fitxer: &quot; + ex.getMessage());
        }
    }
}</code></pre>
  </div>
</div>


    <!-- Component: Definició curta -->
<div class="definition-box" role="definition" aria-label="Definició">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-journal-text" aria-hidden="true"></i> Definició</div>
  <div class="component-content">
    <p><strong>BufferedReader:</strong> Classe que llegeix text d'un flux de caràcters emmagatzemant els caràcters en un buffer per proporcionar una lectura eficient de caràcters, arrays i línies.</p>
  </div>
</div>

</div>

<div class="section">
    <h2 id="Unitat5_Bloc2_Seccio4">Utilització d'Objectes per a la Gestió de Dades</h2>
    
    <p>Per gestionar les dades de manera més estructurada, es poden definir classes senzilles que representin entitats.</p>

    <h3>Definició d'una Classe Senzilla: Producte</h3>
    
    <p>Definim una classe Producte amb propietats bàsiques de nom i preu.</p>

    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">public class Producte {
    private String nom;
    private double preu;
    
    // Constructor
    public Producte(String nom, double preu) {
        this.nom = nom;
        this.preu = preu;
    }
    
    // Getters
    public String getNom() {
        return nom;
    }
    
    public double getPreu() {
        return preu;
    }
    
    @Override
    public String toString() {
        return nom + &quot;, &quot; + preu + &quot; €&quot;;
    }
}</code></pre>
  </div>
</div>


    <h3>Lectura de Fitxers per Crear Objectes</h3>
    
    <p>Suposem que tenim un fitxer productes.txt on cada línia conté el nom i el preu d'un producte separats per una coma. L'exemple llegeix el fitxer, crea objectes Producte i els emmagatzema en un array.</p>

    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class LlegirProductes {
    public static void main(String[] args) {
        Producte[] productes = new Producte[100]; // màxim 100 productes
        int count = 0;
        
        try (BufferedReader br = new BufferedReader(new FileReader(&quot;productes.txt&quot;))) {
            String linia;
            while ((linia = br.readLine()) != null &amp;&amp; count &lt; productes.length) {
                // Suposem que la línia té el format: nom,preu
                String[] parts = linia.split(&quot;,&quot;);
                String nom = parts[0].trim();
                double preu = Double.parseDouble(parts[1].trim());
                productes[count] = new Producte(nom, preu);
                count++;
            }
        } catch (IOException ex) {
            System.err.println(&quot;Error en llegir el fitxer: &quot; + ex.getMessage());
        }
        
        // Mostrar els productes llegits
        for (int i = 0; i &lt; count; i++) {
            System.out.println(productes[i]);
        }
    }
}</code></pre>
  </div>
</div>


    <h3>Escriptura de Fitxers a Partir d'Objectes</h3>
    
    <p>En aquest exemple escrivim en un fitxer les dades d'un array d'objectes Producte en format CSV.</p>

    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;

public class EscriureProductes {
    public static void main(String[] args) {
        // Definim un array d&#39;objectes Producte
        Producte[] productes = {
            new Producte(&quot;Arròs&quot;, 1.99),
            new Producte(&quot;Sucre&quot;, 0.89),
            new Producte(&quot;Oli&quot;, 3.45),
            new Producte(&quot;Sal&quot;, 0.59)
        };
        
        try (BufferedWriter bw = new BufferedWriter(new FileWriter(&quot;sortida_productes.txt&quot;))) {
            for (int i = 0; i &lt; productes.length; i++) {
                bw.write(productes[i].getNom() + &quot;, &quot; + productes[i].getPreu() + &quot; €&quot;);
                bw.newLine();
            }
        } catch (IOException ex) {
            System.err.println(&quot;Error en escriure el fitxer: &quot; + ex.getMessage());
        }
    }
}</code></pre>
  </div>
</div>


    <!-- Component: Caixa d'èxit -->
<div class="success-box" role="status" aria-live="polite">
    <div class="component-header success-header" role="heading" aria-level="4"><i class="bi bi-check-circle" aria-hidden="true"></i> Èxit</div>
    <strong>Millor pràctica:</strong> Utilitzar objectes per representar dades estructurades facilita el manteniment del codi i fa que sigui més llegible i reutilitzable.
</div>


    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt">Explica'm les diferències entre utilitzar arrays vs ArrayList per emmagatzemar objectes llegits d'un fitxer. Quan hauria d'usar cada opció i quins són els avantatges i inconvenients en termes de memòria i rendiment?</div>
  </div>
</div>

</div>

<div class="section">
    <h2 id="Unitat5_Bloc2_Seccio5">Rendiment i Bones Pràctiques</h2>
    
    <p>Quan treballem amb fitxers, especialment de grans dimensions, el rendiment pot ser crític. Aquest apartat cobreix les millors pràctiques per optimitzar les operacions d'E/S.</p>

    <h3>Comparació de Rendiment: Buffered vs. No Buffered</h3>
    
    <p>Les classes <code>BufferedReader</code> i <code>BufferedWriter</code> milloren significativament el rendiment perquè minimitzen les crides al sistema operatiu:</p>

    <table class="responsive-table">
        <thead>
            <tr>
                <th>Classe</th>
                <th>Buffer Intern</th>
                <th>Crides al SO</th>
                <th>Rendiment</th>
                <th>Ús Recomanat</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>FileReader</code></td>
                <td>No</td>
                <td>Una per caràcter</td>
                <td>Molt lent</td>
                <td>Fitxers molt petits</td>
            </tr>
            <tr>
                <td><code>BufferedReader</code></td>
                <td>8192 bytes</td>
                <td>Una per buffer</td>
                <td>Ràpid</td>
                <td>Lectura general</td>
            </tr>
            <tr>
                <td><code>Scanner</code></td>
                <td>Intern</td>
                <td>Variable</td>
                <td>Mitjà</td>
                <td>Parsing de dades</td>
            </tr>
        </tbody>
    </table>

    <h3>Patrons de Disseny per a E/S Robusta</h3>
    
    <p>Els patrons següents ajuden a escriure codi més mantenible i eficient:</p>

    <h4>1. Patrón Try-with-Resources (Recomanat)</h4>
    
    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">// Gestió automàtica de recursos
try (BufferedReader reader = Files.newBufferedReader(Paths.get(&quot;dades.txt&quot;));
     BufferedWriter writer = Files.newBufferedWriter(Paths.get(&quot;sortida.txt&quot;))) {
    
    String linia;
    while ((linia = reader.readLine()) != null) {
        writer.write(linia.toUpperCase());
        writer.newLine();
    }
    
} catch (IOException e) {
    System.err.println(&quot;Error d&#39;E/S: &quot; + e.getMessage());
}
// Els recursos es tanquen automàticament</code></pre>
  </div>
</div>


    <h4>2. Validació i Sanitització de Dades</h4>
    
    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">public static boolean validarLinia(String linia) {
    // Verificar que la línia no sigui null ni buida
    if (linia == null || linia.trim().isEmpty()) {
        return false;
    }
    
    // Verificar format específic (exemple: CSV amb 3 camps)
    String[] camps = linia.split(&quot;,&quot;);
    if (camps.length != 3) {
        return false;
    }
    
    // Validacions específiques per camp
    try {
        Integer.parseInt(camps[1].trim()); // Segon camp ha de ser número
        return true;
    } catch (NumberFormatException e) {
        return false;
    }
}</code></pre>
  </div>
</div>


    <h3>Gestió de Fitxers Grans: Processament per Lots</h3>
    
    <p>Per fitxers que no caben en memòria, processem les dades per lots:</p>
    
    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">public static void processarFitxerGran(String nomFitxer, int midaLot) {
    try (BufferedReader reader = Files.newBufferedReader(Paths.get(nomFitxer))) {
        List&lt;String&gt; lot = new ArrayList&lt;&gt;(midaLot);
        String linia;
        
        while ((linia = reader.readLine()) != null) {
            lot.add(linia);
            
            // Processar quan el lot està ple
            if (lot.size() &gt;= midaLot) {
                processarLot(lot);
                lot.clear(); // Alliberar memòria
            }
        }
        
        // Processar les línies restants
        if (!lot.isEmpty()) {
            processarLot(lot);
        }
        
    } catch (IOException e) {
        System.err.println(&quot;Error processant fitxer: &quot; + e.getMessage());
    }
}

private static void processarLot(List&lt;String&gt; lot) {
    // Lògica específica per processar el lot
    for (String linia : lot) {
        // Processar cada línia
    }
}</code></pre>
  </div>
</div>


    <h3>Monitorització i Logging</h3>
    
    <p>És important registrar informació sobre el procés per facilitar la depuració:</p>
    
    
    <div class="code-block" data-lang="java" role="region" aria-label="Bloc de codi java">
  <div class="code-header">
    <div class="code-info">
      <span class="code-lang">JAVA</span>
      
    </div>
    <div class="code-actions">
      <button class="toggle-expand" title="Expandir/Col·lapsar alçada" aria-label="Expandir o col·lapsar alçada" aria-pressed="false"><i class="bi bi-arrows-fullscreen" aria-hidden="true"></i></button>
      <button class="toggle-lines" title="Mostrar/Ocultar números de línia" aria-label="Mostrar o ocultar números de línia">#</button>
      <button class="copy-btn" title="Copiar codi al portapapers" aria-label="Copiar codi"><i class="bi bi-clipboard" aria-hidden="true"></i></button>
    </div>
  </div>

  <div class="code-container">
    <div class="line-numbers" aria-hidden="true"></div>
    <pre role="textbox" aria-readonly="true" aria-label="Codi font"><code class="language-java">public static void llegirAmbLog(String nomFitxer) {
    long tempsInici = System.currentTimeMillis();
    int liniesProcessades = 0;
    int liniesErrònies = 0;
    
    try (BufferedReader reader = Files.newBufferedReader(Paths.get(nomFitxer))) {
        String linia;
        
        while ((linia = reader.readLine()) != null) {
            liniesProcessades++;
            
            if (!validarLinia(linia)) {
                liniesErrònies++;
                System.err.printf(&quot;Línia %d invàlida: %s%n&quot;, liniesProcessades, linia);
                continue;
            }
            
            // Processar línia vàlida
            // ...
            
            // Informar progrés cada 1000 línies
            if (liniesProcessades % 1000 == 0) {
                System.out.printf(&quot;Processades %d línies...%n&quot;, liniesProcessades);
            }
        }
        
    } catch (IOException e) {
        System.err.println(&quot;Error llegint fitxer: &quot; + e.getMessage());
        return;
    }
    
    long tempsFinal = System.currentTimeMillis();
    System.out.printf(&quot;Procés completat:%n&quot; +
                     &quot;- Línies processades: %d%n&quot; +
                     &quot;- Línies errònies: %d%n&quot; +
                     &quot;- Temps total: %d ms%n&quot;,
                     liniesProcessades, liniesErrònies, (tempsFinal - tempsInici));
}</code></pre>
  </div>
</div>


    <!-- Component: Caixa informativa -->
<div class="info-box" role="note">
    <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-info-circle" aria-hidden="true"></i> Informació</div>
    <strong>Consells de rendiment:</strong><br>
       • Utilitza sempre BufferedReader/BufferedWriter per fitxers de text<br>
       • Processa dades per lots quan els fitxers són molt grans<br>
       • Valida les dades abans de processar-les<br>
       • Registra informació útil per facilitar la depuració<br>
       • Tanca sempre els recursos utilitzant try-with-resources
    
</div>


    <!-- Component: Caixa d'advertiment -->
<div class="warning-box" role="alert" aria-live="assertive">
    <div class="component-header warning-header" role="heading" aria-level="4"><i class="bi bi-exclamation-triangle" aria-hidden="true"></i> Important</div>
    <strong>Errors comuns:</strong><br>
       • No tancar fitxers (memory leaks)<br>
       • Carregar fitxers grans completament en memòria<br>
       • No validar dades d'entrada<br>
       • Ignorar excepcions d'E/S<br>
       • Utilitzar classes no buffered per fitxers grans
</div>


    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt">Com puc optimitzar la lectura d'un fitxer CSV de 100MB amb 2 milions de línies? Vull processar només les línies que compleixin certes condicions i generar estadístiques en temps real.</div>
  </div>
</div>

</div>

<div class="section">
    <h2 id="Unitat5_Bloc2_Seccio6">Exercicis Pràctics</h2>
    
    <p>Per consolidar els coneixements, es proposen els següents exercicis:</p>

    <!-- Component: Exercici estàndard -->
<div class="exercise-box" role="region" aria-label="Exercici">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-clipboard-check" aria-hidden="true"></i> Exercici: Suma i mitjana de números</div>
  <div class="component-content">
    
    <div class="exercise-description"><p>Llegir un fitxer de text que contingui números, emmagatzemar-los en un array i calcular-ne la suma i la mitjana.</p></div>
    

    <div class="exercise-meta">
      
      <span class="badge" aria-label="Dificultat">Fàcil</span>
      
      
      <span class="badge" aria-label="Temps estimat">15 min</span>
      
    </div>

    
  </div>
</div>


    <!-- Component: Exercici estàndard -->
<div class="exercise-box" role="region" aria-label="Exercici">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-clipboard-check" aria-hidden="true"></i> Exercici: Creació de fitxer CSV</div>
  <div class="component-content">
    
    <div class="exercise-description"><p>Crear un programa que sol·liciti dades a l'usuari (nom, edat, etc.), les emmagatzemi en variables i en un array, i després les escrigui en un fitxer CSV.</p></div>
    

    <div class="exercise-meta">
      
      <span class="badge" aria-label="Dificultat">Fàcil</span>
      
      
      <span class="badge" aria-label="Temps estimat">20 min</span>
      
    </div>

    
  </div>
</div>


    <!-- Component: Exercici estàndard -->
<div class="exercise-box" role="region" aria-label="Exercici">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-clipboard-check" aria-hidden="true"></i> Exercici: Processament de text</div>
  <div class="component-content">
    
    <div class="exercise-description"><p>Dissenyar un programa que llegeixi un fitxer de línies, modifiqui el contingut (per exemple, convertint tot a majúscules) i el guardi en un nou fitxer.</p></div>
    

    <div class="exercise-meta">
      
      <span class="badge" aria-label="Dificultat">Mitjà</span>
      
      
      <span class="badge" aria-label="Temps estimat">25 min</span>
      
    </div>

    
  </div>
</div>


    <!-- Component: Exercici estàndard -->
<div class="exercise-box" role="region" aria-label="Exercici">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-clipboard-check" aria-hidden="true"></i> Exercici: Comptador de vocals i consonants</div>
  <div class="component-content">
    
    <div class="exercise-description"><p>Implementar un programa que llegeixi un fitxer caràcter a caràcter, compti la quantitat de vocals i consonants, i escrigui els resultats en un fitxer resum.</p></div>
    

    <div class="exercise-meta">
      
      <span class="badge" aria-label="Dificultat">Mitjà</span>
      
      
      <span class="badge" aria-label="Temps estimat">30 min</span>
      
    </div>

    
  </div>
</div>


    <!-- Component: Exercici estàndard -->
<div class="exercise-box" role="region" aria-label="Exercici">
  <div class="component-header info-header" role="heading" aria-level="4"><i class="bi bi-clipboard-check" aria-hidden="true"></i> Exercici: Gestió de productes</div>
  <div class="component-content">
    
    <div class="exercise-description"><p>Llegir dades d'un fitxer (per exemple, informació de productes), crear objectes a partir d'elles i després escriure aquests objectes en un nou fitxer.</p></div>
    

    <div class="exercise-meta">
      
      <span class="badge" aria-label="Dificultat">Avançat</span>
      
      
      <span class="badge" aria-label="Temps estimat">45 min</span>
      
    </div>

    
  </div>
</div>


    <!-- Component: Prompt per IA amb caixa de text i botó de còpia -->
<div class="ai-prompt" role="note">
  <div class="component-header ai-header" role="heading" aria-level="4">
    <i class="bi bi-robot" aria-hidden="true"></i> Prompt per IA
    <div class="ai-actions">
      <button type="button" class="copy-btn" title="Copiar prompt" aria-label="Copiar prompt">
        <i class="bi bi-clipboard" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="ai-container">
    <div class="ai-prompt-content" aria-label="Text del prompt">Per a l'exercici de gestió de productes: quin és l'error més comú quan es parseja un CSV amb preus que tenen comes decimals (ex: '1,50')? Com puc validar que les dades llegides són correctes abans de crear l'objecte?</div>
  </div>
</div>

</div>

<!-- Exercicis proposats (si estan definits) -->


<!-- Recursos addicionals -->


<!-- Glossari del bloc -->



<!-- Schema.org structured data per SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "name": "Bloc 2: E/S basada en fitxers",
  "description": "Lectura, escriptura i gestió de fitxers en Java amb fluxos, excepcions i objectes",
  "author": {
    "@type": "Organization",
    "name": "Institut Obert de Catalunya"
  },
  "provider": {
    "@type": "Organization",
    "name": "Institut Obert de Catalunya"
  },
  "educationalLevel": "Intermediate",
  "learningResourceType": "Course Module",
  "inLanguage": "ca",
  
  
  "isPartOf": {
    "@type": "Course",
    "name": "Programació II — IOC",
    "description": "Materials del mòdul Programació II - DA2_0485B2"
  }
}
</script>

                </div>
            </article>
            
            <!-- Navegació entre pàgines -->
            
            <nav class="page-navigation" role="navigation" aria-label="Navegació entre blocs">
                <div class="nav-links-container">
                    
                    
                    
                    
                    
                    
                    
                    
                        
                            
                            
                    
                    
                    
                        
                            
                        
                            
                                
                                
                                
                                
                                
                                    
                                    
                                        
                                            
                                            
                                
                                
                                
                                
                                
                                    
                                
                                    
                                
                                
                                
                    
                    
                    <div class="nav-link-wrapper">
                        
                        <a href="/ioc/da2_0485b2/unitat-5/bloc-1/" class="nav-button" aria-label="Bloc anterior: Conceptes bàsics d'E/S per consola">← Anterior</a>
                        
                    </div>
                    
                    <div class="nav-link-wrapper">
                        
                    </div>
                </div>
            </nav>
            
        </main>
    </div>

    <!-- Footer fix -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-info">
                Versió v1.0
            </div>
            <div class="footer-progress" aria-label="Progrés de lectura"><!-- Progrés per unitats (posició de la unitat actual) --><div class="progress-group course-progress">
                    <span class="progress-label">Unitat</span>
                    <span class="progress-text" data-pos="5" data-total="4">(5/4)</span>
                    <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 125%"></div></div>
                </div><!-- Progrés per blocs dins de la unitat --><div class="progress-group unit-progress">
                        <span class="progress-label">Bloc</span>
                        <span class="progress-text" data-pos="2" data-total="2">(2/2)</span>
                        <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 100%"></div></div>
                    </div>

                    <!-- Progrés per seccions (H2) dins del bloc --><div class="progress-group section-progress" data-scan-sections="true">
                        <span class="progress-label">Secció</span>
                        <span class="progress-text" data-pos="1" data-total="6">(1/6)</span>
                        <div class="progress-bar-footer"><div class="progress-fill-footer" style="width: 16%"></div></div>
                    </div></div>
            <div class="footer-actions">
                <a href="#top" id="footer-btn-top" class="task-btn" aria-label="Anar a l'inici">↑</a>
                <a href="#bottom" id="footer-btn-bottom" class="task-btn" aria-label="Anar al final">↓</a>
                <a href="#next" id="footer-btn-next" class="task-btn" aria-label="Secció següent">→</a>
                <a href="#prev" id="footer-btn-prev" class="task-btn" aria-label="Secció anterior">←</a>
                <a href="#bookmark" id="footer-btn-bookmark" class="task-btn" aria-label="Desar marcador" title="Desar marcador">
                  <i class="bi bi-bookmark" aria-hidden="true"></i>
                </a>
                <a href="/ioc/da2_0485b2/quadern.html" class="task-btn" aria-label="Obrir quadern complet" title="Quadern">
                  <i class="bi bi-journal-text" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </footer>

    <!-- Scripts del lloc -->
    <script src="/ioc/da2_0485b2/assets/js/site.js" defer></script>
    <!-- Quadern Notes v2 (nou sistema) -->
    <script src="/ioc/da2_0485b2/assets/js/quadern-app/constants.js" defer></script>
    <script src="/ioc/da2_0485b2/assets/js/quadern-app/utils.js" defer></script>
    <script src="/ioc/da2_0485b2/assets/js/quadern-app/store.js" defer></script>
    <script src="/ioc/da2_0485b2/assets/js/quadern-app/panel.js" defer></script>
    <script src="/ioc/da2_0485b2/assets/js/index-notes.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.1.6/dist/purify.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/quill/1.3.7/quill.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" defer></script>
    <script src="/ioc/da2_0485b2/assets/js/quadern-app/rich-editor.js" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', function(){
        if (window.Quadern && typeof window.Quadern.bootstrapNotes === 'function') {
          try { window.Quadern.bootstrapNotes(); } catch(e) {}
        }
        if (window.Quadern && window.Quadern.RichEditor && typeof window.Quadern.RichEditor.autoInit === 'function') {
          try { window.Quadern.RichEditor.autoInit(); } catch(e) {}
        }
      });
    </script>
</body>
</html>
